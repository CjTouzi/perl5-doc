We call our new module Test::Minnow::RequiredItems and start with this stub:||We Call Our New Module Test::Minnow::RequiredItems And Start With This 存根:
Burn the barn: Barn=ARRAY(0x541c) is being destroyed...||Burn The 谷仓: Barn=ARRAY(0x541c) Is Being destroyed...
He wants you to make a subroutine called gather_mtime_between, which, given a starting and ending timestamp, returns a pair of coderefs.||He 要 You To Make a Subroutine Called gather_mtime_between, Which, Given a Starting And 结局 timestamp, Returns a 对 Of coderefs.
To use this book, you just need to be familiar with the material in Learning Perl and have the ambition to go further.||To Use This 书, You Just Need To Be 熟悉的 With The 材料 In Learning Perl And Have The 抱负 To Go Further.
The result should be that the machine that sent the most data will be the first source machine in the list, and the first destination should be the machine to which it sent the most data.||The Result Should Be That The 机器 That 打发 The Most Data Will Be The First Source 机器 In The List, And The First 终点 Should Be The 机器 To Which It 打发 The Most Data.
Exercises You can find the answers to these exercises in "Answers for Chapter 18" in the Appendix.||Exercises You Can 寻找 The answers To These exercises In "Answers For Chapter 18" In The Appendix.
Often, the mirroring of the CPAN from one server to another is done with a now-ancient Perl program called mirror.pl.||Often, The mirroring Of The Perl综合典藏网 From One server To 另一个 Is Done With a Now-古老的 Perl Program Called mirror.pl.
foreach my $index ( 0 .. $#$array ) {||Foreach My $Index ( 0 .. $#$Array ) {
The spaceship operator is nearsighted; and can't see which one of its parameters comes from $a and which from $b; it sees only which value is to its left and which is to its right.||The 太空船 Operator Is nearsighted; And Can't See Which One Of Its Parameters 来 From $a And Which From $b; It 看到 Only Which Value Is To Its Left And Which Is To Its Right.
Since you're talking about Perl add-on modules, you know that Perl is available, so how about a Perl program to generate the Makefile?||Since You'Re 说话 About Perl 增添-On Modules, You Know That Perl Is Available, So How About a Perl Program To Generate The Makefile?
If we replace the square brackets with parentheses, we end up with a six-element list.||If We 归还原处 The 正方形 支架 With Parentheses, We End Up With a six-Element List.
The syntax comes in two forms, though: we just showed you the expression form, and now here's the block form.||The Syntax 来 In Two 形式, Though: We Just showed You The Expression Form, And Now Here's The Block Form.
Well, in most cases it shouldn't matter much for efficiency, so it's probably best to optimize for clarity and use reverse.||Well, In Most Cases It 应该't Matter Much For Efficiency, So It's Probably Best To 最佳化 For 清晰 And Use 颠倒的.
my @person_item_pairs = map {||My @person_item_pairs = Map {
[*] This is perhaps different from other OOP languages with which you may be familiar.||[*] This Is 也许 Different From Other OOP Languages With Which You May Be 熟悉的.
In this chapter, we'll look at an equally important topic: what happens when objects go away.||In This 章, We'我 Look At An 相等地 Important 课题: What Happens When Objects Go Away.
The tempfile function returns a filehandle and a filename, and we store both of those because we need both of them in the destructor.||The tempfile Function Returns a Filehandle And a 文件名, And We 商店 Both Of Those Because We Need Both Of Them In The destructor.
The newly constructed subroutine should call check_required_items for each person in the hash, updating their provisions list to include the required items.||The 新 构造 Subroutine Should Call check_required_items For Each 人 In The Hash, updating Their provisions List To Include The 要求 物品.
If the count is nonzero, we have a bottle, so the result is true for the outer grep.||If The 计算 Is nonzero, We Have a 瓶子, So The Result Is True For The 外部的 Grep.
Also, the following command displays just the @INC directories:[*]||Also, The Following 命令 displays Just The @INC directories:[*]
If we specify any names, they must be in either @EXPORT or @EXPORT_OK, so this request is rejected by Exporter->import:||If We Specify Any Names, They Must Be In Either @EXPORT Or @EXPORT_OK, So This 请求 Is 拒绝 By Exporter->Import:
As that script runs, it adds to the coverage database (which is why we deleted the database before we started).||As That 临时单据 跑, It Adds To The 覆盖率 database (Which Is Why We Deleted The database Before We 开始).
One place this comes in very handy is in a typical data reduction task.||One Place This 来 In Very 方便的 Is In a 典型的 Data 减少 工作.
Unique identification||Unique 识别
Although the messages don't indicate anything different, the Makefile will now install scripts to $PREFIX/bin, manpages below $PREFIX/man, and libraries below $PREFIX/lib/site_perl.||Although The Messages Don't 指明 Anything Different, The Makefile Will Now 安装 Scripts To $PREFIX/bin, 帮助文档 Below $PREFIX/人, And 库 Below $PREFIX/lib/site_perl.
while( 1 )||While( 1 )
Setting the Path at the Right Time Perl finds modules by looking through the directories in the special Perl array, @INC.||Setting The Path At The Right Time Perl 发现 Modules By 看 通过 The directories In The Special Perl Array, @INC.
How do we access that array reference?||How Do We Access That Array Reference?
Older versions of Perl didn't guarantee such stability, and a future version might not use a stable sort, so don't rely on it.||Older Versions Of Perl Didn't 保证 Such 稳定性, And a Future Version Might Not Use a 稳固的 Sort, So Don't 依靠 On It.
my $name = $ gilligan_info { 'name' }; my $name = $ { $hash_ref } { 'name' };||My $Name = $ gilligan_info { 'Name' }; My $Name = $ { $hash_ref } { 'Name' };
sub registered {||Sub 登记的 {
Now we treat the filehandle reference just like any other scalar.||Now We treat The Filehandle Reference Just Like Any Other Scalar.
The Art of Testing Good tests also give small examples of what we meant in our documentation.||The Art Of Testing Good 测试 Also Give Small Examples Of What We 意味着 In Our 提供文件.
my @names = $db->list_names;||My @Names = $db->list_names;
If it's not there, we print an error with carp.||If It's Not There, We Print An Error With 鲤鱼.
It's Test::Pod::Coverage to the rescue.||It's Test::Pod::Coverage To The 救援.
Exercise 1 There a couple of ways to tackle this problem.||Exercise 1 There a 一对 Of Ways To 用具 This Problem.
How about sqrt( ) or sqrt(1, 1)?||How About sqrt( ) Or sqrt(1, 1)?
Introduction Welcome to the next step in your understanding of Perl.||Introduction Welcome To The 下一次 脚步 In Your 理解 Of Perl.
use CGI qw(-nosticky :all);||Use (（CGI）通用网关界面)通用网关界面 Qw(-nosticky :All);
Loading DB routines from perl5db.pl version 1.19 Editor support available.||Loading DB Routines From perl5db.pl Version 1.19 Editor Support Available.
Answer for Chapter 19 A.18.1.||Answer For Chapter 19 A.18.1.
Most of the effort involved in designing a good object class goes into the API design, because the API defines how reusable and maintainable the object and its subclasses will be.||Most Of The 努力 涉及的 In designing a Good Object Class 去 Into The API 设计, Because The API 定义 How reusable And maintainable The Object And Its 子类 Will Be.
Here, we take the string form of the first argument and attempt to match it against the second argument.||Here, We Take The String Form Of The First Argument And 尝试 To Match It 反对 The Second Argument.
Enter h or 'h h' for help, or 'man perldebug' for more help.||Enter h Or 'h h' For Help, Or '人 perldebug' For More Help.
sub load_common_subroutines {||Sub load_common_subroutines {
There is nothing fancy about print_contents, though.||There Is Nothing 幻想 About print_contents, Though.
This gives us the list of names in the desired order.||This Gives Us The List Of Names In The Desired Order.
How do we resolve this?||How Do We 决定 This?
After that, we can test and install the module by telling make to perform the actions for those targets.[]||After That, We Can Test And 安装 The Module By telling Make To 执行 The 行动 For Those targets.[]
We need a little more infrastructure to get going with objects, but in the long run, it's worth it.||We Need a Little More infrastructure To Get Going With Objects, But In The Long Run, It's worth It.
For most object-oriented modules, this won't matter because they don't export subroutines.||For Most Object-Oriented Modules, This Won't Matter Because They Don't Export Subroutines.
Now, when we call Cow->speak, we get a $class of Cow in speak.||Now, When We Call Cow->说话, We Get a $Class Of Cow In 说话.
We wrote this book a long time before you got a chance to read it, so we didn't exactly know the details back then.||We 写 This 书 a Long Time Before You Got a Chance To Read It, So We Didn't Exactly Know The Details Back Then.
Also, most people use a major version number change (from 1.x to 2.x, etc.) to indicate a potential break in upward compatibility.||Also, Most People Use a 主要的 Version Number Change (From 1.x To 2.x, Etc.) To 指明 a 潜在的 打破 In 向上（的） 兼容性.
Exercise 2 Most of this answer is the same as the previous answer.||Exercise 2 Most Of This Answer Is The Same As The Previous Answer.
This works because the output of each setter is the original object, becoming the object for the next method call.||This Works Because The 出产 Of Each setter Is The Original Object, becoming The Object For The 下一次 Method Call.
sub speak {||Sub 说话 {
We have to ask the monkey because he's in charge of the pineapples.||We Have To 问 The 猴子 Because 他's In 收费 Of The pineapples.
Note that you're installing the module below the $PREFIX/lib/site_lib directory (presuming a PREFIX of /home/ginger/Testing from earlier) and a manpage below $PREFIX/man (on Unix machines, in the Section 3 area for subroutines, for example).||Note That You'Re installing The Module Below The $PREFIX/lib/site_lib Directory (就算 a PREFIX Of /家/姜/Testing From Earlier) And a manpage Below $PREFIX/人 (On Unix Machines, In The Section 3 Area For Subroutines, For Example).
The purpose of explicitly providing an import list is generally to control the subroutine names we use in our program.||The Purpose Of 清晰地 提供 An Import List Is Generally To Control The Subroutine Names We Use In Our Program.
Notice that there is still no comma after the filehandle.||Notice That There Is Still No 逗号 After The Filehandle.
In action, this would be:||In 行为, This Would Be:
Think of use lib as not "use this library" but rather "use this path to find my libraries (and modules)."||Think Of Use lib As Not "Use This Library" But Rather "Use This Path To 寻找 My 库 (And Modules)."
my @everyone = sort keys %greets; for my $greeter (@everyone) {||My @Everyone = Sort Keys %greets; For My $greeter (@Everyone) {
Now we're going to show you how to get your own modules to do that.||Now We'Re Going To Show You How To Get Your Own Modules To Do That.
What if we could just define a group of filehandles that answered to the same name?||What If We Could Just Define a Group Of Filehandles That answered To The Same Name?
Performing the Same Task on Many Arrays Before the Minnow can leave on an excursion (for example, a three-hour tour), we should check every passenger and crew member to ensure they have all the required trip items in their possession.||Performing The Same Task On Many 数组 Before The Minnow Can 出发 On An 短途游览 (For Example, a Three-小时 旅行), We Should Check Every 旅客 And （飞机等的）全体人员 Member To Ensure They Have All The 要求 旅行 物品 In Their 所有.
When Perl searches for a method that's not provided directly by RaceHorse, it first searches through all the capabilities of the Horse (including all its parent classes, such as Animal).||When Perl searches For a Method That's Not Provided 直接地 By RaceHorse, It First searches 通过 All The capabilitie(绑定操作符)s Of The Horse (Including All Its 父或母亲 类, Such As Animal).
TRy calling an unknown method.||TRy Calling An Unknown Method.
We've now overwritten it with the definition provided by File::Basename!||We'Ve Now overwritten It With The Definition Provided By File::Basename!
Then it "blesses" that variable, turning $tv_horse into an objecta Horse object, in fact.||Then It "blesses" That Variable, Turning $tv_horse Into An objecta Horse Object, In Fact.
At this point, we need to put something inside a BEGIN block or perhaps rely on yet another compile-time operation: setting a constant with use constant:||At This 尖, We Need To Put Something 里面 a BEGIN Block Or 也许 依靠 On 仍然 另一个 Compile-Time Operation: Setting a Constant With Use Constant:
To test this, we do something really simple.||To Test This, We Do Something Really Simple.
This happens all the time.||This Happens All The Time.
Using what we know already, we had have to do something like this:||Using What We Know Already, We Had Have To Do Something Like This:
While this is similar to releasing a distribution in-house, as described in Chapter 16, you might want to ensure a few additional things about your distribution:||While This Is Similar To releasing a 分配 In-房子, As Described In Chapter 16, You Might Want To Ensure a Few Additional Things About Your 分配:
(Some legacy PAUSE IDs are only three characters long.)[*] Once you have your PAUSE ID, you need to think globally about your contribution.||(Some 遗产 PAUSE IDs Are Only Three Characters Long.)[*] Once You Have Your PAUSE ID, You Need To 想 Globally About Your 贡献.
ok 1 - use Horse; not ok 2 - Horse->can('talk') # TODO haven't taught Horses to talk yet # Failed (TODO) test (1.t at line 7) # Horse->can('talk') failed ok 3 - I am Mr. Ed! 1..3||Ok 1 - Use Horse; Not Ok 2 - Horse->Can('谈话') # TODO 还't taught Horses To 谈话 仍然 # Failed (TODO) Test (1.t At Line 7) # Horse->Can('谈话') failed Ok 3 - I Am Mr. Ed! 1..3
At the start, our MANIFEST contains:[**]||At The Start, Our MANIFEST 包含:[**]
However, suppose we already had a dirname subroutine.||However, 猜想 We Already Had a dirname Subroutine.
Luckily, we can use the convenience functions from Test::More.||Luckily, We Can Use The 方便 Functions From Test::More.
Chapter 19, Contributing to CPAN Share your work with the world by uploading it to CPAN.||Chapter 19, Contributing To Perl综合典藏网 Share Your Work With The World By uploading It To Perl综合典藏网.
Again, invoking this subroutine multiple times creates distinct "locked-in" values for $minimum_size, each bound to its corresponding subroutine reference.||Again, 调用 This Subroutine Multiple Times Creates 不同的 "locked-In" Values For $minimum_size, Each 缚 To Its 相应的 Subroutine Reference.
[Â§] There is an nmake for Windows that is available from Microsoft.||[Â§] There Is An nmake For 微软视窗操作系统 That Is Available From Microsoft.
use File::Basename qw( fileparse basename );||Use File::Basename Qw( fileparse basename );
for my $person (qw(Skipper Gilligan)) {||For My $人 (Qw(Skipper Gilligan)) {
The tags can contain overlaps too, and you'll notice that according_to_GPS shows up in each one of them.||The tags Can Contain overlaps Too, And You'我 Notice That according_to_GPS Shows Up In Each One Of Them.
Can users make it available to everyone on the system because they have root or administrator privileges, or do they have to install it in their own directories?||Can Users Make It Available To Everyone On The System Because They Have Root Or administrator privileges, Or Do They Have To 安装 It In Their Own directories?
For example, consider this code:||For Example, Consider This Code:
my @gilligan = qw(red_shirt hat lucky_socks water_bottle); check_required_items('gilligan', @gilligan);||My @gilligan = Qw(red_shirt 帽子 lucky_socks water_bottle); check_required_items('gilligan', @gilligan);
Displaying Recursively Defined Data The Dumper routine of Data::Dumper displays the output nicely, but what if we don't like the format being used?||Displaying Recursively Defined Data The Dumper Routine Of Data::Dumper displays The 出产 好, But What If We Don't Like The Format Being Used?
my @crew = ($ref_to_gilligan_info, $ref_to_skipper_info);||My @（飞机等的）全体人员 = ($ref_to_gilligan_info, $ref_to_skipper_info);
Now have everyone greet everyone, in a very friendly room:||Now Have Everyone 打招呼 Everyone, In a Very 友好的 房间:
We can create more complex methods that do anything we like.||We Can Create More 综合的 Methods That Do Anything We Like.
An individual test file comprises one or more tests.||An Individual Test File comprises One Or More 测试.
First, we set up an AUTOLOAD for the object and define a list of hash keys for which we want trivial accessors:||First, We Set Up An AUTOLOAD For The Object And Define a List Of Hash Keys For Which We Want 琐碎的 accessors:
[*] Although goto is generally (and rightfully) considered evil, this form of goto, which gives a subroutine name as a target, is not really the evil goto; it's the good goto.||[*] Although Goto Is Generally (And rightfully) Considered 坏的, This Form Of Goto, Which Gives a Subroutine Name As a 目标, Is Not Really The 坏的 Goto; It's The Good Goto.
Here's the data we'll use to test it:||Here's The Data We'我 Use To Test It:
Even if you don't usually use Perl's warnings, you should enable them during debugging.||Even If You Don't Usually Use Perl's 警告, You Should 使能够 Them 在 Debugging.
perl -I/home/skipper/perl-lib /home/skipper/bin/get_us_home||Perl -I/家/skipper/Perl-lib /家/skipper/bin/get_us_home
We can rewrite that loop to see if copying the handles is easier:||We Can 重写 That Loop To See If 复制 The 处理 Is Easier:
You fill out a web form (linked from there) with a few basic details, such as your name, home web page, email address, and your preferred PAUSE ID.||You 装满 Out a 网 Form (Linked From There) With a Few 基本的 Details, Such As Your Name, 家 网 页, 電子郵件 地址, And Your 优先 PAUSE ID.
$ cpanp i CGI::Prototype HTTP::Cookies::Safari Test::Pod||$ cpanp 我 (（CGI）通用网关界面)通用网关界面::Prototype HTTP::Cookies::Safari Test::Pod
In the intervening years, Perl itself has grown substantially from a "cool" scripting language used primarily by Unix system administrators to a robust object-oriented programming (OOP) language that runs on practically every computing platform known to mankind.||In The intervening Years, Perl Itself Has 已长成的 substantially From a "凉的" scripting 语言 Used 首要地 By Unix System administrators To a 强壮的 Object-Oriented Programming (OOP) 语言 That 跑 On 实际地 Every computing 讲台 Known To 人类.
for my $source (sort keys %total_bytes) {||For My $Source (Sort Keys %total_bytes) {
my @crew = (\%gilligan_info, \%skipper_info);||My @（飞机等的）全体人员 = (\%gilligan_info, \%skipper_info);
From its small start of a few mirror machines, CPAN has now grown to over 200 public archives in all corners of the Net, all churning away, updating at least daily, sometimes as frequently as hourly.||From Its Small Start Of a Few 镜子 Machines, Perl综合典藏网 Has Now 已长成的 To 在 200 公众的 archives In All corners Of The Net, All churning Away, updating At Least 每日的, Sometimes As 时常 As hourly.
The import list for the module is treated specially; you're declaring that this test file consists of only one "test."||The Import List For The Module Is treated Specially; You'Re 宣布 That This Test File consists Of Only One "Test."
It puts the directories we specify at the beginning of @INC, just like we did before.||It 把 The directories We Specify At The 开端 Of @INC, Just Like We Did Before.
The second element is a reference to the correct provisions array, which we use in the grep expression.||The Second Element Is a Reference To The 正确的 provisions Array, Which We Use In The Grep Expression.
That is, IO::Tee multiplexes output.||That Is, IO::Tee multiplexes 出产.
and attempts to invoke:||And Attempts To 调用:
Instead of using shift to put the argument into another variable, we can simply use it directly.||Instead Of Using Shift To Put The Argument Into 另一个 Variable, We Can Simply Use It 直接地.
my $root = \@all_with_names;||My $Root = \@all_with_names;
use YAML;||Use YAML;
is( scalar @names, 3, 'Got the right number of results' ); is( $names[0], 'Gilligan', 'The first result is Gilligan' );||Is( Scalar @Names, 3, 'Got The Right Number Of Results' ); Is( $Names[0], 'Gilligan', 'The First Result Is Gilligan' );
Here's another example: select the elements of @x that are larger than the corresponding value in @y.||Here's 另一个 Example: 挑选 The Elements Of @x That Are larger Than The 相应的 Value In @y.
print +(1 + 2 = = 3 ? '', 'not '), "ok 1\n";||Print +(1 + 2 = = 3 ? '', 'Not '), "Ok 1\n";
--- #YAML:1.0 ginger.girl.hut:||--- #YAML:1.0 ginger.girl.小屋:
However, it clashed with the same-name routine that CGI.pm TRied to export as well, leading to interesting errors (especially in a mod_perl setting).||However, It clashed With The Same-Name Routine That (（CGI）通用网关界面)通用网关界面.Pm TRied To Export As Well, 领先的 To Interesting Errors (Especially In a mod_perl Setting).
package Cow; use vars qw(@ISA); @ISA = qw(Animal);||Package Cow; Use Vars Qw(@ISA); @ISA = qw(Animal);
You're probably here either because you want to learn to write programs that are more than 100 lines long or because your boss has told you to do so.||You'Re Probably Here Either Because You Want To 学习 To Write Programs That Are More Than 100 Lines Long Or Because Your 上司 Has told You To Do So.
Some of these modules do some of the same things that we can already do with Perl's built-in open (depending on which version of Perl we have), but they can be handy when we want to decide as late as possible which module should handle input or output.||Some Of These Modules Do Some Of The Same Things That We Can Already Do With Perl's Built-In Open (Depending On Which Version Of Perl We Have), But They Can Be 方便的 When We Want To Decide As 迟到的 As Possible Which Module Should Handle Input Or 出产.
{ package Person;||{ Package Person;
as if we had written the basename and dirname subroutines ourselves, or (nearly) as if they were built-in Perl functions.||As If We Had Written The basename And dirname Subroutines 我们自己, Or (几乎) As If They Were Built-In Perl Functions.
Thus, the five-element list is still in memory, and $ref still points to that data.||Thus, The five-Element List Is Still In Memory, And $Ref Still 分 To That Data.
For Example One, consider an HTML table that has rows containing cellsand some of those cells may also contain entire tables.||For Example One, Consider An HTML Table That Has rows Containing cellsand Some Of Those cells May Also Contain 完全的 Tables.
Multiple inheritance is more complex.||Multiple Inheritance Is More 综合的.
Thus, subroutines are associated with those defined in the module, prototypes are properly defined, and so on.||Thus, Subroutines Are Associated With Those Defined In The Module, 原型 Are Properly Defined, And So On.
a Cow goes moooo! a Cow goes moooo! a Horse goes neigh! a Sheep goes baaaah! a Sheep goes baaaah!||a Cow 去 moooo! a Cow 去 moooo! a Horse 去 neigh! a Sheep 去 baaaah! a Sheep 去 baaaah!
Because a use lib pragma will pretty much always have a site-dependent pathname, it is traditional and we encourage you to put it near the top of the file.||Because a Use lib Pragma Will 精致的 Much Always Have a 场所-依靠的 pathname, It Is 传统的 And We Encourage You To Put It 近 The 顶 Of The File.
my @horses = grep $_->isa('Horse'), @all_animals;||My @horses = Grep $_->isa('Horse'), @all_animals;
This, in turn, selects the Cow->sound method, which returns moooo.||This, In 转向, 选择 The Cow->声 Method, Which Returns moooo.
Island::Plotting::Maps - Perl extension for blah blah blah||Island::Plotting::Maps - Perl 延伸 For blah blah blah
That wouldn't be a very good shuffle, but we're going to punt to you for the rest of the tests.||That Wouldn't Be a Very Good 拖脚走, But We'Re Going To punt To You For The 休息 Of The 测试.
enables all objects of our program to be called as $some_object->fandango.||enables All Objects Of Our Program To Be Called As $some_object->fandango.
# it's our dummy invocation||# It's Our 傀儡 调用
{ package MyDate; use vars qw($AUTOLOAD);||{ Package MyDate; Use Vars Qw($AUTOLOAD);
[*] Although all examples in this book should be valid Perl code, some examples in this chapter will break the rules enforced by use strict to make them easier to understand.||[*] Although All Examples In This 书 Should Be Valid Perl Code, Some Examples In This 章 Will 打破 The 规则 enforced By Use Strict To Make Them Easier To Understand.
We can interchange all three references.||We Can interchange All Three References.
Suppose we want to modify the original array to force the provisions list to include the mandatory items.||Suppose We Want To Modify The Original Array To Force The provisions List To Include The 强制性 物品.
We talk more about testing in depth in Chapters 17 and 18, but here's a brief introduction.||We 谈话 More About testing In 深度 In Chapters 17 And 18, But Here's a 简短的 介绍.
Before we've written the code, we've decided to pass an array reference, and that will allow our routine to affect the data that we pass to it (rather than creating a copy).||Before We'Ve Written The Code, We'Ve 明确的 To Pass An Array Reference, And That Will Allow Our Routine To 影响 The Data That We Pass To It (Rather Than Creating a Copy).
All of our tests are going to be scripts, so we can use the stuff you already know about Perl.||All Of Our 测试 Are Going To Be Scripts, So We Can Use The 材料 You Already Know About Perl.
We can turn each report into a test case.[*] While fixing the bug, the remaining tests prevent our code from regressing to a less functional version of the codehence the name regression testing .||We Can 转向 Each 报告 Into a Test Case.[*] While fixing The 臭虫, The Remaining 测试 防止 Our Code From regressing To a 更少的 Functional Version Of The codehence The Name regression testing .
Compare that with the cows having a life outside the barn:||Compare That With The cows Having a 生活 Outside The 谷仓:
Now we have to add the parts to turn our function into a testing one.||Now We Have To 增添 The 部分 To 转向 Our Function Into a testing One.
we'll still see the same result.||We'我 Still See The Same Result.
Exercise We don't have code to show you: it's just the stuff in Chapter 12.||Exercise We Don't Have Code To Show You: It's Just The 材料 In Chapter 12.
Once we define our export tags, our users can use them in their import lists:||Once We Define Our Export tags, Our Users Can Use Them In Their Import Lists:
my $beast = 'Cow'; $beast->speak; # invokes Cow->speak||My $野兽 = 'Cow'; $野兽->说话; # invokes Cow->说话
You didn't think the h2xs tool would even write the module for you, now did you?||You Didn't 想 The h2xs 工具 Would Even Write The Module For You, Now Did You?
One way to fix this is to add a BEGIN block around the push:||One Way To 固定 This Is To 增添 a BEGIN Block Around The Push:
Package names can also have multiple names separated by double colons, such as Minnow::Navigation and Minnow::Food::Storage.||Package Names Can Also Have Multiple Names Separated By 两倍的 冒号, Such As Minnow::Navigation And Minnow::Food::Storage.
The program glosses over this issue, but a more pedantic coder might take it into consideration appropriately.||The Program glosses 在 This 发行发布, But a More pedantic coder Might Take It Into 考虑 适当.
Often, testers can help you figure out problems for platforms to which you do not have access.||Often, testers Can Help You 数字 Out 问题 For Platforms To Which You Do Not Have Access.
[] 5.6 and later.||[] 5.6 And 更晚.
If the value is undef, it's a plain file; if it's a hash reference, we have a subdirectory, with its own files and subdirectories.||If The Value Is Undef, It's a 明白的 File; If It's a Hash Reference, We Have a 子目录, With Its Own Files And subdirectories.
It looks much better with the arrow.||It Looks Much Better With The 箭.
[*] These directories were set when the administrator installed Perl, and we can see them with perl -V.||[*] These directories Were Set When The administrator 安装 Perl, And We Can See Them With Perl -V.
Most of the work is just typing.||Most Of The Work Is Just 打字.
This code is pretty straightforward.||This Code Is 精致的 直爽的.
We'll replace the Exporter lines with one that declares the class that we inherit from, if any.||We'我 归还原处 The Exporter Lines With One That Declares The Class That We 继承 From, If Any.
# is it a Horse?|| # Is It a Horse?
Obviously, the castaways can't survive on coconuts and pineapples alone.||Obviously, The castaways Can't 幸免于 On coconuts And pineapples 单独的.
Some Advanced Object Topics You might wonder, "Do all objects inherit from a common class?"||Some Advanced Object Topics You Might 想知道诧异, "Do All Objects 继承 From a Common Class?"
Viewing Complex Data with Data::Dumper Another way to visualize a complex data structure rapidly is to dump it.||Viewing Complex Data With Data::Dumper Another Way To visualize a 综合的 Data Structure 迅速地 Is To 倾倒 It.
Later, when we want to insert new test files anywhere in the testing order, we just change the order in t/test_manifest.||Later, When We Want To 插入 New Test Files Anywhere In The testing Order, We Just Change The Order In t/test_manifest.
is( 2 * 3, 5, 'The product is 5' );||Is( 2 * 3, 5, 'The 产品 Is 5' );
The short answer is that we find out about problems sooner and tests force us to program in much smaller chunks (since they are easier to test), which is generally good programming practice.||The 短的 Answer Is That We 寻找 Out About 问题 sooner And 测试 Force Us To Program In Much smaller chunks (Since They Are Easier To Test), Which Is Generally Good Programming Practice.
print map { " $_\n" } @smaller_than_1000;||Print Map { " $_\n" } @smaller_than_1000;
XXXXX# name: HTTP-Size version: 0.91 version_from: lib/Size.pm installdirs: site requires:||XXXXX# Name: HTTP-Size Version: 0.91 version_from: lib/Size.pm installdirs: 场所 Requires:
Perl takes a reference to this hash and returns as a single scalar value, which we assign to the scalar variable.||Perl Takes a Reference To This Hash And Returns As a Single Scalar Value, Which We Assign To The Scalar Variable.
We can figure out the calling package on the fly, however, by using the built-in caller.||We Can 数字 Out The Calling Package On The Fly, However, By Using The Built-In Caller.
A reference to a subroutine allows a subroutine to effectively become part of that complex data structure.||A Reference To a Subroutine Allows a Subroutine To Effectively 变成 Part Of That 综合的 Data Structure.
What's this default_color?||What's This default_color?
How does the import list come into action?||How Does The Import List 来到 Into 行为?
In this program, we prompt the user for the type of output, and we want her to type either "scalar", "file", or "tee".||In This Program, We 及时的 The User For The Type Of 出产, And We Want Her To Type Either "Scalar", "File", Or "tee".
If we wrote that by hand, a test to check that 1 plus 2 is 3 might look like this:||If We 写 That By Hand, a Test To Check That 1 Plus 2 Is 3 Might Look Like This:
We can create the filehandle reference with the one-argument form of the constructor.||We Can Create The Filehandle Reference With The One-Argument Form Of The 构造函数.
A reference to a subroutine can be thought of as a repository of behavior in a program.||A Reference To a Subroutine Can Be Thought Of As a 仓库 Of Behavior In a Program.
This updates the individual $total_size variables associated with each callback.||This 更新 The Individual $total_size Variables Associated With Each callback.
Its underpinnings depend on ExtUtils::Makemaker, which comes with Perl.||Its underpinnings 依靠 On ExtUtils::Makemaker, Which 来 With Perl.
The File::Spec module is designed to support operations commonly performed on file specifications.||The File::Spec Module Is 设计 To Support 操作 通常 进行 On File specifications.
For each line that we read, we determine if it's a person or a provision.||For Each Line That We Read, We 决心 If It's a 人 Or a 准备.
Then get the information for the current time:||Then Get The Information For The Current Time:
The total number of references to the array of provisions is now four.||The 总 Number Of References To The Array Of provisions Is Now 四.
We name the file after the program name, stored in $0, and append .out to it.||We Name The File After The Program Name, Stored In $0, And append .Out To It.
In particular, leaving the blah blah blah is considered bad form.||In Particular, 离开 The blah blah blah Is Considered 坏的 Form.
You can just look in the CGI.pm code, see for yourself, but we'll show you the basics.||You Can Just Look In The (（CGI）通用网关界面)通用网关界面.Pm Code, See For 你（们）自己, But We'我 Show You The basics.
If Perl runs out of memory, all bets are off.||If Perl 跑 Out Of Memory, All bets Are Off.
This means that Gilligan is position 0 in the output list, Skipper is position 4, Professor is position 2, and so on.||This Means That Gilligan Is Position 0 In The 出产 List, Skipper Is Position 4, Professor Is Position 2, And So On.
Exercise Let's start with the test file.||Exercise Let's Start With The Test File.
A Testing To-Do List When we write tests before we write the code, the tests will initially fail.||A Testing To-Do List When We Write 测试 Before We Write The Code, The 测试 Will 最初 失败.
For example, we can iterate over the data for the Skipper, Gilligan, and the Professor by first building a larger data structure holding the entire list of provision lists:||For Example, We Can iterate 在 The Data For The Skipper, Gilligan, And The Professor By First 建筑物 a larger Data Structure 支持 The 完全的 List Of 准备 Lists:
But we need to ask for each value two, three, or maybe even four times, just to put the seven values into order.||But We Need To 问 For Each Value Two, Three, Or 或许 Even 四 Times, Just To Put The seven Values Into Order.
Each callback has a corresponding subroutine to get the results.||Each callback Has a 相应的 Subroutine To Get The Results.
Test one more or one less than the edge.||Test One More Or One 更少的 Than The 边.
$ perl Makefile.PL PREFIX=~/Testing Checking if your kit is complete...||$ Perl Makefile.PL PREFIX=~/Testing Checking If Your 全套工具、装备 Is Complete...
We set the value of @all_with_names to contain three references.||We Set The Value Of @all_with_names To Contain Three References.
If we want to test a distribution, we just do this at the same time that we run our test suite.||If We Want To Test a 分配, We Just Do This At The Same Time That We Run Our Test 随员.
Building Recursively Defined Data Suppose we wanted to capture information about a filesystem, including the filenames and directory names, and their included contents.||Building Recursively Defined Data Suppose We 想要 To 俘获 Information About a filesystem, Including The filenames And Directory Names, And Their 包括 Contents.
use Storable; my @data1 = qw(one won); my @data2 = qw(two too to); push @data2, \@data1; push @data1, \@data2; store [\@data1, \@data2], 'some_file';||Use Storable; My @data1 = Qw(One Won); My @data2 = Qw(Two Too To); Push @data2, \@data1; Push @data1, \@data2; 商店 [\@data1, \@data2], 'some_file';
The ok( ) function prints "ok" if its first argument is true, and "not ok" otherwise.||The Ok( ) Function Prints "Ok" If Its First Argument Is True, And "Not Ok" Otherwise.
It automatically adds a test just by loading the module, and we just have to ensure we add the hidden test to the count we give to Test::More.||It Automatically Adds a Test Just By loading The Module, And We Just Have To Ensure We 增添 The Hidden Test To The 计算 We Give To Test::More.
The require operator also has two additional features:||The Require Operator Also Has Two Additional 特征:
IO::File The IO::File module subclasses IO::Handle to work with files.||IO::File The IO::File Module 子类 IO::Handle To Work With Files.
$ perl -MCPAN -e shell cpan shell -- CPAN exploration and modules installation (v1.7601) ReadLine support available (try 'install Bundle::CPAN')||$ Perl -MPerl综合典藏网 -g 壳 Cpan 壳 -- Perl综合典藏网 勘探 And Modules 安装 (v1.7601) ReadLine Support Available (Try '安装 Bundle::Perl综合典藏网')
Of course, you'd need write privileges to such a directory, and the rest of the team would have to add the bin subdirectory to their PATH, the man subdirectory to their MANPATH, and the lib/site_perl directory to their @INC path, as you'll see shortly.||Of Course, You'd Need Write privileges To Such a Directory, And The 休息 Of The 小队 Would Have To 增添 The bin 子目录 To Their PATH, The 人 子目录 To Their MANPATH, And The lib/site_perl Directory To Their @INC Path, As You'我 See 立刻.
Reading this from the inside out, we can think of it like this:||Reading This From The 里面 Out, We Can 想 Of It Like This:
We indent provisions with some whitespace, following a non-indented line with the person's name.||We （书写）缩行 provisions With Some Whitespace, Following a Non-indented Line With The 人's Name.
If we want the test to pass when the file is not there, we use file_not_exists_ok.||If We Want The Test To Pass When The File Is Not There, We Use file_not_exists_ok.
The results are completely predictable, though.||The Results Are 完全地 predictable, Though.
$ perl -MCPANPLUS -e shell CPANPLUS::Shell::Default -- CPAN exploration and modules installation (v0.03) *** Please report bugs to <cpanplus-bugs@lists.sourceforge.net>. *** Using CPANPLUS::Backend v0.049. *** ReadLine support available (try 'i Term::ReadLine::Perl').||$ Perl -MPerl综合典藏网PLUS -g 壳 Perl综合典藏网PLUS::Shell::Default -- Perl综合典藏网 勘探 And Modules 安装 (v0.03) *** Please 报告 bugs To <cpanplus-bugs@lists.sourceforge.net>. *** Using Perl综合典藏网PLUS::Backend v0.049. *** ReadLine Support Available (Try '我 Term::ReadLine::Perl').
Chapter 2, Intermediate Foundations Pick up some intermediate Perl skills you'll need for the rest of the book.||Chapter 2, Intermediate Foundations Pick Up Some 中间的 Perl skills You'我 Need For The 休息 Of The 书.
If you have multiple files, either designate one of them as the one you'll always update just before a new release or use the VERSION within the Makefile.PL instead.||If You Have Multiple Files, Either 指明 One Of Them As The One You'我 Always Update Just Before a New Release Or Use The VERSION Within The Makefile.PL Instead.
Now we can fix that color for Mr. Ed:||Now We Can 固定 That 颜色 For Mr. Ed:
Who brought a water bottle?||Who brought a 水 瓶子?
Let's create an entire pasture:||Let's Create An 完全的 牧场:
$ make install Manifying blib/man3/Island::Plotting::Maps.3 Installing /home/ginger/Testing/lib/site_perl/5.8.7/Island/Plotting/Maps.pm Installing /home/ginger/Testing/man/man3/Island::Plotting::Maps.3 Writing /home/ginger/Testing/lib/site_perl/5.8.7/darwin/auto/Island/Plotting/Maps/. packlist Appending installation info to /home/ginger/Testing/lib/site_perl/5.8.7/darwin/ perllocal.pod||$ Make 安装 Manifying blib/man3/Island::Plotting::Maps.3 Installing /家/姜/Testing/lib/site_perl/5.8.7/Island/Plotting/Maps.pm Installing /家/姜/Testing/人/man3/Island::Plotting::Maps.3 Writing /家/姜/Testing/lib/site_perl/5.8.7/darwin/Auto/Island/Plotting/Maps/. packlist Appending 安装 信息 To /家/姜/Testing/lib/site_perl/5.8.7/darwin/ perllocal.pod
If we're bringing in the class from outside, via an object-oriented module, we can change:||If We'Re bringing In The Class From Outside, Via An Object-Oriented Module, We Can Change:
Again, that reduces the reference count to zero, freeing that memory as well, in a cascading effect.||Again, That reduces The Reference 计算 To 零, freeing That Memory As Well, In a 层叠式 Effect.
There could also be base cases for empty tables and table rows.||There Could Also Be Base Cases For Empty Tables And Table rows.
my $bigger_than_1024 = print_bigger_than(1024); find($bigger_than_1024, 'bin');||My $bigger_than_1024 = print_bigger_than(1024); 寻找($bigger_than_1024, 'bin');
is( sqrt(0.25), 0.5, 'The square root of 0.25 is 0.5' );||Is( sqrt(0.25), 0.5, 'The 正方形 Root Of 0.25 Is 0.5' );
This is fine for a few items, but if the array is large, it seems a bit wasteful to copy the data just to pass it into a subroutine.||This Is Fine For a Few 物品, But If The Array Is Large, It 似乎 a Bit 浪费的 To Copy The Data Just To Pass It Into a Subroutine.
This is handy when we have a heterogeneous mix of objects in a data structure and want to distinguish particular categories of objects:||This Is 方便的 When We Have a heterogeneous 混合 Of Objects In a Data Structure And Want To 辨别 Particular 类别 Of Objects:
The file output list ends up in @dir_hs, which we go through with the foreach loop and send to print_contents.||The File 出产 List Ends Up In @dir_hs, Which We Go 通过 With The Foreach Loop And 派遣 To print_contents.
[] This is an efficient way to do this only if the uppercasing operation is sufficiently expensive, which it might be if our strings tend to be very long or if we have a large enough number of them.||[] This Is An Efficient Way To Do This Only If The uppercasing Operation Is 充分地 Expensive, Which It Might Be If Our Strings 趋向 To Be Very Long Or If We Have a Large Enough Number Of Them.
NAME||标题
Now when Gilligan uses this file, he simply adds Navigation:: to the subroutines defined in the library and leaves the Navigation:: prefix off for subroutines he defines on his own:||Now When Gilligan Uses This File, 他 Simply Adds Navigation:: To The Subroutines Defined In The Library And 叶子 The Navigation:: 前缀 Off For Subroutines 他 定义 On 他的 Own:
my $read_fh = IO::File->new( 'castaways.log', 'r' ); my $write_fh = IO::File->new( 'castaways.log', 'w' );||My $read_fh = IO::File->New( 'castaways.log', 'r' ); My $write_fh = IO::File->New( 'castaways.log', 'w' );
Note that Gwen is active inside the subroutine.||Note That Gwen Is 活跃的 里面 The Subroutine.
Recursively Defined Data While the data we've processed with references up to this point has been rather fixed structure, sometimes we have to deal with hierarchical data, which is often defined recursively.||Recursively Defined Data While The Data We'Ve processed With References Up To This 尖 Has Been Rather Fixed Structure, Sometimes We Have To 处理 With 层次 Data, Which Is Often Defined Recursively.
[] For this reason, it is generally considered a bad idea for an update to a released module to introduce new default imports.||[] For This Reason, It Is Generally Considered a 坏的 思想 For An Update To a released Module To 介绍 New Default Imports.
With Storable, we can store data and retrieve it later.||With Storable, We Can 商店 Data And retrieve It 更晚.
Suppose, instead of methods that return true or false, we need one that returns a list.||Suppose, Instead Of Methods That Return True Or False, We Need One That Returns a List.
If we don't want the default sorting order, we don't need to write an entire sorting algorithm, which is good news since Perl already has a good one of those.||If We Don't Want The Default sorting Order, We Don't Need To Write An 完全的 sorting 算法, Which Is Good 新闻 Since Perl Already Has a Good One Of Those.
print $value->bstr( ), "\n"; # print it out||Print $Value->bstr( ), "\n"; # Print It Out
We can also use the lib pragma to add to the module search path, although this is not as friendly, since we have to change the code, but also because it might not be the same directory on other machines where we want to run the code.||We Can Also Use The lib Pragma To 增添 To The Module 搜查 Path, Although This Is Not As 友好的, Since We Have To Change The Code, But Also Because It Might Not Be The Same Directory On Other Machines Where We Want To Run The Code.
[*] If we're reporting a bug in someone else's code, we can generally assume that they'll appreciate us sending them a test for the bug.||[*] If We'Re reporting a 臭虫 In Someone Else's Code, We Can Generally 假定 That They'我 欣赏 Us sending Them a Test For The 臭虫.
You also need to pass any inherited method calls on the RaceHorse down to the Horse instance, through delegation.||You Also Need To Pass Any 继承 Method Calls On The RaceHorse 向下 To The Horse 例子, 通过 代表团.
The program should save the old datafile (if any) under a backup filename so that it's easy to revert the latest additions.||The Program Should Save The Old datafile (If Any) 在 a backup 文件名 So That It's Easy To 回复到 The 最新 additions.
Exercises You can find the answers to these exercises in "Answers for Chapter 2" in the Appendix.||Exercises You Can 寻找 The answers To These exercises In "Answers For Chapter 2" In The Appendix.
In many parts of the world, on the days when daylight savings time or summer time kicks in and out, the day is no longer 86, 400 seconds long.||In Many 部分 Of The World, On The 天 When 日光 存款 Time Or 夏季 Time kicks In And Out, The 一天 Is No 长 86, 400 seconds Long.
We can save ourselves some brainpower by just stacking all the steps together:||We Can Save 我们自己 Some brainpower By Just stacking All The 步骤 Together:
The require operator keeps track of the files Perl has read.[] Once Perl has processed a file successfully, it simply ignores any further require operations on that same file.||The Require Operator 保持 径赛 Of The Files Perl Has Read.[] Once Perl Has processed a File 成功地, It Simply 忽略了 Any Further Require 操作 On That Same File.
So, with a few calls, we can see an incremented count:||So, With a Few Calls, We Can See An incremented 计算:
Now $tv_horse is a reference to what will be the instance-specific data (the name).||Now $tv_horse Is a Reference To What Will Be The 例子-特殊的 Data (The Name).
If you look behind the scenes of many of the Test::* modules, you'll find Test::Builder.||If You Look 在 The scenes Of Many Of The Test::* Modules, You'我 寻找 Test::Builder.
The modules in CPAN are organized as a symbolic-link tree in hierarchical functional categories, pointing to author directories where the actual files are located.||The Modules In Perl综合典藏网 Are organized As a Symbolic-联系 树 In 层次 Functional 类别, 指向 To 作者 directories Where The Actual Files Are Located.
In each case, $items points to a different array, so the same code applies to different arrays each time we invoke it.||In Each Case, $物品 分 To a Different Array, So The Same Code 适用 To Different Arrays Each Time We 调用 It.
Not satisfied with the incredible flexibility of the Exporter's import routine, CGI.pm author Lincoln Stein created a special import for the CGI module.[*] If you've ever gawked at the dizzying array of options that can appear after use CGI and wondered how it all worked, it's all a simple matter of programming.||Not satisfied With The 不可信的 柔韧 Of The Exporter's Import Routine, (（CGI）通用网关界面)通用网关界面.Pm 作者 Lincoln Stein Created a Special Import For The (（CGI）通用网关界面)通用网关界面 Module.[*] If You'Ve 曾经 gawked At The dizzying Array Of 选项 That Can Appear After Use (（CGI）通用网关界面)通用网关界面 And wondered How It All 工作, It's All a Simple Matter Of Programming.
Perl warnings can change from version to version, and we want to know when the new warnings pop up, or if Perl will emit warnings on one of our customer's computers.||Perl 警告 Can Change From Version To Version, And We Want To Know When The New 警告 Pop Up, Or If Perl Will 发射 警告 On One Of Our 顾客's computers.
The Cure for the Common Code The Skipper writes many Perl programs to provide navigation for all the common ports of call for the Minnow.||The Cure For The Common Code The Skipper 写 Many Perl Programs To Provide 航行 For All The Common ports Of Call For The Minnow.
Although we cover testing briefly here, you should check out Perl Testing: A Developer's Notebook (O'Reilly), which covers the subject in depth.||Although We 盖 testing 简单地 Here, You Should Check Out Perl Testing: A Developer's Notebook (O'Reilly), Which covers The Subject In 深度.
[*] See Chapter 3 for information on installing modules.||[*] See Chapter 3 For Information On installing Modules.
Starting the Search from a Different Place A better solution is to tell Perl to search from a different place in the inheritance chain:||Starting The Search From a Different Place A Better 解决 Is To Tell Perl To 搜查 From a Different Place In The Inheritance 链条:
'Nuff said.)||'Nuff Said.)
"What about multiple inheritance?" or "How can I tell what sort of object I have?"||"What About Multiple Inheritance?" Or "How Can I Tell What Sort Of Object I Have?"
Brian Ingerson came up with Yet Another Markup Language (YAML) to provide a more readable (and more compact) dump.||Brian Ingerson 来 Up With Yet Another Markup Language (YAML) To Provide a More 可读性 (And More 严密的) 倾倒.
Perl knows where they are, but we don't.||Perl 知道 Where They Are, But We Don't.
The result will be a single array reference.||The Result Will Be a Single Array Reference.
This means that we get the class name as the first parameter, or the only parameter, if no arguments are given.||This Means That We Get The Class Name As The First Parameter, Or The Only Parameter, If No Arguments Are Given.
If you want to create the start_table and end_table routines, in addition to the others, it's simply:||If You Want To Create The start_table And end_table Routines, In 增加 To The 别人, It's Simply:
It's easier than it sounds, as discussed later in this chapter.||It's Easier Than It 听起来, As 讨论 更晚 In This 章.
Print a diagnostic message if the two do not match.||Print a 诊断 音讯 If The Two Do Not Match.
while( <$log_fh> ) { ... }||While( <$log_fh> ) { ... }
Apparently, Perl catches it at compile time.||Apparently, Perl catches It At Compile Time.
[] brian simply creates a template directory he processes with ttree from Template::Toolkit.||[] brian Simply Creates a template Directory 他 Processes With ttree From Template::Toolkit.
Data::Dumper, like the debugger's x command, handles shared data properly.||Data::Dumper, Like The Debugger's x 命令, 处理 Shared Data Properly.
warning_like { add_letters( ) }, qr/non-numeric/;||warning_like { add_letters( ) }, qr/Non-数值/;
## in Animal use Scalar::Util qw(weaken); # in 5.8 and later use WeakRef qw(weaken); # in 5.6 after CPAN installation||## In Animal Use Scalar::Util qw(weaken); # In 5.8 And 更晚 Use WeakRef qw(weaken); # In 5.6 After Perl综合典藏网 安装
Returning from the subroutine.||Returning From The Subroutine.
[*] The perlmod page includes an example that extracts the CVS/RCS version number for the module's version number.||[*] The perlmod 页 包括 An Example That extracts The CVS/RCS Version Number For The Module's Version Number.
push @$ref, 'sextant'; # add a new provision print "$ref->[-1]\n"; # prints sextant\n||Push @$Ref, 'sextant'; # 增添 a New 准备 Print "$Ref->[-1]\n"; # Prints sextant\n
All that's required is a bit of indirection .[*] First, we have a selection problem, so we use a grep.||All That's 要求 Is a Bit Of indirection .[*] First, We Have a 选择 Problem, So We Use a Grep.
Except for . in that list, we probably won't be able to write to any of the other directories unless we're the person responsible for maintaining Perl on our machine, in which case, we should be able to write to all of them.||Except For . In That List, We Probably Won't Be Able To Write To Any Of The Other directories Unless We'Re The 人 负责的 For maintaining Perl On Our 机器, In Which Case, We Should Be Able To Write To All Of Them.
Most interesting instances are made of many items, each of which can, in turn, be a reference or another object.||Most Interesting 实例 Are Made Of Many 物品, Each Of Which Can, In 转向, Be a Reference Or 另一个 Object.
Accessing the Instance Data Because we get the instance as the first parameter, we can now access the instance-specific data.||Accessing The Instance Data Because We Get The 例子 As The First Parameter, We Can Now Access The 例子-特殊的 Data.
Statement coverage tells us how many of the statements in our code we execute during a run.||Statement 覆盖率 告诉 Us How Many Of The Statements In Our Code We Execute 在 a Run.
Path coverage, expression coverage, and other sorts of coverage exist too.||Path 覆盖率, Expression 覆盖率, And Other 各样 Of 覆盖率 Exist Too.
Perl's own operators||Perl's Own Operators
use Island::Plotting::Maps; # import everything in @EXPORT||Use Island::Plotting::Maps; # Import Everything In @EXPORT
This chapter covers these subjects and more.||This 章 covers These subjects And More.
A sample /bin directory looks like:||A 样品 /bin Directory Looks Like:
It then evaluates the testing expression in a scalar context.||It Then 评价 The testing Expression In a Scalar Context.
Exercise 1 [20 min] Type in the Animal, Cow, Horse, Sheep, and Mouse class definitions.||Exercise 1 [20 min] Type In The Animal, Cow, Horse, Sheep, And Mouse Class 定义.
We wrote a generic Horse, but the string really is an unnamed Horse.||We 写 a 通用 Horse, But The String Really Is An unnamed Horse.
To show the compiler that you want an anonymous hash constructor, put a plus sign before the opening curly brace: +{ ... }.||To Show The Compiler That You Want An Anonymous Hash 构造函数, Put a Plus Sign Before The 开始 卷曲的 支撑: +{ ... }.
Now let's walk through this.||Now Let's 步行 通过 This.
use IO::Tee;||Use IO::Tee;
We use overriding to shadow the method in the derived class (Mouse) because we have a specialized version of the routine, instead of calling the more general base class's method (in Animal).||We Use Overriding To 影子 The Method In The 派生 Class (Mouse) Because We Have a 专业的 Version Of The Routine, Instead Of Calling The More General Base Class's Method (In Animal).
my @gilligan = qw(red_shirt hat lucky_socks water_bottle); check_required_items('Gilligan', \@gilligan);||My @gilligan = Qw(red_shirt 帽子 lucky_socks water_bottle); check_required_items('Gilligan', \@gilligan);
However, since this module has an object-oriented interface, [] it doesn't import any subroutines.||However, Since This Module Has An Object-Oriented Interface, [] It Doesn't Import Any Subroutines.
Also make sure your get methods work with both a generic animal and a specific animal instance.||Also Make Sure Your Get Methods Work With Both a 通用 动物 And a 特殊的 动物 例子.
my $callback = create_find_callback_that_sums_the_size( ); find($callback, 'bin'); my $total_size = $callback->('dummy'); # dummy parameter to get size print "total size of bin is $total_size\n";||My $callback = create_find_callback_that_sums_the_size( ); 寻找($callback, 'bin'); My $total_size = $callback->('傀儡'); # 傀儡 Parameter To Get Size Print "总 Size Of bin Is $total_size\n";
Well, if we invoke Animal->speak there, the first parameter to the method is "Animal" not "Mouse" and when the time comes for it to call for the sound, it won't have the right class to select the proper methods for this object.||Well, If We 调用 Animal->说话 There, The First Parameter To The Method Is "Animal" Not "Mouse" And When The Time 来 For It To Call For The 声, It Won't Have The Right Class To 挑选 The 合适的 Methods For This Object.
The second part is the assignment of 10 to the allocated storage.||The Second Part Is The Assignment Of 10 To The Allocated 贮藏.
Exercise You can find the answer to this exercise in "Answer for Chapter 13" in the Appendix.||Exercise You Can 寻找 The Answer To This 锻炼 In "Answer For Chapter 13" In The Appendix.
sub UNIVERSAL::debug {||Sub UNIVERSAL::debug {
So, if we know the relative path from the script directory, we don't have to hardcode the whole path.||So, If We Know The 亲戚 Path From The 临时单据 Directory, We Don't Have To hardcode The Whole Path.
If Gilligan writes a routine to drop_anchor( ) and places it in the file drop_anchor.pm, then the Skipper can use Gilligan's code by including his library:||If Gilligan 写 a Routine To drop_anchor( ) And Places It In The File drop_anchor.pm, Then The Skipper Can Use Gilligan's Code By Including 他的 Library:
my @names =||My @Names =
Don't confuse the square brackets with the parentheses here.||Don't 混淆 The 正方形 支架 With The Parentheses Here.
Just like the expression form, grep temporarily places each element of the input list into $_.||Just Like The Expression Form, Grep temporarily Places Each Element Of The Input List Into $_.
Now we're adding in some more bytes from professor.hut to lovey.howell.hut, reusing the existing value place.||Now We'Re Adding In Some More 字节 From professor.hut To lovey.howell.小屋, 重用 The 现存的 Value Place.
1..4 ok 1 - 1 is true ok 2 - The sum is 4 not ok 3 - The product is 5 # Failed test 'The product is 5' # in /Users/brian/Desktop/test at line 9. # got: '6' # expected: '5' # Looks like you planned 4 tests but ran 1 extra. # Looks like you failed 1 test of 5 run. ok 4 - The result isn't 6 ok 5 - I found an alpaca!||1..4 Ok 1 - 1 Is True Ok 2 - The 总数 Is 4 Not Ok 3 - The 产品 Is 5 # Failed Test 'The 产品 Is 5' # In /Users/brian/Desktop/Test At Line 9. # Got: '6' # Expected: '5' # Looks Like You 计划 4 测试 But ran 1 Extra. # Looks Like You failed 1 Test Of 5 Run. Ok 4 - The Result Isn't 6 Ok 5 - I Found An alpaca!
my @day = qw(ark dip wap sen pop sep kir); my @mon = qw(diz pod bod rod sip wax lin sen kun fiz nap dep);||My @一天 = Qw(ark 蘸 wap sen Pop sep kir); My @mon = Qw(diz B<pod> bod 小棒 sip 蜡 lin sen kun fiz 打盹 dep);
Introduction to Objects Object-oriented programming (OOP) helps programmers run code sooner and maintain it easier by organizing the code into things that we can name.||Introduction To Objects Object-Oriented Programming (OOP) 帮助 Programmers Run Code sooner And Maintain It Easier By organizing The Code Into Things That We Can Name.
We realize, though, that people write new Class ... rather than Class->new(...) and that most of us are fine with that.||We 认识到, Though, That People Write New Class ... Rather Than Class->New(...) And That Most Of Us Are Fine With That.
Without passing by reference, we'd modify only a local copy of the data, which has no effect on the original array.||Without Passing By Reference, We'd Modify Only a Local Copy Of The Data, Which Has No Effect On The Original Array.
my $cow = Cow->named('Bessie'); print name $cow, " eats.\n";||My $母牛 = Cow->Named('Bessie'); Print Name $母牛, " Eats.\n";
The previous value (similar to the way umask or the single-argument form of select works)||The Previous Value (Similar To The Way umask Or The Single-Argument Form Of 挑选 Works)
Other people will probably have different uses for it and they'll try to use it in all sorts of different ways.||Other People Will Probably Have Different Uses For It And They'我 Try To Use It In All 各样 Of Different Ways.
In this simple script, we tested a lot of odd conditions.[]||In This Simple 临时单据, We 测试 a 许多 Of 古怪的 条件.[]
my $callback1 = create_find_callback_that_counts( ); my $callback2 = create_find_callback_that_counts( ); print "my bin:\n"; find($callback1, 'bin'); print "my lib:\n"; find($callback2, 'lib');||My $callback1 = create_find_callback_that_counts( ); My $callback2 = create_find_callback_that_counts( ); Print "My bin:\n"; 寻找($callback1, 'bin'); Print "My lib:\n"; 寻找($callback2, 'lib');
my @dir_hs = map { IO::Dir->new( $_ ) } grep { -d } @ARGV;||My @dir_hs = Map { IO::Dir->New( $_ ) } Grep { -d } @命令行传入参数;
For example, we want to copy every file matched by the glob pattern of *.input to a corresponding file whose suffix is .output, but do it in parallel.||For Example, We Want To Copy Every File matched By The Glob 模式 Of *.Input To a 相应的 File Whose 后缀 Is .出产, But Do It In 平行的.
Generally, numbers that increase numerically supersede previous versions.||Generally, 编号 That 增加 数值 代替 Previous Versions.
Don't skip tests because they aren't working right.||Don't 跳过 测试 Because They 还't Working Right.
When this subroutine executes, Perl creates a fifth reference to the data and copies it into @_ for the subroutine.||When This Subroutine 实行, Perl Creates a fifth Reference To The Data And Copies It Into @_ For The Subroutine.
It might also be nice to be able to print the output without having any new input data.||It Might Also Be Nice To Be Able To Print The 出产 Without Having Any New Input Data.
[*] Compare this with having to return an array from a C function.||[*] Compare This With Having To Return An Array From a C Function.
If someone's name is accidentally misspelled, however, it puts some of their data into a new file under the wrong name.||If Someone's Name Is 偶尔 拼错的, However, It 把 Some Of Their Data Into a New File 在 The 错误的 Name.
Fortunately, we can create more than one subroutine reference in create_find_callback_that_counts( ):||Fortunately, We Can Create More Than One Subroutine Reference In create_find_callback_that_counts( ):
This is at the core of what objects provide, but objects also provide instance data, which we haven't even begun to cover.||This Is At The Core Of What Objects Provide, But Objects Also Provide 例子 Data, Which We 还't Even begun To 盖.
We give it one or more arguments, and it puts them together for us.||We Give It One Or More Arguments, And It 把 Them Together For Us.
my @castaways = sort qw(Gilligan Skipper Ginger Professor Mary-Ann);||My @castaways = Sort Qw(Gilligan Skipper Ginger Professor Mary-Ann);
The original name counts as one, and each additional reference that we create (including copies of references) also counts as one.||The Original Name 计数 As One, And Each Additional Reference That We Create (Including Copies Of References) Also 计数 As One.
# Below is stub documentation for your module.||# Below Is 存根 提供文件 For Your Module.
The command-line arguments show up in the special array @ARGV, so we use that for our input list.||The 命令-Line Arguments Show Up In The Special Array @命令行传入参数, So We Use That For Our Input List.
my $ref_to_skipper_provisions =||My $ref_to_skipper_provisions =
[] These are the ANSI C fopen mode strings.||[] These Are The ANSI C Fopen 方式 Strings.
Implementing this is, again, relatively easy:||Implementing This Is, Again, 比较地 Easy:
my @input_numbers = (1, 2, 4, 8, 16, 32, 64); my @bigger_than_10 = grep $_ > 10, @input_numbers;||My @input_numbers = (1, 2, 4, 8, 16, 32, 64); My @bigger_than_10 = Grep $_ > 10, @input_numbers;
Testing Files The code to test things like file existence and file size is simple, but the more code we write, and the more parts each code statement has, the more likely we are not only to mess up, but to miscommunicate our intent to the maintenance programmer.||Testing Files The Code To Test Things Like File 存在 And File Size Is Simple, But The More Code We Write, And The More 部分 Each Code Statement Has, The More Likely We Are Not Only To 肮脏 Up, But To miscommunicate Our 意图 To The 保养 Programmer.
[] And in writing this, we discovered that we can't write sqrt(-1) because eval doesn't trap that.||[] And In 写作 This, We discovered That We Can't Write sqrt(-1) Because Eval Doesn't 陷井 That.
package My::OOModule::Derived; use base qw(Exporter My::OOModule::Base);||Package My::OOModule::Derived; Use Base Qw(Exporter My::OOModule::Base);
In October 1996, Perl 5.003_07 had 98 modules.||In October 1996, Perl 5.003_07 Had 98 Modules.
The kind of subroutine that can access all lexical variables that existed at the time we declared it is called a closure (a term borrowed from the world of mathematics).||The Kind Of Subroutine That Can Access All Lexical Variables That existed At The Time We Declared It Is Called a Closure (a 期限 borrowed From The World Of 数学).
By default, the array contains the current directory and a half-dozen or so directories specified by the person who compiled Perl.||By Default, The Array 包含 The Current Directory And a 一半-一打 Or So directories 指定 By The 人 Who Compiled Perl.
The same $count variable is used in both cases.||The Same $计算 Variable Is Used In Both Cases.
Exercise 1 Here's one way to do it.||Exercise 1 Here's One Way To Do It.
The various classes in @ISA may not play well together and may step on one another's data, for instance.||The 各种各样的 类 In @ISA May Not 玩 Well Together And May 脚步 On One 另一个's Data, For 例子.
my $day_name = Oogaboogoo::date::day($wday); my $mon_name = Oogaboogoo::date::mon($mon);||My $day_name = Oogaboogoo::Date::一天($wday); My $mon_name = Oogaboogoo::Date::mon($mon);
(The eiffel flag says "do it the way the Eiffel language does it, " which is the way it should be done here.)||(The eiffel 旗 说 "Do It The Way The Eiffel 语言 Does It, " Which Is The Way It Should Be Done Here.)
Let's see what happens when we break apart the digits:||Let's See What Happens When We 打破 分离 The digits:
More information on Storable can be found in perldoc Storable, as always.||More Information On Storable Can Be Found In perldoc Storable, As Always.
Once you have the distribution built with your favorite tool, you can split up the classes into separate module files.||Once You Have The 分配 Built With Your 最喜爱的人或物 工具, You Can Split Up The 类 Into Separate Module Files.
Also, if you get stuck at any time, type h for help or look at perldoc perldebug.||Also, If You Get stuck At Any Time, Type h For Help Or Look At perldoc perldebug.
Since sound already worked with either a class or an instance, we're done!||Since 声 Already 工作 With Either a Class Or An 例子, We'Re Done!
open my $log_fh, '>>', 'castaways.log'||Open My $log_fh, '>>', 'castaways.log'
It uses the YAML format we told you about in Chapter 6.||It Uses The YAML Format We told You About In Chapter 6.
By adding a third (prefix) parameter to the dumping subroutine, you can ask it to indent its output.||By Adding a 第三 (前缀) Parameter To The 倾销 Subroutine, You Can 问 It To （书写）缩行 Its 出产.
Exercise [60 min] Write a module distribution, starting from the tests first.||Exercise [60 min] Write a Module 分配, Starting From The 测试 First.
open MINNOW, '>ship.txt' or die "Can't create 'ship.txt': $!"; # user-defined die?||Open MINNOW, '>ship.txt' Or Die "Can't Create 'ship.txt': $!"; # User-Defined Die?
Instead of a simple yes/no, we can ask if two values are the same.||Instead Of a Simple Yes/No, We Can 问 If Two Values Are The Same.
Here we don't need to come up with a temporary name, and we don't need the extra noise of the temporary block.||Here We Don't Need To 来到 Up With a temporary Name, And We Don't Need The Extra Noise Of The temporary Block.
Now the hierarchical nature of the data starts to come into play.||Now The 层次 自然 Of The Data Starts To 来到 Into 玩.
However, as the subroutine returns, the names for the six arrays disappear.||However, As The Subroutine Returns, The Names For The six Arrays 失踪.
Let's express that as code.||Let's Express That As Code.
From there, full paths are always used, so there's no chance of mixing anything else up.||From There, Full paths Are Always Used, So There's No Chance Of 混合 Anything Else Up.
Unquoted string "name" may clash with future reserved word at ./foo line 92.||Unquoted String "Name" May 碰撞 With Future Reserved 字 At ./Foo Line 92.
As before, this module imports nothing.||As Before, This Module Imports Nothing.
As in Learning Perl, we designed each chapter to be small enough to read in just an hour or so.||As In Learning Perl, We 设计 Each 章 To Be Small Enough To Read In Just An 小时 Or So.
Fortunately, we have tools to help us.||Fortunately, We Have Tools To Help Us.
Any later data line that contains this same source host and destination host will re-use that same value, adding more bytes to the running total.||Any 更晚 Data Line That 包含 This Same Source 一大群 And 终点 一大群 Will Re-Use That Same Value, Adding More 字节 To The 连续的 总.
Use the numbers merely as a guideline.||Use The 编号 仅仅 As a guideline.
All of this means that the file tests, such as -s, automatically report on the just-found item.||All Of This Means That The File 测试, Such As -s, Automatically 报告 On The Just-Found 条款.
We name our test files after what they do rather than what order they should run.||We Name Our Test Files After What They Do Rather Than What Order They Should Run.
For example, suppose the code was:||For Example, 猜想 The Code Was:
Functional Interfaces To load a module, we use the Perl built-in use.||Functional Interfaces To Load a Module, We Use The Perl Built-In Use.
my @all_with_names = get_provisions_list( );||My @all_with_names = get_provisions_list( );
not ok 1 # Failed test in long_string.pl at line 6. # got: ..." the lazy dog\x{0a}"... # length: 450 # expected: ..." the lazy camel"... # length: 451 # strings begin to differ at char 447 1..1 # Looks like you failed 1 test of 1.||Not Ok 1 # Failed Test In long_string.pl At Line 6. # Got: ..." The 懒惰的 狗\x{0a}"... # Length: 450 # Expected: ..." The 懒惰的 骆驼"... # Length: 451 # Strings 开始 To 不同 At Char 447 1..1 # Looks Like You failed 1 Test Of 1.
[*] Other than calling on a butcher, that is.||[*] Other Than Calling On a 屠夫, That Is.
We have seen the coderefs in a scalar variable and as an element of a list.||We Have Seen The coderefs In a Scalar Variable And As An Element Of a List.
It's easy for Storable to read, as you'll soon see.[*] Next, fetch the data, again using the Storable module.||It's Easy For Storable To Read, As You'我 不久 See.[*] Next, 去取来 The Data, Again Using The Storable Module.
What happens when we try to store that blue shirt for the Skipper?||What Happens When We Try To 商店 That 蓝色的 衬衣 For The Skipper?
To start our testing, we write a simple Perl script.||To Start Our testing, We Write a Simple Perl 临时单据.
# # # # # # sum ok( defined &sum, 'The sum( ) routine exists'); is( sum( 2, 2 ), 4, '2 + 2 = 4' ); is( sum( 2, 2, 3 ), 7, '2 + 2 + 3 = 7' ); is( sum( ), 0, 'null sum is 0' ); is( sum( -1 ), -1, '-1 = -1' ); is( sum( -1, 1 ), 0, '-1 + 1 = 0' ); is( sum( 'Ginger', 5 ), ||# # # # # # 总数 Ok( Defined &总数, 'The 总数( ) Routine Exists'); Is( 总数( 2, 2 ), 4, '2 + 2 = 4' ); Is( 总数( 2, 2, 3 ), 7, '2 + 2 + 3 = 7' ); Is( 总数( ), 0, 'Null 总数 Is 0' ); Is( 总数( -1 ), -1, '-1 = -1' ); Is( 总数( -1, 1 ), 0, '-1 + 1 = 0' ); Is( 总数( 'Ginger', 5 ),
print "Today is $day_name, $mon_name $mday, $year.\n";||Print "Today Is $day_name, $mon_name $mday, $年.\n";
The superclasses are unaware that we've added four additional elements to the hash, so they still function as they always have.||The 策略 Are unaware That We'Ve added 四 Additional Elements To The Hash, So They Still Function As They Always Have.
Yes, this is a Perl program.||Yes, This Is a Perl Program.
(Names are always delimited by the trailing colon.)||(Names Are Always delimited By The 落后 结肠.)
We can use different constructors with different names for different ways of "giving birth" to the object (such as recording its pedigree or date of birth).||We Can Use Different 构造函数 With Different Names For Different Ways Of "Giving 出生" To The Object (Such As recording Its pedigree Or Date Of 出生).
You'd better edit it!||You'd Better 校订 It!
use URI::URL ( ); # don't import "url" my $u = URI::URL->new(...);||Use URI::URL ( ); # Don't Import "url" My $u = URI::URL->New(...);
If you get either one wrong, the other will generally catch it.||If You Get Either One 错误的, The Other Will Generally Catch It.
We should reuse code through inheritance, not by cut and paste.||We Should Reuse Code 通过 Inheritance, Not By Cut And 浆糊.
Something like this will do':||Something Like This Will Do':
my $noise = $tv_horse->sound;||My $Noise = $tv_horse->声;
The most straightforward way to find out is with the ref operator.||The Most 直爽的 Way To 寻找 Out Is With The Ref Operator.
We can also check out the lighter Class::Accessor.||We Can Also Check Out The 打火机 Class::Accessor.
On that page, you can upload your file directly through the HTTP file upload or tell PAUSE where else on the Web it can fetch the distribution.||On That 页, You Can upload Your File 直接地 通过 The HTTP File upload Or Tell PAUSE Where Else On The Web It Can 去取来 The 分配.
Install the Business::ISBN module from CPAN and use it to extract the country code and the publisher code from the number.||Install The Business::ISBN Module From Perl综合典藏网 And Use It To 取出 The 国家 Code And The 出版商 Code From The Number.
Perl creates new variables as needed.||Perl Creates New Variables As Needed.
As an example of instance- or class-only methods, consider the following, where we check the argument to see what to do:||As An Example Of 例子- Or Class-Only Methods, Consider The Following, Where We Check The Argument To See What To Do:
cpan> install CGI::Prototype||Cpan> 安装 (（CGI）通用网关界面)通用网关界面::Prototype
In the module interface, we expect the require'd file to define subroutines in the same-named package, not the caller's package.||In The Module Interface, We 盼望 The Require'd File To Define Subroutines In The Same-Named Package, Not The Caller's Package.
sub class_only {||Sub class_only {
This requires no changes to the subroutine.||This Requires No Changes To The Subroutine.
It will catch some errors (and die), but it will simply return undef for some.||It Will Catch Some Errors (And Die), But It Will Simply Return Undef For Some.
The bless operator not only blesses $name, it also returns the reference to $name, so that's fine as a return value.||The 保佑 Operator Not Only blesses $Name, It Also Returns The Reference To $Name, So That's Fine As a Return Value.
For example, let's number the output files:[*]||For Example, Let's Number The 出产 Files:[*]
use Test::More; eval "use Test::Pod 1.00"; plan skip_all => "Test::Pod 1.00 required for testing POD" if $@; all_pod_files_ok( );||Use Test::More; Eval "Use Test::Pod 1.00"; 计划平面图 skip_all => "Test::Pod 1.00 要求 For testing POD" If $@; all_pod_files_ok( );
Because the destructor isn't called until the last reference is gone, but the last reference won't be destroyed until the destructor is called.[*]||Because The destructor Isn't Called Until The Last Reference Is 不见了, But The Last Reference Won't Be destroyed Until The destructor Is Called.[*]
You can also use these with the built-in open.||You Can Also Use These With The Built-In Open.
If you aren't writing the code or aren't sure, use the code coverage facilities.[*]||If You 还't 写作 The Code Or 还't Sure, Use The Code 覆盖率 facilitie(绑定操作符)s.[*]
print name ($cow, " eats.\n");||Print Name ($母牛, " Eats.\n");
If we want to change which files it checks, we can do that too.||If We Want To Change Which Files It 检查, We Can Do That Too.
When we load our module, Perl won't find it.||When We Load Our Module, Perl Won't 寻找 It.
But boy-oh-boy, is that ugly or what?||But 男孩-哦-男孩, Is That 丑恶的 Or What?
my $barn = Barn->new; my @cows = (Cow->named('Bessie'), Cow->named('Gwen')); $barn->add($_) for @cows; print "Burn the barn:\n"; $barn = undef; print "Lose the cows:\n"; @cows = ( ); print "End of program.\n";||My $谷仓 = Barn->New; My @cows = (Cow->Named('Bessie'), Cow->Named('Gwen')); $谷仓->增添($_) For @cows; Print "Burn The 谷仓:\n"; $谷仓 = Undef; Print "Lose The cows:\n"; @cows = ( ); Print "End Of Program.\n";
Suppose an array element is itself a reference.||Suppose An Array Element Is Itself a Reference.
Here's an example:||Here's An Example:
Instead, the interface tells us to access the functionality of the module using its class methods.||Instead, The Interface 告诉 Us To Access The Functionality Of The Module Using Its Class Methods.
[*] If you're playing along at home, be sure not to install this pretend module anywhere but in a temporary, testing directory.||[*] If You'Re 玩 沿着 At 家, Be Sure Not To 安装 This 假装 Module Anywhere But In a temporary, testing Directory.
In this example, we check if the Mac::Speech module is installed before we try to test the say_it_aloud( ) method.||In This Example, We Check If The Mac::Speech Module Is 安装 Before We Try To Test The say_it_aloud( ) Method.
Closure Variables as Inputs While the previous examples showed closure variables being modified, closure variables are also useful to provide initial or lasting input to the subroutine.||Closure Variables As Inputs While The Previous Examples showed Closure Variables Being Modified, Closure Variables Are Also Useful To Provide Initial Or 持久的 Input To The Subroutine.
Note that if we defined UNIVERSAL::fandango earlier, then:||Note That If We Defined UNIVERSAL::fandango Earlier, Then:
The catfile method joins a list of strings with the appropriate directory separator:||The catfile Method joins a List Of Strings With The 恰当的 Directory Separator:
use Test::More 'no_plan'; use Test::File;||Use Test::More 'no_plan'; Use Test::File;
However, unless Gilligan has the same PERL5LIB environment variable, his program will fail!||However, Unless Gilligan Has The Same PERL5LIB 环境 Variable, 他的 Program Will 失败!
What if you got the warning message but couldn't tell what it meant?||What If You Got The Warning 音讯 But 也't Tell What It 意味着?
Note, however, that Gilligan has two different behaviors, depending on whether he is addressing the Skipper or someone else.||Note, However, That Gilligan Has Two Different Behaviors, Depending On Whether 他 Is addressing The Skipper Or Someone Else.
To the caller of this subroutine, the return value is identical to the previous version.||To The Caller Of This Subroutine, The Return Value Is 同一的 To The Previous Version.
# gets reply||# Gets 回答
For example, to use the Schwartzian Transform to implement a case-insensitive sort, we could use code like this:[]||For Example, To Use The Schwartzian Transform To 实行 a Case-insensitive Sort, We Could Use Code Like This:[]
Next comes the mechanism by which we can make our functions and variables show up in the package that called the module.||Next 来 The Mechanism By Which We Can Make Our Functions And Variables Show Up In The Package That Called The Module.
$object->can('fandango')||$Object->Can('fandango')
For example, let's extend named as follows:||For Example, Let's 延伸 Named As Follows:
That's a single element access to an array, not a scalar variable.||That's a Single Element Access To An Array, Not a Scalar Variable.
If our derived class needs some superclass instance variables, we should probably call the superclass destructor after we complete our operations, because the superclass destructor will likely alter them in annoying ways.||If Our 派生 Class Needs Some 基类 例子 Variables, We Should Probably Call The 基类 destructor After We Complete Our 操作, Because The 基类 destructor Will Likely 改变 Them In annoying Ways.
Copyright (C) 2005 by Ginger Grant||Copyright (C) 2005 By Ginger Grant
When we load the module, we tell it the number of tests that we want to run, and the module outputs the test range for us.||When We Load The Module, We Tell It The Number Of 测试 That We Want To Run, And The Module outputs The Test 射程 For Us.
These tests have default test names, so our test output looks like this:||These 测试 Have Default Test Names, So Our Test 出产 Looks Like This:
[*] Originally, the PAUSE IDs had to be five characters or less, until Randal wanted his MERLYN ID, and the appropriate accommodation was made.||[*] Originally, The PAUSE IDs Had To Be five Characters Or 更少的, Until Randal 想要 他的 MERLYN ID, And The 恰当的 便利 Was Made.
You know how you should use your module, because you invented it and had a specific need for it.||You Know How You Should Use Your Module, Because You 发明 It And Had a 特殊的 Need For It.
The book will cover that as well, even if you've never seen objects before.||The 书 Will 盖 That As Well, Even If You'Ve Never Seen Objects Before.
Also, the routine is unlike anything else in the module: it gets no initial class parameter.||Also, The Routine Is 不同的 Anything Else In The Module: It Gets No Initial Class Parameter.
sub print_bigger_than {||Sub print_bigger_than {
use IO::Scalar;||Use IO::Scalar;
Thankfully, Perl provides such notification upon request.||Thankfully, Perl Provides Such 通知书 Upon 请求.
$ make all test install||$ Make All Test 安装
In a scalar context, grep returns the number of selected items.||In a Scalar Context, Grep Returns The Number Of 选定 物品.
Consider the crew roster from Chapter 4:||Consider The （飞机等的）全体人员 roster From Chapter 4:
alive before block:||活着的 Before Block:
Now when we create any Animals in the program, we get notification as they leave.||Now When We Create Any Animals In The Program, We Get 通知书 As They 出发.
Let's look at the code used in Chapter 11 for the Animal classes and Horse classes:||Let's Look At The Code Used In Chapter 11 For The Animal 类 And Horse 类:
Nothing too exciting there.||Nothing Too 令人激动的 There.
[*] Oddly, the variable $more_code is also visible to the evaluated code, not that it is of any use to change that variable during the eval.||[*] Oddly, The Variable $more_code Is Also Visible To The 评估 Code, Not That It Is Of Any Use To Change That Variable 在 The Eval.
This algorithm wouldn't correctly traverse the filesystem if it followed symbolic links to directories as if they were true (hard) links, since it could end up in a circular loop if the symlink pointed to a directory that contained the symlink.[*] It would also fail to correctly traverse a malformed filesystemthat is, one in which the directories form a ring rather than a tree structure, say.||This 算法 Wouldn't 正确地 横断 The filesystem If It 跟着 Symbolic 链接 To directories As If They Were True (硬的) 链接, Since It Could End Up In a 圆圈的 Loop If The symlink 尖的 To a Directory That 包含 The symlink.[*] It Would Also 失败 To 正确地 横断 a malformed filesystemthat Is, One In Which The directories Form a 鸣 Rather Than a 树 Structure, Say.
my $fruits; {||My $fruits; {
The first element is the passenger or crew member name, which we use in the error message.||The First Element Is The 旅客 Or （飞机等的）全体人员 Member Name, Which We Use In The Error 音讯.
Also, for reasons explained in the perlmodlib documentation, a package name should begin with a capital letter and not overlap an existing CPAN or core module name.||Also, For Reasons explained In The perlmodlib 提供文件, a Package Name Should 开始 With a 首都 字母 And Not 重叠 An 现存的 Perl综合典藏网 Or Core Module Name.
And yes, some of us have been bitten by that mistake in real, live coding on the first draft.||And Yes, Some Of Us Have Been bitten By That 错误 In Real, 居住生存 coding On The First 草案.
For example, suppose a subroutine within navigation.pm declares a lexical @homeport variable.||For Example, 猜想 a Subroutine Within navigation.pm Declares a Lexical @homeport Variable.
We're taking a reference to the subroutine skipper_greets( ).||We'Re Taking a Reference To The Subroutine skipper_greets( ).
use File::Find;||Use File::Find;
Then @{ $provisions{"The Skipper"} } didn't exist, so Perl created it as well.||Then @{ $provisions{"The Skipper"} } Didn't Exist, So Perl Created It As Well.
Now we've added a second destination to the hash that records information for all bytes originating at ginger.girl.hut.||Now We'Ve added a Second 终点 To The Hash That Records Information For All 字节 originating At ginger.girl.小屋.
Have a logical distribution version number.||Have a 逻辑的 分配 Version Number.
A More Typical Object-Oriented Module: Math::BigInt So as not to get dismayed about how "un-OO" the File::Spec module seems since it doesn't have objects, let's look at yet another core module, Math::BigInt, which can handle integers beyond Perl's native reach.[*]||A More Typical Object-Oriented Module: Math::BigInt So As Not To Get dismayed About How "联合国-OO" The File::Spec Module 似乎 Since It Doesn't Have Objects, Let's Look At 仍然 另一个 Core Module, Math::BigInt, Which Can Handle 整数 Beyond Perl's Native 到达.[*]
This is a long way to go to test $n = = $m, but we wanted to make it as uncomplicated as possible so you could focus on the Test::Builder part.||This Is a Long Way To Go To Test $n = = $m, But We 想要 To Make It As uncomplicated As Possible So You Could 焦点 On The Test::Builder Part.
When the references in a data structure form a loop, Perl's reference-counting system may not be able to recognize and recycle the no-longer-needed memory space||When The References In a Data Structure Form a Loop, Perl's Reference-counting System May Not Be Able To 认出 And recycle The No-长-Needed Memory Space
How do we determine that the second element of the final list was the fourth element of the original list?||How Do We 决心 That The Second Element Of The 最终的 List Was The 第四 Element Of The Original List?
The benefits of OOP become worthwhile when our program (including all external libraries and modules) exceeds about N lines of code.||The 效益 Of OOP 变成 值得做的 When Our Program (Including All External 库 And Modules) exceeds About N Lines Of Code.
## instance methods: sub won { shift->{wins}++; } sub placed { shift->{places}++; } sub showed { shift->{shows}++; } sub lost { shift->{losses}++; } sub standings {||## 例子 Methods: Sub Won { Shift->{赢得}++; } Sub Placed { Shift->{Places}++; } Sub showed { Shift->{Shows}++; } Sub Lost { Shift->{losses}++; } Sub standings {
[] The perl that invoked the Makefile.PL is used for all configuration decisions.||[] The Perl That invoked The Makefile.PL Is Used For All Configuration 决定.
Actually, programmers often make these loops as part of doubly linked lists, linked rings, or a number of other data structures.||Actually, Programmers Often Make These loops As Part Of doubly Linked Lists, Linked rings, Or a Number Of Other Data Structures.
so the require (inside the use) doesn't abort.||So The Require (里面 The Use) Doesn't abort.
Exercise 2 You could create a new distribution for your test module, but you don't have to.||Exercise 2 You Could Create a New 分配 For Your Test Module, But You Don't Have To.
More Than One Reference to Data Chapter 4 explored how to take a reference to an array @skipper and place it into a new scalar variable:||More Than One Reference To Data Chapter 4 explored How To Take a Reference To An Array @skipper And Place It Into a New Scalar Variable:
Check out other test suites, too.||Check Out Other Test suites, Too.
print "The date is " . $date->date . "\n"; print "The month is " . $date->month . "\n"; print "The year is " . $date->year . "\n";||Print "The Date Is " . $Date->Date . "\n"; Print "The 月份 Is " . $Date->月份 . "\n"; Print "The 年 Is " . $Date->年 . "\n";
my $average = eval { $total / $count } ;||My $平均的 = Eval { $总 / $计算 } ;
But it's subverting the OO mechanism, which has its own set of problems.[*] This is a job for an exception mechanism, which is eval.||But It's subverting The OO Mechanism, Which Has Its Own Set Of 问题.[*] This Is a 工作 For An Exception Mechanism, Which Is Eval.
my @sorted = sort qw(Gilligan Skipper Professor Ginger Mary_Ann);||My @分类 = Sort Qw(Gilligan Skipper Professor Ginger Mary_Ann);
which necessarily results in:||Which Necessarily Results In:
It's traditional to shift the first parameter into a variable named $self for instance methods, so stay with that unless you have strong reasons to do otherwise (Perl places no significance on the name $self, however).[] Then we dereference $self as a scalar reference, yielding Mr. Ed.||It's 传统的 To Shift The First Parameter Into a Variable Named $自己 For 例子 Methods, So Stay With That Unless You Have 强壮的 Reasons To Do Otherwise (Perl Places No 重要性 On The Name $自己, However).[] Then We 废弃 $自己 As a Scalar Reference, yielding Mr. Ed.
use Island::Plotting::Maps qw( load_map scale_map draw_map );||Use Island::Plotting::Maps Qw( load_map scale_map draw_map );
my @skipper_with_name = (||My @skipper_with_name = (
If we return the previous parameter, we can easily create "set this value temporarily to that" functions:||If We Return The Previous Parameter, We Can 容易地 Create "Set This Value temporarily To That" Functions:
Exercise 1 The curly braces of the anonymous hash constructor make a reference to a hash.||Exercise 1 The 卷曲的 牙套 Of The Anonymous Hash 构造函数 Make a Reference To a Hash.
Don't use the shell or an external program to get the current directory.||Don't Use The 壳 Or An External Program To Get The Current Directory.
## in Animal use File::Temp qw(tempfile);||## In Animal Use File::Temp qw(tempfile);
We'll show more about that later.||We'我 Show More About That 更晚.
That can be replaced by a simple scalar, initialized at the top of the loop:||That Can Be Replaced By a Simple Scalar, 初始化 At The 顶 Of The Loop:
We'll just show you the code, though.||We'我 Just Show You The Code, Though.
Even when the module ships, we shouldn't abandon the test suite!||Even When The Module ships, We 应该't 抛弃 The Test 随员!
[*] The return would have exited the subroutine that contains this entire section of code.||[*] The Return Would Have Exited The Subroutine That 包含 This 完全的 Section Of Code.
We've now duplicated some of the code from Animal->speak; this can be a maintenance headache.||We'Ve Now duplicated Some Of The Code From Animal->说话; This Can Be a 保养 头疼.
This populates most elements of the hash.||This populates Most Elements Of The Hash.
In fact, you may find that after developing the code one way, you'll want to "refactor" the code a different way.||In Fact, You May 寻找 That After 发展中的 The Code One Way, You'我 Want To "重构" The Code a Different Way.
We lose the ability to call the getters (such as name) on the class itself, rather than an instance.||We 失去 The 能力 To Call The getters (Such As Name) On The Class Itself, Rather Than An 例子.
Use our if you're using a recent enough version of Perl.||Use Our If You'Re Using a 近来的 Enough Version Of Perl.
sub generic_name {||Sub generic_name {
Branch coverage tells us how many of the decision paths we actually follow.||Branch 覆盖率 告诉 Us How Many Of The 决定 paths We Actually 跟随.
The subexpression $total_bytes{$source} is used many times in the large output for loop (and twice in the input loop as well).||The subexpression $total_bytes{$Source} Is Used Many Times In The Large 出产 For Loop (And 两次 In The Input Loop As Well).
package Oogaboogoo::date; use strict; use Exporter; our @ISA = qw(Exporter); our @EXPORT = qw(day mon);||Package Oogaboogoo::Date; Use Strict; Use Exporter; Our @ISA = qw(Exporter); Our @EXPORT = Qw(一天 mon);
package Navigation; @homeport = (21.283, -157.842);||Package Navigation; @homeport = (21.283, -157.842);
We use the same stuff that we used for our first example.||We Use The Same 材料 That We Used For Our First Example.
# # # # # # shuffle ok( defined &shuffle, "The shuffle( ) routine exists"); my $array = [qw( a b c d e f )];||# # # # # # 拖脚走 Ok( Defined &拖脚走, "The 拖脚走( ) Routine Exists"); My $Array = [Qw( a b c d g f )];
You can have an Animal.pm, Horse.pm, and so on.||You Can Have An Animal.pm, Horse.pm, And So On.
That might mean that the test doesn't fail when it should.||That Might Mean That The Test Doesn't 失败 When It Should.
On the other hand, if we want Perl to search Racer and its subclasses before searching Horse, we can put them into @ISA in that order (see Figure 14-1).||On The Other Hand, If We Want Perl To 搜查 Racer And Its 子类 Before 搜索 Horse, We Can Put Them Into @ISA In That Order (See Figure 14-1).
The sort operator puts its input list in order.||The Sort Operator 把 Its Input List In Order.
# remove package name|| # 移开 Package Name
For a more automated way of creating code to do this, which makes it easy to turn the autoloading off during development and debugging, see the AutoLoader and SelfLoader core module documentation.||For a More automated Way Of Creating Code To Do This, Which 使 It Easy To 转向 The autoloading Off 在 进展 And Debugging, See The AutoLoader And SelfLoader Core Module 提供文件.
The most common list operator is probably print.||The Most Common List Operator Is Probably Print.
sub initialize_provisions_list {||Sub initialize_provisions_list {
If we don't change STDOUT in our program, of course, this is a moot point.||If We Don't Change STDOUT In Our Program, Of Course, This Is a moot 尖.
The subroutines defined in both libraries are available to this program.||The Subroutines Defined In Both 库 Are Available To This Program.
with something that reads more like English:||With Something That Reads More Like English:
$ cpan cpan> readme Island::Plotting::Maps||$ Cpan Cpan> readme Island::Plotting::Maps
We do something different for shuffle.||We Do Something Different For 拖脚走.
We can do this a number of ways.||We Can Do This a Number Of Ways.
if ($tv_horse->can('eat')) {||If ($tv_horse->Can('吃')) {
Since we've set up our code to use a module interface, it's not that much work to switch modules.||Since We'Ve Set Up Our Code To Use a Module Interface, It's Not That Much Work To Switch Modules.
We don't have to do any tricky magic to make it work. ''''''''''''''''''''''''''''''''' log_message( $log_fh, 'My name is Mr. Ed' );||We Don't Have To Do Any 巧妙的 Magic To Make It Work. ''''''''''''''''''''''''''''''''' log_message( $log_fh, 'My Name Is Mr. Ed' );
The sum( ) routine takes a list of values and returns the numeric sum.||The 总数( ) Routine Takes a List Of Values And Returns The 数值 总数.
In short, most of them compare their first argument, which is the result we got, to the second argument, which is what we expected.||In 短的, Most Of Them 比较 Their First Argument, Which Is The Result We Got, To The Second Argument, Which Is What We Expected.
Because this function is documented to work on $_ by default, we should ensure that it does so.||Because This Function Is Documented To Work On $_ By Default, We Should Ensure That It Does So.
Using do The Skipper placed a few common navigation subroutines into navigation.pm.||Using Do The Skipper Placed a Few Common 航行 Subroutines Into navigation.pm.
From there it's just a matter of programming, and it doesn't matter much what we actually print.||From There It's Just a Matter Of Programming, And It Doesn't Matter Much What We Actually Print.
In the CPAN.pm shell, for example, you can say:[]||In The Perl综合典藏网.Pm 壳, For Example, You Can Say:[]
We bring the contents of that file in and give it to the is( ) function.||We 拿来 The Contents Of That File In And Give It To The Is( ) Function.
Originally, the mandatory true value was intended as a way for an included file to signal to the invoker that the code was processed successfully and that no error condition existed.||Originally, The 强制性 True Value Was 预期 As a Way For An 包括 File To 信号 To The invoker That The Code Was processed 成功地 And That No Error 状态 existed.
## does NOT import guess_direction_toward!|| ## Does NOT Import guess_direction_toward!
It treats each item as a string and sorts them in string order.||It treats Each 条款 As a String And 各样 Them In String Order.
Documentation is just as important as code, since other people can't use our perfect, lovely code unless they know what to do with it.||文档 Is Just As Important As Code, Since Other People Can't Use Our 完美的, 好看的 Code Unless They Know What To Do With It.
use Test::More tests => 17;||Use Test::More 测试 => 17;
Now, we don't want to decide whether $_ has an odd digit sum.||Now, We Don't Want To Decide Whether $_ Has An 古怪的 数字 总数.
SEE ALSO||引申阅读
We want to strip off the package information and get just the method name.||We Want To Strip Off The Package Information And Get Just The Method Name.
Let's start with File::Basename, that same module from the core distribution.||Let's Start With File::Basename, That Same Module From The Core 分配.
You'll know you're done when the tests pass.||You'我 Know You'Re Done When The 测试 Pass.
However, nearly everyone has adopted the die if ... strategy instead, deeming the "last expression evaluated is false" strategy a mere historic annoyance.||However, 几乎 Everyone Has adopted The Die If ... 战略 Instead, deeming The "Last Expression 评估 Is False" 战略 a 仅仅的 历史性的 烦恼.
For example, let's sort the list of names from earlier:||For Example, Let's Sort The List Of Names From Earlier:
Exercises You can find the answers to these exercises in "Answers for Chapter 6" in the Appendix.||Exercises You Can 寻找 The answers To These exercises In "Answers For Chapter 6" In The Appendix.
for my $source (@sources) {||For My $Source (@来源) {
Perl returns a reference to that hash as a single value that fits wherever a scalar fits.||Perl Returns a Reference To That Hash As a Single Value That fits 无论哪里 a Scalar fits.
Creating Getters and Setters More Easily If all that coding for creating accessors using AUTOLOAD looks messy, rest assured that we really don't need to tackle it, because there's a CPAN module that does it a bit more directly: Class::MethodMaker.[*]||Creating Getters And Setters More Easily If All That coding For Creating accessors Using AUTOLOAD Looks messy, 休息 感到放心的 That We Really Don't Need To 用具 It, Because There's a Perl综合典藏网 Module That Does It a Bit More 直接地: Class::MethodMaker.[*]
Again, if the original syntax is:||Again, If The Original Syntax Is:
The MANIFEST file is really a table of contents for our distribution.||The MANIFEST File Is Really a Table Of Contents For Our 分配.
if ($AUTOLOAD =~ /::set_(\w+)$/ and grep $1 eq $_, @elements) {||If ($AUTOLOAD =~ /::set_(\w+)$/ And Grep $1 Eq $_, @Elements) {
Unless you are creating new IO modules, you probably shouldn't use IO::Handle directly.||Unless You Are Creating New IO Modules, You Probably 应该't Use IO::Handle 直接地.
Notice that the top level hash now has three elements, and each element has a different hash reference value.||Notice That The 顶 Level Hash Now Has Three Elements, And Each Element Has a Different Hash Reference Value.
We can add or rearrange lines quickly, or comment out lines without destroying the integrity of our list.||We Can 增添 Or rearrange Lines 快, Or Comment Out Lines Without 破坏 The 完整性 Of Our List.
The unless exists test ensures that we won't delete someone's provision list if his list is split in two places in the datafile.||The Unless Exists Test ensures That We Won't Delete Someone's 准备 List If 他的 List Is Split In Two Places In The datafile.
We do this by extending the named subroutine and adding four additional fields (wins, places, shows, losses, for first-, second-, and third-place finishes, and none of the above):||We Do This By Extending The Named Subroutine And Adding 四 Additional 领域 (赢得, Places, Shows, losses, For First-, Second-, And 第三-Place finishes, And 没人 Of The Above):
When dereferenced, a subroutine reference can see all visible lexical variables when the reference to the subroutine is taken.||When dereferenced, a Subroutine Reference Can See All Visible Lexical Variables When The Reference To The Subroutine Is Taken.
It prints:||It Prints:
print $log_fh "We have no bananas today!\n";||Print $log_fh "We Have No bananas 今天现在!\n";
use Storable; my $result = retrieve 'some_file'; use Data::Dumper; $Data::Dumper::Purity = 1; print Dumper(@$result);||Use Storable; My $Result = retrieve 'some_file'; Use Data::Dumper; $Data::Dumper::Purity = 1; Print Dumper(@$Result);
The object can include the filehandle for this temporary file in its instance data.||The Object Can Include The Filehandle For This temporary File In Its 例子 Data.
That test is free.||That Test Is Free.
This would fail if the module had a syntax error, or if you forgot to have that true value at the end of the file.||This Would 失败 If The Module Had a Syntax Error, Or If You forgot To Have That True Value At The End Of The File.
Print the resulting list.||Print The 造成 List.
In the string we give to eval, we interpolate the value of $operator into the string.||In The String We Give To Eval, We interpolate The Value Of $Operator Into The String.
Everything else already works.||Everything Else Already Works.
Choose the version number carefully, because many other things use it and depend on it:||Choose The Version Number 仔细, Because Many Other Things Use It And 依靠 On It:
Besides opening named files, we might want to open an anonymous temporary file.||Besides 开始 Named Files, We Might Want To Open An Anonymous temporary File.
Can we factor out that commonality even further?||Can We 因素 Out That commonality Even Further?
It also outputs some diagnostic information that tells us what the test expected and what we actually gave it.||It Also outputs Some 诊断 Information That 告诉 Us What The Test Expected And What We Actually 给 It.
$ perl Makefile.PL PREFIX=/path/to/shared/area||$ Perl Makefile.PL PREFIX=/Path/To/Shared/Area
The string form is portable back to older Perls.[] If the match succeeds, it's a good test.||The String Form Is 手提的 Back To Older Perls.[] If The Match 成功, It's a Good Test.
## include animal classes from previous chapter...||## Include 动物 类 From Previous 章...
Exercises You can find the answers to these exercises in "Answers for Chapter 11" in the Appendix.||Exercises You Can 寻找 The answers To These exercises In "Answers For Chapter 11" In The Appendix.
my $fh; my $scalar;||My $Fh; My $Scalar;
That's an error in our test, not in the module, so we should correct that test error and retry.||That's An Error In Our Test, Not In The Module, So We Should 正确的 That Test Error And retry.
If it is neither, death awaits:||If It Is Neither, 死 awaits:
Now, since Perl is a mix of procedural, functional, object-oriented, and other sorts of language types, Perl modules come in a variety of different interfaces.||Now, Since Perl Is a 混合 Of procedural, Functional, Object-Oriented, And Other 各样 Of 语言 Types, Perl Modules 来到 In a 多样（性） Of Different 接口.
Chapter 3, Using Modules Use Perl's core modules, as well as modules from other people.||Chapter 3, Using Modules Use Perl's Core Modules, As Well As Modules From Other People.
Well, in the same way that taking a reference to an array lets you have the same code work on different arrays at different times, taking a reference to a subroutine allows the same code to call different subroutines at different times.||Well, In The Same Way That Taking a Reference To An Array Lets You Have The Same Code Work On Different Arrays At Different Times, Taking a Reference To a Subroutine Allows The Same Code To Call Different Subroutines At Different Times.
We haven't told you about object-oriented programming (OOP) yet (it's in Chapter 11, so we almost have), but in this case, you just have to follow the example in its documentation.||We 还't told You About Object-Oriented Programming (OOP) 仍然 (It's In Chapter 11, So We Almost Have), But In This Case, You Just Have To 跟随 The Example In Its 提供文件.
But we want to make $lost->name access the name, and that's now messed up because it's expecting a scalar reference.||But We Want To Make $Lost->Name Access The Name, And That's Now messed Up Because It's expecting a Scalar Reference.
Testing the POD format isn't all we can do, though.||Testing The POD Format Isn't All We Can Do, Though.
Note that just before we start testing the eat method, we (re)open STDOUT to our temporary output file.||Note That Just Before We Start testing The 吃 Method, We (Re)Open STDOUT To Our temporary 出产 File.
The Cwd module (cwd is an acronym for "current working directory") automatically imports the getcwd function.||The Cwd Module (cwd Is An acronym For "Current Working Directory") Automatically Imports The getcwd Function.
For example:||For Example:
You might have to wait a bit for PAUSE to fetch remote files, but they usually show up pretty quickly.||You Might Have To 等候 a Bit For PAUSE To 去取来 遥远的 Files, But They Usually Show Up 精致的 快.
At the moment, we just want to use the module.||At The Moment, We Just Want To Use The Module.
my @gilligan = qw(red_shirt hat lucky_socks water_bottle); my @gilligan_with_name = ('Gilligan', \@gilligan);||My @gilligan = Qw(red_shirt 帽子 lucky_socks water_bottle); My @gilligan_with_name = ('Gilligan', \@gilligan);
No matter where we are in the world, we can find a nearby CPAN mirror from which to pull the latest goodies.||No Matter Where We Are In The World, We Can 寻找 a 附近的 Perl综合典藏网 镜子 From Which To 拖 The 最新 goodies.
We should fetch the data by using a subroutine.||We Should 去取来 The Data By Using a Subroutine.
After that, your distribution is on its way to CPAN proper.||After That, Your 分配 Is On Its Way To Perl综合典藏网 合适的.
The remaining directories are where Perl searches for system-wide libraries and modules, as we'll see later.||The Remaining directories Are Where Perl searches For System-宽的 库 And Modules, As We'我 See 更晚.
For example, suppose someone decides that the word goes in the output of the Animal class is a bug.||For Example, 猜想 Someone decides That The 字 去 In The 出产 Of The Animal Class Is a 臭虫.
This module requires these other modules and libraries:||This Module Requires These Other Modules And 库:
[] A thingy, as defined in Perl's own documentation, is anything a reference points to, such as an object.||[] A thingy, As Defined In Perl's Own 提供文件, Is Anything a Reference 分 To, Such As An Object.
Well, imagine a reference to the array @all_with_names:||Well, 想象 a Reference To The Array @all_with_names:
That one is the same as $ginger[2][1], whose base is the array @ginger, rather than the scalar $ginger.||That One Is The Same As $姜[2][1], Whose Base Is The Array @姜, Rather Than The Scalar $姜.
For any particular program we want to measure, we simply load the Devel::Cover module when we run it.||For Any Particular Program We Want To 尺寸, We Simply Load The Devel::Cover Module When We Run It.
The bottom line is simply: Perl does the right thing.||The 底部 Line Is Simply: Perl Does The Right Thing.
Of course, this is far too much typing, so we can use the spaceship operator instead:||Of Course, This Is Far Too Much 打字, So We Can Use The 太空船 Operator Instead:
The package declaration at the beginning of this file tells Perl to virtually insert Navigation:: in front of most names within the file.||The Package Declaration At The 开端 Of This File 告诉 Perl To 几乎 插入 Navigation:: In Front Of Most Names Within The File.
In this chapter, we give you a taste of some of the more popular test modules.||In This 章, We Give You a 味道 Of Some Of The More 受欢迎的 Test Modules.
use Test::More tests => 1; use Test::NoWarnings;||Use Test::More 测试 => 1; Use Test::NoWarnings;
It works in the same way as Data::Dumper.||It Works In The Same Way As Data::Dumper.
Because of that, it has more than 9, 000 modules (as we write this) and is the model that other languages wish they could adopt.[*]||Because Of That, It Has More Than 9, 000 Modules (As We Write This) And Is The Model That Other Languages Wish They Could 采用.[*]
if( $type =~ /^s/i ) {||If( $Type =~ /^s/我 ) {
On systems that support this sort of thing, we simply create the new object to get a read-write filehandle.||On 系统 That Support This Sort Of Thing, We Simply Create The New Object To Get a Read-Write Filehandle.
Most libraries have only one package declaration at the top of the file.||Most 库 Have Only One Package Declaration At The 顶 Of The File.
If you have a web site set up for your module, mention it here.||If You Have a 网 场所 Set Up For Your Module, 提及 It Here.
Yes, with inheritance !||Yes, With Inheritance !
This does not stop someone from saying Navigate::SeatOfPants::according_to_GPS (if it existed), but at least now it's obvious that they're using something we didn't intend to offer them.||This Does Not Stop Someone From Saying Navigate::SeatOfPants::according_to_GPS (If It existed), But At Least Now It's 明显的 That They'Re Using Something We Didn't 打算 To 提供 Them.
You can see that map is pretty versatile; we can produce any number of output items for each input item.||You Can See That Map Is 精致的 多才多艺的; We Can Produce Any Number Of 出产 物品 For Each Input 条款.
If the idea of proposing a conference talk intimidates you a bit, or you don't want to wait that long, look to your local Perl user group .||If The 思想 Of 提出 a 会议 谈话 intimidates You a Bit, Or You Don't Want To 等候 That Long, Look To Your Local Perl User Group .
If the print is successful, it returns true, which lets grep know that we want to keep that pair.||If The Print Is 成功的, It Returns True, Which Lets Grep Know That We Want To 保持 That 对.
What happens if we want to pass around these filehandles so we could share them with other parts of our code, such as libraries?||What Happens If We Want To Pass Around These Filehandles So We Could 份 Them With Other 部分 Of Our Code, Such As 库?
The "new modules" section of http://use.perl.org||The "New Modules" Section Of http://use.perl.org
As we saw earlier in Chapter 16, different module creation tools do different things and create one or more default tests.||As We 锯 Earlier In Chapter 16, Different Module 创造 Tools Do Different Things And Create One Or More Default 测试.
If the method name is eat, we'll define eat (which we had previously in a string but had not compiled) and then jump into it with a special construct that replaces the current subroutine invocation of AUTOLOAD with an invocation of eat, just as if we invoked &eat instead of AUTOLOAD.[*] After the first AUTOLOAD hit, the eat subroutine is now defined, so we won't be coming back here.||If The Method Name Is 吃, We'我 Define 吃 (Which We Had Previously In a String But Had Not Compiled) And Then 跳跃 Into It With a Special Construct That Replaces The Current Subroutine 调用 Of AUTOLOAD With An 调用 Of 吃, Just As If We invoked &吃 Instead Of AUTOLOAD.[*] After The First AUTOLOAD 打, The 吃 Subroutine Is Now Defined, So We Won't Be coming Back Here.
We can change like to unlike if we expect the match to fail instead.||We Can Change Like To 不同的 If We 盼望 The Match To 失败 Instead.
The h2xs tool generates a template Makefile.PL that you probably won't even need to touch for single-module distributions:||The h2xs 工具 产生 a template Makefile.PL That You Probably Won't Even Need To 碰 For Single-Module 分布:
Exercise 2 [35 min] Parse the International Standard Book Number from the back of this book (0596102062).||Exercise 2 [35 min] Parse The International Standard Book Number From The Back Of This 书 (0596102062).
One way to cheat is to use 1..@sorted_positions instead of 0..$#sorted_positions, so a way to dump it all out looks like:||One Way To Cheat Is To Use 1..@sorted_positions Instead Of 0..$#sorted_positions, So a Way To 倾倒 It All Out Looks Like:
Testing on Multiple Platforms The CPAN Testers (http://testers.cpan.org) automatically test almost all modules uploaded to CPAN.||Testing On Multiple Platforms The Perl综合典藏网 Testers (http://testers.cpan.org) Automatically Test Almost All Modules uploaded To Perl综合典藏网.
To search for a method, Perl wanders through the @ISA TRee until it finds a match or fails.||To 搜查 For a Method, Perl wanders 通过 The @ISA TRee Until It 发现 a Match Or 失败.
When we modify %subs or it goes out of scope, the values have their reference counts reduced, recycling the contained data.||When We Modify %Subs Or It 去 Out Of Scope, The Values Have Their Reference 计数 减少, recycling The 包含 Data.
# a provision||# a 准备
Normally, modern Perl doesn't use ASCII; instead, it uses a default sort order, depending on the current locale and character set.||Normally, Modern Perl Doesn't Use 美国信息交换标准码; Instead, It Uses a Default Sort Order, Depending On The Current 本地 And Character Set.
In Chapter 14, you'll learn about the isa method, which lets you check more simply whether something is an available animal, even allowing for the possibility that it is an animal that was added to the program after the check was written.||In Chapter 14, You'我 学习 About The isa Method, Which Lets You Check More Simply Whether Something Is An Available 动物, Even 允许 For The 可能性 That It Is An 动物 That Was added To The Program After The Check Was Written.
Exercise 2 Our script looks the same as the previous answer with the addition of the UNIVERSAL::debug routine.||Exercise 2 Our 临时单据 Looks The Same As The Previous Answer With The 增加 Of The UNIVERSAL::debug Routine.
{ $n = -1; eval { sqrt($n) }; ok( $@, '$@ is set after sqrt(-1)' ); }||{ $n = -1; Eval { sqrt($n) }; Ok( $@, '$@ Is Set After sqrt(-1)' ); }
Let's compare this to the full curly-brace form again:||Let's 比较 This To The Full 卷曲的-支撑 Form Again:
You can enable them with either -w or use warnings;.||You Can 使能够 Them With Either -w Or Use 警告;.
We simply list the modules we want to install, and it handles it for us.||We Simply List The Modules We Want To 安装, And It 处理 It For Us.
That's still a bit too much work.||That's Still a Bit Too Much Work.
The positions here are 0-based, so add 1 to get "human" ordinal values.||The 位置 Here Are 0-基于, So 增添 1 To Get "人的" ordinal Values.
[] Well, you would be able to do this, if there were actually a module on CPAN named Island::Plotting::Maps.||[] Well, You Would Be Able To Do This, If There Were Actually a Module On Perl综合典藏网 Named Island::Plotting::Maps.
use Test::More; eval "use Test::Pod 1.00"; plan skip_all => "Test::Pod 1.00 required for testing||Use Test::More; Eval "Use Test::Pod 1.00"; 计划平面图 skip_all => "Test::Pod 1.00 要求 For testing
So far, you have seen references to three main Perl data types: scalars, arrays, and hashes.||So Far, You Have Seen References To Three Main Perl Data Types: Scalars, Arrays, And Hashes.
That's lot of typing and not very general.||That's 许多 Of 打字 And Not Very General.
Finally, if we choose to send the output to a scalar (either alone or with a file), we print the scalar value to STDOUT to ensure the right thing ended up there.||Finally, If We 选择 To 派遣 The 出产 To a Scalar (Either 单独的 Or With a File), We Print The Scalar Value To STDOUT To Ensure The Right Thing 结束 Up There.
print "a $class goes ", $class->sound, "!\n"; # but $class is Cow, so... print 'a Cow goes ', Cow->sound, "!\n"; # which invokes Cow->sound, returning 'moooo', so print 'a Cow goes ', 'moooo', "!\n";||Print "a $Class 去 ", $Class->声, "!\n"; # But $Class Is Cow, So... Print 'a Cow 去 ', Cow->声, "!\n"; # Which invokes Cow->声, Returning 'moooo', So Print 'a Cow 去 ', 'moooo', "!\n";
The syntax for this is a bit tricky.||The Syntax For This Is a Bit 巧妙的.
The Makefile built by the default invocation of Makefile.PL presumes that the module will be installed in the system-wide Perl directory that all Perl programs can access directly with the built-in @INC path.||The Makefile Built By The Default 调用 Of Makefile.PL 假设 That The Module Will Be 安装 In The System-宽的 Perl Directory That All Perl Programs Can Access 直接地 With The Built-In @INC Path.
This results in:||This Results In:
my $total_size = 0; find(sub { $total_size += -s if -f }, '.'); print $total_size, "\n";||My $total_size = 0; 寻找(Sub { $total_size += -s If -f }, '.'); Print $total_size, "\n";
A README file||A README File
We check the result of the operation by looking for a defined value in the filehandle reference variable.||We Check The Result Of The Operation By 看 For a Defined Value In The Filehandle Reference Variable.
When we run this simple script, we get this output.||When We Run This Simple 临时单据, We Get This 出产.
If we don't put our IO::File object in a simple scalar variable, some operations require a slightly modified syntax to work.||If We Don't Put Our IO::File Object In a Simple Scalar Variable, Some 操作 Require a 轻微地 Modified Syntax To Work.
Inheriting the Constructor Was there anything specific to Horse in that method?||Inheriting The Constructor Was There Anything 特殊的 To Horse In That Method?
One quick trick is to clean things up as you would want them in the distribution, and then invoke make manifest, which updates the MANIFEST file to be exactly what you are holding at the moment.[*]||One 快的 诡计 Is To 清洁的 Things Up As You Would Want Them In The 分配, And Then 调用 Make 表明, Which 更新 The MANIFEST File To Be Exactly What You Are 支持 At The Moment.[*]
The sort block must return a coded value to indicate the sort order.||The Sort Block Must Return a coded Value To 指明 The Sort Order.
sub named { # class method||Sub Named { # Class Method
Trivial make test Testing.||Trivial Make Test Testing.
For greater visibility, you can also prepare a short notice to be posted to the Usenet comp.lang.perl.announce newsgroup.||For 更大的 Visibility, You Can Also 准备 a 短的 Notice To Be 张贴 To The Usenet comp.lang.perl.announce newsgroup.
Yes, they are also in a package, called main.||Yes, They Are Also In a Package, Called Main.
my @skipper = qw(blue_shirt hat jacket preserver sunscreen); my $reference_to_skipper = \@skipper;||My @skipper = Qw(blue_shirt 帽子 短外套 preserver sunscreen); My $reference_to_skipper = \@skipper;
A simple version looks like:||A Simple Version Looks Like:
Thus, we can rewrite the roster creation as:||Thus, We Can 重写 The roster 创造 As:
sub mon {||Sub mon {
Again, try not to peek; you'll ruin the value of the exercise.||Again, Try Not To peek; You'我 废墟 The Value Of The 锻炼.
Hence, h 2 (to) XS.||Hence, h 2 (To) XS.
We're counting on no strict 'refs' mode, certainly not recommended for larger programs.[*] And why was that necessary?||We'Re counting On No Strict '裁判' 方式, Certainly Not recommended For larger Programs.[*] And Why Was That 必要的?
is(1 + 2, 3, '1 + 2 is 3'); is(2 * 4, 8, '2 * 4 is 8');||Is(1 + 2, 3, '1 + 2 Is 3'); Is(2 * 4, 8, '2 * 4 Is 8');
Can we put these coderefs into a larger data structure?||Can We Put These coderefs Into a larger Data Structure?
But the block is a true block and may include lexical variables ("my" variables) and any other arbitrary statements.||But The Block Is a True Block And May Include Lexical Variables ("My" Variables) And Any Other 专横的 Statements.
foreach my $operator ( qw(+ - * /) ) {||Foreach My $Operator ( Qw(+ - * /) ) {
my %passenger_1 = {||My %passenger_1 = {
In Example One above, the base case could be a table cell that is empty.||In Example One Above, The Base Case Could Be a Table 细胞 That Is Empty.
On each pass, only the handle pairs that evaluate as true in the grep CONDITION survive.||On Each Pass, Only The Handle 双 That 估价 As True In The Grep CONDITION 幸免于.
my $ref_to_gilligan_info;||My $ref_to_gilligan_info;
Michael Schwern earned the title of "Perl Test Master" for getting the Perl core completely tested and still constantly beats the drum for "test! test! test!" in the community.||Michael Schwern earned The 标题 Of "Perl Test Master" For 得到 The Perl Core 完全地 测试 And Still 经常地 beats The 鼓 For "Test! Test! Test!" In The 团体.
Also, if you're not the system administrator, it's unlikely that you can change those central Perl directories, because that would be a great way to insert a Trojan horse for privileged users to stumble across.[]||Also, If You'Re Not The System administrator, It's 未必的 That You Can Change Those 中心的 Perl directories, Because That Would Be a 大的 Way To 插入 a Trojan 马 For 有特权的 Users To 绊跌 横越.[]
We compare that with:||We 比较 That With:
## in Animal sub named {||## In Animal Sub Named {
What if we wanted to count down?||What If We 想要 To 计算 向下?
This is also handy for naming the files, as the next statement shows.||This Is Also 方便的 For Naming The Files, As The 下一次 Statement Shows.
The input loop is nearly the same as given in the chapter, but it skips comment lines.||The Input Loop Is 几乎 The Same As Given In The 章, But It 翻斗车 Comment Lines.
We still have to keep the @ISA and the initial search package in sync (changes in one must be considered for changes in the other).||We Still Have To 保持 The @ISA And The Initial 搜查 Package In sync (Changes In One Must Be Considered For Changes In The Other).
This is reasonable because the containing object may need to reference its contents in order to disappear gracefully.||This Is 有理的 Because The Containing Object May Need To Reference Its Contents In Order To 失踪 gracefully.
[*] When you're bored, you might find it amusing to do a search on CPAN for all places in which blah blah blah occurs.||[*] When You'Re 无聊, You Might 寻找 It amusing To Do a 搜查 On Perl综合典藏网 For All Places In Which blah blah blah Occurs.
If someone (or something) else (such as a coworker or a web server) executes your program, it's unlikely that the proper environment variable or command-line option will be present.||If Someone (Or Something) Else (Such As a coworker Or a 网 server) 实行 Your Program, It's 未必的 That The 合适的 环境 Variable Or 命令-Line 选择 Will Be 在场的.
my %provisions; my $person;||My %provisions; My $人;
Structure of This Book You should read this book from front to back, stopping to do the exercises.||Structure Of This Book You Should Read This 书 From Front To Back, stopping To Do The exercises.
Your program will fail because it can't find your locally installed module.||Your Program Will 失败 Because It Can't 寻找 Your Locally 安装 Module.
Finally, once we've finished going through the tests, we call cover again to turn the results into something we can read.||Finally, Once We'Ve 制成的 Going 通过 The 测试, We Call 盖 Again To 转向 The Results Into Something We Can Read.
The optional second argument lets us name the test.||The Optional Second Argument Lets Us Name The Test.
We can just as easily make it a blessed hash reference as a blessed scalar reference, as long as everything that looks at the reference is changed accordingly.||We Can Just As 容易地 Make It a 有福的 Hash Reference As a 有福的 Scalar Reference, As Long As Everything That Looks At The Reference Is 改变 相应地.
[*] Except lexicals, as we'll show in a moment.||[*] Except Lexicals, As We'我 Show In a Moment.
my($sec, $min, $hour, $mday, $mon, $year, $wday) = localtime; my $day_name = day($wday); my $mon_name = mon($mon); $year += 1900; print "Today is $day_name, $mon_name $mday, $year.\n";||My($sec, $min, $小时, $mday, $mon, $年, $wday) = localtime; My $day_name = 一天($wday); My $mon_name = mon($mon); $年 += 1900; Print "Today Is $day_name, $mon_name $mday, $年.\n";
Although this code meets the initial requirements, we've got two problems to deal with:||Although This Code meets The Initial 要求, We'Ve Got Two 问题 To 处理 With:
Exercise 1 my @sorted =||Exercise 1 My @分类 =
draw_map($filehandle)||draw_map($Filehandle)
See the perllocale (not perllocal!) manpage.||See The perllocale (Not perllocal!) manpage.
That's our story and we're sticking to it.||That's Our 故事 And We'Re sticking To It.
The result is just 16, 32, and 64.||The Result Is Just 16, 32, And 64.
my @result = map {||My @Result = Map {
Even though an OO module typically exports nothing, we might choose to export a named constructor or management routine.||Even Though An OO Module 典型的 exports Nothing, We Might 选择 To Export a Named 构造函数 Or 管理（人员） Routine.
The Extra Parameter of Method Invocation The invocation of:||The Extra Parameter Of Method Invocation The 调用 Of:
Be aware that use lib indeed runs at compile time, so this also doesn't work:||Be 知道的 That Use lib 的确 跑 At Compile Time, So This Also Doesn't Work:
By default, as Perl orders the items, it uses a string comparison.||By Default, As Perl orders The 物品, It Uses a String 比较.
@{$root->[2][1]}||@{$Root->[2][1]}
We'll also want to initialize "no wins of no races" when we create the RaceHorse.||We'我 Also Want To Initialize "No 赢得 Of No races" When We Create The RaceHorse.
The best way to provide this training is with a series of exercises after every half-hour to hour of presentation.||The Best Way To Provide This 训练 Is With a 系列 Of exercises After Every 一半-小时 To 小时 Of 提出.
$ make ziptest||$ Make ziptest
Unless Perl executes the run phase for this code, the variable has its initial undef value.||Unless Perl 实行 The Run 阶段 For This Code, The Variable Has Its Initial Undef Value.
Only the name of the package and the specific sound change.||Only The Name Of The Package And The 特殊的 声 Change.
Gilligan: 1 coconut Gilligan: 1 banana||Gilligan: 1 coconut Gilligan: 1 香蕉
Exercise [30 min] Package up the Animal and Horse classes from Chapter 12 as a distribution.||Exercise [30 min] Package Up The Animal And Horse 类 From Chapter 12 As a 分配.
At this point, @skipper_with_name has two elements, the second of which is an array reference similar to what we passed to the subroutine.||At This 尖, @skipper_with_name Has Two Elements, The Second Of Which Is An Array Reference Similar To What We Passed To The Subroutine.
Chapter 15, Exporter How use works, how we can decide what to export, and how we can create our own import routines.||Chapter 15, Exporter How Use Works, How We Can Decide What To Export, And How We Can Create Our Own Import Routines.
First define the Animal class with a single method:||First Define The Animal Class With a Single Method:
Cow->speak; Horse->speak; Sheep->speak;||Cow->说话; Horse->说话; Sheep->说话;
If that means the reference count has become zero (as in this example), Perl also eliminates the arrays themselves.||If That Means The Reference 计算 Has 变成 零 (As In This Example), Perl Also eliminates The Arrays 他们、它们自己.
(And we can't make our entire team of programmers add a common PERL5LIB variable.||(And We Can't Make Our 完全的 小队 Of Programmers 增添 a Common PERL5LIB Variable.
Adding these directories automatically simplifies the task of installing Perl modules that include architecture- or version-sensitive components, such as compiled C code.||Adding These directories Automatically simplifies The 工作 Of installing Perl Modules That Include 建筑学- Or Version-Sensitive 组件, Such As Compiled C Code.
We won't go too deeply into the theory and practice of coverage tests, but there are many things that we can test.||We Won't Go Too Deeply Into The 理论 And Practice Of 覆盖率 测试, But There Are Many Things That We Can Test.
Each evaluation of the expression gives a portion of the many results.||Each 估价 Of The Expression Gives a 一份 Of The Many Results.
$temp_fh->close;||$temp_fh->Close;
We simply need to say H2xs -XAn, followed by the name of the modulein this case, Island::Plotting::Maps.[] Here's what the output looks like:[Â§]||We Simply Need To Say H2xs -XAn, 跟着 By The Name Of The modulein This Case, Island::Plotting::Maps.[] Here's What The 出产 Looks Like:[Â§]
then when we remove @all_with_names, we still have one live reference to what was formerly @gilligan, and the data from there downward remain alive.||Then When We 移开 @all_with_names, We Still Have One 居住生存 Reference To What Was 从前 @gilligan, And The Data From There 向下的 依旧的 活着的.
The Module::Build process looks the same, except that we start with a Build.PL file.||The Module::Build 程序 Looks The Same, Except That We Start With a Build.PL File.
Because that was the final line of data (in this run), a step brings us down to the lower foreach loop:||Because That Was The 最终的 Line Of Data (In This Run), a 脚步 brings Us 向下 To The Lower Foreach Loop:
If the variable on the left is a false value (such as undef), it's replaced by the value on the right, but if it's true (such as a filehandle), the value on the right won't even be evaluated.||If The Variable On The Left Is a False Value (Such As Undef), It's Replaced By The Value On The Right, But If It's True (Such As a Filehandle), The Value On The Right Won't Even Be 评估.
When a new RaceHorse is named, either pull the existing standings from the database or invent zeros for everything:||When a New RaceHorse Is Named, Either 拖 The 现存的 standings From The database Or 发明 zeros For Everything:
Exercise 2 [15 min] Read up on the Benchmark module, included with Perl.||Exercise 2 [15 min] Read Up On The Benchmark Module, 包括 With Perl.
However, we cannot drop the braces if the value within the braces is not a simple scalar variable.||However, We Cannot 落下 The 牙套 If The Value Within The 牙套 Is Not a Simple Scalar Variable.
For example, this works:||For Example, This Works:
From the earlier example, we plug in YAML where we had Data::Dumper, and use Dump( ) where we had Dumper( ).||From The Earlier Example, We 塞子 In YAML Where We Had Data::Dumper, And Use Dump( ) Where We Had Dumper( ).
Next, it evaluates the entire block of code.||Next, It 评价 The 完全的 Block Of Code.
[*] Actually, we can use any negative or positive number in place of -1 and +1, respectively.||[*] Actually, We Can Use Any 否定的 Or 明确的 Number In Place Of -1 And +1, 各自.
You might peek in the perlfaq to find a shuffle( ) implementation.||You Might peek In The perlfaq To 寻找 a 拖脚走( ) 实行.
At the end of the naked block, the $count variable goes out of scope.||At The End Of The 裸体的 Block, The $计算 Variable 去 Out Of Scope.
This is implemented as:||This Is 实施 As:
Exercises You can find the answers to these exercises in "Answers for Chapter 8" in the Appendix.||Exercises You Can 寻找 The answers To These exercises In "Answers For Chapter 8" In The Appendix.
$_ = 100; is( sqrt, 10, 'sqrt( ) works on $_ by default' );||$_ = 100; Is( sqrt, 10, 'sqrt( ) Works On $_ By Default' );
Can we say somehow that a Mouse does everything any other Animal does, but add in the extra comment?||Can We Say 以某种方式 That a Mouse Does Everything Any Other Animal Does, But 增添 In The Extra Comment?
[*] Extending @INC with either PERL5LIB orI also automatically adds the versionand architecture-specific subdirectories of the specified directories.||[*] Extending @INC With Either PERL5LIB orI Also Automatically Adds The versionand 建筑学-特殊的 subdirectories Of The 指定 directories.
On a Windows system, it would typically use backslashes as directory separators .||On a 微软视窗操作系统 System, It Would 典型的 Use backslashes As Directory separators .
As before, Perl closes these files when the scalar variable goes out of scope, but if that is not enough, we do it ourselves explicitly.||As Before, Perl closes These Files When The Scalar Variable 去 Out Of Scope, But If That Is Not Enough, We Do It 我们自己 清晰地.
This is a good thing because it lets us ensure that the most fundamental tests are executed before the more exotic tests simply by controlling the names.||This Is a Good Thing Because It Lets Us Ensure That The Most 基本的 测试 Are Executed Before The More exotic 测试 Simply By controlling The Names.
Closures are "closed" only on lexical variables, since lexical variables eventually go out of scope.||Closures Are "关闭的" Only On Lexical Variables, Since Lexical Variables 最终 Go Out Of Scope.
uss_minnow, with contents:||uss_minnow, With Contents:
We must have had 300 emails on the subject.||We Must Have Had 300 emails On The Subject.
Each chapter builds on preceding chapters, and we'll assume that you know the material from those chapters as we discuss new topics.||Each 章 builds On 前面的 chapters, And We'我 假定 That You Know The 材料 From Those chapters As We 讨论 New 主题.
use IO::File;||Use IO::File;
Once we have the method name, we look for its key in %Allowed_methods.||Once We Have The Method Name, We Look For Its Key In %Allowed_methods.
Then define the constant arrays to hold the mappings for day-of-week and month names:||Then Define The Constant Arrays To Hold The 映射 For 一天-Of-星期 And 月份 Names:
Over time, more functions were added, including generating template files for the rest of the distribution.||Over Time, More Functions Were added, Including Generating template Files For The 休息 Of The 分配.
However, at some point, we have to compare the number of pineapples that Gilligan has with another castaway as well.||However, At Some 尖, We Have To 比较 The Number Of pineapples That Gilligan Has With 另一个 castaway As Well.
package Cow; our @ISA = qw(Animal);||Package Cow; Our @ISA = qw(Animal);
That's exactly what happens.||That's Exactly What Happens.
In Bourne-style shells, he'd use something like:||In Bourne-Style shells, 他'd Use Something Like:
There are a few different approaches, though.||There Are a Few Different 方法, Though.
Remember that $gilligan ||= $anything is effectively like $gilligan = $gilligan || $anything.||Remember That $gilligan ||= $Anything Is Effectively Like $gilligan = $gilligan || $Anything.
Put another way, a variable or a complex data structure is a repository of values throughout the program.||Put 另一个 Way, a Variable Or a 综合的 Data Structure Is a 仓库 Of Values Throughout The Program.
Without arguments, all_pod_files_ok TRies to find files in the usual places.||Without Arguments, all_pod_files_ok TRies To 寻找 Files In The 通常的 Places.
So let's get started.||So Let's Get 开始.
The second time really wasn't our fault anyway, and the third time was just bad luck.||The Second Time Really Wasn't Our 缺点 不管怎样, And The 第三 Time Was Just 坏的 运气.
If you have more than one version of Perl installed on your system, be sure to execute the Makefile.PL with the correct one.||If You Have More Than One Version Of Perl 安装 On Your System, Be Sure To Execute The Makefile.PL With The 正确的 One.
Use the isa construct as given earlier.||Use The isa Construct As Given Earlier.
To dump the data, we need to know the name of the directory at the top of the tree, because that's not stored within the structure:||To 倾倒 The Data, We Need To Know The Name Of The Directory At The 顶 Of The 树, Because That's Not Stored Within The Structure:
(In that case, LivingCreature would presumably be needed as a parent class for an eventual Plant class.)||(In That Case, LivingCreature Would 也许 Be Needed As a 父或母亲 Class For An 最终 Plant Class.)
print $tv_horse->name, " says ", $tv_horse->sound, "\n";||Print $tv_horse->Name, " 说 ", $tv_horse->声, "\n";
In scalar context, caller returns the calling package:||In Scalar Context, Caller Returns The Calling Package:
my $all = "**all machines**"; my $data_file = "total_bytes.data";||My $All = "**All Machines**"; My $data_file = "total_bytes.data";
This routine typically acts a bit like a class method, but we want users to call it as a regular subroutine.||This Routine 典型的 徒 a Bit Like a Class Method, But We Want Users To Call It As a Regular Subroutine.
An IRC bot on a few of the Perl-related IRC channels announces uploads as soon as they become available||An IRC bot On a Few Of The Perl-Related IRC channels announces uploads As 不久 As They 变成 Available
Maybe we want to give our function a googol: sqrt( 10**100 ).||Maybe We Want To Give Our Function a googol: sqrt( 10**100 ).
The list of names following use doesn't change which subroutines are defined in the module's package (in this case, File::Basename).||The List Of Names Following Use Doesn't Change Which Subroutines Are Defined In The Module's Package (In This Case, File::Basename).
Let's look at copying references and how it affects scoping and memory usage.||Let's Look At 复制 References And How It Affects Scoping And Memory 使用.
As we're developing, we might try this several times and we'd rather not connect and disconnect from the real database every time we try to track down a bug.||As We'Re 发展中的, We Might Try This Several Times And We'd Rather Not 连接 And disconnect From The Real database Every Time We Try To 径赛 向下 a 臭虫.
Furthermore, the access to the variable from within the closure ensures that the variable remains alive as long as the subroutine reference is alive.||Furthermore, The Access To The Variable From Within The Closure ensures That The Variable 剩余 活着的 As Long As The Subroutine Reference Is 活着的.
Although it's not the way the assignment was written, you can get a similar result if you choose to make Person a subclass of Animal.||Although It's Not The Way The Assignment Was Written, You Can Get a Similar Result If You 选择 To Make Person a 子类 Of Animal.
Hence, it's ready in time for the use immediately following.||Hence, It's 准备好的 In Time For The Use 立即 Following.
On that last one, we can still drop the arrow between "subscripty kinds of things, " even though one is an array bracket and one is a hash brace.||On That Last One, We Can Still 落下 The 箭 Between "subscripty 种类 Of Things, " Even Though One Is An Array 括号 And One Is a Hash 支撑.
The first one will be used with File::Find to gather the names of only the items that were modified between those two times; the second one should return the list of items found.||The First One Will Be Used With File::Find To 聚集 The Names Of Only The 物品 That Were Modified Between Those Two Times; The Second One Should Return The List Of 物品 Found.
The strategy is similar to dereferencing an array reference.||The 战略 Is Similar To dereferencing An Array Reference.
Perl executes the code in the BEGIN block during the compile phase before the require executes at runtime.||Perl 实行 The Code In The BEGIN Block 在 The Compile 阶段 Before The Require 实行 At Runtime.
[**] Again, there may be slight variations based on tool and Perl versions.||[**] Again, There May Be 轻微的 variations 基于 On 工具 And Perl Versions.
It's there and contains the single name Animal.||It's There And 包含 The Single Name Animal.
The ultimate user of your distribution will execute the identical command at his site.||The 最终的 User Of Your 分配 Will Execute The 同一的 命令 At 他的 场所.
UNIVERSAL Methods As we define classes, we create inheritance hierarchies through the global @ISA variables in each package.||UNIVERSAL Methods As We Define 类, We Create Inheritance hierarchies 通过 The Global @ISA Variables In Each Package.
Although we kept the value in a scalar variable, we could have put that sub { ... } construct directly into the initialization of the greetings hash:||Although We Kept The Value In a Scalar Variable, We Could Have Put That Sub { ... } Construct 直接地 Into The Initialization Of The greetings Hash:
Also, the sort appears not to have done anything, but the output of keys is not necessarily in a sorted order.||Also, The Sort Appears Not To Have Done Anything, But The 出产 Of Keys Is Not Necessarily In a 分类 Order.
$root -> [2] -> [1] -> [0]||$Root -> [2] -> [1] -> [0]
my $basename = basename( $some_full_path ); my $dirname = dirname( $some_full_path );||My $basename = basename( $some_full_path ); My $dirname = dirname( $some_full_path );
See, our Learning Perl book was great because it introduced the use of Perl for short and medium programs (which is most of the programming done in Perl, we've observed).||See, Our Learning Perl 书 Was 大的 Because It Introduced The Use Of Perl For 短的 And 中间 Programs (Which Is Most Of The Programming Done In Perl, We'Ve observed).
When we want to print to the filehandle, we use the scalar variable instead of a bareword.||When We Want To Print To The Filehandle, We Use The Scalar Variable Instead Of a Bareword.
It shows us the relevant parts along with the string lengths.||It Shows Us The 相关的 部分 沿着 With The String 长度.
Instead of using the built-in open, we use the module interface.||Instead Of Using The Built-In Open, We Use The Module Interface.
Skipping Tests In some cases, we want to skip tests.||Skipping Tests In Some Cases, We Want To 跳过 测试.
our %EXPORT_TAGS = ( 'all' => [ qw(||Our %EXPORT_TAGS = ( 'All' => [ Qw(
ok( $Minnow->engines_on, "Engines are on" ); ok( ! $Minnow->moored_to_dock, "Not moored to the dock" );||Ok( $Minnow->engines_on, "Engines Are On" ); Ok( ! $Minnow->moored_to_dock, "Not moored To The 码头" );
We can weaken one or the other (or even both) of these links.||We Can 削弱 One Or The Other (Or Even Both) Of These 链接.
sub feed_a_cow_named {||Sub feed_a_cow_named {
For example, the core Fcntl module makes the flock constants available as a group with the :flock tag:||For Example, The Core Fcntl Module 使 The 群 Constants Available As a Group With The :群 标签:
That last form is particularly handy when the coderef is in a larger data structure, as you will see in a moment.||That Last Form Is 特别地 方便的 When The coderef Is In a larger Data Structure, As You Will See In a Moment.
Initially, $top contains undef, but because we dereference it as if it were an array reference, Perl inserts a reference to an empty anonymous array into $top.||Initially, $顶 包含 Undef, But Because We 废弃 It As If It Were An Array Reference, Perl inserts a Reference To An Empty Anonymous Array Into $顶.
Chapter 16, Writing a Distribution Package a module for sharing, including portable installation instructions.||Chapter 16, Writing a Distribution Package a Module For sharing, Including 手提的 安装 instructions.
Let's see how to do that.||Let's See How To Do That.
We can replace this:||We Can 归还原处 This:
In the import list, we precede the tag name with a colon.||In The Import List, We 在前 The 标签 Name With a 结肠.
The result is a typical day on that tropical island:||The Result Is a 典型的 一天 On That 热带的 岛屿:
Let's break this code down, piece by piece.||Let's 打破 This Code 向下, 件 By 件.
The colons are turned into the native directory separator (such as / for Unix-like systems), and the name is suffixed with .pm (for "Perl module").||The 冒号 Are 转 Into The Native Directory Separator (Such As / For Unix-Like 系统), And The Name Is suffixed With .Pm (For "Perl Module").
If we don't know what those will be because we're passing code around to several machines, the FindBin module, which comes with Perl, can help.||If We Don't Know What Those Will Be Because We'Re Passing Code Around To Several Machines, The FindBin Module, Which 来 With Perl, Can Help.
Let's start with a simple example:||Let's Start With a Simple Example:
The value between the open and closing curly braces is an eight-element list.||The Value Between The Open And closing 卷曲的 牙套 Is An eight-Element List.
And now we get just 4 and 64.||And Now We Get Just 4 And 64.
No matter how we define our tags, everything they include has to be either in @EXPORT or @EXPORT_OK.||No Matter How We Define Our tags, Everything They Include Has To Be Either In @EXPORT Or @EXPORT_OK.
When the RaceHorse is destroyed, the standings are updated:||When The RaceHorse Is destroyed, The standings Are Updated:
Which would be the better way to implement this?||Which Would Be The Better Way To 实行 This?
Randal called the first edition of this book Learning Perl Objects, References, and Modules, and now it's Intermediate Perl, but we like to think of it as just Learning More Perl.[*] This is the book that picks up where Learning Perl leaves off.||Randal Called The First 片（本） Of This 书 Learning Perl Objects, References, And Modules, And Now It's Intermediate Perl, But We Like To 想 Of It As Just Learning More Perl.[*] This Is The 书 That 镐 Up Where Learning Perl 叶子 Off.
An anonymous subroutine looks like an ordinary sub declaration, but there's no name (or prototype) between sub and the block that follows.||An Anonymous Subroutine Looks Like An Ordinary Sub Declaration, But There's No Name (Or 原型) Between Sub And The Block That Follows.
[*] Well, not really lost.||[*] Well, Not Really Lost.
Of course, if you're a speed reader, the end of the chapter may come a bit sooner than a half hour.||Of Course, If You'Re a 速度 读者, The End Of The 章 May 来到 a Bit sooner Than a 一半 小时.
# $deck is a reference to an array|| # $甲板 Is a Reference To An Array
The references are just data at that point.||The References Are Just Data At That 尖.
log_message( *LOG_FH, 'The Globetrotters are stranded with us!' );||log_message( *LOG_FH, 'The Globetrotters Are stranded With Us!' );
This is actually the same behavior we've probably been using in Perl all along.||This Is Actually The Same Behavior We'Ve Probably Been Using In Perl All 沿着.
@destination = @Navigation::homeport;||@终点 = @Navigation::homeport;
By using unshift rather than push, Perl resolves any conflict in names between the Skipper's private files and the system-installed files, with the Skipper's file-taking precedence.||By Using unshift Rather Than Push, Perl resolves Any 冲突 In Names Between The Skipper's Private Files And The System-安装 Files, With The Skipper's File-Taking 领先.
For example, you had three subroutines in the Island::Plotting::Maps module.||For Example, You Had Three Subroutines In The Island::Plotting::Maps Module.
It takes one item after another in the list and places it into the $_ variable.||It Takes One 条款 After 另一个 In The List And Places It Into The $_ Variable.
We show you how to use Perl to write larger programs.||We Show You How To Use Perl To Write larger Programs.
[Gwen has died.]||[Gwen Has died.]
As before, we call the find routine with two parameters: a reference to an anonymous subroutine and the starting directory.||As Before, We Call The 寻找 Routine With Two Parameters: a Reference To An Anonymous Subroutine And The Starting Directory.
But there is more than one way to do it.||But There Is More Than One Way To Do It.
Or are they?||Or Are They?
Now @crew is identical to the value it had before, but we no longer need to invent names for the intermediate data structures.||Now @（飞机等的）全体人员 Is 同一的 To The Value It Had Before, But We No 长 Need To 发明 Names For The 中间的 Data Structures.
The Perl code is fairly understandable; it shows that we have a reference to a hash of three elements, with each value of the hash being a reference to a nested hash.||The Perl Code Is 公平地 Understandable; It Shows That We Have a Reference To a Hash Of Three Elements, With Each Value Of The Hash Being a Reference To a 嵌套的 Hash.
Note that $person is a name, which we look up in the hash to get to a coderef.||Note That $人 Is a Name, Which We Look Up In The Hash To Get To a coderef.
Sorting Efficiently As the Professor tries to maintain the community computing facility (built entirely out of bamboo, coconuts, and pineapples, and powered by a certified Perl-hacking monkey), he continues to discover that people are leaving entirely too much data on the single monkey-powered filesystem and decides to print a list of offenders.||Sorting Efficiently As The Professor 试 To Maintain The 团体 computing 方便 (Built 完全地 Out Of 竹, coconuts, And pineapples, And powered By a certified Perl-破解 猴子), 他 继续 To 发现 That People Are 离开 完全地 Too Much Data On The Single 猴子-powered filesystem And decides To Print a List Of offenders.
Otherwise, Perl executes statements in the order that it finds them, and we have to ensure that our unshift shows up before our require.||Otherwise, Perl 实行 Statements In The Order That It 发现 Them, And We Have To Ensure That Our unshift Shows Up Before Our Require.
use Test::More 'no_plan';||Use Test::More 'no_plan';
The easiest way to store these items is often in a hash.||The easiest Way To 商店 These 物品 Is Often In a Hash.
That should be enough examples for anyone.||That Should Be Enough Examples For 无论谁.
Try not to duplicate any code, but be sure to catch likely errors of usage, such as forgetting to define a sound for an animal.||Try Not To 二重的 Any Code, But Be Sure To Catch Likely Errors Of 使用, Such As forgetting To Define a 声 For An 动物.
Discarding the pair automatically closes both filehandles.||Discarding The 对 Automatically closes Both Filehandles.
Note that the first parameter here is still the instance, not the name of the class as before. neigh is the return value, which ends up as the earlier $noise variable.||Note That The First Parameter Here Is Still The 例子, Not The Name Of The Class As Before. neigh Is The Return Value, Which Ends Up As The Earlier $Noise Variable.
stderr_like( \&print_error, qr/ship/ );||stderr_like( \&print_error, qr/船/ );
Each array has had one other reference taken to it, making the reference count temporarily two, and then back to one as the name disappears.||Each Array Has Had One Other Reference Taken To It, 制作 The Reference 计算 temporarily Two, And Then Back To One As The Name disappears.
$VERSION = '0.10'; @EXPORT = qw(sum shuffle);||$VERSION = '0.10'; @EXPORT = Qw(总数 拖脚走);
To add a POD test, create a t/pod.t file (or whatever you want to call it).||To 增添 a POD Test, Create a t/pod.t File (Or Whatever You Want To Call It).
No matter which way you upload the file, it should appear in the list of uploaded files at the bottom of that page.||No Matter Which Way You upload The File, It Should Appear In The List Of uploaded Files At The 底部 Of That 页.
sub draw_map {||Sub draw_map {
We can generally replace what we'd write with the arrow notation:||We Can Generally 归还原处 What We'd Write With The 箭 符号:
[] The data immediately following the _ _END_ _ marker is available by reading from the DATA filehandle, which is a great way to include a small amount of constant data with your program.||[] The Data 立即 Following The _ _END_ _ marker Is Available By 读书 From The DATA Filehandle, Which Is a 大的 Way To Include a Small 数量 Of Constant Data With Your Program.
What if we want to send it to a file and save it in a string at the same time?||What If We Want To 派遣 It To a File And Save It In a String At The Same Time?
We were getting no output.||We Were 得到 No 出产.
Okay, ask, since we know you're going to anyway.||Okay, 问, Since We Know You'Re Going To 不管怎样.
Again, this is more interesting in a directory that has subdirectories, but the output should be similar to:||Again, This Is More Interesting In a Directory That Has subdirectories, But The 出产 Should Be Similar To:
Each tells the user which line of code called the code that caused the problem.||Each 告诉 The User Which Line Of Code Called The Code That caused The Problem.
Unfortunately, ExtUtils::Makemaker has become a bear to maintain, since it has to handle all of the special cases for the many, many systems on which Perl works.||Unfortunately, ExtUtils::Makemaker Has 变成 a 负担 To Maintain, Since It Has To Handle All Of The Special Cases For The Many, Many 系统 On Which Perl Works.
To have both Gilligan and the Skipper greet the Professor, we merely need to iterate over all the subroutines:||To Have Both Gilligan And The Skipper 打招呼 The Professor, We 仅仅 Need To iterate 在 All The Subroutines:
The presence of the parameter in the second line denotes that we are setting the color, while its absence in the third line indicates a getter.||The 出席 Of The Parameter In The Second Line denotes That We Are Setting The 颜色, While Its 缺席 In The 第三 Line 表明 a getter.
Preparing Your Distribution Once you've gotten your module name settled and you've tested your module with its new name (if needed), you should ensure your distribution is ready for prime time.||Preparing Your Distribution Once You'Ve gotten Your Module Name 解决 And You'Ve 测试 Your Module With Its New Name (If Needed), You Should Ensure Your 分配 Is 准备好的 For 首要的 Time.
Mr. Ed is colored black-and-white||Mr. Ed Is colored 黑的-And-白的
It looks like the author of the extension was negligent enough to leave the stub unedited.||It Looks Like The 作者 Of The 延伸 Was 粗心大意的 Enough To 出发 The 存根 unedited.
Callbacks A subroutine reference is often used for a callback.||Callbacks A Subroutine Reference Is Often Used For a callback.
This is a mess if someone maintains the code, changing @ISA for Mouse, and doesn't notice Animal there in speak.||This Is a 肮脏 If Someone Maintains The Code, Changing @ISA For Mouse, And Doesn't Notice Animal There In 说话.
However, the Makefile will most likely be different, reflecting the differences in installation locations, local policies, and even the C compiler and linking instructions appropriate for their architecture.||However, The Makefile Will Most Likely Be Different, reflecting The 差异 In 安装 位置, Local 政策, And Even The C Compiler And linking instructions 恰当的 For Their 建筑学.
Repeat this until the user enters an empty string instead of a pattern.||Repeat This Until The User enters An Empty String Instead Of a 模式.
use Test::More; eval "use Test::Pod::Coverage"; plan skip_all =>||Use Test::More; Eval "Use Test::Pod::Coverage"; 计划平面图 skip_all =>
Wow, that's definitely easier on the eyes.||Wow, That's 明确地 Easier On The eyes.
The current package is lexically scoped, similar to the scope of my variables, narrowed to the innermost-enclosing brace pair or file in which we introduced the package.||The Current Package Is Lexically Scoped, Similar To The Scope Of My Variables, narrowed To The 内心-Enclosing 支撑 对 Or File In Which We Introduced The Package.
my @numerically_sorted = sort { $a <=> $b } 1, 2, 4, 8, 16, 32;||My @numerically_sorted = Sort { $a <=> $b } 1, 2, 4, 8, 16, 32;
This file is automatically extracted to a separate file on the CPAN archives and lets someone view or download just the key facts about your distribution before fetching or unpacking the rest.||This File Is Automatically extracted To a Separate File On The Perl综合典藏网 archives And Lets Someone 视域 Or download Just The Key facts About Your 分配 Before fetching Or unpacking The 休息.
If we use it once, we'll probably use it again, anyway.||If We Use It Once, We'我 Probably Use It Again, 不管怎样.
Building Larger Programs This chapter looks at how to break up a program into pieces and includes some of the concerns that arise when we put those pieces back together again, or when many people work together on the same program.||Building Larger Programs This 章 Looks At How To 打破 Up a Program Into 件 And 包括 Some Of The 关注 That 起来 When We Put Those 件 Back Together Again, Or When Many People Work Together On The Same Program.
This is functionally the same as the original data structure.||This Is functionally The Same As The Original Data Structure.
Mention other useful documentation such as the documentation of related modules or operating system documentation (such as manpages in UNIX), or any relevant external documentation such as RFCs or standards.||Mention Other Useful 提供文件 Such As The 提供文件 Of Related Modules Or Operating System 提供文件 (Such As 帮助文档 In UNIX), Or Any 相关的 External 提供文件 Such As RFCs Or standards.
How did Lincoln make it all work?||How Did Lincoln Make It All Work?
Many modules in the CPAN do this.||Many Modules In The Perl综合典藏网 Do This.
The WriteMakefile routine is defined by the ExtUtils::MakeMaker module (included with Perl) to generate a Makefile.||The WriteMakefile Routine Is Defined By The ExtUtils::MakeMaker Module (包括 With Perl) To Generate a Makefile.
In the pages that follow, you can get "the rest of the story" in the same style as our friendly Llama book.||In The 页 That 跟随, You Can Get "The 休息 Of The 故事" In The Same Style As Our 友好的 Llama 书.
Some people are content, and rightfully so, with something they already know works.||Some People Are 含量, And rightfully So, With Something They Already Know Works.
If the variables or subroutines are not in one of these arrays, use won't be able to import them.||If The Variables Or Subroutines Are Not In One Of These Arrays, Use Won't Be Able To Import Them.
Even though $count goes out of scope at the end of the create_find_callback_that_counts( ) subroutine, there's still a binding between it and the returned subroutine reference, so the variable stays alive until the subroutine reference is finally discarded.||Even Though $计算 去 Out Of Scope At The End Of The create_find_callback_that_counts( ) Subroutine, There's Still a 装订 Between It And The Returned Subroutine Reference, So The Variable 停留 活着的 Until The Subroutine Reference Is 最终 丢弃.
Put all the files in the same place as the original .pm that the module tool created.||Put All The Files In The Same Place As The Original .Pm That The Module 工具 Created.
print STDOUT <<"HERE" if $type =~ m/^[st]/i; Scalar contains: $scalar HERE||Print STDOUT <<"HERE" If $Type =~ m/^[st]/我; Scalar 包含: $Scalar HERE
sub AUTOLOAD {||Sub AUTOLOAD {
Once PAUSE has the file and knows who it belongs to, it indexes it.||Once PAUSE Has The File And 知道 Who It belongs To, It indexes It.
The incredibly useful CPAN Search (http://search.cpan.org) will probably become your favorite interface.||The incredibly Useful Perl综合典藏网 Search (http://search.cpan.org) Will Probably 变成 Your 最喜爱的人或物 Interface.
item load_map($filename)||条款 load_map($文件名)
A new cast of characters will take the starring roles.)||A New 掷 Of Characters Will Take The starring 角色.)
One way to look at this is that UNIVERSAL is the base class from which all objects derive.||One Way To Look At This Is That UNIVERSAL Is The Base Class From Which All Objects 从.
Writing Tests with Test::More The Test::More[*] module comes with the standard Perl distribution starting with Perl 5.8, and it's available on CPAN if we need to install it on earlier Perl versions.||Writing Tests With Test::More The Test::More[*] Module 来 With The Standard Perl 分配 Starting With Perl 5.8, And It's Available On Perl综合典藏网 If We Need To 安装 It On Earlier Perl Versions.
Most people are irritated when asked a series of questions, especially when they are just upgrading your module.||Most People Are irritated When 问 a 系列 Of Questions, Especially When They Are Just upgrading Your Module.
If it isn't, the eval( ) block returns false and we execute the skip( ) function.||If It Isn't, The Eval( ) Block Returns False And We Execute The 跳过( ) Function.
[] Remember, having no list is not the same as having an empty list.||[] Remember, Having No List Is Not The Same As Having An Empty List.
We've been able to factor out common code and provide a way to reuse implementations with variations.||We'Ve Been Able To 因素 Out Common Code And Provide a Way To Reuse 实现 With variations.
We can construct the reference directly with the anonymous hash constructor, which is yet another meaning for curly braces, as we'll see.||We Can Construct The Reference 直接地 With The Anonymous Hash 构造函数, Which Is 仍然 另一个 Meaning For 卷曲的 牙套, As We'我 See.
For example, the File::Find module exports a find subroutine that can efficiently walk through a given filesystem hierarchy in a fairly portable way.||For Example, The File::Find Module exports a 寻找 Subroutine That Can efficiently 步行 通过 a Given filesystem 层次 In a 公平地 手提的 Way.
An object built of a hash reference is destroyed when the last reference to that hash goes away.||An Object Built Of a Hash Reference Is destroyed When The Last Reference To That Hash 去 Away.
If that fails, eval sets the error variable $@, and once that is set, we tell Test::More to skip the rest of the tests.||If That 失败, Eval Sets The Error Variable $@, And Once That Is Set, We Tell Test::More To 跳过 The 休息 Of The 测试.
If this transform looks like it might be too complex to memorize or come up with from first principles, it might help to look at the flexible and constant parts:||If This 转变 Looks Like It Might Be Too 综合的 To 记住 Or 来到 Up With From First 原则, It Might Help To Look At The 柔韧的 And Constant 部分:
When the reference to the named hash is returned, the reference becomes a reference to an anonymous hash because the name immediately goes out of scope.||When The Reference To The Named Hash Is Returned, The Reference Becomes a Reference To An Anonymous Hash Because The Name 立即 去 Out Of Scope.
The AUTOLOAD subroutine can execute the desired operation itself, install a subroutine and then jump into it, or perhaps just die if asked to perform an unknown method.||The AUTOLOAD Subroutine Can Execute The Desired Operation Itself, 安装 a Subroutine And Then 跳跃 Into It, Or 也许 Just Die If 问 To 执行 An Unknown Method.
store \%total_bytes, $data_file;||商店 \%total_bytes, $data_file;
Well, we can apply a bit of indirection.||Well, We Can 应用 a Bit Of indirection.
And that's how we build a horse.||And That's How We Build a 马.
[*] In classrooms, we've seen that too much indirection (or not enough indirection) tends to contribute to the most common mistakes made when working with references.||[*] In classrooms, We'Ve Seen That Too Much indirection (Or Not Enough indirection) tends To 捐献 To The Most Common mistakes Made When Working With References.
Professor: By my calculations, you must be Skipper!||Professor: By My calculations, You Must Be Skipper!
While PERL5LIB is useful for personal use, we can't rely on it for programs we intend to share with others.||While PERL5LIB Is Useful For 私人的 Use, We Can't 依靠 On It For Programs We 打算 To 份 With 别人.
Good luck!||Good 运气!
Each POD directive (a line beginning with an equals sign) switches from Perl mode (lines interpreted as Perl code) to POD mode (lines interpreted as documentation), and each line beginning with =cut switches back.||Each POD 命令 (a Line 开端 With An equals Sign) Switches From Perl 方式 (Lines 解释 As Perl Code) To POD 方式 (Lines 解释 As 提供文件), And Each Line 开端 With =Cut Switches Back.
If we don't have multiple inheritance (that is, if no @ISA has more than one element), it is simple: Perl simply goes from one @ISA to the next until it finds the ultimate base class whose @ISA is empty.||If We Don't Have Multiple Inheritance (That Is, If No @ISA Has More Than One Element), It Is Simple: Perl Simply 去 From One @ISA To The 下一次 Until It 发现 The 最终的 Base Class Whose @ISA Is Empty.
The ||= operator assigns the filehandle to the hash, and the = operator passes it to $handle as well.||The ||= Operator Assigns The Filehandle To The Hash, And The = Operator 经过 It To $Handle As Well.
We do the same thing.||We Do The Same Thing.
In the string we print to $fh, we include the process ID (contained in the special variable $$), so we can tell the difference between separate runs of our program, and then the date and the day of the week.||In The String We Print To $Fh, We Include The 程序 ID (包含 In The Special Variable $$), So We Can Tell The Difference Between Separate 跑 Of Our Program, And Then The Date And The 一天 Of The 星期.
(Keep in mind that an implicit arrow is between the two sets of curly braces here.)||(Keep In Mind That An Implicit 箭 Is Between The Two Sets Of 卷曲的 牙套 Here.)
Write a program that will answer the question "How much does using the Schwartzian Transform speed up the task of Exercise 1?"||Write a Program That Will Answer The Question "How Much Does Using The Schwartzian Transform 速度 Up The 工作 Of Exercise 1?"
At this point, we can determine from the inside out exactly what values will result from the list value from inside the parentheses.||At This 尖, We Can 决心 From The 里面 Out Exactly What Values Will Result From The List Value From 里面 The Parentheses.
my @sources =||My @来源 =
By placing some of the code into a separate file, other programmers can reuse the Skipper's routines, and vice versa.||By placing Some Of The Code Into a Separate File, Other Programmers Can Reuse The Skipper's Routines, And 坏事 versa.
$ perl -MCPAN -eshell cpan> readme Island::Plotting::Maps||$ Perl -MPerl综合典藏网 -eshell Cpan> readme Island::Plotting::Maps
COPYRIGHT AND LICENSE||版权 AND LICENSE
If named has only the name, we still need to set a color, so we'll have a class-specific initial color.||If Named Has Only The Name, We Still Need To Set a 颜色, So We'我 Have a Class-特殊的 Initial 颜色.
do 'drop_anchor.pm'; die $@ if $@; do 'navigation.pm'; die $@ if $@; ... turn_toward_heading(90); ... drop_anchor( ) if at_dock( );||Do 'drop_anchor.pm'; Die $@ If $@; Do 'navigation.pm'; Die $@ If $@; ... turn_toward_heading(90); ... drop_anchor( ) If at_dock( );
use strict; use Oogaboogoo::date qw(day mon);||Use Strict; Use Oogaboogoo::Date Qw(一天 mon);
The two statements are lexically adjacent but not temporally adjacent.||The Two Statements Are Lexically 邻近的 But Not temporally 邻近的.
The resulting file with mixed code and documentation looks something like:||The 造成 File With 混合 Code And 提供文件 Looks Something Like:
Worse, if Mouse had multiple entries in @ISA, we wouldn't necessarily know which one had actually defined speak.||Worse, If Mouse Had Multiple Entries In @ISA, We Wouldn't Necessarily Know Which One Had Actually Defined 说话.
How did that get past the AUTOLOAD?||How Did That Get 过去的 The AUTOLOAD?
If we reuse the callback, the same variable still has its most recently used value.||If We Reuse The callback, The Same Variable Still Has Its Most 近来 Used Value.
Because this imported routine isn't a class method, we don't use the arrow method call to invoke it.||Because This Imported Routine Isn't a Class Method, We Don't Use The 箭 Method Call To 调用 It.
Notice that the main speak routine has now moved into the LivingCreature class, which means you don't need to write it again to use it in Person.||Notice That The Main 说话 Routine Has Now moved Into The LivingCreature Class, Which Means You Don't Need To Write It Again To Use It In Person.
Let's examine the MANIFEST file, which contains the list of files that the distribution will contain.||Let's 检查 The MANIFEST File, Which 包含 The List Of Files That The 分配 Will Contain.
If a machine sent data to just one other, that destination machine's total will be equal to the source machine's total output, so that list could sort in either order.||If a 机器 打发 Data To Just One Other, That 终点 机器's 总 Will Be Equal To The Source 机器's 总 出产, So That List Could Sort In Either Order.
Typically we'll do that without the intermediate array, though.||Typically We'我 Do That Without The 中间的 Array, Though.
{ my $n = -100; eval { sqrt($n) }; ok( $@, '$@ is set after sqrt(-100)' ); }||{ My $n = -100; Eval { sqrt($n) }; Ok( $@, '$@ Is Set After sqrt(-100)' ); }
Now here we are, about to describe how to use h2xs for things that aren't either h or XS.||Now Here We Are, About To 描写 How To Use h2xs For Things That 还't Either h Or XS.
This invokes the speak method of the parent class, including all the parameters that we've not yet shifted off of our parameter list.||This invokes The 说话 Method Of The 父或母亲 Class, Including All The Parameters That We'Ve Not 仍然 shifted Off Of Our Parameter List.
We've included the top portion of the documentation to show you the most important section (at least, the most important when you're starting).||We'Ve 包括 The 顶 一份 Of The 提供文件 To Show You The Most Important Section (At Least, The Most Important When You'Re Starting).
Walking through this from the outside in, we have a return value of three elements.||Walking 通过 This From The Outside In, We Have a Return Value Of Three Elements.
What if we wanted to ensure the file did not exist before we started testing?||What If We 想要 To Ensure The File Did Not Exist Before We 开始 testing?
Pretend this section never existed and move on to the next one.||Pretend This Section Never existed And Move On To The 下一次 One.
The overall result is the list concatenation of all individual results.||The 总的 Result Is The List 连入 Of All Individual Results.
What if we then derive a class from this base class?||What If We Then 从 a Class From This Base Class?
[*] If you're using one of the other module creation tools from Chapter 16, you probably got other test files, and ones that are more complex.||[*] If You'Re Using One Of The Other Module 创造 Tools From Chapter 16, You Probably Got Other Test Files, And Ones That Are More 综合的.
Let's see in the next exercise's answer.||Let's See In The 下一次 锻炼's Answer.
use File::Find; sub what_to_do {||Use File::Find; Sub what_to_do {
find(\&what_to_do, @starting_directories);||寻找(\&what_to_do, @starting_directories);
We dereference the reference, of course.||We 废弃 The Reference, Of Course.
This script tests things that should work.||This 临时单据 测试 Things That Should Work.
[] We can specify the test and install targets in the same make invocation.||[] We Can Specify The Test And 安装 targets In The Same Make 调用.
In fact, another way to write that loop is to get rid of the ugly if structure:||In Fact, 另一个 Way To Write That Loop Is To Get 使摆脱 Of The 丑恶的 If Structure:
Use map to transform the strings in this list, putting four space characters in front of each and a newline character after.||Use Map To 转变 The Strings In This List, Putting 四 Space Characters In Front Of Each And a 换行符 Character After.
This list is inside an anonymous array constructor, so we get back a reference to a newly created array for each person.||This List Is 里面 An Anonymous Array 构造函数, So We Get Back a Reference To a 新 Created Array For Each 人.
However, the parts are separable now:||However, The 部分 Are 可分离 Now:
my @sorted = sort { -s $a <=> -s $b } glob "/bin/*";||My @分类 = Sort { -s $a <=> -s $b } Glob "/bin/*";
Let's look at them:||Let's Look At Them:
Mouse->speak;||Mouse->说话;
Believe us, we've tried.)||Believe Us, We'Ve tried.)
Exercise 1 [5 min] Without running it, can you see what's wrong with this piece of a program?||Exercise 1 [5 min] Without 连续的 It, Can You See What's 错误的 With This 件 Of a Program?
Using a bit mask as the mode allows for more granular control.||Using a Bit 假面具 As The 方式 Allows For More granular Control.
Today, at the beginning of 2006, Perl 5.8.8 has 359.[*] Indeed, this is one of the advantages of Perl: it already comes with a lot of stuff that you need to make useful and complex programs without doing a lot of work yourself.||Today, At The 开端 Of 2006, Perl 5.8.8 Has 359.[*] Indeed, This Is One Of The advantages Of Perl: It Already 来 With a 许多 Of 材料 That You Need To Make Useful And 综合的 Programs Without Doing a 许多 Of Work 你（们）自己.
sub test_sub { '10000' }||Sub test_sub { '10000' }
If the input includes the Professor and the skipper, the output should have them listed in that order, with that capitalization.||If The Input 包括 The Professor And The skipper, The 出产 Should Have Them Listed In That Order, With That 资本化.
DB<15> x $source||DB<15> x $Source
A require'd file must return a true value, and it's traditional to use 1; as the last line of a module's code.||A Require'd File Must Return a True Value, And It's 传统的 To Use 1; As The Last Line Of a Module's Code.
Rewrite this using the Schwartzian Transform technique.||Rewrite This Using The Schwartzian Transform 技术.
What if the caller didn't want fileparse?||What If The Caller Didn't Want fileparse?
When the subroutine calls itself, it adds two spaces to the end of the prefix.||When The Subroutine Calls Itself, It Adds Two spaces To The End Of The 前缀.
What if we mess up the POD format so that formatters can't parse it as we intended?||What If We 肮脏 Up The POD Format So That formatters Can't Parse It As We 预期?
From there, we call the original subroutine:||From There, We Call The Original Subroutine:
DESCRIPTION||描述 
stdout_is( sub { print "Welcome Aboard" }, "Welcome Aboard" );||stdout_is( Sub { Print "Welcome Aboard" }, "Welcome Aboard" );
Perl repeats the search through the very same hierarchy (including UNIVERSAL), looking for a method named AUTOLOAD.||Perl repeats The 搜查 通过 The Very Same 层次 (Including UNIVERSAL), 看 For a Method Named AUTOLOAD.
For 16, 32, and 64, we get two results per number.||For 16, 32, And 64, We Get Two Results 每 Number.
my @sorted_names_and_pineapples = sort {||My @sorted_names_and_pineapples = Sort {
For this exercise, we get the date string by using localtime in scalar context, then get the day of the week with a literal list slice.||For This 锻炼, We Get The Date String By Using localtime In Scalar Context, Then Get The 一天 Of The 星期 With a Literal List 薄片.
Nearly every scalar, array, hash, subroutine, and filehandle name[*] is actually prefixed by the current package, unless the name already contains one or more double-colon markers.||Nearly Every Scalar, Array, Hash, Subroutine, And Filehandle Name[*] Is Actually 前缀 By The Current Package, Unless The Name Already 包含 One Or More 两倍的-结肠 markers.
The first pair denotes the expression returning a reference, while the second pair delimits the expression for the hash key.||The First 对 denotes The Expression Returning a Reference, While The Second 对 delimits The Expression For The Hash Key.
If that's successful, write that line to the second element of the pair (the corresponding output handle).||If That's 成功的, Write That Line To The Second Element Of The 对 (The 相应的 出产 Handle).
On the 33-element /bin on his laptop, Randal was seeing 260 iterations per second of the Ordinary implementation and roughly 500 per second of the Schwartzian implementation, so writing the complex code saved about half of the execution time.||On The 33-Element /bin On 他的 laptop, Randal Was seeing 260 iterations 每 Second Of The Ordinary 实行 And 大约地 500 每 Second Of The Schwartzian 实行, So 写作 The 综合的 Code Saved About 一半 Of The 执行 Time.
For each file within the directory being examined, the response from the recursive call to data_for_path is undef.||For Each File Within The Directory Being Examined, The 答复 From The 递归 Call To data_for_path Is Undef.
sub Navigation::turn_toward_port {||Sub Navigation::turn_toward_port {
ok 1 - The object isa Horse ok 2 - The object isa Animal ok 3 - Horse->can('eat') ok 4 - Horse->can('color') 1..4||Ok 1 - The Object isa Horse Ok 2 - The Object isa Animal Ok 3 - Horse->Can('吃') Ok 4 - Horse->Can('颜色') 1..4
# Insert your test code below, the Test::More module is use( )ed here so read # its manpage ( perldoc Test::More ) for help writing this test script.||# Insert Your Test Code Below, The Test::More Module Is Use( )艾德 Here So Read # Its manpage ( perldoc Test::More ) For Help 写作 This Test 临时单据.
Suppose we were reading the data from a file, in this format:||Suppose We Were 读书 The Data From a File, In This Format:
There's not much we can show you as an answer to an exercise about distributions.||There's Not Much We Can Show You As An Answer To An 锻炼 About 分布.
Modify the program from the previous exercise to use the import tag by prefacing it with a colon in the import list.||Modify The Program From The Previous 锻炼 To Use The Import 标签 By prefacing It With a 结肠 In The Import List.
Note that the subroutine accesses the $total_size variable.||Note That The Subroutine Accesses The $total_size Variable.
This will probably annoy the monkey a bit, since we already asked earlier.||This Will Probably 烦扰 The 猴子 a Bit, Since We Already 问 Earlier.
When we turn on use strict, we'll get complaints on @ISA because it's not a variable containing an explicit package name, nor is it a lexical (my) variable.||When We 转向 On Use Strict, We'我 Get complaints On @ISA Because It's Not a Variable Containing An 清楚的 Package Name, Nor Is It a Lexical (My) Variable.
Dereference that as an array reference, taking the entire array.||Dereference That As An Array Reference, Taking The 完全的 Array.
my $tv_horse = Horse->named('Mr. Ed'); $tv_horse->speak;||My $tv_horse = Horse->Named('Mr. Ed'); $tv_horse->说话;
That's the main thing that matters.||That's The Main Thing That matters.
Introducing the Method Invocation Arrow A class is a group of things with similar behaviors and traits.||Introducing The Method Invocation Arrow A Class Is a Group Of Things With Similar Behaviors And 特征.
When we call chdir without an argument, it goes to our home directory (so this is one of the few places where Perl doesn't use $_ as the default).||When We Call Chdir Without An Argument, It 去 To Our 家 Directory (So This Is One Of The Few Places Where Perl Doesn't Use $_ As The Default).
Perl complains to us that it can't find the module in @INC and shows us all of the directories it has in that array.||Perl complains To Us That It Can't 寻找 The Module In @INC And Shows Us All Of The directories It Has In That Array.
my @room; # initially empty for my $person (qw(Gilligan Skipper Professor)) {||My @房间; # 最初 Empty For My $人 (Qw(Gilligan Skipper Professor)) {
use Test::More 'no_plan'; use_ok 'Horse'; isa_ok(my $trigger = Horse->named('Trigger'), 'Horse');||Use Test::More 'no_plan'; use_ok 'Horse'; isa_ok(My $扳机 = Horse->Named('Trigger'), 'Horse');
Exercise 2 First, we construct the hash structure:||Exercise 2 First, We Construct The Hash Structure:
That might help you to avoid shock at your response or better phrase your initial request.||That Might Help You To Avoid 震惊 At Your 答复 Or Better 词组 Your Initial 请求.
# retrieve abstract from module|| # retrieve 抽象的 From Module
In Perl terms, a closure is just a subroutine that references a lexical variable that has gone out of scope.||In Perl Terms, a Closure Is Just a Subroutine That References a Lexical Variable That Has 不见了 Out Of Scope.
Now define each subclass with a specific sound:||Now Define Each 子类 With a 特殊的 声:
Over a decade ago (nearly eternity in Internet Time), Randal Schwartz wrote the first edition of Learning Perl.||Over a 十年 以前 (几乎 eternity In Internet Time), Randal Schwartz 写 The First 片（本） Of Learning Perl.
#!/usr/bin/perl use warnings;||#!/usr/bin/Perl Use 警告;
However, because they have a name, they will persist beyond the end of the scope (as do all named subroutines).||However, Because They Have a Name, They Will 坚持 Beyond The End Of The Scope (As Do All Named Subroutines).
Remember that the N in CPAN is "Network, " so your distribution may take hours or days to reach all of the CPAN mirrors.||Remember That The N In Perl综合典藏网 Is "Network, " So Your 分配 May Take 小时 Or 天 To 到达 All Of The Perl综合典藏网 mirrors.
If the arguments are absent, it's a get operation; if the arguments are present, it's a set operation.||If The Arguments Are 缺席的, It's a Get Operation; If The Arguments Are 在场的, It's a Set Operation.
However, this is noisy and prone to require far more explanation than you might be comfortable with, especially for the maintenance programmer who has to edit your code later.||However, This Is 吵闹的 And 俯伏的 To Require Far More 说明 Than You Might Be 舒适的 With, Especially For The 保养 Programmer Who Has To 校订 Your Code 更晚.
Print each path with four spaces before it and a newline after it, just like you did for Exercise 1 of Chapter 2.||Print Each Path With 四 spaces Before It And a 换行符 After It, Just Like You Did For Exercise 1 Of Chapter 2.
use File::Spec;||Use File::Spec;
Think about this (and document it) when we write a setter.||Think About This (And Document It) When We Write a setter.
In this example, the test succeeds, so you get a message for it and a summary of the CPU time used for the test.||In This Example, The Test 成功, So You Get a 音讯 For It And a 概要 Of The CPU Time Used For The Test.
Don't do this anymore!||Don't Do This 了!
For the all tag, we use a reference to @EXPORT directly.||For The All 标签, We Use a Reference To @EXPORT 直接地.
For example, the following code doesn't leak:||For Example, The Following Code Doesn't 漏:
use Test::More tests => 1; BEGIN { use_ok('Island::Plotting::Maps') };||Use Test::More 测试 => 1; BEGIN { use_ok('Island::Plotting::Maps') };
Again, we pay the price for the AUTOLOAD only on the first hit of a particular getter or setter.||Again, We 支付 The 价格 For The AUTOLOAD Only On The First 打 Of a Particular getter Or setter.
In reality, we tend to be more like Gilligan, though.||In 现实, We 趋向 To Be More Like Gilligan, Though.
When we decide to bundle the archive, all of the files in MANIFEST go into the archive.||When We Decide To 捆 The archive, All Of The Files In MANIFEST Go Into The archive.
The BEGIN keyword tells the Perl compiler that as soon as this block has been parsed successfully (during the compile phase), jump for a moment to run phase and run the block as well.||The BEGIN Keyword 告诉 The Perl Compiler That As 不久 As This Block Has Been Parsed 成功地 (在 The Compile 阶段), 跳跃 For a Moment To Run 阶段 And Run The Block As Well.
Gwen eats grass.||Gwen Eats 草.
That is, it'll do as long as we put it near the beginning of the program, before any invocations of count_down( ) or count_remaining( ).||That Is, It'我 Do As Long As We Put It 近 The 开端 Of The Program, Before Any invocations Of count_down( ) Or count_remaining( ).
If we don't want that, we just build an ok( ) test instead, or try cmp_ok, coming up in a moment.||If We Don't Want That, We Just Build An Ok( ) Test Instead, Or Try cmp_ok, coming Up In a Moment.
We'll use it a bit later, and you might see it in other people's code, so we'll show you how it works anyway.||We'我 Use It a Bit 更晚, And You Might See It In Other People's Code, So We'我 Show You How It Works 不管怎样.
Exercise 2 We chose to use our home directory as the hardcoded directory.||Exercise 2 We chose To Use Our 家 Directory As The hardcoded Directory.
Exercise [45 min] Give the Animal class the ability to get and set the name and color.||Exercise [45 min] Give The Animal Class The 能力 To Get And Set The Name And 颜色.
sub create_find_callbacks_that_sum_the_size {||Sub create_find_callbacks_that_sum_the_size {
use File::Find; my @starting_directories = qw(.);||Use File::Find; My @starting_directories = Qw(.);
When Test::More skips tests, it outputs special ok messages to keep the test numbering right and to tell the test harness what happened.||When Test::More 翻斗车 测试, It outputs Special Ok Messages To 保持 The Test numbering Right And To Tell The Test 支配 What Happened.
Or is it?||Or Is It?
Notice how we've created two different variables now, since there are two parameters to Dumper.||Notice How We'Ve Created Two Different Variables Now, Since There Are Two Parameters To Dumper.
In this case, the curly braces have two different meanings.||In This Case, The 卷曲的 牙套 Have Two Different Meanings.
In a list context, the grep operator returns a list of all such selected items.||In a List Context, The Grep Operator Returns a List Of All Such 选定 物品.
In the previous edition of this book, we had a slight design error in this code that made the Schwartzian transform seem a lot slower. brian noticed this one day while he was teaching this exercise, then sat down to go over it in way too much detail.||In The Previous 片（本） Of This 书, We Had a 轻微的 设计 Error In This Code That Made The Schwartzian 转变 好象 a 许多 slower. brian Noticed This One 一天 While 他 Was 教学 This 锻炼, Then sat 向下 To Go 在 It In Way Too Much 细节.
For example, going back to the Animal class defined in Chapter 11, we can add a DESTROY method to know when objects go away, purely for debugging purposes:||For Example, Going Back To The Animal Class Defined In Chapter 11, We Can 增添 a DESTROY Method To Know When Objects Go Away, 全然 For Debugging purposes:
When the Horse possibilities are exhausted, Perl turns to see whether Racer (or one of its subclasses) supplies the needed method.||When The Horse possibilitie(绑定操作符)s Are 精疲力竭的, Perl Turns To See Whether Racer (Or One Of Its 子类) Supplies The Needed Method.
Above all, get it in your head that this whole process is run by volunteers who aren't perfect and are doing this in their spare time for the good of the Perl community.||Above All, Get It In Your Head That This Whole 程序 Is Run By volunteers Who 还't 完美的 And Are Doing This In Their 腾出时间 Time For The Good Of The Perl 团体.
These are rarely seen in practice.||These Are 难得 Seen In Practice.
In general, where we've seen the bareword filehandle we can substitute the scalar variable filehandle reference.||In General, Where We'Ve Seen The Bareword Filehandle We Can 代替 The Scalar Variable Filehandle Reference.
If a system administrator wants additional directories, he merely needs to recompile and reinstall Perl.||If a System administrator 要 Additional directories, 他 仅仅 Needs To recompile And 重新 Perl.
perl -le 'print for @INC'||Perl -引导 'Print For @INC'
To see why accessing the hash directly violates this, let's say that Animal no longer uses a simple color name for the color, but instead changes to use a computed RGB triple to store the color (holding it as an arrayref).||To See Why 访问 The Hash 直接地 violates This, Let's Say That Animal No 长 Uses a Simple 颜色 Name For The 颜色, But Instead Changes To Use a computed RGB 三倍的 To 商店 The 颜色 (支持 It As An Arrayref).
This strategy is attractive because of its simplicity, but it also has disadvantages.||This 战略 Is attractive Because Of Its 简单, But It Also Has disadvantages.
Furthermore, use base has the advantage that it's performed at compile time, eliminating a few potential errors from setting @ISA at runtime, like some of the other solutions.||Furthermore, Use Base Has The 优点 That It's 进行 At Compile Time, 消除 a Few 潜在的 Errors From Setting @ISA At Runtime, Like Some Of The Other solutions.
This scenario is arguably better.||This scenario Is arguably Better.
# no, it's a getter:|| # No, It's a getter:
my $file = 'minnow.db';||My $File = 'minnow.db';
my $barn = Barn->new; $barn->add(Cow->named('Bessie')); $barn->add(Cow->named('Gwen')); print "Burn the barn:\n"; $barn = undef; print "End of program.\n";||My $谷仓 = Barn->New; $谷仓->增添(Cow->Named('Bessie')); $谷仓->增添(Cow->Named('Gwen')); Print "Burn The 谷仓:\n"; $谷仓 = Undef; Print "End Of Program.\n";
my $not_yet; $not_yet = [ ]; # inserted through autovivification @$not_yet = (1, 2, 3);||My $not_yet; $not_yet = [ ]; # 插入 通过 autovivification @$not_yet = (1, 2, 3);
# at the end:|| # At The End:
Transforming Lists with map The map operator has a very similar syntax to the grep operator and shares a lot of the same operational steps.||Transforming Lists With Map The Map Operator Has a Very Similar Syntax To The Grep Operator And 股票 a 许多 Of The Same 业务上的 步骤.
When find locates /usr/bin/perl, the current working directory (during the callback) is /usr/bin. $_ holds perl, and $File::Find::name holds ./bin/perl, which is the name relative to the directory in which you started the search.||When 寻找 位于 /usr/bin/Perl, The Current Working Directory (在 The callback) Is /usr/bin. $_ holds Perl, And $File::Find::Name holds ./bin/Perl, Which Is The Name 亲戚 To The Directory In Which You 开始 The 搜查.
We're dereferencing the $items array reference, accessing the original array, and adding the elements from @missing.||We'Re dereferencing The $物品 Array Reference, 访问 The Original Array, And Adding The Elements From @Missing.
Use use lib when you can.||Use Use lib When You Can.
Later, the test harness can report how many tests we skipped.||Later, The Test 支配 Can 报告 How Many 测试 We Skipped.
Contributing to CPAN Besides allowing others in your organization to receive the benefits of these wonderful modules and distributions you've created, you can contribute to the Perl community at large.||Contributing To Perl综合典藏网 Besides 允许 别人 In Your 组织 To Receive The 效益 Of These 奇妙的 Modules And 分布 You'Ve Created, You Can 捐献 To The Perl 团体 At Large.
This general technique can be convenient if we need to look at our data in more than one way.||This General 技术 Can Be 便利的 If We Need To Look At Our Data In More Than One Way.
We can't include any whitespace between the @ and the immediately following character, although we can include nearly arbitrary whitespace within the curly braces as if it were normal Perl code.||We Can't Include Any Whitespace Between The @ And The 立即 Following Character, Although We Can Include 几乎 专横的 Whitespace Within The 卷曲的 牙套 As If It Were Normal Perl Code.
Of course, if the code in the block fails, no value is returned; this gives undef in a scalar context, or an empty list in a list context.||Of Course, If The Code In The Block 失败, No Value Is Returned; This Gives Undef In a Scalar Context, Or An Empty List In a List Context.
The File::Spec and Cwd modules, both of which come with Perl, should help.||The File::Spec And Cwd Modules, Both Of Which 来到 With Perl, Should Help.
For example, suppose we have our own directory under /home/gilligan/lib, and we place our own Navigation::SeatOfPants module in /home/gilligan/lib/Navigation/SeatOfPants.pm.||For Example, 猜想 We Have Our Own Directory 在 /家/gilligan/lib, And We Place Our Own Navigation::SeatOfPants Module In /家/gilligan/lib/Navigation/SeatOfPants.pm.
The keys of %provisions are names of the people.||The Keys Of %provisions Are Names Of The People.
Now it's looking nearly drop-in compatible with the previous definition, except for those friend classes that referenced the attribute names directly in the hash as the initial-cap-keyed versions (such as Color) rather than through the accessors ($self->color).||Now It's 看 几乎 落下-In Compatible With The Previous Definition, Except For Those 朋友 类 That 参考 The Attribute Names 直接地 In The Hash As The Initial-帽子-keyed Versions (Such As Color) Rather Than 通过 The accessors ($自己->颜色).
That's not fun yet.||That's Not 娱乐 仍然.
This allows us to write and run tests during development and maintenance, and it also lets our end user verify that the module works in her environment.||This Allows Us To Write And Run 测试 在 进展 And 保养, And It Also Lets Our End User 检验 That The Module Works In Her 环境.
use base qw(Geo::Maps);||Use Base Qw(Geo::Maps);
Why didn't sort order these properly?||Why Didn't Sort Order These Properly?
(It should have your name in place of Ginger's name, unless your machine is very confused about who is sitting at the keyboard.)||(It Should Have Your Name In Place Of Ginger's Name, Unless Your 机器 Is Very 困惑 About Who Is sitting At The 键盘.)
Now try it out:||Now Try It Out:
When we do this, File::Basename introduces three subroutines, fileparse, basename, and dirname, [*] into our script.[] From this point forward, we can say:||When We Do This, File::Basename 介绍 Three Subroutines, fileparse, basename, And dirname, [*] Into Our 临时单据.[] From This 尖 Forward, We Can Say:
We've protected the local dirname routine, but what if we still want the functionality provided by File::Basename's dirname?||We'Ve Protected The Local dirname Routine, But What If We Still Want The Functionality Provided By File::Basename's dirname?
Now, in $Bin is the path to the directory that holds our script.||Now, In $Bin Is The Path To The Directory That holds Our 临时单据.
In fact, even if there's only one item, we tend to write it with a qw( ) list for consistency and maintenance; often we'll go back to say "give me another one from here, " and it's simpler if it's already a qw( ) list.||In Fact, Even If There's Only One 条款, We 趋向 To Write It With a Qw( ) List For 一致（性） And 保养; Often We'我 Go Back To Say "Give Me 另一个 One From Here, " And It's simpler If It's Already a Qw( ) List.
For example, suppose we have a class called Racer, which has the basic abilities for anything that can race, so that it's ready to be the base class for a runner, a fast car, or a racing turtle.||For Example, 猜想 We Have a Class Called Racer, Which Has The 基本的 abilitie(绑定操作符)s For Anything That Can 种族, So That It's 准备好的 To Be The Base Class For a 奔跑者, a 快的 小汽车, Or a racing 海龟.
[Billy Boy has died.]||[Billy Boy Has died.]
[*] If we decide that we need to stop all testing, we can "bail out" of the process by printing "bail out" to standard output.||[*] If We Decide That We Need To Stop All testing, We Can "bail Out" Of The 程序 By 印刷 "bail Out" To Standard 出产.
[*] At least not yet.||[*] At Least Not 仍然.
Exercise [50 min] The Professor modified some files on Monday afternoon, and now he's forgotten which ones they were.||Exercise [50 min] The Professor Modified Some Files On Monday 下午, And Now 他's 遗忘 Which Ones They Were.
But we can cheat a bit.||But We Can Cheat a Bit.
distribution_type: module generated_by: ExtUtils::MakeMaker version 6.17||distribution_type: Module generated_by: ExtUtils::MakeMaker Version 6.17
Are you testing every elsif case?)||Are You testing Every Elsif Case?)
Since we're using Perl 5.8.7 as we write this, we'll assume that's the current version of Perl.||Since We'Re Using Perl 5.8.7 As We Write This, We'我 假定 That's The Current Version Of Perl.
We can evaluate this code and get a hash that's equivalent to the original hash.||We Can 估价 This Code And Get a Hash That's Equivalent To The Original Hash.
We can create such a value directly using the anonymous array constructor, which is yet another use for square brackets:||We Can Create Such a Value 直接地 Using The Anonymous Array 构造函数, Which Is 仍然 另一个 Use For 正方形 支架:
Make and test your Makefile.PL or Build.PL. Modules without a Makefile.PL are accepted via PAUSE to go into the CPAN but usually get a grimace from those of us who download your stuff, because we might have to figure out how to build and install your distribution.||Make And Test Your Makefile.PL Or Build.PL. Modules Without a Makefile.PL Are Accepted Via PAUSE To Go Into The Perl综合典藏网 But Usually Get a grimace From Those Of Us Who download Your 材料, Because We Might Have To 数字 Out How To Build And 安装 Your 分配.
Because it is a slice, remember that those parentheses are mandatory.||Because It Is a 薄片, 记得 That Those Parentheses Are 强制性.
use Exporter; use Test::Builder;||Use Exporter; Use Test::Builder;
That works just fine.||That Works Just Fine.
Can we shorten that?||Can We 缩短 That?
That found, Perl invokes that method with the already frozen argument list, as if we had said:||That Found, Perl invokes That Method With The Already frozen Argument List, As If We Had Said:
While creating temporarily named arrays would work in the simplest cases, creating such names becomes more complicated as the data structures become more detailed.||While Creating temporarily Named Arrays Would Work In The simplest Cases, Creating Such Names Becomes More 错综复杂的 As The Data Structures 变成 More Detailed.
The anonymous array contains the person's name and the provision item.||The Anonymous Array 包含 The 人's Name And The 准备 条款.
count_down( ); count_down( ); count_down( ); print 'we're down to ', count_remaining( ), " coconuts!\n";||count_down( ); count_down( ); count_down( ); Print 'We'Re 向下 To ', count_remaining( ), " coconuts!\n";
We can write a bit of code to check for the Skipper's supplies:||We Can Write a Bit Of Code To Check For The Skipper's Supplies:
It should be part of Perl 5.10, though.||It Should Be Part Of Perl 5.10, Though.
We don't have to explicitly close the file ourselves.||We Don't Have To 清晰地 Close The File 我们自己.
Answers for Chapter 8 A.7.1.||Answers For Chapter 8 A.7.1.
For example, suppose we want to give our horse a name.||For Example, 猜想 We Want To Give Our 马 a Name.
We'll use it later, in Chapter 10 to load code from an external file, but then we'll also show you a much better way to do that too.||We'我 Use It 更晚, In Chapter 10 To Load Code From An External File, But Then We'我 Also Show You a Much Better Way To Do That Too.
Unless otherwise noted, everything in this book applies equally well to Windows ActivePerl from ActiveState and all other modern implementations of Perl.||Unless Otherwise 著名的, Everything In This 书 适用 相等地 Well To 微软视窗操作系统 ActivePerl From ActiveState And All Other Modern 实现 Of Perl.
{ package Cow;||{ Package Cow;
The $read_fh doesn't have to be connected to a file, either.||The $read_fh Doesn't Have To Be connected To a File, Either.
The variable $_ isn't a mere copy of the data item, though; it is an alias for the actual data element, similar to the control variable in a foreach loop.||The Variable $_ Isn't a 仅仅的 Copy Of The Data 条款, Though; It Is An Alias For The Actual Data Element, Similar To The Control Variable In a Foreach Loop.
You don't have to be a Unix guru, or even a Unix user, to benefit from this book.||You Don't Have To Be a Unix guru, Or Even a Unix User, To 益处 From This 书.
IO::Scalar Sometimes we don't want to print to a file and would rather build up the output in a string.||IO::Scalar Sometimes We Don't Want To Print To a File And Would Rather Build Up The 出产 In a String.
sub set_color_rgb {||Sub set_color_rgb {
[*] Had there been XS files or other more complex build steps, these also would have happened here.||[*] Had There Been XS Files Or Other More 综合的 Build 步骤, These Also Would Have Happened Here.
Therefore, it's also the same recipe for building anything else inherited from Animal, so let's put it there:||Therefore, It's Also The Same 菜谱 For 建筑物 Anything Else 继承 From Animal, So Let's Put It There:
just as we did in the original program.||Just As We Did In The Original Program.
use CGI qw(:all); # define 'param' and 800-gazillion others my $f = param('foo');||Use (（CGI）通用网关界面)通用网关界面 Qw(:All); # Define 'param' And 800-gazillion 别人 My $f = param('Foo');
We'll be executing:||We'我 Be 执行:
This is a lot of typing to simply say "the second element should be a reference to an array containing these elements."||This Is a 许多 Of 打字 To Simply Say "The Second Element Should Be a Reference To An Array Containing These Elements."
Pay special attention to the copyright and license section.||Pay Special 注意 To The copyright And 许可（证） Section.
our @EXPORT_OK = ( @{ $EXPORT_TAGS{'all'} } );||Our @EXPORT_OK = ( @{ $EXPORT_TAGS{'All'} } );
But even though the code inside the block is finished, Perl continues running the code just after the eval.||But Even Though The Code 里面 The Block Is 制成的, Perl 继续 连续的 The Code Just After The Eval.
When the block ends, the @skipper name disappears.||When The Block Ends, The @skipper Name disappears.
Now we use the scalar variable in place of the bareword in the line input operator.||Now We Use The Scalar Variable In Place Of The Bareword In The Line Input Operator.
Our program takes the ISBN from the command line and creates the new ISBN object, which we store in $isbn.||Our Program Takes The ISBN From The 命令 Line And Creates The New ISBN Object, Which We 商店 In $isbn.
into his typical navigation program, it's almost the same as if the eval code were executed right at that point in the program.[]||Into 他的 典型的 航行 Program, It's Almost The Same As If The Eval Code Were Executed Right At That 尖 In The Program.[]
The file test operator -s works on $_ by default, and that's just the current element that grep tests.||The File Test Operator -s Works On $_ By Default, And That's Just The Current Element That Grep 测试.
## new code here...||## New Code Here...
If we want them to be passed uninterpreted to the parent class, we can add it as a parameter:||If We Want Them To Be Passed uninterpreted To The 父或母亲 Class, We Can 增添 It As a Parameter:
$ perl Makefile.PL||$ Perl Makefile.PL
That isn't very useful on its own, but if we want to pull in the default symbols and more, we don't have to type everything out simply because we supply an import list:||That Isn't Very Useful On Its Own, But If We Want To 拖 In The Default Symbols And More, We Don't Have To Type Everything Out Simply Because We Supply An Import List:
What we want to know is where they occurred in the original list.||What We Want To Know Is Where They Occurred In The Original List.
my $fruits = ['pineapple', 'papaya', 'mango'];||My $fruits = ['菠萝', 'papaya', 'mango'];
Here, Mouse has its own speaking routine, so Mouse->speak doesn't immediately invoke Animal->speak.||Here, Mouse Has Its Own 说 Routine, So Mouse->说话 Doesn't 立即 调用 Animal->说话.
If you can pair up with someone on this exercise, even better.||If You Can 对 Up With Someone On This 锻炼, Even Better.
package Test::My::List::Util; use strict;||Package Test::My::List::Util; Use Strict;
my @odd_digit_sum = grep {||My @odd_digit_sum = Grep {
The Test::File module, written by brian, encapsulates intent in the name of the function.||The Test::File Module, Written By brian, encapsulates 意图 In The Name Of The Function.
The only difference here is that we removed the braces around @$items.||The Only Difference Here Is That We Removed The 牙套 Around @$物品.
For example, suppose that we want find to look for files in the current working directory, so we give it (".") as the list of directories to search.||For Example, 猜想 That We Want 寻找 To Look For Files In The Current Working Directory, So We Give It (".") As The List Of directories To 搜查.
Later, we'll show you how to update MANIFEST.||Later, We'我 Show You How To Update MANIFEST.
Using AUTOLOAD for Accessors Chapter 12 showed how to create color and set_color to get and set the color of an animal.||Using AUTOLOAD For Accessors Chapter 12 showed How To Create 颜色 And set_color To Get And Set The 颜色 Of An 动物.
We can create shortcuts, or tags, to group them under a single name.||We Can Create shortcuts, Or tags, To Group Them 在 a Single Name.
We can also allow it as an implicitly named package variable:||We Can Also Allow It As An Implicitly Named Package Variable:
Have we verified that it does what we say it does?||Have We verified That It Does What We Say It Does?
Now our log message ends up in the scalar variable $string_log instead of a file.||Now Our 原木 音讯 Ends Up In The Scalar Variable $string_log Instead Of a File.
Luckily for you, there is a loose collection of volunteers on the Perl Modules list (modules@perl.org) who've been working with CPAN and modules for quite a while and can help you sort through most problems.||Luckily For You, There Is a 松的 Collection Of volunteers On The Perl Modules List (modules@perl.org) Who'Ve Been Working With Perl综合典藏网 And Modules For Quite a While And Can Help You Sort 通过 Most 问题.
Within each group, list the destination machines in order from most to least data transferred to that target from the source machine.||Within Each Group, List The 终点 Machines In Order From Most To Least Data transferred To That 目标 From The Source 机器.
which again is unique for this array because it includes the hexadecimal (base 16) representation of the array's unique memory address.||Which Again Is 唯一的 For This Array Because It 包括 The hexadecimal (Base 16) 表示 Of The Array's 唯一的 Memory 地址.
Module documentation typically follows the old Unix manpage format, which starts with a NAME and SYNOPSIS section.||Module 提供文件 典型的 Follows The Old Unix manpage Format, Which Starts With a 标题 And 概述 Section.
In the foreach, we had to decide which filehandles to include.||In The Foreach, We Had To Decide Which Filehandles To Include.
At this point, $tv_horse is an instance of Horse.[] That is, it's a specific horse.||At This 尖, $tv_horse Is An 例子 Of Horse.[] That Is, It's a 特殊的 马.
For instance, some of our features may only work for a particular version of Perl, a particular operating system, or only when optional modules are available.||For 例子, Some Of Our 特征 May Only Work For a Particular Version Of Perl, a Particular Operating System, Or Only When Optional Modules Are Available.
Thus, the grep checks each required item against the list.||Thus, The Grep 检查 Each 要求 条款 反对 The List.
When the received and expected values are the same, Test::More outputs a line starting with ok.||When The received And Expected Values Are The Same, Test::More outputs a Line Starting With Ok.
Not only that, we haven't output anything useful if the test fails, so we won't know what went wrong.||Not Only That, We 还't 出产 Anything Useful If The Test 失败, So We Won't Know What 去 错误的.
Note that we changed the first parameter holder to $either to show that it is intentional:||Note That We 改变 The First Parameter 持有人 To $Either To Show That It Is 有意的:
Sure it would.||Sure It Would.
my @professor = qw(sunscreen water_bottle slide_rule batteries radio); for my $item (@required) {||My @教授 = Qw(sunscreen water_bottle slide_rule batteries 无线电); For My $条款 (@要求) {
(And like all testing expressions, it's evaluated in a scalar context.)||(And Like All testing Expressions, It's 评估 In a Scalar Context.)
When the end user unpacks the distribution, the module installer tool verifies that all of the files in MANIFEST are in the archive.||When The End User unpacks The 分配, The Module 安装 工具 verifies That All Of The Files In MANIFEST Are In The archive.
my $string = 'Mary-Ann'; $string =~ tr/A-Z/a-z/; # force all lowercase $string =~ tr/a-z//cd; # strip all but a-z from the string print $string; # prints "maryann"||My $String = 'Mary-Ann'; $String =~ Tr/A-Z/a-z/; # Force All lowercase $String =~ Tr/a-z//cd; # Strip All But a-z From The String Print $String; # Prints "maryann"
Instead of using die or warn in your modules, use the Carp functions instead.||Instead Of Using Die Or 警告 In Your Modules, Use The Carp Functions Instead.
package Navigate::SeatOfPants; our @EXPORT = qw(guess_direction_toward); our @EXPORT_OK = qw(ask_the_skipper_about get_north_from_professor); use base qw(Exporter);||Package Navigate::SeatOfPants; Our @EXPORT = qw(guess_direction_toward); Our @EXPORT_OK = Qw(ask_the_skipper_about get_north_from_professor); Use Base qw(Exporter);
Next comes the methods that work with either a class or an instance:||Next 来 The Methods That Work With Either a Class Or An 例子:
Once we know it fails, we write the code to make it work.||Once We Know It 失败, We Write The Code To Make It Work.
The output functionality could be separated entirely from the updating, in fact.||The 出产 Functionality Could Be Separated 完全地 From The updating, In Fact.
[*] We could do that from our module, but most likely the test script will use other modules too.||[*] We Could Do That From Our Module, But Most Likely The Test 临时单据 Will Use Other Modules Too.
my @output_data =||My @output_data =
We'll look for it in Animal and not find it, and the program aborts.||We'我 Look For It In Animal And Not 寻找 It, And The Program aborts.
When in doubt, ignore indirect object syntax.||When In 怀疑, 忽视 Indirect Object Syntax.
Let's print a crew roster:||Let's Print a （飞机等的）全体人员 roster:
always returns true, because all objects can do the fandango.||Always Returns True, Because All Objects Can Do The fandango.
The new subroutine works nicely in the current navigation program.||The New Subroutine Works 好 In The Current 航行 Program.
One way is to require that the Skipper put an explicit prefix in front of every name defined in the library, say, navigation_.||One Way Is To Require That The Skipper Put An 清楚的 前缀 In Front Of Every Name Defined In The Library, Say, navigation_.
A reference to the array is like a pointer: it points at the array, but it is not the array itself.||A Reference To The Array Is Like a Pointer: It 分 At The Array, But It Is Not The Array Itself.
We can rewind the directory handle to start over:||We Can rewind The Directory Handle To Start 在:
The reverse operator returns a list in the opposite order.||The 颠倒的 Operator Returns a List In The 对立的 Order.
More Complex Tests (Multiple Test Scripts) Initially, the h2xs program[*] gave us a single testing file, t/1.t.[] We can stick all our tests into this file, but it generally makes more sense to break the tests into logical groups in separate files.||More Complex Tests (Multiple Test Scripts) Initially, The h2xs Program[*] 给 Us a Single testing File, t/1.t.[] We Can Stick All Our 测试 Into This File, But It Generally 使 More Sense To 打破 The 测试 Into 逻辑的 groups In Separate Files.
Nested Object Destruction If an object holds another object (say, as an element of an array or the value of a hash element), Perl DESTROYs the containing object before any of the contained objects begin their discarding process.||Nested Object Destruction If An Object holds 另一个 Object (Say, As An Element Of An Array Or The Value Of a Hash Element), Perl DESTROYs The Containing Object Before Any Of The 包含 Objects 开始 Their discarding 程序.
Again, for recursively defined data, a recursive subroutine is usually the key.||Again, For Recursively Defined Data, a 递归 Subroutine Is Usually The Key.
Generally, numbers that begin with 0 are alpha or beta, with external interfaces that may still be in flux.||Generally, 编号 That 开始 With 0 Are alpha Or Beta, With External 接口 That May Still Be In 流动.
If we declare a lexical variable, then using that name without a package prefix gets the lexical variable.||If We Declare a Lexical Variable, Then Using That Name Without a Package 前缀 Gets The Lexical Variable.
Unless we say otherwise, these modules are not part of the Perl standard distribution (unlike Test::More) and you'll need to install them yourself.||Unless We Say Otherwise, These Modules Are Not Part Of The Perl Standard 分配 (不同的 Test::More) And You'我 Need To 安装 Them 你（们）自己.
[*] use lib also unshifts an architecture-dependent library below the requested library, making it more valuable than the explicit counterpart presented earlier.||[*] Use lib Also unshifts An 建筑学-依靠的 Library Below The Requested Library, 制作 It More 宝贵的 Than The 清楚的 同类的人或物 提出 Earlier.
Ahh, notice that we have three files, but the fourth entry bin doesn't have undef for a value but rather the hash reference created earlier for the Skipper's personal bin directory.||Ahh, Notice That We Have Three Files, But The 第四 Entry bin Doesn't Have Undef For a Value But Rather The Hash Reference Created Earlier For The Skipper's 私人的 bin Directory.
Exercise 4 [20 min] Modify the recursive directory dumping routine so it shows the nested directories through indentation.||Exercise 4 [20 min] Modify The 递归 Directory 倾销 Routine So It Shows The 嵌套的 directories 通过 indentation.
Professor: By my calculations, you must be Ginger!||Professor: By My calculations, You Must Be Ginger!
In fact, we're ready to make an archive right now.||In Fact, We'Re 准备好的 To Make An archive Right Now.
However, using an AUTOLOAD method, we can construct the nearly identical accessors as needed, saving both compilation time and wear-and-tear on the developer's keyboard.||However, Using An AUTOLOAD Method, We Can Construct The 几乎 同一的 accessors As Needed, Saving Both 编译 Time And 穿-And-眼泪 On The developer's 键盘.
We called the constructor named here so it quickly denotes the constructor's argument as the name for this particular Horse.||We Called The 构造函数 Named Here So It 快 denotes The 构造函数's Argument As The Name For This Particular Horse.
# this method call is in void context|| # This Method Call Is In Void Context
my $Quartermaster = Island::Plotting->new(||My $Quartermaster = Island::Plotting->New(
Remember the Perl motto: "There's more than one way to do it" (although not all of them are equally nice or legitimate).||Remember The Perl 座右铭: "There's More Than One Way To Do It" (Although Not All Of Them Are 相等地 Nice Or 合法的).
The quotient is syntax error at (eval 1) line 2, at EOF||The quotie(绑定操作符)nt Is Syntax Error At (Eval 1) Line 2, At 结束标志
Consider this part to be magic that we just cut and paste into our program.||Consider This Part To Be Magic That We Just Cut And 浆糊 Into Our Program.
While a system administrator might add a setting of PERL5LIB to a system-wide startup script, most people frown on that.||While a System administrator Might 增添 a Setting Of PERL5LIB To a System-宽的 startup 临时单据, Most People 皱眉头 On That.
The module that got there last won.||The Module That Got There Last Won.
Exercise 2 use Benchmark qw(timethese);||Exercise 2 Use Benchmark qw(timethese);
That's a scalar (as are all references), so it's not suitable to use alone as the value of a hash.||That's a Scalar (As Are All References), So It's Not Suitable To Use 单独的 As The Value Of a Hash.
use Island::Plotting::Maps 1.10 qw{ map_debugger };||Use Island::Plotting::Maps 1.10 Qw{ map_debugger };
While you could potentially construct all these files by hand, it's much simpler to use something to do it for you.||While You Could 潜在 Construct All These Files By Hand, It's Much simpler To Use Something To Do It For You.
[*] Recursive functions should all have a base, or trivial case, where they don't need to recurse and that all other recursions can eventually reach.||[*] Recursive Functions Should All Have a Base, Or 琐碎的 Case, Where They Don't Need To recurse And That All Other recursions Can 最终 到达.
Make sure that a RaceHorse still does everything a normal Horse does otherwise.||Make Sure That a RaceHorse Still Does Everything a Normal Horse Does Otherwise.
But wait: there's more (to Test::More).||But 等候: There's More (To Test::More).
Answers for Chapter 9 A.8.1.||Answers For Chapter 9 A.8.1.
By default, objects work in this manner because objects use the same reference structure to make more complex objects.||By Default, Objects Work In This Manner Because Objects Use The Same Reference Structure To Make More 综合的 Objects.
We tell Perl how to find modules the same way we did before.||We Tell Perl How To 寻找 Modules The Same Way We Did Before.
(Of course, we can eliminate use lib entirely if we can install our modules in standard @INC locations, but that's not always practical.)||(Of Course, We Can 消灭 Use lib 完全地 If We Can 安装 Our Modules In Standard @INC 位置, But That's Not Always 实用的.)
Our editor chose the name, which tells you what to expect.||Our 编辑 chose The Name, Which 告诉 You What To 盼望.
We can reduce the namespace clutter by narrowing down the scope of the various array names.||We Can Reduce The Namespace clutter By narrowing 向下 The Scope Of The 各种各样的 Array Names.
The array is empty because Mrs. Howell hasn't packed anything for this trip.||The Array Is Empty Because Mrs. Howell hasn't packed Anything For This 旅行.
In other words, an initially empty array becomes an array of three elements.||In Other Words, An 最初 Empty Array Becomes An Array Of Three Elements.
The purpose of PERL5LIB is to enable non-administrators to extend Perl to recognize additional directories.||The Purpose Of PERL5LIB Is To 使能够 Non-administrators To 延伸 Perl To 认出 Additional directories.
Why would we want to do that?||Why Would We Want To Do That?
Because the reference count is not yet zero, the data continues to live on, although it is now referenced only by elements of @all_with_names.||Because The Reference 计算 Is Not 仍然 零, The Data 继续 To 居住生存 On, Although It Is Now 参考 Only By Elements Of @all_with_names.
Answer for Chapter 12 A.11.1.||Answer For Chapter 12 A.11.1.
But map should rarely, if ever, be used in anything but a list context.)||But Map Should 难得, If 曾经, Be Used In Anything But a List Context.)
Those tasks are difficult in some other languages, and using a looped data structure is a common way to get around the language's limitations.||Those Tasks Are 困难的 In Some Other Languages, And Using a looped Data Structure Is a Common Way To Get Around The 语言's limitations.
(We've sent Fred, Barney, Betty, and Wilma home, though.||(We'Ve 打发 Fred, Barney, Betty, And Wilma 家, Though.
This is good because any additional castaway won't require having to rewrite the program.||This Is Good Because Any Additional castaway Won't Require Having To 重写 The Program.
my @all_wet = grep {||My @all_wet = Grep {
That's not there, so Perl checks for the inheritance array @Cow::ISA.||That's Not There, So Perl 检查 For The Inheritance Array @Cow::ISA.
It seems like a lot of work now since only two values have offsets, but doing it this way eliminates two special cases.||It 似乎 Like a 许多 Of Work Now Since Only Two Values Have 抵消, But Doing It This Way eliminates Two Special Cases.
Exercise You can find the answer to this exercise in "Answer for Chapter 7" in the Appendix.||Exercise You Can 寻找 The Answer To This 锻炼 In "Answer For Chapter 7" In The Appendix.
print 'The quotient is ', eval '5 /', "\n"; warn $@ if $@;||Print 'The quotie(绑定操作符)nt Is ', Eval '5 /', "\n"; 警告 $@ If $@;
my @bigger = map {||My @bigger = Map {
[*] TODO tests require Test::Harness Version 2.0 or later, which comes with Perl 5.8, but in earlier releases, they have to be installed from CPAN.||[*] TODO 测试 Require Test::Harness 版本 2.0 Or 更晚, Which 来 With Perl 5.8, But In Earlier Releases, They Have To Be 安装 From Perl综合典藏网.
He begins logging the number of bytes transferred to a log file, giving the source host, the destination host, and the number of transferred bytes:||He begins logging The Number Of 字节 transferred To a 原木 File, Giving The Source 一大群, The 终点 一大群, And The Number Of transferred 字节:
use CGI qw(param); # import the param function my $f = param('foo'); # get the foo field||Use (（CGI）通用网关界面)通用网关界面 qw(param); # Import The param Function My $f = param('Foo'); # Get The Foo 田野
This is how we indicate subdirectories.||This Is How We 指明 subdirectories.
When those values don't match, it outputs a line starting with not ok.||When Those Values Don't Match, It outputs a Line Starting With Not Ok.
Professor: By my calculations, you must be Gilligan!||Professor: By My calculations, You Must Be Gilligan!
That means that, at this point, we're about to invoke the autovivification, and we've got our keys established.||That Means That, At This 尖, We'Re About To 调用 The autovivification, And We'Ve Got Our Keys 已建立的.
And now we see the scalar variable in its place.||And Now We See The Scalar Variable In Its Place.
use File::Basename ( ); # no import my $base = File::Basename::basename($some_path);||Use File::Basename ( ); # No Import My $Base = File::Basename::basename($some_path);
For example, suppose that Gilligan's module provides the guess_direction_toward routine by default but could also provide the ask_the_skipper_about and get_north_from_professor routines, if requested.||For Example, 猜想 That Gilligan's Module Provides The guess_direction_toward Routine By Default But Could Also Provide The ask_the_skipper_about And get_north_from_professor Routines, If Requested.
Changes The Changes file tracks the evolution of our code.||Changes The Changes File 轨迹 The 发展 Of Our Code.
We can use either one.||We Can Use Either One.
There are a couple of straightforward ways to handle the declaration and setting of @ISA.||There Are a 一对 Of 直爽的 Ways To Handle The Declaration And Setting Of @ISA.
Mr. Ed eats an apple.||Mr. Ed Eats An 苹果.
sub color {||Sub 颜色 {
Everything that we put in %EXPORT_TAGS has to also be in either @EXPORT or @EXPORT_OK.||Everything That We Put In %EXPORT_TAGS Has To Also Be In Either @EXPORT Or @EXPORT_OK.
"What if a method is missing?"||"What If a Method Is Missing?"
unshift @INC, '/home/gilligan/lib'; # broken use Navigation::SeatOfPants;||unshift @INC, '/家/gilligan/lib'; # Broken Use Navigation::SeatOfPants;
However, this is a bit more verbose than it needs to be.||However, This Is a Bit More 罗嗦 Than It Needs To Be.
Thus, all animals are brown (muddy, perhaps), unless a specific animal class gives a specific override to this method.||Thus, All animals Are 褐色（的） (泥泞的, 也许), Unless a 特殊的 动物 Class Gives a 特殊的 Override To This Method.
Since the subroutines persist beyond the scope and access variables declared within that scope, they become closures and thus can continue to access $count throughout the lifetime of the program.||Since The Subroutines 坚持 Beyond The Scope And Access Variables Declared Within That Scope, They 变成 Closures And 如此 Can Continue To Access $计算 Throughout The Lifetime Of The Program.
Next, use a simple dbmopen to associate %STANDINGS with permanent storage:||Next, Use a Simple dbmopen To Associate %STANDINGS With 永久性的 贮藏:
In this example, we mock the database method list_names, which we know will return us three names.||In This Example, We 嘲笑 The database Method list_names, Which We Know Will Return Us Three Names.
[] We can also used a name subroutine that sort invokes for each comparison.||[] We Can Also Used a Name Subroutine That Sort invokes For Each 比较.
Note, however, that no shortcut gets the entire array from an array reference.||Note, However, That No 捷径 Gets The 完全的 Array From An Array Reference.
The version number in the name comes from the module's $VERSION variable.[*]||The Version Number In The Name 来 From The Module's $VERSION Variable.[*]
The version number identifies a particular release of a particular module as it floats around the Internet.||The Version Number identifies a Particular Release Of a Particular Module As It floats Around The Internet.
# yes, it's a setter:|| # Yes, It's a setter:
In that case, Perl remembers the prior package and restores it when that scope ends.||In That Case, Perl 记得 The 较早的 Package And restores It When That Scope Ends.
Test your work with:||Test Your Work With:
[*] Similar to the way the Animal constructor creates a Horse, not an Animal, when passed Horse as the class.||[*] Similar To The Way The Animal 构造函数 Creates a Horse, Not An Animal, When Passed Horse As The Class.
Following the code, you'll find your necessary true value:||Following The Code, You'我 寻找 Your 必要的 True Value:
We know the test is going to fail, and that's okay.||We Know The Test Is Going To 失败, And That's Okay.
for my $source (keys %total_bytes) {||For My $Source (Keys %total_bytes) {
Your maintenance programmer will thank you.||Your 保养 Programmer Will 谢谢 You.
# enable slurp mode|| # 使能够 Slurp 方式
use strict; use Oogaboogoo::date qw(:all);||Use Strict; Use Oogaboogoo::Date Qw(:All);
Animal::eat($tv_horse, 'hay');||Animal::吃($tv_horse, '干草');
if (eval { $tv_horse->can('eat') } ) { ... }||If (Eval { $tv_horse->Can('吃') } ) { ... }
Finally, the mandatory true value at the end of the package:||Finally, The 强制性 True Value At The End Of The Package:
Throughout this book, we'll try to identify which modules comes with Perl (and in most cases, with which version they started coming with Perl).||Throughout This 书, We'我 Try To 认出 Which Modules 来 With Perl (And In Most Cases, With Which Version They 开始 coming With Perl).
For example, the hash reference might be constructed like so:||For Example, The Hash Reference Might Be 构造 Like So:
At this point, $provisions{"The Skipper"} doesn't exist, but we're trying to use it as an array reference.||At This 尖, $provisions{"The Skipper"} Doesn't Exist, But We'Re 尝试 To Use It As An Array Reference.
my $same_count = 0;||My $same_count = 0;
Basically, the pretend method has to return the right thing when we call it, and it doesn't have to do any processing.||Basically, The 假装 Method Has To Return The Right Thing When We Call It, And It Doesn't Have To Do Any 加工（的）.
You can just look at the source yourself.||You Can Just Look At The Source 你（们）自己.
foreach my $fh ( $log_fh, $scalar_fh ) {||Foreach My $Fh ( $log_fh, $scalar_fh ) {
This will obviously fail, since we haven't written the module yet.||This Will 明显地 失败, Since We 还't Written The Module 仍然.
The @EXPORT array contains the names of all the variables and subroutines that use will automatically import into the caller by default.||The @EXPORT Array 包含 The Names Of All The Variables And Subroutines That Use Will Automatically Import Into The Caller By Default.
That's the second step inside the BEGIN block.||That's The Second 脚步 里面 The BEGIN Block.
We could also print the not only if the test failed, with the ok as a separate step.||We Could Also Print The Not Only If The Test failed, With The Ok As a Separate 脚步.
With a few notable exceptions, we recommend you avoid eval on a string.||With a Few 值得注意的 exceptions, We 推荐 You Avoid Eval On a String.
Perl then accesses the third element (index value 2), which causes Perl to grow the array to be three elements long.||Perl Then Accesses The 第三 Element (Index Value 2), Which Causes Perl To Grow The Array To Be Three Elements Long.
Once we save our Test::Minnow::RequiredItems, we can use it immediately in a test script.||Once We Save Our Test::Minnow::RequiredItems, We Can Use It 立即 In a Test 临时单据.
To install a module, we use the i command.||To 安装 a Module, We Use The 我 命令.
ok 1 - 1 + 2 = = 3 ok 2 - 2 * 4 = = 8 ok 3 - 5 / 3 = = (approx) 1.666667 ok 4 - -3 + 3 = = 0 1..4||Ok 1 - 1 + 2 = = 3 Ok 2 - 2 * 4 = = 8 Ok 3 - 5 / 3 = = (approx) 1.666667 Ok 4 - -3 + 3 = = 0 1..4
However, crafting a Makefile is tricky but repetitive.||However, crafting a Makefile Is 巧妙的 But 重复的.
Test the results of this subroutine by calling it on . (the current directory) and inspecting the result:||Test The Results Of This Subroutine By Calling It On . (The Current Directory) And inspecting The Result:
We'd have to give that new test the test number 2 and change the last test to test number 3.||We'd Have To Give That New Test The Test Number 2 And Change The Last Test To Test Number 3.
use Exporter;||Use Exporter;
It's customary to include at least a brief description of the module, installation instructions, and licensing details.||It's 习惯的 To Include At Least a 简短的 描述 Of The Module, 安装 instructions, And 许可 Details.
isnt( 2 ** 3, 6, "The result isn't 6" );||isnt( 2 ** 3, 6, "The Result Isn't 6" );
But since it's initially undef, Perl acts as if we had said:||But Since It's 最初 Undef, Perl 徒 As If We Had Said:
Earlier versions create a test.pl file, which is still run from a test harness during make test, but the output isn't captured in the same way.||Earlier Versions Create a test.pl File, Which Is Still Run From a Test 支配 在 Make Test, But The 出产 Isn't captured In The Same Way.
With that, we could make the RaceHorse class as simply as this:[*]||With That, We Could Make The RaceHorse Class As Simply As This:[*]
Fix it up, add a conversion function for the month names, and make the whole thing into a library.||Fix It Up, 增添 a 转变 Function For The 月份 Names, And Make The Whole Thing Into a Library.
It will change in the future!!!||It Will Change In The Future!!!
The Old Way In the olden days, Perl used barewords for filehandle names.||The Old Way In The olden 天, Perl Used barewords For Filehandle Names.
while (<>) {||While (<>) {
The is( ) function, as we showed earlier, compares its first argument, which is the result we got, with the second argument, which is what we expected.||The Is( ) Function, As We showed Earlier, compares Its First Argument, Which Is The Result We Got, With The Second Argument, Which Is What We Expected.
Testing is important.||Testing Is Important.
Each exercise has a "minutes to complete" rating.||Each 锻炼 Has a "minutes To Complete" 评级.
The url convenience routine was nice, initially.||The url 方便 Routine Was Nice, 最初.
Each element of the list ends up in $_, so we'll dereference that to pick out the element 0 of that array, which is just the name.||Each Element Of The List Ends Up In $_, So We'我 废弃 That To 拣 Out The Element 0 Of That Array, Which Is Just The Name.
Obviously, it's easier for Gilligan if the program itself defines the extra libraries.||Obviously, It's Easier For Gilligan If The Program Itself 定义 The Extra 库.
For the first pair of names (Gilligan and Skipper), we ask the monkey "How many pineapples does Gilligan have?" and "How many pineapples does Skipper have?"||For The First 对 Of Names (Gilligan And Skipper), We 问 The 猴子 "How Many pineapples Does Gilligan Have?" And "How Many pineapples Does Skipper Have?"
If our module contains C or C++ code (not covered here), how can the developer describe how to compile and link the code in the developer's environment or the end user environment?||If Our Module 包含 C Or C++ Code (Not covered Here), How Can The developer 描写 How To Compile And 联系 The Code In The developer's 环境 Or The End User 环境?
For example, suppose each of two data structures contains a reference to the other (see Figure 5-1):||For Example, 猜想 Each Of Two Data Structures 包含 a Reference To The Other (See Figure 5-1):
print $scalar_fh "The Howells' private beach club is closed\n";||Print $scalar_fh "The Howells' Private 海滩 俱乐部 Is 关闭的\n";
Mess up the capitalization on named parameters.||Mess Up The 资本化 On Named Parameters.
my $beast = 'Class'; $beast->method(@args);||My $野兽 = 'Class'; $野兽->Method(@Args);
He wants to write a series of files, called gilligan.info, maryann.info, and so on.||He 要 To Write a 系列 Of Files, Called gilligan.info, maryann.info, And So On.
The Makefile.PL file should specify either a VERSION value or a VERSION_FROM value.||The Makefile.PL File Should Specify Either a VERSION Value Or a VERSION_FROM Value.
When should we use a reverse sort, and when should we switch $a and $b?||When Should We Use a 颠倒的 Sort, And When Should We Switch $a And $b?
Class::MethodMaker generated the sound method as an abstract method.||Class::MethodMaker Generated The 声 Method As An 抽象的 Method.
If we find a file named Makefile.PL, we run this series of commands to build, test, and finally install the source:||If We 寻找 a File Named Makefile.PL, We Run This 系列 Of commands To Build, Test, And 最终 安装 The Source:
As you can see, various levels of optimization can lead to obfuscation.||As You Can See, 各种各样的 levels Of 优化 Can 铅 To obfuscation.
use lib qw(/home/skipper/perl-lib);||Use lib Qw(/家/skipper/Perl-lib);
This time, we've got something that works even when we enable use strict 'refs'.||This Time, We'Ve Got Something That Works Even When We 使能够 Use Strict '裁判'.
[Trigger has died.]||[Trigger Has died.]
(The data itself doesn't change, but the number of ways in which we can access the data changes.)||(The Data Itself Doesn't Change, But The Number Of Ways In Which We Can Access The Data Changes.)
use strict; { package Animal;||Use Strict; { Package Animal;
With arguments, it only tests the files we tell it to test.||With Arguments, It Only 测试 The Files We Tell It To Test.
Write the tests, and then add the code.||Write The 测试, And Then 增添 The Code.
An update or an uninstalled module in one of the CPAN shells, CPAN.pm, or CPANPLUS.pm||An Update Or An uninstalled Module In One Of The Perl综合典藏网 shells, Perl综合典藏网.Pm, Or Perl综合典藏网PLUS.Pm
The array @all_with_names holds a multilevel data structure containing strings and references to arrays||The Array @all_with_names holds a 多级 Data Structure Containing Strings And References To Arrays
We call methods on $Test to tell the test harness what happened.||We Call Methods On $Test To Tell The Test 支配 What Happened.
[] There's no joy for RPN fans.||[] There's No 高兴 For RPN fans.
my $target_dow = 1; # Sunday is 0, Monday is 1, ... my @starting_directories = (".");||My $target_dow = 1; # Sunday Is 0, Monday Is 1, ... My @starting_directories = (".");
count_one( ); count_one( ); count_one( ); print 'we have seen ', count_so_far( ), " coconuts!\n";||count_one( ); count_one( ); count_one( ); Print 'We Have Seen ', count_so_far( ), " coconuts!\n";
But let's say we wanted to test a routine that writes something to STDOUT, such as making sure a horse eats properly:||But Let's Say We 想要 To Test a Routine That 写 Something To STDOUT, Such As 制作 Sure a 马 Eats Properly:
It compiles and executes code from a string at runtime.||It compiles And 实行 Code From a String At Runtime.
In fact, we didn't even need to initialize @Mouse::ISA to say that a Mouse was an Animal, because all the methods needed for speak are defined completely with Mouse.||In Fact, We Didn't Even Need To Initialize @Mouse::ISA To Say That a Mouse Was An Animal, Because All The Methods Needed For 说话 Are Defined 完全地 With Mouse.
The problem is that we invoked cut and paste to duplicate code, and in OOP, that's a sin.||The Problem Is That We invoked Cut And 浆糊 To 二重的 Code, And In OOP, That's a 罪.
It prints the not_ok along with the diagnostic message.||It Prints The not_ok 沿着 With The 诊断 音讯.
In general, the more items sorted, the more expensive the computed function, and the better you can expect the Schwartzian Transform to perform.||In General, The More 物品 分类, The More Expensive The computed Function, And The Better You Can 盼望 The Schwartzian Transform To 执行.
Slow down, take a breather, and do the exercises!||Slow 向下, Take a breather, And Do The exercises!
my $Test = Test::Builder->new( );||My $Test = Test::Builder->New( );
To skip tests, we do much the same thing we did for the TODO tests, but Test::More does something much different.||To 跳过 测试, We Do Much The Same Thing We Did For The TODO 测试, But Test::More Does Something Much Different.
Anyway, this is where the code goes, usually as a series of subroutines, possibly preceded by some shared module data (using my declarations) and perhaps a few package variables (using our declarations in recent Perl versions).||Anyway, This Is Where The Code 去, Usually As a 系列 Of Subroutines, Possibly preceded By Some Shared Module Data (Using My Declarations) And 也许 a Few Package Variables (Using Our Declarations In 近来的 Perl Versions).
Although there are more things that we can do, there isn't more that we have to do.||Although There Are More Things That We Can Do, There Isn't More That We Have To Do.
The arrow has to be between non-subscripty things.||The 箭 Has To Be Between Non-subscripty Things.
You know about testing now, so as long as your tests pass, you know you're doing the right thing (or the tests don't work!).||You Know About testing Now, So As Long As Your 测试 Pass, You Know You'Re Doing The Right Thing (Or The 测试 Don't Work!).
If we're sorting numbers, then $a and $b will be two numbers from our list.||If We'Re sorting 编号, Then $a And $b Will Be Two 编号 From Our List.
package Island::Plotting::Maps; [... stuff down to the $VERSION setting above ...]||Package Island::Plotting::Maps; [... 材料 向下 To The $VERSION Setting Above ...]
No matter which output channels the user selects, send the output with a single print statement.||No Matter Which 出产 channels The User 选择, 派遣 The 出产 With a Single Print Statement.
my $not_yet; # new undefined variable @$not_yet = (1, 2, 3);||My $not_yet; # New Undefined Variable @$not_yet = (1, 2, 3);
While maintaining a MANIFEST sounds like it might be painful, we know that we won't accidentally include our "notes to self" in the distribution just because those files happened to be in the wrong directory.||While maintaining a MANIFEST 听起来 Like It Might Be 痛苦的, We Know That We Won't 偶尔 Include Our "备忘 To 自己" In The 分配 Just Because Those Files Happened To Be In The 错误的 Directory.
After we check for the sum routine, we test a series of sums, using different numbers of arguments and different values.||After We Check For The 总数 Routine, We Test a 系列 Of sums, Using Different 编号 Of Arguments And Different Values.
Packages as Namespace Separators If the name prefix of the last example didn't have to be spelled out on every use, things would work much better.||Packages As Namespace Separators If The Name 前缀 Of The Last Example Didn't Have To Be spelled Out On Every Use, Things Would Work Much Better.
First, let's use the "take a reference to" operator.||First, Let's Use The "Take a Reference To" Operator.
use Oogaboogoo::date qw(:all);||Use Oogaboogoo::Date Qw(:All);
In fact, it's common to have more than one base case in various branches of a recursive algorithm.||In Fact, It's Common To Have More Than One Base Case In 各种各样的 分支 Of a 递归 算法.
IO::Handle Behind the scenes, Perl is really using the IO::Handle module to work this magic, so our filehandle scalar is really an object.[*] The IO::Handle package is a base class for input-output things, so it handles a lot more than just files.||IO::Handle Behind The scenes, Perl Is Really Using The IO::Handle Module To Work This Magic, So Our Filehandle Scalar Is Really An Object.[*] The IO::Handle Package Is a Base Class For Input-出产 Things, So It 处理 a 许多 More Than Just Files.
Inside the AUTOLOAD, we store the method name in $method so we can change it.||Inside The AUTOLOAD, We 商店 The Method Name In $Method So We Can Change It.
Exercises You can find the answers to these exercises in "Answers for Chapter 10" in the Appendix.||Exercises You Can 寻找 The answers To These exercises In "Answers For Chapter 10" In The Appendix.
All of the files with a byte -size smaller than 1, 000 bytes end up in @smaller_than_1000.||All Of The Files With a 字节 -Size smaller Than 1, 000 字节 End Up In @smaller_than_1000.
We might even add new features that temporarily fail while we are developing.||We Might Even 增添 New 特征 That temporarily 失败 While We Are 发展中的.
Exercise 1 The module Oogaboogoo/date.pm looks like this:||Exercise 1 The Module Oogaboogoo/date.pm Looks Like This:
We can construct a URI::URL object as a traditional object constructor with:||We Can Construct a URI::URL Object As a 传统的 Object 构造函数 With:
Because a package variable (which is a global) never goes out of scope, a closure never closes on a package variable.||Because a Package Variable (Which Is a Global) Never 去 Out Of Scope, a Closure Never closes On a Package Variable.
Making a Method Work with Either Classes or Instances All we need to fix this is a way to detect whether the method is called on a class or an instance.||Making a Method Work With Either Classes Or Instances All We Need To 固定 This Is a Way To 发现 Whether The Method Is Called On a Class Or An 例子.
When you run Makefile.PL, you shouldn't get any errors or warnings if you did everything right.||When You Run Makefile.PL, You 应该't Get Any Errors Or 警告 If You Did Everything Right.
It's as if package main; were at the beginning of each file.||It's As If Package Main; Were At The 开端 Of Each File.
use File::Basename ('fileparse', 'basename');||Use File::Basename ('fileparse', 'basename');
When you use the same data from the earlier example, you get this output:||When You Use The Same Data From The Earlier Example, You Get This 出产:
Imagine it like a tee connector on a bilge output pipe; when the water gets to the tee, it can flow it two different directions at the same time.||Imagine It Like a tee connector On a bilge 出产 Pipe; When The 水 Gets To The tee, It Can 流动 It Two Different 方向 At The Same Time.
Even though we can't directly examine the list value from inside those parentheses, we can display it:||Even Though We Can't 直接地 检查 The List Value From 里面 Those Parentheses, We Can 陈列 It:
This is such a common operation, though, that Perl has a pragma for it.||This Is Such a Common Operation, Though, That Perl Has a Pragma For It.
But no matter what sorting algorithm we use, at some point we have to look at item A and item B and decide which one comes first.||But No Matter What sorting 算法 We Use, At Some 尖 We Have To Look At 条款 A And 条款 B And Decide Which One 来 First.
This time, $a and $b aren't the elements of the list, but the indices.||This Time, $a And $b 还't The Elements Of The List, But The indices.
All subroutines refer to the same single instance of the global variable.||All Subroutines Refer To The Same Single 例子 Of The Global Variable.
Thus, $crew[0] is a hash reference to the information about Gilligan.||Thus, $（飞机等的）全体人员[0] Is a Hash Reference To The Information About Gilligan.
You can lift most of the code directly from the example in the chapter and then write the sum_ok function.||You Can 举起 Most Of The Code 直接地 From The Example In The 章 And Then Write The sum_ok Function.
We can refer to the @homeport variable in the main code with its full package specification:||We Can Refer To The @homeport Variable In The Main Code With Its Full Package 规格:
Because the name of the package seems inseparable from the name of the subroutine we want to invoke within that package.||Because The Name Of The Package 似乎 inseparable From The Name Of The Subroutine We Want To 调用 Within That Package.
We then use eval to process that text as Perl code.||We Then Use Eval To 程序 That 正文 As Perl Code.
As we showed in Chapter 4, when the last reference to a Perl data structure goes away, Perl automatically reclaims the memory of that data structure, including destroying any links to other data.||As We showed In Chapter 4, When The Last Reference To a Perl Data Structure 去 Away, Perl Automatically reclaims The Memory Of That Data Structure, Including 破坏 Any 链接 To Other Data.
That brings up the maintenance issue again.||That brings Up The 保养 发行发布 Again.
Exercise 2 We can't give you much help installing the module, although if you run into problems, you might want to ask brian about them since he wrote the module, as well as the cpan program you can use to install it.||Exercise 2 We Can't Give You Much Help installing The Module, Although If You Run Into 问题, You Might Want To 问 brian About Them Since 他 写 The Module, As Well As The Cpan Program You Can Use To 安装 It.
If you're not adding a test for each bug that you find, how do you know the bug is fixed?||If You'Re Not Adding a Test For Each 臭虫 That You 寻找, How Do You Know The 臭虫 Is Fixed?
Ahh, but what happens if we invoke speak on an instance?||Ahh, But What Happens If We 调用 说话 On An 例子?
# prints jacket\n }||# Prints 短外套\n }
When we want to add new features, we start by adding tests.[] Because the existing tests ensure our upward compatibility, we can be confident that our new release does everything the old release did, and then some.||When We Want To 增添 New 特征, We Start By Adding 测试.[] Because The 现存的 测试 Ensure Our 向上（的） 兼容性, We Can Be 确信的 That Our New Release Does Everything The Old Release Did, And Then Some.
We don't have to think about the output or the test numbering.||We Don't Have To 想 About The 出产 Or The Test numbering.
Represent a directory as a hash, in which the keys are the names of the entries within the directory, and values are undef for plain files.||Represent a Directory As a Hash, In Which The Keys Are The Names Of The Entries Within The Directory, And Values Are Undef For 明白的 Files.
Actually, we have the inverse of the rank.||Actually, We Have The 相反的 Of The 军衔.
We can then copy the reference or take additional references, and they'll all refer to the same thing and are interchangeable:||We Can Then Copy The Reference Or Take Additional References, And They'我 All Refer To The Same Thing And Are interchangeable:
The exception is when we make additional copies of the references of the nested data.||The Exception Is When We Make Additional Copies Of The References Of The 嵌套的 Data.
Therefore, $all_with_names[2] will be the array reference for the Gilligan's data.||Therefore, $all_with_names[2] Will Be The Array Reference For The Gilligan's Data.
Exercise Were you able to solve the halting problem?||Exercise Were You Able To 解答 The halting Problem?
We can add and remove references as we wish, and as long as the reference count doesn't hit zero, Perl maintains the array in memory and it is still accessible via any of the other access paths.||We Can 增添 And 移开 References As We Wish, And As Long As The Reference 计算 Doesn't 打 零, Perl Maintains The Array In Memory And It Is Still Accessible Via Any Of The Other Access paths.
(Rather than using a temporary array, @sources, you might have put the sort directly into the parens of the for loop.)||(Rather Than Using a temporary Array, @来源, You Might Have Put The Sort 直接地 Into The parens Of The For Loop.)
This library is free software; you can redistribute it and/or modify it under the same terms as Perl itself, either Perl Version 5.8.7 or, at your option, any later version of Perl 5 you may have available.||This Library Is Free 软件; You Can redistribute It And/Or Modify It 在 The Same Terms As Perl Itself, Either Perl 版本 5.8.7 Or, At Your 选择, Any 更晚 Version Of Perl 5 You May Have Available.
The Professor has written a subroutine called ask_monkey_about( ), which, given a castaway's name, returns the number of pineapples of storage they use.||The Professor Has Written a Subroutine Called ask_monkey_about( ), Which, Given a castaway's Name, Returns The Number Of pineapples Of 贮藏 They Use.
Using Class Variables What if we want to iterate over all the animals we've made so far?||Using Class Variables What If We Want To iterate 在 All The animals We'Ve Made So Far?
We're not going to go into all of the details here, but we'll get to those in Chapters 10 and 15.||We'Re Not Going To Go Into All Of The Details Here, But We'我 Get To Those In Chapters 10 And 15.
which picks out just the horses, because a RaceHorse won't return Horse for ref.||Which 镐 Out Just The horses, Because a RaceHorse Won't Return Horse For Ref.
Chapter 1, Introduction An introduction to the material.||Chapter 1, Introduction An 介绍 To The 材料.
instance_method { $somehash->{$somekey}->[42] } @parms;||instance_method { $somehash->{$somekey}->[42] } @Parms;
attempts to invoke the subroutine Class::method as:||Attempts To 调用 The Subroutine Class::Method As:
my $barn = Barn2->new; $barn->add(Cow->named('Bessie')); $barn->add(Cow->named('Gwen')); print "Burn the barn:\n"; $barn = undef; print "End of program.\n";||My $谷仓 = Barn2->New; $谷仓->增添(Cow->Named('Bessie')); $谷仓->增添(Cow->Named('Gwen')); Print "Burn The 谷仓:\n"; $谷仓 = Undef; Print "End Of Program.\n";
The pragma makes everything happen before runtime, so we'll get what we expect.||The Pragma 使 Everything 发生 Before Runtime, So We'我 Get What We 盼望.
That's Test Driven Development.||That's Test Driven 开发.
It's obvious that we need to make sure it returns the right values when its parameter is 0, 1, 49, or 100.||It's 明显的 That We Need To Make Sure It Returns The Right Values When Its Parameter Is 0, 1, 49, Or 100.
If you know that your first release is still missing a function, though, there's no reason why you can't put in a placeholder: sub according_to_GPS { die "not implemented yet" }.||If You Know That Your First Release Is Still Missing a Function, Though, There's No Reason Why You Can't Put In a placeholder: Sub according_to_GPS { Die "Not 实施 仍然" }.
## constructors sub named {||## 构造函数 Sub Named {
The easiest way to specify an alternate location is with a PREFIX value as a parameter on the command line:||The easiest Way To Specify An 轮流 地点 Is With a PREFIX Value As a Parameter On The 命令 Line:
We may not want to use a Makefile.PL, though.||We May Not Want To Use a Makefile.PL, Though.
use Storable; my ($arr1, $arr2) = @{ retrieve 'some_file' }; use Data::Dumper; $Data::Dumper::Purity = 1; print Dumper($arr1, $arr2);||Use Storable; My ($arr1, $arr2) = @{ retrieve 'some_file' }; Use Data::Dumper; $Data::Dumper::Purity = 1; Print Dumper($arr1, $arr2);
That first invocation is like:||That First 调用 Is Like:
my @input = qw(Gilligan Skipper Professor Ginger Mary_Ann); my @sorted_positions = sort { $input[$a] cmp $input[$b] } 0..$#input; my @ranks; @ranks[@sorted_positions] = (1..@sorted_positions); for (0..$#ranks) {||My @Input = Qw(Gilligan Skipper Professor Ginger Mary_Ann); My @sorted_positions = Sort { $Input[$a] cmp $Input[$b] } 0..$#Input; My @ranks; @ranks[@sorted_positions] = (1..@sorted_positions); For (0..$#ranks) {
Exercises You can find the answers to these exercises in "Answers for Chapter 9" in the Appendix.||Exercises You Can 寻找 The answers To These exercises In "Answers For Chapter 9" In The Appendix.
## instance-only methods sub set_name {||## 例子-Only Methods Sub set_name {
Exercise 1 [5 min] How many different things do these expressions refer to?||Exercise 1 [5 min] How Many Different Things Do These Expressions Refer To?
[*] In Perl, there really isn't a difference between a subroutine and a method.||[*] In Perl, There Really Isn't a Difference Between a Subroutine And a Method.
At first glance, it looks like we can fix this by altering the destructor:||At First 看一眼, It Looks Like We Can 固定 This By altering The destructor:
## class/instance methods sub speak {||## Class/例子 Methods Sub 说话 {
In Perl, the unary plus (a plus sign at the beginning of a term) is defined to do nothing (not even turning what follows into a number), just so it can distinguish cases such as this.||In Perl, The 一元 Plus (a Plus Sign At The 开端 Of a 期限) Is Defined To Do Nothing (Not Even Turning What Follows Into a Number), Just So It Can 辨别 Cases Such As This.
That doesn't even count the burden on the monkeyer, we mean the operating system.||That Doesn't Even 计算 The 担子 On The monkeyer, We Mean The Operating System.
If you're a Perl instructor who has decided to use this as your textbook, you should know that each set of exercises is short enough for most students to complete in 45 minutes to an hour, with a little time left over for a break.||If You'Re a Perl 教员 Who Has 明确的 To Use This As Your 课本, You Should Know That Each Set Of exercises Is 短的 Enough For Most students To Complete In 45 minutes To An 小时, With a Little Time Left 在 For a 打破.
Chapter 5, References and Scoping Learn how Perl manages to keep track of pointers to data, and an introduction to anonymous data structures and autovivification.||Chapter 5, References And Scoping Learn How Perl 管理 To 保持 径赛 Of pointers To Data, And An 介绍 To Anonymous Data Structures And autovivification.
Besides Test::Output, we can do something similar with Test::Warn, which specifically tests warning output.||Besides Test::Output, We Can Do Something Similar With Test::Warn, Which 特别 测试 Warning 出产.
Now include tests for shuffle, and then add the implementation for shuffle.||Now Include 测试 For 拖脚走, And Then 增添 The 实行 For 拖脚走.
To be sure to get a block of code, just put a semicolon (representing an empty statement) at the beginning of the block: {; ... }.||To Be Sure To Get a Block Of Code, Just Put a semicolon (代表 An Empty Statement) At The 开端 Of The Block: {; ... }.
use lib "$Bin/../lib"; # up one, then down into lib||Use lib "$Bin/../lib"; # Up One, Then 向下 Into lib
Because %total_bytes is initially empty, Perl doesn't find the first key of professor.hut, but it establishes an undef value for the dereferencing as a hash reference.||Because %total_bytes Is 最初 Empty, Perl Doesn't 寻找 The First Key Of professor.hut, But It establishes An Undef Value For The dereferencing As a Hash Reference.
my @results = grep {||My @Results = Grep {
If we have the libraries in a directory close to the script directory, we put the right path components together to make it work.||If We Have The 库 In a Directory Close To The 临时单据 Directory, We Put The Right Path 组件 Together To Make It Work.
Test things that should break as well as things that should work.||Test Things That Should 打破 As Well As Things That Should Work.
Also give yourself extra credit if you thought that it might be too confusing and decided not to make the change.||Also Give 你（们）自己 Extra 信誉 If You Thought That It Might Be Too 混淆 And 明确的 Not To Make The Change.
We need to dereference this item one more level, so it's yet another layer of braces: ${${$all_with_names[2]}[1]}[0].||We Need To 废弃 This 条款 One More Level, So It's 仍然 另一个 层 Of 牙套: ${${$all_with_names[2]}[1]}[0].
our @EXPORT = qw(guess_direction_toward); our @EXPORT_OK = qw(||Our @EXPORT = qw(guess_direction_toward); Our @EXPORT_OK = Qw(
Others can be added later.||Others Can Be added 更晚.
That's a bit complex.||That's a Bit 综合的.
Trigger eats an apple.||Trigger Eats An 苹果.
Swap the t/* files, and see if you can locate any errors!||Swap The t/* Files, And See If You Can Locate Any Errors!
We look for defined values with a nonzero length, so undef (end of input) and the empty string (simply hitting enter) stop the loop.||We Look For Defined Values With a nonzero Length, So Undef (End Of Input) And The Empty String (Simply hitting 进入) Stop The Loop.
Create a barnyard with those animals, and have each animal speak once.||Create a barnyard With Those animals, And Have Each 动物 说话 Once.
BEGIN { require File::Basename; File::Basename->import }||BEGIN { Require File::Basename; File::Basename->Import }
We use the foreach control structure to iterate through the filehandle references, store each in $fh in turn, and print to each one.||We Use The Foreach Control Structure To iterate 通过 The Filehandle References, 商店 Each In $Fh In 转向, And Print To Each One.
Of course, we can have combined these two initializations:||Of Course, We Can Have Combined These Two initializations:
The example use looks almost the same as that for Test::Pod.[*]||The Example Use Looks Almost The Same As That For Test::Pod.[*]
Be sure to add the proper POD documentation for the subroutine.||Be Sure To 增添 The 合适的 POD 提供文件 For The Subroutine.
To test something, you use the function name rather than typing out a bunch of separate statements.||To Test Something, You Use The Function Name Rather Than 打字 Out a 一束 Of Separate Statements.
Now, enter the interactive part of the program:||Now, 进入 The 互动 Part Of The Program:
Storing Complex Data with Storable We can take the output of Data::Dumper's Dumper routine, place it into a file, and then load the file to a different program.||Storing Complex Data With Storable We Can Take The 出产 Of Data::Dumper's Dumper Routine, Place It Into a File, And Then Load The File To a Different Program.
# Preloaded methods go here.||# Preloaded Methods Go Here.
It's one of the few places where the hardware shows through.||It's One Of The Few Places Where The 硬件 Shows 通过.
sub new { bless { }, $_[0] } sub DESTROY { }||Sub New { 保佑 { }, $_[0] } Sub DESTROY { }
Weakening the Argument The %REGISTRY variable also holds a reference to each animal.||Weakening The Argument The %REGISTRY Variable Also holds a Reference To Each 动物.
We ensure the subroutine is defined, then define $array as a starting point, but immediately copy it to $shuffled so we don't disturb the original.||We Ensure The Subroutine Is Defined, Then Define $Array As a Starting 尖, But 立即 Copy It To $shuffled So We Don't 打扰 The Original.
If you don't see your PAUSE ID next to the distribution name, you can claim it.||If You Don't See Your PAUSE ID 下一次 To The 分配 Name, You Can 要求 It.
Extending @INC with -I If Gilligan recognizes that one of the Skipper's programs is missing the proper directive, Gilligan can either add the proper PERL5LIB variable or invoke Perl directly with one or more -I options.||Extending @INC With -I If Gilligan recognizes That One Of The Skipper's Programs Is Missing The 合适的 命令, Gilligan Can Either 增添 The 合适的 PERL5LIB Variable Or 调用 Perl 直接地 With One Or More -I 选项.
The result of a square-bracketed anonymous array constructor is an array reference, which fits wherever a scalar variable fits.||The Result Of a 正方形-bracketed Anonymous Array 构造函数 Is An Array Reference, Which fits 无论哪里 a Scalar Variable fits.
This calls the class method catfile of the File::Spec class, which builds a path appropriate for the local operating system and returns a single string.[] This is similar in syntax to the nearly two dozen other operations provided by File::Spec.||This Calls The Class Method catfile Of The File::Spec Class, Which builds a Path 恰当的 For The Local Operating System And Returns a Single String.[] This Is Similar In Syntax To The 几乎 Two 一打 Other 操作 Provided By File::Spec.
The source and destination channels are different, but we get to treat them as a single filehandle.'||The Source And 终点 channels Are Different, But We Get To treat Them As a Single Filehandle.'
open T, "test.out" or die "Could not read from test.out! $!"; my @contents = <T>; close T; is(join("", @contents), "Trigger eats hay.\n", "Trigger ate properly");||Open T, "test.out" Or Die "Could Not Read From test.out! $!"; My @Contents = <T>; Close T; Is(Join("", @Contents), "Trigger Eats 干草.\n", "Trigger ate Properly");
$ cpan CGI::Prototype HTTP::Cookies::Safari Test::Pod||$ Cpan (（CGI）通用网关界面)通用网关界面::Prototype HTTP::Cookies::Safari Test::Pod
The subroutine returns a three-element list.||The Subroutine Returns a Three-Element List.
The result of the eval is the last evaluated expression, so we really don't need the entire statement inside the eval.||The Result Of The Eval Is The Last 评估 Expression, So We Really Don't Need The 完全的 Statement 里面 The Eval.
Now that the package name is separated from the subroutine name, we can use a variable package name.||Now That The Package Name Is Separated From The Subroutine Name, We Can Use a Variable Package Name.
sub create_find_callback_that_counts {||Sub create_find_callback_that_counts {
use base qw(Exporter); use vars qw(@EXPORT $VERSION);||Use Base qw(Exporter); Use Vars Qw(@EXPORT $VERSION);
We're back to a class method, so the two arguments to Horse::named are "Horse" and "Mr. Ed".||We'Re Back To a Class Method, So The Two Arguments To Horse::Named Are "Horse" And "Mr. Ed".
Inside the subroutine we have named arrays with references to arrays first placed into other named arrays.||Inside The Subroutine We Have Named Arrays With References To Arrays First Placed Into Other Named Arrays.
Although we may think we have extra work to do, that's only short-term overhead.||Although We May 想 We Have Extra Work To Do, That's Only 短的-期限 头上的.
package Cow; use Animal; use vars qw(@ISA); @ISA = qw(Animal);||Package Cow; Use Animal; Use Vars Qw(@ISA); @ISA = qw(Animal);
Instead of creating a real Minnow object, which would mean turning on all sorts of things on the boat, we can create a mock object for it.||Instead Of Creating a Real Minnow Object, Which Would Mean Turning On All 各样 Of Things On The 小船, We Can Create a 嘲笑 Object For It.
It's nearly as obvious to see that sqrt(0.25) should come out to be 0.5.||It's 几乎 As 明显的 To See That sqrt(0.25) Should 来到 Out To Be 0.5.
Although malformed filesystems may not often be an issue, recursive algorithms in general are vulnerable to errors in the structure of the recursive data.||Although malformed filesystems May Not Often Be An 发行发布, 递归 algorithms In General Are 晚受损害的 To Errors In The Structure Of The 递归 Data.
Now, have the Professor walk into the hut.||Now, Have The Professor 步行 Into The 小屋.
Now we have a list of names, ordered by their pineapple counts, and the monkey's off our backs, all in three easy steps.||Now We Have a List Of Names, ordered By Their 菠萝 计数, And The 猴子's Off Our backs, All In Three Easy 步骤.
Once we have the current path in $cwd, we can use that as the first argument to the catfile method from the File::Spec function.||Once We Have The Current Path In $cwd, We Can Use That As The First Argument To The catfile Method From The File::Spec Function.
Here, the expression 0..$#input_numbers will be a list of indices for the array.||Here, The Expression 0..$#input_numbers Will Be a List Of indices For The Array.
sub day {||Sub 一天 {
use Cwd; use File::Spec;||Use Cwd; Use File::Spec;
(If you don't, you'll mangle the data.)||(If You Don't, You'我 mangle The Data.)
That's double underscore followed by END followed by another double underscore.||That's 两倍的 underscore 跟着 By END 跟着 By 另一个 两倍的 underscore.
You'll also need to ensure that all your code fits with the other code as you develop it for the final application.||You'我 Also Need To Ensure That All Your Code fits With The Other Code As You 发展 It For The 最终的 申请.
Control structures such as while, if, for, and foreach||Control Structures Such As While, If, For, And Foreach
An instance is generally created by a class, much like a car is created by a car factory.||An 例子 Is Generally Created By a Class, Much Like a 小汽车 Is Created By a 小汽车 工厂.
Rather than declaring them within the scope of the subroutine, we can create a temporary block:||Rather Than 宣布 Them Within The Scope Of The Subroutine, We Can Create a temporary Block:
Once we have the object, we simply follow the examples in the documentation.||Once We Have The Object, We Simply 跟随 The Examples In The 提供文件.
The glob notation here installs a wanted subroutine as defined by the coderef closure, which fetches the corresponding key from the object hash.||The Glob 符号 Here 安装 a 想要 Subroutine As Defined By The coderef Closure, Which fetches The 相应的 Key From The Object Hash.
Overriding the Methods Let's add a mouse that can barely be heard:||Overriding The Methods Let's 增添 a 老鼠 That Can 赤裸裸地 Be heard:
But then again, we can also code in assembler or by toggling bits into a front panel.[*] The point is that proper application of grep and map can help reduce the complexity of the program, allowing us to concentrate on high-level issues rather than details.||But Then Again, We Can Also Code In assembler Or By toggling 位 Into a Front 镶板.[*] The 尖 Is That 合适的 申请 Of Grep And Map Can Help Reduce The 复杂性 Of The Program, 允许 Us To 集中 On 高的-Level Issues Rather Than Details.
We've seen arrays, hashes, and subroutines passed around in references, permitting a level of indirection to solve certain types of problems.||We'Ve Seen Arrays, Hashes, And Subroutines Passed Around In References, permitting a Level Of indirection To 解答 确信的 Types Of 问题.
Don't forget the space after not!||Don't 忘记 The Space After Not!
Recent Perl versions include a default sorting engine that is stable, so zero returns from the sort block cause the relative ordering of $a and $b to reflect their order in the original list.||Recent Perl Versions Include a Default sorting 发动机 That Is 稳固的, So 零 Returns From The Sort Block 原因 The 亲戚 订购 Of $a And $b To 反射 Their Order In The Original List.
The final step in turning this into a real instance involves a special operator called bless:||The 最终的 脚步 In Turning This Into a Real 例子 involves a Special Operator Called 保佑:
If we had 20 attributes instead of 1 or 2, the code would be painfully repetitive.||If We Had 20 Attributes Instead Of 1 Or 2, The Code Would Be painfully 重复的.
Let's step some more:||Let's 脚步 Some More:
Besides that, brian wrote Test::Manifest to get around this sort of naming scheme.||Besides That, brian 写 Test::Manifest To Get Around This Sort Of Naming 计划.
There are literally tens of thousands of test files on CPAN, and some of them contain hundreds of tests.||There Are 简直 tens Of thousands Of Test Files On Perl综合典藏网, And Some Of Them Contain hundreds Of 测试.
my @room; # initially empty for my $person (qw(Gilligan Skipper Professor Ginger)) {||My @房间; # 最初 Empty For My $人 (Qw(Gilligan Skipper Professor Ginger)) {
It's a simple test program.||It's a Simple Test Program.
In this case, you've selected a subdirectory of your home directory called Testing as the value of $PREFIX.||In This Case, You'Ve 选定 a 子目录 Of Your 家 Directory Called Testing As The Value Of $PREFIX.
No matter which way we create our distribution or which tools we use, the process is the same.||No Matter Which Way We Create Our 分配 Or Which Tools We Use, The 程序 Is The Same.
my %provisions = (||My %provisions = (
package File::Basename; sub dirname { ... } sub basename { ... } sub fileparse { ... } 1;||Package File::Basename; Sub dirname { ... } Sub basename { ... } Sub fileparse { ... } 1;
Finally, a few lines of code to test your classes:||Finally, a Few Lines Of Code To Test Your 类:
Depending on your version of Perl, you might have the cpan or cpanp programs:||Depending On Your Version Of Perl, You Might Have The Cpan Or cpanp Programs:
[*] Astute readers will note that these are the same rules as for an indirect filehandle syntax, which indirect object syntax directly mirrors, as well as the rules for specifying a reference to be dereferenced.||[*] Astute 读者 Will Note That These Are The Same 规则 As For An Indirect Filehandle Syntax, Which Indirect Object Syntax 直接地 mirrors, As Well As The 规则 For Specifying a Reference To Be dereferenced.
In some cases, we may wish instead to shoo the cows out of the barn as we notice them.||In Some Cases, We May Wish Instead To shoo The cows Out Of The 谷仓 As We Notice Them.
for my $crewmember (@crew) {||For My $crewmember (@（飞机等的）全体人员) {
print 'not ' unless 2 * 4 = = 8; print "ok 2\n";||Print 'Not ' Unless 2 * 4 = = 8; Print "Ok 2\n";
Everything else that revolves around it, such as CPAN Search (http://search.cpan.org), CPAN.pm, and CPANPLUS.pm, merely use what's already there, not create what it is.||Everything Else That revolves Around It, Such As Perl综合典藏网 Search (http://search.cpan.org), Perl综合典藏网.Pm, And Perl综合典藏网PLUS.Pm, 仅仅 Use What's Already There, Not Create What It Is.
Perhaps we need to pretend to connect to a database and retrieve some records.||Perhaps We Need To 假装 To 连接 To a database And retrieve Some Records.
Also, pick fairly safe cross-platform names if you want people to be able to use and test your module portably.||Also, 拣 公平地 安全的 十字-讲台 Names If You Want People To Be Able To Use And Test Your Module portably.
If the stat fails for some reason, the timestamp will be undef.||If The stat 失败 For Some Reason, The timestamp Will Be Undef.
The POD information is extracted automatically by the installation process to create the native documentation format, such as Unix manpages or HTML.||The POD Information Is extracted Automatically By The 安装 程序 To Create The Native 提供文件 Format, Such As Unix 帮助文档 Or HTML.
We can improve the situation by using a package:||We Can 改善 The 形势 By Using a Package:
Since we already know this, and we're actually testing something else (which we don't show you in this contrived example), it doesn't bother us to create the mock method that stands in place of the real database.||Since We Already Know This, And We'Re Actually testing Something Else (Which We Don't Show You In This contrived Example), It Doesn't 打扰 Us To Create The 嘲笑 Method That Stands In Place Of The Real database.
## extend parent constructor:||## 延伸 父或母亲 构造函数:
What if we want to read from our logfile, though?||What If We Want To Read From Our logfile, Though?
Now use it in the previous scenarios:||Now Use It In The Previous scenarios:
The @EXPORT_OK array contains the names of all the variables and subroutines that use can import if the user asks for them by name (and @EXPORT_OK implicitly contains @EXPORT).||The @EXPORT_OK Array 包含 The Names Of All The Variables And Subroutines That Use Can Import If The User 问 For Them By Name (And @EXPORT_OK Implicitly 包含 @EXPORT).
# long way around|| # Long Way Around
Now back to the matter at hand . . . .||Now Back To The Matter At Hand . . . .
Once you have that file, make manifest will remove from MANIFEST files that match those patterns.||Once You Have That File, Make 表明 Will 移开 From MANIFEST Files That Match Those patterns.
However, we can still call Horse->named('Mr. Ed') because it immediately calls the new routine as well.||However, We Can Still Call Horse->Named('Mr. Ed') Because It 立即 Calls The New Routine As Well.
We now have a filehandle and its filename stored as instance variables of the Animal class (or any class derived from Animal).||We Now Have a Filehandle And Its 文件名 Stored As 例子 Variables Of The Animal Class (Or Any Class 派生 From Animal).
# http://module-build.sourceforge.net/META-spec.html #XXXXXXX This is a prototype!!!||# http://module-build.sourceforge.net/META-spec.html #XXXXXXX This Is a 原型!!!
For example, File::Basename might do something like:||For Example, File::Basename Might Do Something Like:
Each speak method has a similar structure: a print operator and a string that contains common text, except for two words.||Each 说话 Method Has a Similar Structure: a Print Operator And a String That 包含 Common 正文, Except For Two Words.
is( 2 + 2, 4, 'The sum is 4' );||Is( 2 + 2, 4, 'The 总数 Is 4' );
There were no references to her at that moment, even before the destructor for the barn was complete.||There Were No References To Her At That Moment, Even Before The destructor For The 谷仓 Was Complete.
We'd have to keep thinking of names of arrays just so we could forget them shortly thereafter.||We'd Have To 保持 思想 Of Names Of Arrays Just So We Could 忘记 Them 立刻 此后.
If you don't have many files in the /bin directory, perhaps because you don't have a Unix machine, change the argument to glob as needed.||If You Don't Have Many Files In The /bin Directory, 也许 Because You Don't Have a Unix 机器, Change The Argument To Glob As Needed.
What do we do instead?||What Do We Do Instead?
[] Did you wonder why there's a plus sign (+) before shift in two of those subroutines?||[] Did You 想知道诧异 Why There's a Plus Sign (+) Before Shift In Two Of Those Subroutines?
package File::Basename; our @EXPORT = qw( basename dirname fileparse ); use base qw(Exporter);||Package File::Basename; Our @EXPORT = Qw( basename dirname fileparse ); Use Base qw(Exporter);
We pass no list to import.||We Pass No List To Import.
This produces:||This Produces:
my $obj = Some::Class->new(@constructor_params);||My $obj = Some::Class->New(@constructor_params);
The coderefs are then individually dereferenced, invoking the corresponding subroutine and passing it the Professor string.||The coderefs Are Then individually dereferenced, 调用 The 相应的 Subroutine And Passing It The Professor String.
## .. to here||## .. To Here
my $obj = new Some::Class @constructor_params;||My $obj = New Some::Class @constructor_params;
AUTOLOAD as a Last Resort After Perl searches the inheritance tree and UNIVERSAL for a method, it doesn't just stop there if the search is unsuccessful.||AUTOLOAD As a Last Resort After Perl searches The Inheritance 树 And UNIVERSAL For a Method, It Doesn't Just Stop There If The 搜查 Is unsuccessful.
What if we wanted to add a test between the two previous tests?||What If We 想要 To 增添 a Test Between The Two Previous 测试?
This module doesn't come with the standard Perl distribution, so you'll have to install it yourself most likely.||This Module Doesn't 来到 With The Standard Perl 分配, So You'我 Have To 安装 It 你（们）自己 Most Likely.
find starts at the current directory (.) and locates each file or directory.||寻找 Starts At The Current Directory (.) And 位于 Each File Or Directory.
What good is the test if it doesn't fail when it should?||What Good Is The Test If It Doesn't 失败 When It Should?
CPAN Terminal> i CGI::Prototype||Perl综合典藏网 Terminal> 我 (（CGI）通用网关界面)通用网关界面::Prototype
File manipulation such as open, file reading, and -X (file tests)||File 操纵 Such As Open, File 读书, And -X (File 测试)
Introduction to References References are the basis for complex data structures, object-oriented programming (OOP), and fancy subroutine magic.||Introduction To References References Are The 基础 For 综合的 Data Structures, Object-Oriented Programming (OOP), And 幻想 Subroutine Magic.
How different would this be for the Horse?||How Different Would This Be For The Horse?
my @input_numbers = (1, 2, 4, 8, 16, 32, 64); my @indices_of_odd_digit_sums = grep {||My @input_numbers = (1, 2, 4, 8, 16, 32, 64); My @indices_of_odd_digit_sums = Grep {
We intend for this rating to hit the midpoint of the bell curve, but don't feel bad if you take significantly longer or shorter.||We 打算 For This 评级 To 打 The midpoint Of The 钟 曲线, But Don't 感到 坏的 If You Take significantly 长 Or 短.
(Out-of-date documentation is often worse than no documentation at all, because at least with no documentation at all, the user is forced to look at the source code.)||(Out-Of-Date 提供文件 Is Often 更坏的 Than No 提供文件 At All, Because At Least With No 提供文件 At All, The User Is 迫使 To Look At The Source Code.)
The test pulls in the Test::More module, described further in Chapter 17.||The Test pulls In The Test::More Module, Described Further In Chapter 17.
Here's the output from this program:||Here's The 出产 From This Program:
The perlpod manpage describes the POD format in detail.||The perlpod manpage describes The POD Format In 细节.
Then Perl looks for Cow::speak.||Then Perl Looks For Cow::说话.
should show four additional wins.||Should Show 四 Additional 赢得.
Of course, since an Animal can't speak, how can a Person?||Of Course, Since An Animal Can't 说话, How Can a Person?
for my $item (@required) {||For My $条款 (@要求) {
One person writes the test for sum( ) and the implementation code for shuffle( ), and the other does the opposite.||One 人 写 The Test For 总数( ) And The 实行 Code For 拖脚走( ), And The Other Does The 对立的.
For a more complex comparison, however, a single reverse may not be up to the task.||For a More 综合的 比较, However, a Single 颠倒的 May Not Be Up To The 工作.
What if we want to ensure that we documented all of our methods?||What If We Want To Ensure That We Documented All Of Our Methods?
It complicates the actions of the getter, which is called frequently.||It complicates The 行动 Of The getter, Which Is Called 时常.
We'll see more about YAML when we talk about modules later, so we won't say much about it here.||We'我 See More About YAML When We 谈话 About Modules 更晚, So We Won't Say Much About It Here.
The ability to design a suitable inheritance structure is a crucial talent for any OOP programmer.||The 能力 To 设计 a Suitable Inheritance Structure Is a 至关重要的 人才 For Any OOP Programmer.
Unless, of course, the module's specification actually called for 'a generic Horse.'[] You shouldn't be afraid to just write the tests and test the module.||Unless, Of Course, The Module's 规格 Actually Called For 'a 通用 Horse.'[] You 应该't Be 害怕的 To Just Write The 测试 And Test The Module.
The key is the person's name, and the value is initially a reference to an empty anonymous array.||The Key Is The 人's Name, And The Value Is 最初 a Reference To An Empty Anonymous Array.
Make sure you know the following things:||Make Sure You Know The Following Things:
That almost solves it, but localtime uses 0-based numbers for the month and year.||That Almost Solves It, But localtime Uses 0-基于 编号 For The 月份 And 年.
We've seen:||We'Ve Seen:
but gets pretty messy when we want to sort numbers:||But Gets 精致的 messy When We Want To Sort 编号:
We can also create filehandle references from which we can read.||We Can Also Create Filehandle References From Which We Can Read.
This list is used for the outer for loop.||This List Is Used For The 外部的 For Loop.
Don't leave this in production code, however, unless you like burning a lot of CPU cycles every time your program starts, whether or not an error occurs.||Don't 出发 This In 生产 Code, However, Unless You Like burning a 许多 Of CPU cycles Every Time Your Program Starts, Whether Or Not An Error Occurs.
my $trigger = Horse->named('Trigger'); isa_ok($trigger, 'Horse'); # .. other tests as before ..||My $扳机 = Horse->Named('Trigger'); isa_ok($扳机, 'Horse'); # .. Other 测试 As Before ..
The main program now looks like this:||The Main Program Now Looks Like This:
Now have a cow named Bessie.||Now Have a 母牛 Named Bessie.
Most of the time, simply copying the complexly referenced value into a simple scalar is easier on the eyes.||Most Of The Time, Simply 复制 The complexly 参考 Value Into a Simple Scalar Is Easier On The eyes.
Rather than test the quartermaster with a real ship, we use our mock one.||Rather Than Test The quartermaster With a Real 船, We Use Our 嘲笑 One.
A success/fail code||A 成功/失败 Code
If we use code outside the class that looks at $tv_horse->{Color} directly, this change is no longer possible.||If We Use Code Outside The Class That Looks At $tv_horse->{Color} 直接地, This Change Is No 长 Possible.
The spaceship operator returns -1, 0, and +1, according to the rules we laid out.||The 太空船 Operator Returns -1, 0, And +1, 按照 To The 规则 We 铺设 Out.
The difference between the debugger's x command and Dumper, however, is that the string generated by Dumper is Perl code:||The Difference Between The Debugger's x 命令 And Dumper, However, Is That The String Generated By Dumper Is Perl Code:
Now the Professor feels obligated to respond:||Now The Professor Feels obligated To 答复:
$value->bpow(1000); # take 2**1000||$Value->bpow(1000); # Take 2**1000
Oh well.[*]||Oh Well.[*]
use lib "$Bin/lib"; # in a subdirectory||Use lib "$Bin/lib"; # In a 子目录
For more efficiency, we can avoid stashing the previous value when in a void context using the wantarray function:||For More Efficiency, We Can Avoid stashing The Previous Value When In a Void Context Using The wantarray Function:
Custom Import Routines Let's use CGI.pm as an example of a custom import routine before we show you how to write your own.||Custom Import Routines Let's Use (（CGI）通用网关界面)通用网关界面.Pm As An Example Of a 风俗 Import Routine Before We Show You How To Write Your Own.
Use the TODO block for that.||Use The TODO Block For That.
In fact, it could even keep several backups, such as the last week's worth.||In Fact, It Could Even 保持 Several backups, Such As The Last 星期's worth.
YAML Data::Dumper is not the only game on the island, though.||YAML Data::Dumper Is Not The Only 游戏 On The 岛屿, Though.
They're the magic that was added between Perl version 4 and version 5 to make it all possible.||They'Re The Magic That Was added Between Perl Version 4 And Version 5 To Make It All Possible.
Did you notice that these are strings?||Did You Notice That These Are Strings?
The first line of this subroutine might have read instead:||The First Line Of This Subroutine Might Have Read Instead:
First, inside the parentheses, we create a list of two items, each of which is a coderef.||First, 里面 The Parentheses, We Create a List Of Two 物品, Each Of Which Is a coderef.
Therefore, $items must be a reference to an array.||Therefore, $物品 Must Be a Reference To An Array.
How does everything get in the right place so Perl can find it?||How Does Everything Get In The Right Place So Perl Can 寻找 It?
This item is a reference to an array with two elements, the first of which is the name string, and the second of which is itself a reference to an empty anonymous array.||This 条款 Is a Reference To An Array With Two Elements, The First Of Which Is The Name String, And The Second Of Which Is Itself a Reference To An Empty Anonymous Array.
foreach my $file ( readdir( $dh ) ) {||Foreach My $File ( Readdir( $dh ) ) {
open my $fh, "castaways.log"||Open My $Fh, "castaways.log"
And Example Four is a more complex organization chart, which can contain instances of the HTML tables of Example One, the filesystem representations of Example Two, or even entire organization charts . . . .||And Example Four Is a More 综合的 组织 图表, Which Can Contain 实例 Of The HTML Tables Of Example One, The filesystem 陈述 Of Example Two, Or Even 完全的 组织 charts . . . .
check_required_items(@$_) for @all_with_names;||check_required_items(@$_) For @all_with_names;
my @results = grep EXPR, @input_list; my $count = grep EXPR, @input_list;||My @Results = Grep EXPR, @input_list; My $计算 = Grep EXPR, @input_list;
Typically, when the subroutine returns, Perl discards all such references automatically, and you're back to four references again.||Typically, When The Subroutine Returns, Perl discards All Such References Automatically, And You'Re Back To 四 References Again.
So, is there an even better way?||So, Is There An Even Better Way?
while( defined( my $file = $dir_fh->read ) ) {||While( Defined( My $File = $dir_fh->Read ) ) {
For one thing, we can determine that we'll never call the callback subroutine with any parameters, so, if the subroutine receives a parameter, we make it return the total size:||For One Thing, We Can 决心 That We'我 Never Call The callback Subroutine With Any Parameters, So, If The Subroutine receives a Parameter, We Make It Return The 总 Size:
After that, a subroutine is now already defined, and we can just invoke it directly.||After That, a Subroutine Is Now Already Defined, And We Can Just 调用 It 直接地.
The following code is easy enough.||The Following Code Is Easy Enough.
Making the "inside guts" of a Horse visible also violates one of the principles of OOP.||Making The "里面 深入内部系列书籍" Of a Horse Visible Also violates One Of The 原则 Of OOP.
Luckily for them, a barge carrying random farm animals crashed on the island not long after they arrived, and the castaways began farming and raising animals.||Luckily For Them, a 驳船 carrying 胡乱的 农场 animals crashed On The 岛屿 Not Long After They arrived, And The castaways began 农业 And raising animals.
In this case, Perl finds Horse::sound directly (without using inheritance), yielding the final subroutine invocation:||In This Case, Perl 发现 Horse::声 直接地 (Without Using Inheritance), yielding The 最终的 Subroutine 调用:
Why is this important?||Why Is This Important?
Chapter 10, Building Larger Programs Build larger programs by separating code into separate files and namespaces.||Chapter 10, Building Larger Programs Build larger Programs By separating Code Into Separate Files And Namespaces.
use CGI qw(-nosticky :all *table);||Use (（CGI）通用网关界面)通用网关界面 Qw(-nosticky :All *Table);
The output from Test::More is a bit different, and the test range moves to the end.||The 出产 From Test::More Is a Bit Different, And The Test 射程 moves To The End.
In C, this is known as a static local variable: a variable that is visible to only a subset of the program's subroutines but persists throughout the life of the program, even between calls to those subroutines.||In C, This Is Known As a Static Local Variable: a Variable That Is Visible To Only a 子集 Of The Program's Subroutines But persists Throughout The 生活 Of The Program, Even Between Calls To Those Subroutines.
When we use it in front of an array name, e.g., \@skipper, the result is a reference to that array.||When We Use It In Front Of An Array Name, e.g., \@skipper, The Result Is a Reference To That Array.
To save a teeny-tiny bit of time, we might see these getters and setters written as:||To Save a teeny-微小的 Bit Of Time, We Might See These getters And setters Written As:
Come about to 234 by turning right 0 degrees.||Come About To 234 By Turning Right 0 度.
The use statement executes at compile time, so it looks at the module search path, @INC, at compile time.||The Use Statement 实行 At Compile Time, So It Looks At The Module 搜查 Path, @INC, At Compile Time.
For example, to find all the numbers greater than 10, in our grep expression we check if $_ is greater than 10.||For Example, To 寻找 All The 编号 更大的 Than 10, In Our Grep Expression We Check If $_ Is 更大的 Than 10.
use base qw(Exporter);||Use Base qw(Exporter);
In the beginning, [*] we had to create modules by hand.||In The 开端, [*] We Had To Create Modules By Hand.
Example Three is a company organization chart, which has managers with direct reports, some of whom may be managers themselves.||Example Three Is a 公司 组织 图表, Which Has managers With Direct Reports, Some Of 谁（宾格） May Be managers 他们、它们自己.
Boy, is that cryptic!||Boy, Is That cryptic!
Some chapters' exercises should be quicker, and some may take longer.||Some chapters' exercises Should Be quicker, And Some May Take 长.
Next, we check if we've defined the sum subroutine.||Next, We Check If We'Ve Defined The 总数 Subroutine.
my %hash = map { $_, 3 * $_ } @input_numbers;||My %Hash = Map { $_, 3 * $_ } @input_numbers;
We can give Dumper one or more values, and Dumper turns those values into a printable string.||We Can Give Dumper One Or More Values, And Dumper Turns Those Values Into a printable String.
Just as croak is provided as the alternate form of die, Carp also provides carp as a replacement for warn.||Just As croak Is Provided As The 轮流 Form Of Die, Carp Also Provides 鲤鱼 As a Replacement For 警告.
What use Is Doing So, just what does use do?||What Use Is Doing So, Just What Does Use Do?
For each item, we call the subroutine what_to_do( ), passing it a few documented values through global variables.||For Each 条款, We Call The Subroutine what_to_do( ), Passing It a Few Documented Values 通过 Global Variables.
Since we know that we must already have Perl installed and that Perl is portable, we can use it to install modules.||Since We Know That We Must Already Have Perl 安装 And That Perl Is 手提的, We Can Use It To 安装 Modules.
Put the correct copyright and license information here.||Put The 正确的 copyright And 许可（证） Information Here.
my @skipper_with_name; {||My @skipper_with_name; {
The numeric form of the reference is the unique memory address of the @skipper internal data structure, unchanging during the life of the variable.||The 数值 Form Of The Reference Is The 唯一的 Memory 地址 Of The @skipper Internal Data Structure, unchanging 在 The 生活 Of The Variable.
For this example on a Unix-like system, we end up with:||For This Example On a Unix-Like System, We End Up With:
As the module author, all we do is add:||As The Module 作者, All We Do Is 增添:
sub set_color {||Sub set_color {
In particular, the value of $File::Find::name is the item's full pathname (beginning with the starting directory).||In Particular, The Value Of $File::Find::Name Is The 条款's Full pathname (开端 With The Starting Directory).
my $callback = create_find_callback_that_counts( ); print "my bin:\n"; find($callback, 'bin'); print "my lib:\n"; find($callback, 'lib');||My $callback = create_find_callback_that_counts( ); Print "My bin:\n"; 寻找($callback, 'bin'); Print "My lib:\n"; 寻找($callback, 'lib');
Fix up that program to keep the running totals in a datafile so the Professor can simply run it on each day's logs to get the new totals.||Fix Up That Program To 保持 The 连续的 totals In a datafile So The Professor Can Simply Run It On Each 一天's logs To Get The New totals.
Once again, we use the backslash as the "take a reference to" operator:||Once Again, We Use The 反斜杠 As The "Take a Reference To" Operator:
We'll get more into how this works later.||We'我 Get More Into How This Works 更晚.
Note we use trailing commas on the lists when the element is not immediately next to the closing brace, bracket, or parenthesis.||Note We Use 落后 逗号 On The Lists When The Element Is Not 立即 下一次 To The closing 支撑, 括号, Or parenthesis.
Again, we'll use the indices of @x as our $_ items:||Again, We'我 Use The indices Of @x As Our $_ 物品:
my $log_fh = 5; open $log_fh, '>> castaways.log'||My $log_fh = 5; Open $log_fh, '>> castaways.log'
Taking the provisions list from Chapter 5:||Taking The provisions List From Chapter 5:
There's got to be a way to keep its name separate from those of other horses.||There's Got To Be a Way To 保持 Its Name Separate From Those Of Other horses.
Could we have eliminated the two shifts at the beginning of the subroutine?||Could We Have eliminated The Two shifts At The 开端 Of The Subroutine?
Of course, these indices are all derived automatically from databases at the master server using other Perl programs.||Of Course, These indices Are All 派生 Automatically From databases At The 主人 server Using Other Perl Programs.
On a 74-element /etc, the Schwartzian Transform was nearly three times as fast.||On a 74-Element /Etc, The Schwartzian Transform Was 几乎 Three Times As 快的.
This can be a problem because it irritates the monkey.||This Can Be a Problem Because It irritates The 猴子.
Everywhere we write ${DUMMY}[$y], we can write DUMMY->[$y] instead.||Everywhere We Write ${DUMMY}[$y], We Can Write DUMMY->[$y] Instead.
One way to decouple this dependency is to use composition rather than inheritance as a way to create a derived class.||One Way To decouple This 依赖 Is To Use 作文 Rather Than Inheritance As a Way To Create a 派生 Class.
my @result = map { $_, 3 * $_ } @input_numbers;||My @Result = Map { $_, 3 * $_ } @input_numbers;
That's pretty darn compact.||That's 精致的 darn 严密的.
It's best illustrated by example.||It's Best illustrated By Example.
sub Navigation::turn_toward_heading {||Sub Navigation::turn_toward_heading {
We can see that $source, $destination, and $bytes are correct, and now it's time to update the data:||We Can See That $Source, $终点, And $字节 Are 正确的, And Now It's Time To Update The Data:
We load Test::More and tell it how many tests we want to run.||We Load Test::More And Tell It How Many 测试 We Want To Run.
my $lost = bless { Name => 'Bo', Color => 'white' }, Sheep;||My $Lost = 保佑 { Name => 'Bo', Color => '白的' }, Sheep;
use Storable;||Use Storable;
Again, the caveats about $tv_horse being only either a blessed reference or a class name as a scalar still apply, so the robust solution when we might deal with nearly anything looks like:||Again, The caveats About $tv_horse Being Only Either a 有福的 Reference Or a Class Name As a Scalar Still 应用, So The 强壮的 解决 When We Might 处理 With 几乎 Anything Looks Like:
use Data::Dumper; $Data::Dumper::Purity = 1; # declare possibly self-referencing structures my @data1 = qw(one won); my @data2 = qw(two too to); push @data2, \@data1; push @data1, \@data2; print Dumper(\@data1, \@data2);||Use Data::Dumper; $Data::Dumper::Purity = 1; # Declare Possibly 自己-referencing Structures My @data1 = Qw(One Won); My @data2 = Qw(Two Too To); Push @data2, \@data1; Push @data1, \@data2; Print Dumper(\@data1, \@data2);
After we print the test range, we send to standard output one line per test.||After We Print The Test 射程, We 派遣 To Standard 出产 One Line 每 Test.
Now that we have the tests, we write the code.||Now That We Have The 测试, We Write The Code.
If you want to be ultimately lazy, you can add use diagnostics; at the beginning of your program, and any error message will look itself up in the documentation and display the entire detailed message.||If You Want To Be 最后 懒惰的, You Can 增添 Use 诊断; At The 开端 Of Your Program, And Any Error 音讯 Will Look Itself Up In The 提供文件 And 陈列 The 完全的 Detailed 音讯.
This syntax makes it look more like grep and map with inline blocks. ''''''''''''''''''''''''''''''''' print {$log_fh} "We have no bananas today!\n";||This Syntax 使 It Look More Like Grep And Map With inline Blocks. ''''''''''''''''''''''''''''''''' Print {$log_fh} "We Have No bananas 今天现在!\n";
The test harness runs all files in the t subdirectory that end in .t in their natural order.||The Test 支配 跑 All Files In The t 子目录 That End In .t In Their 自然的 Order.
And then there's pragmata available.||And Then There's pragmata Available.
Any method we place here, such as:||Any Method We Place Here, Such As:
It's important to note here that we've actually "opened the box" a bit while writing this derived class.||It's Important To Note Here That We'Ve Actually "Opened The 箱" a Bit While 写作 This 派生 Class.
use Test::More tests => 9;||Use Test::More 测试 => 9;
Like Perl itself, POD is said to mean various things, such as Perl Online Documentation or Plain Old Documentation, and so on.||Like Perl Itself, POD Is Said To Mean 各种各样的 Things, Such As Perl Online 文档 Or Plain Old 文档, And So On.
Dereferencing the Array Reference If you look at @skipper, you'll see that it consists of two parts: the @ symbol and the name of the array.||Dereferencing The Array Reference If You Look At @skipper, You'我 See That It consists Of Two 部分: The @ Symbol And The Name Of The Array.
Gilligan: 1 coconut Skipper: 3 coconuts Gilligan: 1 banana Ginger: 2 papayas Professor: 3 coconuts MaryAnn: 2 papayas ...||Gilligan: 1 coconut Skipper: 3 coconuts Gilligan: 1 香蕉 Ginger: 2 papayas Professor: 3 coconuts MaryAnn: 2 papayas ...
open( my $fh, '>>', \$string_log )||Open( My $Fh, '>>', \$string_log )
Exercise 1 The trick in this exercise is to let the modules do all of the hard work.||Exercise 1 The 诡计 In This 锻炼 Is To Let The Modules Do All Of The 硬的 Work.
Those last examples do not insulate us from future changes to the module, which may import additional subroutines that could collide with our code.[] In a few cases, a module may supply dozens or hundreds of possible symbols.||Those Last Examples Do Not 绝缘 Us From Future Changes To The Module, Which May Import Additional Subroutines That Could 猛烈碰撞 With Our Code.[] In a Few Cases, a Module May Supply dozens Or hundreds Of Possible Symbols.
This holds the names of the source machines in descending order of total transferred bytes.||This holds The Names Of The Source Machines In descending Order Of 总 transferred 字节.
One solution for fairly recent Perl versions[] is to use weak references .||One 解决 For 公平地 近来的 Perl Versions[] Is To Use 弱的 References .
People have written and read dozens of how-to-test books (and then ignore them, it seems).||People Have Written And Read dozens Of How-To-Test books (And Then 忽视 Them, It 似乎).
Oops, too late again!||Oops, Too 迟到的 Again!
To make Perl look in that directory for modules, we can set the PERL5LIB environment variable.||To Make Perl Look In That Directory For Modules, We Can Set The PERL5LIB 环境 Variable.
An array holds an ordered list of one or more scalars.||An Array holds An ordered List Of One Or More Scalars.
For example, suppose that "The Skipper" and "sextant" (note the leading whitespace) are at the end of the datafile in order to list an additional data item.||For Example, 猜想 That "The Skipper" And "sextant" (Note The 领先的 Whitespace) Are At The End Of The datafile In Order To List An Additional Data 条款.
Returning a Subroutine from a Subroutine Although a naked block worked nicely to define the callback, having a subroutine return that subroutine reference instead might be more useful:||Returning a Subroutine From a Subroutine Although a 裸体的 Block 工作 好 To Define The callback, Having a Subroutine Return That Subroutine Reference Instead Might Be More Useful:
Next, you'll learn to store and retrieve complex data easily and quickly using Storable, and finally we'll wrap up with a review of grep and map and see how they apply to complex data.||Next, You'我 学习 To 商店 And retrieve 综合的 Data 容易地 And 快 Using Storable, And 最终 We'我 包 Up With a 检查 Of Grep And Map And See How They 应用 To 综合的 Data.
The Test::Number::Delta module can handle those situations.||The Test::Number::Delta Module Can Handle Those 情况.
It doesn't add interesting new features but wraps the Perl built-in functions.[]'||It Doesn't 增添 Interesting New 特征 But wraps The Perl Built-In Functions.[]'
Of course, that in turn may cause Perl to destroy other ("contained") structures as well.||Of Course, That In 转向 May 原因 Perl To 破坏 Other ("包含") Structures As Well.
If the values of the hash elements are also references, they're similarly removed, possibly causing further destruction.||If The Values Of The Hash Elements Are Also References, They'Re 同样 Removed, Possibly causing Further 破坏.
Like an array reference, when referring to a specific hash element, we can use an arrow form:||Like An Array Reference, When Referring To a 特殊的 Hash Element, We Can Use An 箭 Form:
This documentation is in POD format .||This 提供文件 Is In POD Format .
The last step doesn't have a shortcut arrow form.||The Last 脚步 Doesn't Have a 捷径 箭 Form.
How do we know our software works?||How Do We Know Our 软件 Works?
$total_bytes{'professor.hut'}{'gilligan.crew.hut'} += 1250;||$total_bytes{'professor.hut'}{'gilligan.crew.小屋'} += 1250;
What if we had subroutines we didn't want as part of the default import but that would still be available if we asked for them?||What If We Had Subroutines We Didn't Want As Part Of The Default Import But That Would Still Be Available If We 问 For Them?
To get around that, we break the second argument into two separate arguments.||To Get Around That, We 打破 The Second Argument Into Two Separate Arguments.
We modify our Animal class to use a temporary file by using the File::Temp module, which is part of the standard distribution.||We Modify Our Animal Class To Use a temporary File By Using The File::Temp Module, Which Is Part Of The Standard 分配.
Let's replace the last half of the byte-counting program with a simple call to Data::Dumper:||Let's 归还原处 The Last 一半 Of The 字节-counting Program With a Simple Call To Data::Dumper:
[] Although doing so outside the class is a bad idea, as we'll show later.||[] Although Doing So Outside The Class Is a 坏的 思想, As We'我 Show 更晚.
Test::More marks the test as a TODO test in the output, and the test harness[*] notices it and doesn't penalize us for the failure.[]||Test::More 标志 The Test As a TODO Test In The 出产, And The Test 支配[*] notices It And Doesn't penalize Us For The 失败.[]
However, as the subroutine exits, Perl notices there are no references to Gwen; it automatically invokes Gwen's DESTROY method, printing the Gwen has died message.||However, As The Subroutine Exits, Perl notices There Are No References To Gwen; It Automatically invokes Gwen's DESTROY Method, 印刷 The Gwen Has died 音讯.
This is known as overriding .||This Is Known As Overriding .
my $name = $$hash_ref{'name'}; my @keys = keys %$hash_ref;||My $Name = $$hash_ref{'Name'}; My @Keys = Keys %$hash_ref;
For example, you can run code to ask the person installing your module about the locations of other installed libraries or tools, or get options for variations in activity.[*]||For Example, You Can Run Code To 问 The 人 installing Your Module About The 位置 Of Other 安装 库 Or Tools, Or Get 选项 For variations In 活动.[*]
Write a script that uses your module and prints the values for the date, month, and year.||Write a 临时单据 That Uses Your Module And Prints The Values For The Date, 月份, And 年.
The block itself is also discarded, ensuring that the code within is executed precisely once in a program, even if it had appeared syntactically within a loop or subroutine.||The Block Itself Is Also 丢弃, ensuring That The Code Within Is Executed 精确地 Once In a Program, Even If It Had 出现 管 Within a Loop Or Subroutine.
Of course, we could shorten that a bit so we only have one print statement.||Of Course, We Could 缩短 That a Bit So We Only Have One Print Statement.
Of course, if we want to check on Gilligan and the Professor, we might write the following code:||Of Course, If We Want To Check On Gilligan And The Professor, We Might Write The Following Code:
Don't rush to freeze an API design before you've considered how you (or others) will use the object.||Don't 冲 To 结冰 An API 设计 Before You'Ve Considered How You (Or 别人) Will Use The Object.
You can also call make zipdist if you want a ZIP archive.||You Can Also Call Make zipdist If You Want a ZIP archive.
We put it in a section called "The Old Way" because there is a much better way to do it now.||We Put It In a Section Called "The Old Way" Because There Is a Much Better Way To Do It Now.
Obviously, we're free to delete or modify anything inappropriate.||Obviously, We'Re Free To Delete Or Modify Anything inappropriate.
Try to carry on this tradition as well.||Try To 搬运 On This 传统 As Well.
(That can happen, for example, if it finds a dangling symbolic link.)||(That Can 发生, For Example, If It 发现 a dangling Symbolic 联系.)
In Perl, an instance must be a reference to one of the built-in types.||In Perl, An 例子 Must Be a Reference To One Of The Built-In Types.
Get an idea for how things are named.||Get An 思想 For How Things Are Named.
The original method name is passed in the package variable called $AUTOLOAD (in the package where the subroutine was compiled) and contains the fully qualified method name, so we should generally strip everything up to the final double colon if we want a simple method name.||The Original Method Name Is Passed In The Package Variable Called $AUTOLOAD (In The Package Where The Subroutine Was Compiled) And 包含 The Fully 有资格的 Method Name, So We Should Generally Strip Everything Up To The 最终的 两倍的 结肠 If We Want a Simple Method Name.
One of the easiest is to invoke Perl with a -d switch on the command line:||One Of The easiest Is To 调用 Perl With a -d Switch On The 命令 Line:
Chapter 18, Advanced Testing Test complex aspects of code and meta-code things such as documentation and test coverage.||Chapter 18, Advanced Testing Test 综合的 方面 Of Code And 梅塔-Code Things Such As 提供文件 And Test 覆盖率.
Similarly, if the link to the parent is weakened, we'll simply get it as undef when the parent is no longer referenced by other data structures.||Similarly, If The 联系 To The 父或母亲 Is weakened, We'我 Simply Get It As Undef When The 父或母亲 Is No 长 参考 By Other Data Structures.
In the previous examples, we've hardcoded the paths.||In The Previous Examples, We'Ve hardcoded The paths.
If you have a problem or think something didn't happen the way it should have, you can ask the PAUSE administrators about it by sending mail to modules@perl.org.||If You Have a Problem Or 想 Something Didn't 发生 The Way It Should Have, You Can 问 The PAUSE administrators About It By sending 邮件 To modules@perl.org.
As we mentioned in Chapter 16, the Perl way to document code is by embedding POD formatted text in the code.||As We Mentioned In Chapter 16, The Perl Way To Document Code Is By embedding POD formatted 正文 In The Code.
a Horse=SCALAR(0xaca42ac) goes neigh!||a Horse=SCALAR(0xaca42ac) 去 neigh!
The only difference between a class method and an instance method is whether the first parameter is an instance (a blessed reference) or a class name (a string).[*]||The Only Difference Between a Class Method And An 例子 Method Is Whether The First Parameter Is An 例子 (a 有福的 Reference) Or a Class Name (a String).[*]
The test file communicates with the test harness through simple messages on standard output.[] The three most important messages are the test count, a success message, and a failure message.||The Test File communicates With The Test 支配 通过 Simple Messages On Standard 出产.[] The Three Most Important Messages Are The Test 计算, a 成功 音讯, And a 失败 音讯.
cpan>||Cpan>
Test the edges and the middle.||Test The edges And The 当中.
Perhaps you should use a hash instead, or perhaps the data should go into an array that will be sorted later.||Perhaps You Should Use a Hash Instead, Or 也许 The Data Should Go Into An Array That Will Be 分类 更晚.
while( <$scalar_fh> ) {||While( <$scalar_fh> ) {
If each person's behavior is in a separate named subroutine, and a new person walks in the door, we have to figure out what other subroutines to call.||If Each 人's Behavior Is In a Separate Named Subroutine, And a New 人 walks In The 门, We Have To 数字 Out What Other Subroutines To Call.
One use of AUTOLOAD defers the compilation of a large subroutine until it is actually needed.||One Use Of AUTOLOAD defers The 编译 Of a Large Subroutine Until It Is Actually Needed.
$ perl Build.PL $ perl Build $ perl Build test $ perl Build install||$ Perl Build.PL $ Perl Build $ Perl Build Test $ Perl Build 安装
There are reasons to decide to use one or the other.||There Are Reasons To Decide To Use One Or The Other.
Now we're declaring that the module is compatible with Perl 5.8.7 or later and that the compiler restrictions and warnings are enabled automatically.||Now We'Re 宣布 That The Module Is Compatible With Perl 5.8.7 Or 更晚 And That The Compiler 限制 And 警告 Are Enabled Automatically.
This version number is important for many reasons, and we need to pay special attention to it.||This Version Number Is Important For Many Reasons, And We Need To 支付 Special 注意 To It.
Controlling the Distribution with Makefile.PL The Perl developers have chosen to rely on the standard Unix make utility to build and install Perl itself, and that same mechanism is used for additional modules.||Controlling The Distribution With Makefile.PL The Perl 开发商 Have 选择 To 依靠 On The Standard Unix Make 效用 To Build And 安装 Perl Itself, And That Same Mechanism Is Used For Additional Modules.
We cannot drop the first arrow, however, because that would mean an array @root's third element, an entirely unrelated data structure.||We Cannot 落下 The First 箭, However, Because That Would Mean An Array @Root's 第三 Element, An 完全地 unrelated Data Structure.
The object is supposed to be a black box, but we've pried off the hinges and looked inside.||The Object Is 应该 To Be a 黑的 箱, But We'Ve pried Off The hinges And looked 里面.
sub sum {||Sub 总数 {
Writing a Distribution In Chapter 15, we created a fictional Island::Plotting::Maps module and built the right support for Exporter so that we could include use Island::Plotting::Maps in a program.||Writing a Distribution In Chapter 15, We Created a 虚构的 Island::Plotting::Maps Module And Built The Right Support For Exporter So That We Could Include Use Island::Plotting::Maps In a Program.
sub instance_only {||Sub instance_only {
We still have two elements in @_.||We Still Have Two Elements In @_.
A Horse of a Different Color Having all horses be brown would be boring.||A Horse Of a Different Color Having All horses Be 褐色（的） Would Be 讨厌的.
However, we'll find that most people use a single constructor named new, with various ways of interpreting the arguments to new.||However, We'我 寻找 That Most People Use a Single 构造函数 Named New, With 各种各样的 Ways Of interpreting The Arguments To New.
Warning texts need to be concise because they're compiled into the perl binary (the program that runs your Perl code).||Warning texts Need To Be 简明的 Because They'Re Compiled Into The Perl 二进制 (The Program That 跑 Your Perl Code).
my @castaways =||My @castaways =
Exercise 3 [10 min] Using a Schwartzian Transform, read a list of words, and sort them in "dictionary order."||Exercise 3 [10 min] Using a Schwartzian Transform, Read a List Of Words, And Sort Them In "词典 Order."
That means that we have to store two different things in one string, and we have to trust Perl to be able to figure it out.||That Means That We Have To 商店 Two Different Things In One String, And We Have To 委托 Perl To Be Able To 数字 It Out.
The strategy here for an indirect grep or map is to think of the $_ values as identifying a particular item of interest, such as the key in a hash or the index of an array, and then use that identification within the block or expression to access the actual values.||The 战略 Here For An Indirect Grep Or Map Is To 想 Of The $_ Values As identifying a Particular 条款 Of 兴趣, Such As The Key In a Hash Or The Index Of An Array, And Then Use That 识别 Within The Block Or Expression To Access The Actual Values.
Rather than assign the global variable, we can rewrite this without @all_with_names and return the list directly:||Rather Than Assign The Global Variable, We Can 重写 This Without @all_with_names And Return The List 直接地:
Dereference that as an array reference, taking the second element of that array (index number 1).||Dereference That As An Array Reference, Taking The Second Element Of That Array (Index Number 1).
The first is the original person's name; the second is a reference to an array of the provisions for that person:||The First Is The Original 人's Name; The Second Is a Reference To An Array Of The provisions For That 人:
However, that name is no longer relevant.||However, That Name Is No 长 相关的.
Pass insufficient parameters.||Pass 不充足的 Parameters.
The manpage comes automatically when you extract the module's POD data and convert it to TRoff -man code, making it compatible with the Unix man command.[]||The manpage 来 Automatically When You 取出 The Module's POD Data And Convert It To TRoff -人 Code, 制作 It Compatible With The Unix 人 命令.[]
# change 'tests => 1' to 'tests => last_test_to_print';||# Change '测试 => 1' To '测试 => last_test_to_print';
Nothing in either structure tells where the directory is located in the hierarchy.||Nothing In Either Structure 告诉 Where The Directory Is Located In The 层次.
Once we create the mock object and store it in $Minnow, we tell it how to respond to the methods we need to call.||Once We Create The 嘲笑 Object And 商店 It In $Minnow, We Tell It How To 答复 To The Methods We Need To Call.
While the normal object destruction sequence will properly close the handle, we still have the temporary file on disk unless we take further action.||While The Normal Object 破坏 一连串 Will Properly Close The Handle, We Still Have The temporary File On disk Unless We Take Further 行为.
We can defer its compilation as follows:||We Can 拖延 Its 编译 As Follows:
These routines pick out the filename and the directory parts of a pathname.||These Routines 拣 Out The 文件名 And The Directory 部分 Of a pathname.
my @all_with_names = (||My @all_with_names = (
my $runner = RaceHorse->named('Billy Boy'); $runner->won; print $runner->name, ' has standings ', $runner->standings, ".\n";||My $奔跑者 = RaceHorse->Named('Billy Boy'); $奔跑者->Won; Print $奔跑者->Name, ' Has standings ', $奔跑者->standings, ".\n";
After the search fails, however, Perl always looks in one special class called UNIVERSAL and invokes a method from there, if found, just as if it had been located in any other class or superclass.||After The 搜查 失败, However, Perl Always Looks In One Special Class Called UNIVERSAL And invokes a Method From There, If Found, Just As If It Had Been Located In Any Other Class Or 基类.
In this case, we have two separate $count variables, each accessed from within their own callback subroutine.||In This Case, We Have Two Separate $计算 Variables, Each accessed From Within Their Own callback Subroutine.
It simply takes its first argument and stores it in $dh, which it then uses to walk through the directory.||It Simply Takes Its First Argument And stores It In $dh, Which It Then Uses To 步行 通过 The Directory.
Yesby calling another method in the same class.||Yesby Calling 另一个 Method In The Same Class.
We compare the original array to the shuffled one and use cmp_ok to test that at least two positions are different.||We 比较 The Original Array To The shuffled One And Use cmp_ok To Test That At Least Two 位置 Are Different.
There are several situations where we realize a test is going to fail, but we don't want to pay attention to its failure.||There Are Several 情况 Where We 认识到 a Test Is Going To 失败, But We Don't Want To 支付 注意 To Its 失败.
Let's see how this works on the first line of data.||Let's See How This Works On The First Line Of Data.
my @horses = map Horse->named($_), ('Trigger', 'Mr. Ed'); print "alive before block:\n", map(" $_\n", Animal->registered); {||My @horses = Map Horse->Named($_), ('Trigger', 'Mr. Ed'); Print "活着的 Before Block:\n", Map(" $_\n", Animal->登记的); {
We can also perform transformations.||We Can Also 执行 transformations.
First, we go through the arguments in @ARGV to find out which ones don't represent directories, then print error messages for each of those.||First, We Go 通过 The Arguments In @命令行传入参数 To 寻找 Out Which Ones Don't 表示 directories, Then Print Error Messages For Each Of Those.
# back to package Navigation||# Back To Package Navigation
The default import list for URI::URL also imports a url subroutine, which we can use as a constructor as well:||The Default Import List For URI::URL Also Imports a url Subroutine, Which We Can Use As a 构造函数 As Well:
Because we can copy a reference, and passing an argument to a subroutine is really just copying, we can use this code to pass a reference to the array into the subroutine:||Because We Can Copy a Reference, And Passing An Argument To a Subroutine Is Really Just 复制, We Can Use This Code To Pass a Reference To The Array Into The Subroutine:
Because Bessie is still alive at the end of the program, she needs to be recycled, and so we get the message for Bessie after all other steps in the program are complete.[*]||Because Bessie Is Still 活着的 At The End Of The Program, 她 Needs To Be Recycled, And So We Get The 音讯 For Bessie After All Other 步骤 In The Program Are Complete.[*]
AUTHOR||作者
# now in package main|| # Now In Package Main
professor.hut gilligan.crew.hut 1250 professor.hut lovey.howell.hut 910 thurston.howell.hut lovey.howell.hut 1250 professor.hut lovey.howell.hut 450 professor.hut laser3.copyroom.hut 2924 ginger.girl.hut professor.hut 1218 ginger.girl.hut maryann.girl.hut 199 ...||professor.hut gilligan.crew.小屋 1250 professor.hut lovey.howell.小屋 910 thurston.howell.小屋 lovey.howell.小屋 1250 professor.hut lovey.howell.小屋 450 professor.hut laser3.copyroom.小屋 2924 ginger.girl.小屋 professor.hut 1218 ginger.girl.小屋 maryann.girl.小屋 199 ...
If you have a particular testing situation that you'd like to wrap up in a test function, you can write your own Test::* module using the Test::Builder module, which handles all of the tricky integration with Test::Harness and Test::More.||If You Have a Particular testing 形势 That You'd Like To 包 Up In a Test Function, You Can Write Your Own Test::* Module Using The Test::Builder Module, Which 处理 All Of The 巧妙的 结合 With Test::Harness And Test::More.
We give it information about the part of the object's interface we want to use, and it pretends to be that part of the interface.||We Give It Information About The Part Of The Object's Interface We Want To Use, And It pretends To Be That Part Of The Interface.
Also, references permit complex data structures.||Also, References 允许 综合的 Data Structures.
This chapter looks at optimizing sorting and dealing with recursively defined data.||This 章 Looks At optimizing sorting And 交往 With Recursively Defined Data.
unshift @INC, '/home/skipper/perl-lib';||unshift @INC, '/家/skipper/Perl-lib';
Both of the Minnow crew greet the newest participant:||Both Of The Minnow （飞机等的）全体人员 打招呼 The newest 参加者:
.. more program here ..||.. More Program Here ..
A recursive algorithm with no base case is an infinite loop.||A 递归 算法 With No Base Case Is An 无限大的 Loop.
Report a list of files in some hardcoded directory (such as "/etc" or 'C:\\Windows') whose names match the pattern.||Report a List Of Files In Some hardcoded Directory (Such As "/Etc" Or 'C:\\微软视窗操作系统') Whose Names Match The 模式.
Now $items in the subroutine is a reference to the array of @skipper.||Now $物品 In The Subroutine Is a Reference To The Array Of @skipper.
Finally, we enabled warnings (via -w on the command line)[] and got this interesting series of messages:||Finally, We Enabled 警告 (Via -w On The 命令 Line)[] And Got This Interesting 系列 Of Messages:
my @crew = (||My @（飞机等的）全体人员 = (
The more interested other people are in your module, the better it gets as they send in their bug reports, feature requests, and patches.||The More 感兴趣的 Other People Are In Your Module, The Better It Gets As They 派遣 In Their 臭虫 Reports, Feature Requests, And patches.
our @EXPORT = qw(||Our @EXPORT = Qw(
For example, in the C shell, he'd use the line:||For Example, In The C 壳, 他'd Use The Line:
my $date = localtime; my $day_of_week = (localtime)[6];||My $Date = localtime; My $day_of_week = (localtime)[6];
CPAN Terminal>||Perl综合典藏网 Terminal>
Next, we replace the name of the subroutine with curly braces around the thing holding the reference:||Next, We 归还原处 The Name Of The Subroutine With 卷曲的 牙套 Around The Thing 支持 The Reference:
We won't go into too much detail here.[*] The open function's entry in perlfunc is over 400 lines, even though it has its own perldoc tutorial, perlopentut.||We Won't Go Into Too Much 细节 Here.[*] The Open Function's Entry In perlfunc Is 在 400 Lines, Even Though It Has Its Own perldoc 个别指导, perlopentut.
This time we only print the warning if we've turned on debugging.||This Time We Only Print The Warning If We'Ve 转 On Debugging.
Only the base classes at the top of the tree need to specify Exporter, and only when they derive from no other classes.||Only The Base 类 At The 顶 Of The 树 Need To Specify Exporter, And Only When They 从 From No Other 类.
We can use this feature to select and reject items.||We Can Use This Feature To 挑选 And 拒绝 物品.
There's nothing that builds more confidence in an installed distribution than at least a few dozen tests that are run during the installation phase.||There's Nothing That builds More 信任 In An 安装 分配 Than At Least a Few 一打 测试 That Are Run 在 The 安装 阶段.
my @gilligan = qw(red_shirt hat lucky_socks water_bottle); for my $item (@required) {||My @gilligan = Qw(red_shirt 帽子 lucky_socks water_bottle); For My $条款 (@要求) {
However, the testing expression becomes a mapping expression.||However, The testing Expression Becomes a 映射 Expression.
We add those two values together and return the result.||We 增添 Those Two Values Together And Return The Result.
What If That Was the Name?||What If That Was The Name?
Don't forget that the working directory inside the callback isn't necessarily the starting directory in which find was called.||Don't 忘记 That The Working Directory 里面 The callback Isn't Necessarily The Starting Directory In Which 寻找 Was Called.
Here, EXPR stands in for any scalar expression that should refer to $_ (explicitly or implicitly).||Here, EXPR Stands In For Any Scalar Expression That Should Refer To $_ (清晰地 Or Implicitly).
Faster Getters and Setters Because we're going to play nice and always call the getters and setters instead of reaching into the data structure, getters and setters are called frequently.||Faster Getters And Setters Because We'Re Going To 玩 Nice And Always Call The getters And setters Instead Of reaching Into The Data Structure, getters And setters Are Called 时常.
When we dereference $$person[0], we get "Skipper, " "Professor, " and "Gilligan, " respectively. $$person[1] is the corresponding array reference of provisions for that person.||When We 废弃 $$人[0], We Get "Skipper, " "Professor, " And "Gilligan, " 各自. $$人[1] Is The 相应的 Array Reference Of provisions For That 人.
PAUSE won't let us upload the same filename twice, either, so if our code changes but our version number doesn't, we'll have some trouble there.||PAUSE Won't Let Us upload The Same 文件名 两次, Either, So If Our Code Changes But Our Version Number Doesn't, We'我 Have Some Trouble There.
Chapter 12 shows how to distinguish the individual animals by giving them associated properties, called instance variables.||Chapter 12 Shows How To 辨别 The Individual animals By Giving Them Associated propertie(绑定操作符)s, Called 例子 Variables.
Now Test::More does all of the hard work.||Now Test::More Does All Of The 硬的 Work.
But just because something has gone wrong with one part of our code, that doesn't mean that we want everything to crash.||But Just Because Something Has 不见了 错误的 With One Part Of Our Code, That Doesn't Mean That We Want Everything To 碰撞.
Asking for the barn's contents merely dereferences the object array reference to return the contents.[] The fun part is the destructor.||Asking For The 谷仓's Contents 仅仅 dereferences The Object Array Reference To Return The Contents.[] The 娱乐 Part Is The destructor.
In this case, ExtUtils::MakeMaker automatically created this file for me.||In This Case, ExtUtils::MakeMaker Automatically Created This File For Me.
If something should throw an exception, make sure it doesn't also have bad side effects.||If Something Should 投 An Exception, Make Sure It Doesn't Also Have 坏的 Side Effects.
Each array will have a person's name and one of the items they brought:||Each Array Will Have a 人's Name And One Of The 物品 They brought:
The messy blessing step is now hidden behind a simple new method.||The messy 祝福 脚步 Is Now Hidden 在 a Simple New Method.
Now, with the new named method, we build a Horse:||Now, With The New Named Method, We Build a Horse:
We can even write the string form as if it were (almost) a regular expression:||We Can Even Write The String Form As If It Were (Almost) a 正则表达式:
If possible, store the answers in a configuration module that you install, so that a later invocation of your installer can pull the previous answers as defaults.||If Possible, 商店 The answers In a Configuration Module That You 安装, So That a 更晚 调用 Of Your 安装 Can 拖 The Previous answers As Defaults.
This module draws maps. [ more here ]||This Module draws 地图. [ More Here ]
And once again, this results in:||And Once Again, This Results In:
[*] ISA is actually a linguistic term.||[*] ISA Is Actually a linguistic 期限.
Now, for virtual methods: the methods that should be overridden in a subclass.||Now, For 实质上的 Methods: The Methods That Should Be Overridden In a 子类.
Once we've processed the file, it's time to display the summary.||Once We'Ve processed The File, It's Time To 陈列 The 概要.
We can use this during development, but we have to remember to put the final number of tests in the script before we ship it as real code.||We Can Use This 在 进展, But We Have To 记得 To Put The 最终的 Number Of 测试 In The 临时单据 Before We 船 It As Real Code.
For example, the following two operations are equivalent:||For Example, The Following Two 操作 Are Equivalent:
Many mechanisms are available to do this, but the most common one on most modern Unix platforms is the GNU gzip compressed tar archive, commonly named with a .tar.gz or .tgz extension.||Many 机制 Are Available To Do This, But The Most Common One On Most Modern Unix Platforms Is The GNU gzip compressed 沥青 archive, 通常 Named With a .tar.gz Or .tgz 延伸.
Here are some common variations:||Here Are Some Common variations:
Exercise [45 min] Modify the RaceHorse class to get the previous standings from a DBM hash (keyed by the horse's name) when the horse is created, and update the standings when the horse is destroyed.||Exercise [45 min] Modify The RaceHorse Class To Get The Previous standings From a DBM Hash (keyed By The 马's Name) When The 马 Is Created, And Update The standings When The 马 Is destroyed.
The cows will now continue to live until the only other reference to the cows (from the @cows array) goes away.||The cows Will Now Continue To 居住生存 Until The Only Other Reference To The cows (From The @cows Array) 去 Away.
Exercise First, start the class:||Exercise First, Start The Class:
We can rewrite the Sheep speaking method as:||We Can 重写 The Sheep 说 Method As:
That's the part we'll write: code to handle just two items.||That's The Part We'我 Write: Code To Handle Just Two 物品.
If the test file is testing optional things and has no testing to do for this particular invocation, the string 1..0 suffices.||If The Test File Is testing Optional Things And Has No testing To Do For This Particular 调用, The String 1..0 suffices.
You have only one file (created by h2xs), which looks like this:||You Have Only One File (Created By h2xs), Which Looks Like This:
# the return value matters|| # The Return Value matters
While this is useful and supported, it is also dangerous if any untrustworthy data has gotten into the string.||While This Is Useful And Supported, It Is Also Dangerous If Any untrustworthy Data Has gotten Into The String.
Look at the condition carefully: we don't just test for truth.||Look At The 状态 仔细: We Don't Just Test For 真相.
You might feel a bit cheated by this chapter since we're going to say "See the module documentation" quite a bit, but we're gently nudging you out into the Perl world.||You Might 感到 a Bit cheated By This 章 Since We'Re Going To Say "See The Module 提供文件" Quite a Bit, But We'Re 轻轻地 nudging You Out Into The Perl World.
The animals aren't destroyed, even though none of the code is holding the animals.||The animals 还't destroyed, Even Though 没人 Of The Code Is 支持 The animals.
It looks good so far.||It Looks Good So Far.
We can still maintain the old interface if we use a setter and getter, because they can perform the translations without the user knowing about it.||We Can Still Maintain The Old Interface If We Use a setter And getter, Because They Can 执行 The translations Without The User 知道 About It.
The current directory (represented in Unix by a single dot) is an element of the search path.||The Current Directory (Represented In Unix By a Single 点) Is An Element Of The 搜查 Path.
Also keep in mind that your version number must always increase numerically for newer versions of your distribution.||Also 保持 In Mind That Your Version Number Must Always 增加 数值 For newer Versions Of Your 分配.
Perl will do the rest.||Perl Will Do The 休息.
If the first argument to IO::Tee is an input filehandle (the succeeding arguments must be output filehandles), we can use the same teed filehandle to read from input and write to the output.||If The First Argument To IO::Tee Is An Input Filehandle (The succeeding Arguments Must Be 出产 Filehandles), We Can Use The Same teed Filehandle To Read From Input And Write To The 出产.
If you use Module::Starter that we talked about in Chapter 16, you'll probably already have these tests in your distribution.||If You Use Module::Starter That We 谈了 About In Chapter 16, You'我 Probably Already Have These 测试 In Your 分配.
To load it into our script, we say:||To Load It Into Our 临时单据, We Say:
The debugger shows each line of code before it executes it.||The Debugger Shows Each Line Of Code Before It 实行 It.
Testing is an art.||Testing Is An 艺术.
The CPAN.pm module has been part of the core distribution since Perl 5.004.||The Perl综合典藏网.Pm Module Has Been Part Of The Core 分配 Since Perl 5.004.
Perl inserts all specified directories at the beginning of @INC.||Perl inserts All 指定 directories At The 开端 Of @INC.
my $sum = sum( 2, 2 ); sum_ok( $sum, 4 );||My $总数 = 总数( 2, 2 ); sum_ok( $总数, 4 );
Let's continue:||Let's Continue:
my @wrongly_sorted = sort 1, 2, 4, 8, 16, 32;||My @wrongly_sorted = Sort 1, 2, 4, 8, 16, 32;
In this example, we want to trap any divide-by-zero errors, but we don't divide by anything (another sort of error).||In This Example, We Want To 陷井 Any 分开-By-零 Errors, But We Don't 分开 By Anything (另一个 Sort Of Error).
However, if you think your code might be used by people stuck with Perl 5.005 or earlier, it's best to avoid our.||However, If You 想 Your Code Might Be Used By People stuck With Perl 5.005 Or Earlier, It's Best To Avoid Our.
Obviously, for that old sailor, this ain't gonna float his boat.||Obviously, For That Old 水手, This 西班牙't 会 浮 他的 小船.
But what happened there?||But What Happened There?
# doesn't work|| # Doesn't Work
Prior to that, in order to prevent a crash, we had to remember to bring it in with an empty import list:||Prior To That, In Order To 防止 a 碰撞, We Had To 记得 To 拿来 It In With An Empty Import List:
The basic structure maps the original list into a list of arrayrefs, computing the expensive function only once for each; sorts those array refs, looking at the cached value of each expensive function invocation;[*] and then extracts the original values back out in the new order.||The 基本的 Structure 地图 The Original List Into a List Of arrayrefs, computing The Expensive Function Only Once For Each; 各样 Those Array 裁判, 看 At The cached Value Of Each Expensive Function 调用;[*] And Then extracts The Original Values Back Out In The New Order.
Let's turn on debugging output only if debug shows up in the import list.||Let's 转向 On Debugging 出产 Only If debug Shows Up In The Import List.
Map Reading for Dummies", "First Mates: why they're not the captain", and be sure to consult with the Professor.||Map Reading For Dummies", "First Mates: Why They'Re Not The 队长", And Be Sure To 咨询 With The Professor.
Once we read the input, we detect which one she typed by matching on the first character (using a case-insensitive match for more flexibility).||Once We Read The Input, We 发现 Which One 她 打印 By 匹配 On The First Character (Using a Case-insensitive Match For More 柔韧).
Interface stability||Interface 稳定性
[*] When using weak references, always ensure you don't dereference a weakened reference that has turned to undef.||[*] When Using 弱的 References, Always Ensure You Don't 废弃 a weakened Reference That Has 转 To Undef.
We need a new method (or some constructor) to give us an object.||We Need a New Method (Or Some 构造函数) To Give Us An Object.
Additional Instance Variables in Subclasses One of the nice things about using a hash for a data structure is that derived classes can add additional instance variables without the superclass needing to know of their addition.||Additional Instance Variables In Subclasses One Of The Nice Things About Using a Hash For a Data Structure Is That 派生 类 Can 增添 Additional 例子 Variables Without The 基类 needing To Know Of Their 增加.
Let's listen to those animals for a moment:||Let's 听 To Those animals For a Moment:
These distributions use Module::Build to build and install code.||These 分布 Use Module::Build To Build And 安装 Code.
The last expression evaluated in the file must return a true value.||The Last Expression 评估 In The File Must Return a True Value.
For a sheep, we might define it as white:||For a 绵羊, We Might Define It As 白的:
The eight-element list becomes a four-element anonymous hash (four key/value pairs).||The eight-Element List Becomes a 四-Element Anonymous Hash (四 Key/Value 双).
Getting tests to pass can be easy if we don't care if they fail when they should.||Getting 测试 To Pass Can Be Easy If We Don't Care If They 失败 When They Should.
Because we have a copy in the subroutine ("pass by value"), any changes we make to @_ aren't reflected automatically in the corresponding provisions array.[*]||Because We Have a Copy In The Subroutine ("Pass By Value"), Any Changes We Make To @_ 还't reflected Automatically In The 相应的 provisions Array.[*]
[Bessie has died.]||[Bessie Has died.]
Unless we code the mythical "bug-free module, " our users will send us bug reports.||Unless We Code The mythical "臭虫-Free Module, " Our Users Will 派遣 Us 臭虫 Reports.
Now the Professor wants to produce a summary of the source host, the destination host, and the total number of transferred bytes for the day.||Now The Professor 要 To Produce a 概要 Of The Source 一大群, The 终点 一大群, And The 总 Number Of transferred 字节 For The 一天.
We can also store filehandles in references.||We Can Also 商店 Filehandles In References.
Objects with Data Using the simple syntax introduced in Chapter 11, we have class methods, (multiple) inheritance, overriding, and extending.||Objects With Data Using The Simple Syntax Introduced In Chapter 11, We Have Class Methods, (Multiple) Inheritance, Overriding, And Extending.
Thus, we can replace that final loop with:||Thus, We Can 归还原处 That 最终的 Loop With:
We don't always have to know the path ahead of time, either.||We Don't Always Have To Know The Path 在 Of Time, Either.
We write this first, and as we write the code (which we can't run until we write the module), we get an idea of the interface that we want.||We Write This First, And As We Write The Code (Which We Can't Run Until We Write The Module), We Get An 思想 Of The Interface That We Want.
A really long time.||A Really Long Time.
We can also flip it around a bit with the arrow notation:||We Can Also flip It Around a Bit With The 箭 符号:
We can now access the data, including the details of the filehandle, from another name.||We Can Now Access The Data, Including The Details Of The Filehandle, From 另一个 Name.
Any syntax error in the required file causes the program to die; thus, the many die $@ if $@ statements are unnecessary.||Any Syntax Error In The 要求 File Causes The Program To Die; 如此, The Many Die $@ If $@ Statements Are 不必要的.
In particular, a reference held in a subroutine's private (lexical) variable goes away at the end of the subroutine.||In Particular, a Reference Held In a Subroutine's Private (Lexical) Variable 去 Away At The End Of The Subroutine.
That's a lot easier to read because it takes up less space on the screen, which can be really handy when you have deeply nested data structures.||That's a 许多 Easier To Read Because It Takes Up 更少的 Space On The 屏, Which Can Be Really 方便的 When You Have Deeply 嵌套的 Data Structures.
What happens when we request sqrt(&test_sub( )), and &test_sub returns a string of "10000"?||What Happens When We 请求 sqrt(&test_sub( )), And &test_sub Returns a String Of "10000"?
For extra credit, add suitable error checking and consider what should be in the documentation.||For Extra 信誉, 增添 Suitable Error Checking And Consider What Should Be In The 提供文件.
You can include it with the distribution that you already made.||You Can Include It With The 分配 That You Already Made.
When I run this program, Test::More shows me what went wrong.||When I Run This Program, Test::More Shows Me What 去 错误的.
First, we declare the variables for the resulting hash of provisions and the current person.||First, We Declare The Variables For The 造成 Hash Of provisions And The Current 人.
For each element of the hash, we call ourselves to populate the value of that hash element.||For Each Element Of The Hash, We Call 我们自己 To populate The Value Of That Hash Element.
You'll have to log in using your PAUSE ID and PAUSE password, and then you'll be given several options to upload your distribution.||You'我 Have To 原木 In Using Your PAUSE ID And PAUSE password, And Then You'我 Be Given Several 选项 To upload Your 分配.
That's a simple example, but the module has many other functions that follow the same naming scheme: the first part of the name tells you what the function checks (file_exists) and the last part tells you what happens if that's true (_ok).||That's a Simple Example, But The Module Has Many Other Functions That 跟随 The Same Naming 计划: The First Part Of The Name 告诉 You What The Function 检查 (file_exists) And The Last Part 告诉 You What Happens If That's True (_ok).
They send email to the module authors telling them what happened, and they automatically update the Testers database.||They 派遣 電子郵件 To The Module 作者 telling Them What Happened, And They Automatically Update The Testers database.
my $value = Math::BigInt->new(2); # start with 2||My $Value = Math::BigInt->new(2); # Start With 2
[*] Some have dubbed this the "Lincoln Loader" out of a simultaneous deep respect for Lincoln and the sheer terror of having to deal with something that just doesn't work like anything else they've encountered.||[*] Some Have dubbed This The "Lincoln Loader" Out Of a 同时（发生）的 深的 尊重 For Lincoln And The 全然的 恐怖 Of Having To 处理 With Something That Just Doesn't Work Like Anything Else They'Ve encountered.
Ginger: (in a sultry voice) Well hello, Professor!||Ginger: (In a 闷热的 声音) Well 你好, Professor!
On our way to building our own modules, we'll show you some of those you might be interested in.||On Our Way To 建筑物 Our Own Modules, We'我 Show You Some Of Those You Might Be 感兴趣的 In.
The Test::NoWarnings module is a bit different from the ones we've already shown.||The Test::NoWarnings Module Is a Bit Different From The Ones We'Ve Already shown.
package Animal; use Class::MethodMaker||Package Animal; Use Class::MethodMaker
Perl interprets the use list as a particular form of BEGIN block wrapped around a require and a method call.||Perl interprets The Use List As a Particular Form Of BEGIN Block wrapped Around a Require And a Method Call.
For example, if you want to disable the normal sticky field handling, simply add -nosticky into the import list:||For Example, If You Want To 使残废 The Normal 黏的 田野 处理, Simply 增添 -nosticky Into The Import List:
To install this module type the following:||To 安装 This Module Type The Following:
One nice thing about POD is that it can be interspersed with the Perl implementation code it describes.||One Nice Thing About POD Is That It Can Be interspersed With The Perl 实行 Code It describes.
If the module's author has done her job well, the default will probably be exactly what we want.||If The Module's 作者 Has Done Her 工作 Well, The Default Will Probably Be Exactly What We Want.
If we call find when the current working directory is /usr, find looks below that directory.||If We Call 寻找 When The Current Working Directory Is /usr, 寻找 Looks Below That Directory.
Class->method(@args)||Class->Method(@Args)
The base case of looking at a file is the easiest, so let's write that:||The Base Case Of 看 At a File Is The easiest, So Let's Write That:
my $divide = 5 / 3; cmp_ok(abs($divide - 1.666667), '<', 0.001, ||My $分开 = 5 / 3; cmp_ok(abs($分开 - 1.666667), '<', 0.001,
whereas both of these refer to the second item of the array:[*]||而 Both Of These Refer To The Second 条款 Of The Array:[*]
DB<14> x sort keys %total_bytes||DB<14> x Sort Keys %total_bytes
However, that's not why we're using it here.||However, That's Not Why We'Re Using It Here.
The synopsis gives us examples of the module's use, and if we can suspend understanding for a bit and follow the example, we can use the module.||The 内容提要 Gives Us Examples Of The Module's Use, And If We Can 吊 理解 For a Bit And 跟随 The Example, We Can Use The Module.
This should handle about 99 percent of our needs.||This Should Handle About 99 每百 Of Our Needs.
# something to say|| # Something To Say
my $tv_horse = Horse->named('Mr. Ed');||My $tv_horse = Horse->Named('Mr. Ed');
use File::Find; use Time::Local;||Use File::Find; Use Time::Local;
The use lib directive of:||The Use lib 命令 Of:
is( sqrt( 10**100 ), 10**50, 'sqrt( ) can handle a googol' );||Is( sqrt( 10**100 ), 10**50, 'sqrt( ) Can Handle a googol' );
We want all keys of the hash, resulting from dereferencing the value of the hash element, in the first structure:||We Want All Keys Of The Hash, 造成 From dereferencing The Value Of The Hash Element, In The First Structure:
Beating a Dead Horse Because the destructor method is inherited, we can also override and extend superclass methods.||Beating a Dead Horse Because The destructor Method Is 继承, We Can Also Override And 延伸 基类 Methods.
Here, we dereference the value $not_yet as if it were an array reference.||Here, We 废弃 The Value $not_yet As If It Were An Array Reference.
That's good if we're a veterinarian but not if we just like to own horses.||That's Good If We'Re a veterinarian But Not If We Just Like To Own horses.
Then, for each animal, we can say it inherits from Animal, along with the animal-specific sound:||Then, For Each 动物, We Can Say It 继承 From Animal, 沿着 With The 动物-特殊的 声:
[*] If we're using a hash instead, we can use delete on the elements we wish to process immediately.||[*] If We'Re Using a Hash Instead, We Can Use Delete On The Elements We Wish To 程序 立即.
If we stick the definition of $total_size into the subroutine that returns the callback reference, we won't have access to the variable.||If We Stick The Definition Of $total_size Into The Subroutine That Returns The callback Reference, We Won't Have Access To The Variable.
## define eat:|| ## Define 吃:
Frequently, this is the easiest code to write, and often the fastest to execute.||Frequently, This Is The easiest Code To Write, And Often The fastest To Execute.
The instance methods form the Application Programming Interface (API) for an object.||The 例子 Methods Form The Application Programming Interface (API) For An Object.
Thus, this is probably not the right way to go.||Thus, This Is Probably Not The Right Way To Go.
my ($new_heading) = @_;||My ($new_heading) = @_;
Also make the speak method take a parameter of what to say, falling back to the sound (humming for a Person) if no parameter is given.||Also Make The 说话 Method Take a Parameter Of What To Say, Falling Back To The 声 (humming For a Person) If No Parameter Is Given.
What happens at the end of the program?||What Happens At The End Of The Program?
Class->method(@args);||Class->Method(@Args);
What if we want to use File::Find to accumulate the total size of all files seen?||What If We Want To Use File::Find To 积累 The 总 Size Of All Files Seen?
Writing Your Own Test::* Modules You don't have to wait for other people to write cool test modules.||Writing Your Own Test::* Modules You Don't Have To 等候 For Other People To Write 凉的 Test Modules.
my @odd_digit_sum = grep digit_sum_is_odd($_), @input_numbers;||My @odd_digit_sum = Grep digit_sum_is_odd($_), @input_numbers;
sub DESTROY {||Sub DESTROY {
$somehash->{$somekey}->[42]->instance_method(@parms);||$somehash->{$somekey}->[42]->instance_method(@Parms);
We put the use_ok inside a BEGIN block so any exported subroutines from the module are properly declared for the rest of the program, as recommended by the documentation.||We Put The use_ok 里面 a BEGIN Block So Any Exported Subroutines From The Module Are Properly Declared For The 休息 Of The Program, As recommended By The 提供文件.
print 'Two castaways are ', 'Gilligan', ' and ', 'Skipper', "\n";||Print 'Two castaways Are ', 'Gilligan', ' And ', 'Skipper', "\n";
This can be handy if we encounter an error that is going to cause a cascade of errors that we don't want to wait to encounter or sift through.||This Can Be 方便的 If We 面临 An Error That Is Going To 原因 a cascade Of Errors That We Don't Want To 等候 To 面临 Or 筛 通过.
Exercise 2 There should probably be some checks to ensure that Storable was successful.||Exercise 2 There Should Probably Be Some 检查 To Ensure That Storable Was 成功的.
It's no accident that CPAN is so useful.||It's No 事故 That Perl综合典藏网 Is So Useful.
If you have Perl, you should have these modules.||If You Have Perl, You Should Have These Modules.
Without weakening, as soon as we create any parent-child relationship, both the parent and the child remain in memory until the final global destruction phase, regardless of the destruction of the other structures holding either the parent or the child.||Without weakening, As 不久 As We Create Any 父或母亲-孩子 关系, Both The 父或母亲 And The 孩子 依旧的 In Memory Until The 最终的 Global 破坏 阶段, 不顾的（地） Of The 破坏 Of The Other Structures 支持 Either The 父或母亲 Or The 孩子.
How can we avoid that?||How Can We Avoid That?
However, this violates the encapsulation of the object by exposing its internal structure.||However, This violates The 封装 Of The Object By exposing Its Internal Structure.
Well, it works just fine if that's what we meant to test, but nothing in that code tells anyone what we meant to do.||Well, It Works Just Fine If That's What We 意味着 To Test, But Nothing In That Code 告诉 无论谁 What We 意味着 To Do.
Throw far too much or too little data at it.||Throw Far Too Much Or Too Little Data At It.
The problem is that the Perl compiler first compiles turn_toward_port from Gilligan's main program, then when Perl evaluates the require at runtime, it redefines turn_toward_port as the Skipper's definition.||The Problem Is That The Perl Compiler First compiles turn_toward_port From Gilligan's Main Program, Then When Perl 评价 The Require At Runtime, It redefines turn_toward_port As The Skipper's Definition.
A memory leak in a program causes the program to consume more and more memory over time.||A Memory 漏 In a Program Causes The Program To 消费 More And More Memory 在 Time.
A Horse Is a Horse, of Course of Courseor Is It?||A Horse Is a Horse, Of Course Of Courseor Is It?
When Perl counts the number of active references to a thingy, [] it won't count any that have been converted to weak references by weaken.||When Perl 计数 The Number Of 活跃的 References To a thingy, [] It Won't 计算 Any That Have Been converted To 弱的 References By 削弱.
# it's a class, return generic }|| # It's a Class, Return 通用 }
We're kicking you out into the real world now.||We'Re kicking You Out Into The Real World Now.
Unfortunately, nobody can agree on what the value of N is, but for Perl programs, it's arguably around 1, 000 lines of code.||Unfortunately, 谁也不 Can 同意 On What The Value Of N Is, But For Perl Programs, It's arguably Around 1, 000 Lines Of Code.
Let's see what happens just after the next assignment:||Let's See What Happens Just After The 下一次 Assignment:
In this case, $_ is the name of a person.||In This Case, $_ Is The Name Of a 人.
(Of course, if you checked the return values from store and retrieve, you should give yourself extra credit on the previous exercise.)||(Of Course, If You Checked The Return Values From 商店 And retrieve, You Should Give 你（们）自己 Extra 信誉 On The Previous 锻炼.)
Of course, this requires a bit of discipline, because breaking the expected interface of a given subroutine now breaks many programs instead of just one.[] The Skipper needs to give special thought to his design for reusable components and modularity design.||Of Course, This Requires a Bit Of 训练, Because 打破 The Expected Interface Of a Given Subroutine Now 打破 Many Programs Instead Of Just One.[] The Skipper Needs To Give Special Thought To 他的 设计 For reusable 组件 And 模块化 设计.
ok 1 - 1 + 2 is 3 not ok 2 - 2 * 4 is 6 # Failed test (1.t at line 4) # got: '8' # expected: '6' 1..2 # Looks like you failed 1 tests of 2.||Ok 1 - 1 + 2 Is 3 Not Ok 2 - 2 * 4 Is 6 # Failed Test (1.t At Line 4) # Got: '8' # Expected: '6' 1..2 # Looks Like You failed 1 测试 Of 2.
If we look at the string form instead, with eq or print, we get a debugging string:||If We Look At The String Form Instead, With Eq Or Print, We Get a Debugging String:
The ref function returns true for an instance, which is just a blessed reference, or false for a class, which is just a string.||The Ref Function Returns True For An 例子, Which Is Just a 有福的 Reference, Or False For a Class, Which Is Just a String.
This leads us to our next strong suggestion: Use direct object syntax at all times.||This 领导 Us To Our 下一次 强壮的 建议: Use Direct Object Syntax At All Times.
Thus, we've created a memory leak.||Thus, We'Ve Created a Memory 漏.
At this point, we asked the monkey seven questions in a row, but that's the last time we have to talk to the monkey!||At This 尖, We 问 The 猴子 seven Questions In a 划船, But That's The Last Time We Have To 谈话 To The 猴子!
In this example, we create $scalar_fh just as we did before, then read from it with the line input operator.||In This Example, We Create $scalar_fh Just As We Did Before, Then Read From It With The Line Input Operator.
What if we take a reference to an array that also contains a reference to an array?||What If We Take a Reference To An Array That Also 包含 a Reference To An Array?
But remember, the construct sub { ... } is an expression.||But 记得, The Construct Sub { ... } Is An Expression.
sub turn_toward_heading {||Sub turn_toward_heading {
We need to maintain this file manually unless our interactive development environment has automated tools for such maintenance.||We Need To Maintain This File manually Unless Our 互动 进展 环境 Has automated Tools For Such 保养.
classmethod Class @args; instancemethod $instance @other;||classmethod Class @Args; instancemethod $例子 @Other;
use URI::URL; my $u = URI::URL->new('http://www.gilligan.crew.hut/maps/island.pdf');||Use URI::URL; My $u = URI::URL->New('http://www.gilligan.crew.hut/maps/island.pdf');
If you're playing along at home, be aware that each new release of the debugger works differently than any other, so your screen probably won't look exactly like ours.||If You'Re 玩 沿着 At 家, Be 知道的 That Each New Release Of The Debugger Works 不同地 Than Any Other, So Your 屏 Probably Won't Look Exactly Like ours.
The Module::Build method is much newer, so it's still maturing and not as many people use it.[*] However, since Module::Build doesn't require an external program, it's easier for some people to use.||The Module::Build Method Is Much newer, So It's Still maturing And Not As Many People Use It.[*] However, Since Module::Build Doesn't Require An External Program, It's Easier For Some People To Use.
The resulting list is 1, 16, 2, 32, 4, 8.||The 造成 List Is 1, 16, 2, 32, 4, 8.
use Test::Builder;||Use Test::Builder;
As before, the @crew variable contains two elements, each of which is a reference to a hash containing keyword-based information about a particular crew member.||As Before, The @（飞机等的）全体人员 Variable 包含 Two Elements, Each Of Which Is a Reference To a Hash Containing Keyword-基于 Information About a Particular （飞机等的）全体人员 Member.
Let's walk through the keys and dump the values:||Let's 步行 通过 The Keys And 倾倒 The Values:
Exercises You can find the answers to these exercises in "Answers for Chapter 4" in the Appendix.||Exercises You Can 寻找 The answers To These exercises In "Answers For Chapter 4" In The Appendix.
A lexical variable is usually temporary and accessible for only a portion of the program.||A Lexical Variable Is Usually temporary And Accessible For Only a 一份 Of The Program.
You've probably seen some tricky looking code that uses a typeglob or a reference to a typeglob.||You'Ve Probably Seen Some 巧妙的 看 Code That Uses a typeglob Or a Reference To a typeglob.
$date->debug( "I'm all done" );||$Date->debug( "I'm All Done" );
What should you do if you're asked to set the name or color of a generic animal?||What Should You Do If You'Re 问 To Set The Name Or 颜色 Of a 通用 动物?
We should also ensure that multiplying the value for sqrt(7) by itself gives something between 6.99999 and 7.00001.[*]||We Should Also Ensure That multiplying The Value For sqrt(7) By Itself Gives Something Between 6.99999 And 7.00001.[*]
However, because he had previously cut and pasted it into a half-dozen other navigation programs, those other programs will still annoy the Skipper with extraneous turning messages.||However, Because 他 Had Previously Cut And pasted It Into a 一半-一打 Other 航行 Programs, Those Other Programs Will Still 烦扰 The Skipper With extraneous Turning Messages.
We then declare an anonymous subroutine and place its reference into $callback.||We Then Declare An Anonymous Subroutine And Place Its Reference Into $callback.
Inside the Animal::speak method, $class becomes Cow as the first argument is shifted off.||Inside The Animal::说话 Method, $Class Becomes Cow As The First Argument Is shifted Off.
If the result of can is true, then somewhere in the inheritance hierarchy, a class claims it can handle the eat method.||If The Result Of Can Is True, Then Somewhere In The Inheritance 层次, a Class 声称 It Can Handle The 吃 Method.
Abstract methods are placeholders, meant to be defined in a subclass.||Abstract Methods Are placeholders, 意味着 To Be Defined In a 子类.
It's also counted as one of the tests, so we get an "ok" for free even if all it does is compile properly to help pad our success numbers for the weekly status report.||It's Also 数 As One Of The 测试, So We Get An "Ok" For Free Even If All It Does Is Compile Properly To Help 垫 Our 成功 编号 For The 每周的 形势 报告.
The Skipper decides to fix this problem by checking for a zero turn value:||The Skipper decides To 固定 This Problem By Checking For a 零 转向 Value:
We can get even more information from caller by using it in list context.||We Can Get Even More Information From Caller By Using It In List Context.
The debugging string also notes that this is an array reference.||The Debugging String Also 备忘 That This Is An Array Reference.
In Animal, though, you need to check that to ensure an Animal won't try to speak before calling SUPER::speak.||In Animal, Though, You Need To Check That To Ensure An Animal Won't Try To 说话 Before Calling SUPER::说话.
The creation of the Makefile.PL (and resulting Makefile) is quite flexible.||The 创造 Of The Makefile.PL (And 造成 Makefile) Is Quite 柔韧的.
use_ok('Horse'); my $tv_horse = Horse->named('Mr. Ed');||use_ok('Horse'); My $tv_horse = Horse->Named('Mr. Ed');
In the grep, $_ varies from 0 to the highest index of @x.||In The Grep, $_ 变化 From 0 To The highest Index Of @x.
If we know that our module works with earlier versions of Perl, we can modify the use 5.008007; line (or delete it altogether).||If We Know That Our Module Works With Earlier Versions Of Perl, We Can Modify The Use 5.008007; Line (Or Delete It 全部地).
Recognition by the various CPAN tools||Recognition By The 各种各样的 Perl综合典藏网 Tools
sub create_find_callback_that_sums_the_size {||Sub create_find_callback_that_sums_the_size {
@day = qw(ark dip wap sen pop sep kir); sub number_to_day_name { my $num = shift @_; $day[$num]; } @month = qw(diz pod bod rod sip wax lin sen kun fiz nap dep);||@一天 = Qw(ark 蘸 wap sen Pop sep kir); Sub number_to_day_name { My $胡 = Shift @_; $一天[$胡]; } @月份 = Qw(diz B<pod> bod 小棒 sip 蜡 lin sen kun fiz 打盹 dep);
cmp_ok( $same_count, '<', $#$array - 2, ||cmp_ok( $same_count, '<', $#$Array - 2,
You'll have to investigate that one yourself, though.||You'我 Have To 调查 That One 你（们）自己, Though.
We just need to add the parts for the export tag all.||We Just Need To 增添 The 部分 For The Export 标签 All.
Here's our finished module:||Here's Our 制成的 Module:
Make it work with use strict.||Make It Work With Use Strict.
The Data::Dumper module defines the Dumper subroutine.||The Data::Dumper Module 定义 The Dumper Subroutine.
The reference can be copied:||The Reference Can Be 复制:
[*] On a Windows machine, use double quotes instead of single quotes on the command line.||[*] On a 微软视窗操作系统 机器, Use 两倍的 引用 Instead Of Single 引用 On The 命令 Line.
Upgrade indication||Upgrade 表示
Lift that code and put it into a distribution.||Lift That Code And Put It Into a 分配.
On the other hand, in the example, we called the superclass destructor before the added behavior, because we wanted the superclass behavior first.||On The Other Hand, In The Example, We Called The 基类 destructor Before The added Behavior, Because We 想要 The 基类 Behavior First.
As with those two list operators, notice that we don't have a comma after the inline code block.||As With Those Two List Operators, Notice That We Don't Have a 逗号 After The inline Code Block.
Obviously, you will want to edit this file to be whatever you want it to be.||Obviously, You Will Want To 校订 This File To Be Whatever You Want It To Be.
To illustrate this, let's build a "barn" and tear it down.||To 图解 This, Let's Build a "谷仓" And 眼泪 It 向下.
We dump the result to see if it stored the right values:||We 倾倒 The Result To See If It Stored The Right Values:
Exercises You can find the answers to these exercises in "Answers for Chapter 14" in the Appendix.||Exercises You Can 寻找 The answers To These exercises In "Answers For Chapter 14" In The Appendix.
Places were established for Perl binaries for non-Unix architectures, scripts, and Perl's source code itself.||Places Were 已建立的 For Perl binaries For Non-Unix architectures, Scripts, And Perl's Source Code Itself.
The main program now starts off like this:||The Main Program Now Starts Off Like This:
Does this work for more complicated structures?||Does This Work For More 错综复杂的 Structures?
We could use these indices in an array slice to get the original values again:||We Could Use These indices In An Array 薄片 To Get The Original Values Again:
At this point, the second element of @skipper_with_name is a reference to the array formerly known as @skipper.||At This 尖, The Second Element Of @skipper_with_name Is a Reference To The Array 从前 Known As @skipper.
We get back two values from the monkey and use them to order Gilligan and Skipper in the final list.||We Get Back Two Values From The 猴子 And Use Them To Order Gilligan And Skipper In The 最终的 List.
Another tool, CPANPLUS, is a complete rewrite of CPAN.pm, but it isn't part of the core distribution as we write this.||Another 工具, Perl综合典藏网PLUS, Is a Complete 重写 Of Perl综合典藏网.Pm, But It Isn't Part Of The Core 分配 As We Write This.
There is no shortcut form with an arrow (->) for array slices or hash slices, just as there is no shortcut for entire arrays or hashes.||There Is No 捷径 Form With An 箭 (->) For Array 片 Or Hash 片, Just As There Is No 捷径 For 完全的 Arrays Or Hashes.
(If that data also references further data, those reference counts are reduced appropriately.) 7.6.||(If That Data Also References Further Data, Those Reference 计数 Are 减少 适当.) 7.6.
So far, nothing unusual has happened.||So Far, Nothing 不寻常的 Has Happened.
In Chapter 4, we wrote some code to check that the castaways had all of their required items.||In Chapter 4, We 写 Some Code To Check That The castaways Had All Of Their 要求 物品.
[Â§] The exact behavior and output of h2xs may vary depending upon the version of Perl.||[Â§] The Exact Behavior And 出产 Of h2xs May 变化 Depending Upon The Version Of Perl.
For example, let's store the mutually referencing data structures:||For Example, Let's 商店 The mutually referencing Data Structures:
Scope of a Package Directive All files start as if we had said package main;.[*] Any package directive remains in effect until the next package directive, unless that package directive is inside a curly-braced scope.||Scope Of a Package Directive All Files Start As If We Had Said Package Main;.[*] Any Package 命令 剩余 In Effect Until The 下一次 Package 命令, Unless That Package 命令 Is 里面 a 卷曲的-braced Scope.
This is common with OOP.||This Is Common With OOP.
For example, if the only thing inside the curly braces is a simple scalar variable (as shown in these examples so far), we can drop the curly braces:||For Example, If The Only Thing 里面 The 卷曲的 牙套 Is a Simple Scalar Variable (As shown In These Examples So Far), We Can 落下 The 卷曲的 牙套:
In this regard, Perl's grep and map operators are worth mastering.||In This Regard, Perl's Grep And Map Operators Are worth mastering.
So even if we toss away the containing variables, for instance by letting them go out of scope:||So Even If We 向上扔 Away The Containing Variables, For 例子 By 让 Them Go Out Of Scope:
Inside Horse::name, the @_ array contains just $tv_horse, which the shift stores into $self.||Inside Horse::Name, The @_ Array 包含 Just $tv_horse, Which The Shift stores Into $自己.
Specifically, we can look at the symbol table (where all subroutines and many variables are named), see what is defined, and alter those definitions.||Specifically, We Can Look At The Symbol Table (Where All Subroutines And Many Variables Are Named), See What Is Defined, And 改变 Those 定义.
That use is rare for user-written modules, however, although it often shows up with pragmas such as strict and warnings.||That Use Is 稀有的 For User-Written Modules, However, Although It Often Shows Up With 的 Such As Strict And 警告.
We declare this variable outside the scope of the subroutine but still visible to the subroutine.||We Declare This Variable Outside The Scope Of The Subroutine But Still Visible To The Subroutine.
This book will also show you how to deal with larger and more complex data structures, such as what we might casually call a "hash of hashes" or an "array of arrays of hashes of arrays."||This 书 Will Also Show You How To 处理 With larger And More 综合的 Data Structures, Such As What We Might casually Call a "Hash Of Hashes" Or An "Array Of Arrays Of Hashes Of Arrays."
Packages and Lexicals A lexical variable (a variable introduced with my) isn't prefixed by the current package because package variables are always global: we can always reference a package variable if we know its full name.||Packages And Lexicals A Lexical Variable (a Variable Introduced With My) Isn't 前缀 By The Current Package Because Package Variables Are Always Global: We Can Always Reference a Package Variable If We Know Its Full Name.
The Skipper uses the navigation.pm file in all his other navigation programs||The Skipper Uses The navigation.pm File In All 他的 Other 航行 Programs
It iss really the indirect object notation (which we have not mentioned yet, unless you have read the whole book before you read the footnotes, like we told you to do in the preface!).||It iss Really The Indirect Object 符号 (Which We Have Not Mentioned 仍然, Unless You Have Read The Whole 书 Before You Read The footnotes, Like We told You To Do In The 序言!).
In the use statement's import list, we include the tag name preceded by a colon.[*]||In The Use Statement's Import List, We Include The 标签 Name preceded By a 结肠.[*]
For example, we might have a temporary reference:||For Example, We Might Have a temporary Reference:
The PERL5LIB variable can include multiple directories separated by colons.||The PERL5LIB Variable Can Include Multiple directories Separated By 冒号.
my %total_bytes; if (-e $data_file) {||My %total_bytes; If (-g $data_file) {
Remember that Perl searches through all of @ISA and UNIVERSAL before it starts looking in any AUTOLOAD method.||Remember That Perl searches 通过 All Of @ISA And UNIVERSAL Before It Starts 看 In Any AUTOLOAD Method.
If we happen to pass it an unblessed reference, we get a fatal (but trappable) error of:||If We 发生 To Pass It An unblessed Reference, We Get a Fatal (But trappable) Error Of:
You can also specify the include directory on the command line with a -M option:||You Can Also Specify The Include Directory On The 命令 Line With a -M 选择:
Using Modules Almost every Perl module comes with documentation, and even though we might not know how all of the behind-the-scenes magic works, we really don't have to worry about that stuff if we know how to use the interface.||Using Modules Almost Every Perl Module 来 With 提供文件, And Even Though We Might Not Know How All Of The 在-The-scenes Magic Works, We Really Don't Have To 烦恼 About That 材料 If We Know How To Use The Interface.
Check it out on Google Maps if you don't believe us.||Check It Out On Google Maps If You Don't 相信 Us.
require Exporter;||Require Exporter;
Some upcoming version of Perl is likely to use garbage collection in addition to, or instead of, referencing counting.[*] Until then, we must be careful not to create circular references or, if we do, break the circle before the variables go out of scope.||Some upcoming Version Of Perl Is Likely To Use 垃圾 Collection In 增加 To, Or Instead Of, referencing counting.[*] Until Then, We Must Be Careful Not To Create 圆圈的 References Or, If We Do, 打破 The 圆 Before The Variables Go Out Of Scope.
For any other method, the AUTOLOAD should carp about the unknown method name.||For Any Other Method, The AUTOLOAD Should 鲤鱼 About The Unknown Method Name.
Referencing a Named Subroutine The Skipper and Gilligan are having a conversation:||Referencing a Named Subroutine The Skipper And Gilligan Are Having a 会话:
The Test Harness We usually invoke tests, either as the developer or the user, by using make test .||The Test Harness We Usually 调用 测试, Either As The developer Or The User, By Using Make Test .
META.yml Recent versions of the module tools create a file named META.yml that presents the module information in a human-readable form that is also easy to parse.||META.yml Recent Versions Of The Module Tools Create a File Named META.yml That presents The Module Information In a 人的-可读性 Form That Is Also Easy To Parse.
The basics for any new testing module are the same.||The basics For Any New testing Module Are The Same.
This code works fine, but it actually says more than it needs to.||This Code Works Fine, But It Actually 说 More Than It Needs To.
sub check_required_items {||Sub check_required_items {
The links on that page drill down into the individual files to see their coverage statistics too.||The 链接 On That 页 钻头 向下 Into The Individual Files To See Their 覆盖率 统计（学） Too.
my %total_bytes;||My %total_bytes;
use 5.008007; use strict; use warnings;||Use 5.008007; Use Strict; Use 警告;
Also, the perldoc command can locate POD in the installed scripts and modules and format it for the screen.||Also, The perldoc 命令 Can Locate POD In The 安装 Scripts And Modules And Format It For The 屏.
Although this is convenient, the current directory inside the callback is different from the search's starting directory.||Although This Is 便利的, The Current Directory 里面 The callback Is Different From The 搜查's Starting Directory.
Here, we declare a variable to hold the callback.||Here, We Declare a Variable To Hold The callback.
Island::Plotting::Maps - Plot maps on the island||Island::Plotting::Maps - Plot 地图 On The 岛屿
my ($count_em, $get_results) = create_find_callbacks_that_sum_the_size( ); find($count_em, 'bin'); my $total_size = &$get_results( ); print "total size of bin is $total_size\n";||My ($count_em, $get_results) = create_find_callbacks_that_sum_the_size( ); 寻找($count_em, 'bin'); My $total_size = &$get_results( ); Print "总 Size Of bin Is $total_size\n";
Always include a call to $self->SUPER::DESTROY in our destructors (even if we don't yet have any base/parent classes).||Always Include a Call To $自己->SUPER::DESTROY In Our destructors (Even If We Don't 仍然 Have Any Base/父或母亲 类).
It comes with the standard Perl distribution, so you should already have it.||It 来 With The Standard Perl 分配, So You Should Already Have It.
Now the Skipper can safely update and maintain one copy of the common subroutines without having to copy and recopy all the fixes and extensions into the many separate navigation programs he creates and uses.||Now The Skipper Can Safely Update And Maintain One Copy Of The Common Subroutines Without Having To Copy And recopy All The fixes And 延伸 Into The Many Separate 航行 Programs 他 Creates And Uses.
For each name, we construct a two-element list of the name and the corresponding provisions array reference.||For Each Name, We Construct a Two-Element List Of The Name And The 相应的 provisions Array Reference.
It's as if we had said:||It's As If We Had Said:
Soon after, the h2xs program grew into a module distribution creator, and that worked well for a while.||Soon After, The h2xs Program grew Into a Module 分配 creator, And That 工作 Well For a While.
Each chapter ends with a series of exercises to help you practice what you've just learned, and the answers are in the appendix for your reference.||Each 章 Ends With a 系列 Of exercises To Help You Practice What You'Ve Just 有学问的, And The answers Are In The 附录 For Your Reference.
Burn the barn: Barn2=ARRAY(0x541c) is being destroyed...||Burn The 谷仓: Barn2=ARRAY(0x541c) Is Being destroyed...
Perl doesn't require virtual methods to be declared in the base class, but they're nice as a documentation item.||Perl Doesn't Require 实质上的 Methods To Be Declared In The Base Class, But They'Re Nice As a 提供文件 条款.
Gilligan then has his program debugged (perhaps with the aid of a smart person whom we'll call "the Professor"), and everything works well.||Gilligan Then Has 他的 Program debugged (也许 With The 援助 Of a 聪明的 人 谁（宾格） We'我 Call "The Professor"), And Everything Works Well.
Now, instead of a few dozen lines of common subroutines to place in each file, we simply have one subroutine to insert in each file.||Now, Instead Of a Few 一打 Lines Of Common Subroutines To Place In Each File, We Simply Have One Subroutine To 插入 In Each File.
Finally, make sure all the right files show up in MANIFEST.||Finally, Make Sure All The Right Files Show Up In MANIFEST.
[*] This is just after the END blocks are executed and follows the same rules as END blocks: there must be a nice exit of the program rather than an abrupt end.||[*] This Is Just After The END Blocks Are Executed And Follows The Same 规则 As END Blocks: There Must Be a Nice Exit Of The Program Rather Than An 突然的 End.
We use SKIP when we want to make tests optional in certain circumstances.||We Use SKIP When We Want To Make 测试 Optional In 确信的 情况下.
Because the unshift happens at runtime, long after the use was attempted at compile time.||Because The unshift Happens At Runtime, Long After The Use Was attempted At Compile Time.
More simply, using the "drop arrow" rule, we can use:||More Simply, Using The "落下 箭" Rule, We Can Use:
In other words, print the list of items to the filehandle named name.||In Other Words, Print The List Of 物品 To The Filehandle Named Name.
$lost->{Name} has Bo, and $lost->{Color} has white.||$Lost->{Name} Has Bo, And $Lost->{Color} Has 白的.
('Class', @args)||('Class', @Args)
Now we see that the Skipper will be a bit thirsty later, without any relief.||Now We See That The Skipper Will Be a Bit 渴的 更晚, Without Any 解除.
The Perl object architecture relies heavily on packages, subroutines, and references, so if you're skipping around in this book, please go back to the beginning.||The Perl Object 建筑学 relies 重 On Packages, Subroutines, And References, So If You'Re skipping Around In This 书, 使高兴 Go Back To The 开端.
That's itjust bump the 1 to a 2.||That's itjust 碰 The 1 To a 2.
For example, running this program four times:||For Example, 连续的 This Program 四 Times:
sub get_me_home {||Sub get_me_home {
In fact, Perl searches in that directory first, since it is the first one in @INC.||In Fact, Perl searches In That Directory First, Since It Is The First One In @INC.
[] If there's more than one module in the distribution, it should be the name of the most important module.||[] If There's More Than One Module In The 分配, It Should Be The Name Of The Most Important Module.
[*] Sometimes Class::MethodMaker can be a bit much.||[*] Sometimes Class::MethodMaker Can Be a Bit Much.
Of course, this is an error in the test, but note that the output told us what happened: we got an 8 when we were expecting a 6.[*] This is far better than just "something went wrong" as before.||Of Course, This Is An Error In The Test, But Note That The 出产 told Us What Happened: We Got An 8 When We Were expecting a 6.[*] This Is Far Better Than Just "Something 去 错误的" As Before.
How is the documentation installed so the user can read it?||How Is The 提供文件 安装 So The User Can Read It?
No problem.||No Problem.
If the list is empty, the module's import method is simply not called at all.||If The List Is Empty, The Module's Import Method Is Simply Not Called At All.
use Test::More tests => 4;||Use Test::More 测试 => 4;
After all, who is better qualified to help others use your module than you?||After All, Who Is Better 有资格的 To Help 别人 Use Your Module Than You?
In Example Two, base cases would be needed for files, and perhaps for empty directories.||In Example Two, Base Cases Would Be Needed For Files, And 也许 For Empty directories.
This task would probably be solved better using iteration rather than recursion, even though the classic definition of factorial is often given as a recursive operation.||This 工作 Would Probably Be 解决 Better Using 迭代 Rather Than 递归, Even Though The 经典作品 Definition Of factorial Is Often Given As a 递归 Operation.
my $second_reference_to_skipper = $reference_to_skipper;||My $second_reference_to_skipper = $reference_to_skipper;
eval { sqrt(undef) }; is( $@, '', '$@ is not set after sqrt(undef)' );||Eval { sqrt(undef) }; Is( $@, '', '$@ Is Not Set After sqrt(undef)' );
Throughout its four editions, Learning Perl remained the same size (about 300 pages) and continued to cover much of the same material to remain compact and accessible to the beginning programmer.||Throughout Its 四 editions, Learning Perl remained The Same Size (About 300 页) And continued To 盖 Much Of The Same 材料 To 依旧的 严密的 And Accessible To The 开端 Programmer.
For example, suppose the Skipper figures out a half-dozen common subroutines related to navigating the Minnow that he seems to use in most or all of the programs he's writing for the task.||For Example, 猜想 The Skipper figures Out a 一半-一打 Common Subroutines Related To navigating The Minnow That 他 似乎 To Use In Most Or All Of The Programs 他's 写作 For The 工作.
It just represents the contents of some directory.||It Just Represents The Contents Of Some Directory.
More to the point, unless you're extraordinarily talented or spend way too long on this exercise, you almost certainly have bugs in your serialization routines, or at least flaws in your file format.||More To The 尖, Unless You'Re extraordinarily talented Or 花费 Way Too Long On This 锻炼, You Almost Certainly Have bugs In Your serialization Routines, Or At Least flaws In Your File Format.
Each has advantages and disadvantages.||Each Has advantages And disadvantages.
Of course, with indirection comes obfuscation, so there's got to be a magic middle ground somewhere.||Of Course, With indirection 来 obfuscation, So There's Got To Be a Magic 当中 地面 Somewhere.
Tabulating the data is as simple as:||Tabulating The Data Is As Simple As:
If either the print fails or the getline returns undef, the grep sees the false value as an indication to discard that pair.||If Either The Print 失败 Or The getline Returns Undef, The Grep 看到 The False Value As An 表示 To 丢弃 That 对.
In a perfect world, we'd test our program with every possible input and environment so that our program follows every particular path.||In a 完美的 World, We'd Test Our Program With Every Possible Input And 环境 So That Our Program Follows Every Particular Path.
Multi-Level Sort with the Schwartzian Transform If we need to sort on more than one criterion, the Schwartzian Transform is still up to the task.||Multi-Level Sort With The Schwartzian Transform If We Need To Sort On More Than One criterion, The Schwartzian Transform Is Still Up To The 工作.
For this, isa_ok( ) and can_ok( ) are good interface tests:||For This, isa_ok( ) And can_ok( ) Are Good Interface 测试:
We remove all of the output parts from check_required_items, and we take out the parts to modify the input list.||We 移开 All Of The 出产 部分 From check_required_items, And We Take Out The 部分 To Modify The Input List.
# he can talk! }|| # 他 Can 谈话! }
We'll worry about that later.||We'我 烦恼 About That 更晚.
But this still results in the same output.||But This Still Results In The Same 出产.
my @result = map { split //, $_ } @input_numbers;||My @Result = Map { Split //, $_ } @input_numbers;
Let's rewrite that last example to use the block form:||Let's 重写 That Last Example To Use The Block Form:
For example, if we add one "Mrs. Howell" to that travel list, as someone who has packed rather light, we'd simply insert:||For Example, If We 增添 One "Mrs. Howell" To That 旅行 List, As Someone Who Has packed Rather 光, We'd Simply 插入:
Exercise 1 [15 min] Take the Oogaboogoo library you created in Chapter 10, Exercise 1 and turn it into a module you can bring in with use.||Exercise 1 [15 min] Take The Oogaboogoo Library You Created In Chapter 10, Exercise 1 And 转向 It Into a Module You Can 拿来 In With Use.
sub dump_data_for_path {||Sub dump_data_for_path {
We take that name, look up the array reference of the provisions for that person, dereference that in a scalar context to get the count of provisions, and then compare it to 5.||We Take That Name, Look Up The Array Reference Of The provisions For That 人, 废弃 That In a Scalar Context To Get The 计算 Of provisions, And Then 比较 It To 5.
Because the map and sort operators are right to left, we have to read this construct from the bottom up.||Because The Map And Sort Operators Are Right To Left, We Have To Read This Construct From The 底部 Up.
Not to worry, because it's pretty easy to fix:||Not To 烦恼, Because It's 精致的 Easy To 固定:
Here, we create the value that we'll eventually store in @all_with_names as the last expression evaluated in the subroutine.||Here, We Create The Value That We'我 最终 商店 In @all_with_names As The Last Expression 评估 In The Subroutine.
For example, suppose the pair is Ginger and Gilligan.||For Example, 猜想 The 对 Is Ginger And Gilligan.
In that case, the callback simply warns the user and returns early.||In That Case, The callback Simply warns The User And Returns Early.
Without calling the parent destructor, the steps taken by superclasses of this class will not properly execute.||Without Calling The 父或母亲 destructor, The 步骤 Taken By 策略 Of This Class Will Not Properly Execute.
We could add a code comment, but as you probably already know, most code comments seem to assume that you already know what's supposed to happen.||We Could 增添 a Code Comment, But As You Probably Already Know, Most Code comments 好象 To 假定 That You Already Know What's 应该 To 发生.
So instead of comparing $a to $b, we use cmp to compare $input[$a] to $input[$b] as strings.||So Instead Of comparing $a To $b, We Use cmp To 比较 $Input[$a] To $Input[$b] As Strings.
Let's keep stepping:||Let's 保持 stepping:
That's it.||That's It.
This idiom was much more prevalent in the earlier days of Perl 5, and we're still trying to eradicate it from the world.||This 习语 Was Much More 流行的 In The Earlier 天 Of Perl 5, And We'Re Still 尝试 To 根除 It From The World.
Now the logfile is large, and the coconut-powered computer is not very fast, so he wants to process the input file in one pass and write all output files in parallel.||Now The logfile Is Large, And The coconut-powered 计算机 Is Not Very 快的, So 他 要 To 程序 The Input File In One Pass And Write All 出产 Files In 平行的.
[] There is also inheritance through UNIVERSAL and AUTOLOAD; see the perlobj manpage for the whole story.||[] There Is Also Inheritance 通过 UNIVERSAL And AUTOLOAD; See The perlobj manpage For The Whole 故事.
$ skipper [1] ${ $items }[1]||$ skipper [1] ${ $物品 }[1]
Only one of them can set the plan, so we let Test::More handle that.||Only One Of Them Can Set The 计划平面图, So We Let Test::More Handle That.
How does this get around the AUTOLOAD mechanism?||How Does This Get Around The AUTOLOAD Mechanism?
The semicolon is needed after the eval block because eval is a function (not a control structure, such as if or while).||The semicolon Is Needed After The Eval Block Because Eval Is a Function (Not a Control Structure, Such As If Or While).
If we weaken the link to the child, Perl can destroy the child when all other references are lost, and the parent's link simply becomes undef (or we can set a destructor to completely remove it).||If We 削弱 The 联系 To The 孩子, Perl Can 破坏 The 孩子 When All Other References Are Lost, And The 父或母亲's 联系 Simply Becomes Undef (Or We Can Set a destructor To 完全地 移开 It).
One school of thought, known as Test-Driven Development, says that we should write the tests before we write the code that is being tested.||One 学校 Of Thought, Known As Test-Driven 开发, 说 That We Should Write The 测试 Before We Write The Code That Is Being 测试.
Unlike the File::Basename module, the File::Spec module has a primarily objectoriented interface.||Unlike The File::Basename Module, The File::Spec Module Has a 首要地 objectoriented Interface.
my @input_numbers = (1, 2, 4, 8, 16, 32, 64); my @result = map $_ + 100, @input_numbers;||My @input_numbers = (1, 2, 4, 8, 16, 32, 64); My @Result = Map $_ + 100, @input_numbers;
a Horse goes neigh!||a Horse 去 neigh!
However it's nice to know that we can temporarily have a different current package.[]||However It's Nice To Know That We Can temporarily Have a Different Current Package.[]
If the last digit is not 4, we return an empty list, effectively removing results for that particular item.||If The Last 数字 Is Not 4, We Return An Empty List, Effectively removing Results For That Particular 条款.
We can use the Test::Builder::Tester module.||We Can Use The Test::Builder::Tester Module.
[*] You are using warnings, right?||[*] You Are Using 警告, Right?
Of course, in Perl, there's nothing special about the name new, but at least the syntax is hauntingly familiar.||Of Course, In Perl, There's Nothing Special About The Name New, But At Least The Syntax Is hauntingly 熟悉的.
In our solution, we created a MyDate package in the same file as the script.||In Our 解决, We Created a MyDate Package In The Same File As The 临时单据.
Now the subroutine is defined in the main package, not the Navigation package.||Now The Subroutine Is Defined In The Main Package, Not The Navigation Package.
We need an external interface for the weaken routine, though, which can be imported from the Scalar::Util module.||We Need An External Interface For The 削弱 Routine, Though, Which Can Be Imported From The Scalar::Util Module.
Certainly, Perl establishes the declaration of the $LIB_DIR variable at compile time (so we won't get an error with use strict, although the actual use lib should complain), but the actual assignment of the /home/gilligan/lib/ value doesn't happen until runtime.||Certainly, Perl establishes The Declaration Of The $LIB_DIR Variable At Compile Time (So We Won't Get An Error With Use Strict, Although The Actual Use lib Should 抱怨), But The Actual Assignment Of The /家/gilligan/lib/ Value Doesn't 发生 Until Runtime.
Near the top, put the filename into a variable.||Near The 顶, Put The 文件名 Into a Variable.
C-language interfaces||C-语言 接口
[*] It's now maintained by Andy Lester and is so popular that it's become part of Module::Starter and the CPAN Testers Service's (CPANTS) Kwalitee rating.||[*] It's Now maintained By Andy Lester And Is So 受欢迎的 That It's 变成 Part Of Module::Starter And The Perl综合典藏网 Testers Service's (Perl综合典藏网TS) Kwalitee 评级.
Later, in Chapters 10, 17, and 18, we'll use this to optionally load modules.||Later, In Chapters 10, 17, And 18, We'我 Use This To Optionally Load Modules.
Indeed, IO::File uses the built-in open behind the scenes.||Indeed, IO::File Uses The Built-In Open 在 The scenes.
Here's the check_required_items subroutine as we left it:||Here's The check_required_items Subroutine As We Left It:
It relies on the external program make, which, since it started life as a Unix tool, may not be available on all systems.[Â§] Ken Williams created the pure-Perl Module::Build system as a make replacement.||It relies On The External Program Make, Which, Since It 开始 生活 As a Unix 工具, May Not Be Available On All 系统.[Â§] Ken Williams Created The 纯洁的-Perl Module::Build System As a Make Replacement.
Ensure that a faulty pattern, such as one with unbalanced parentheses, doesn't crash the program||Ensure That a 有缺点的 模式, Such As One With unbalanced Parentheses, Doesn't 碰撞 The Program
It goes something like this:||It 去 Something Like This:
use Island::Plotting::Maps ( ); # import nothing||Use Island::Plotting::Maps ( ); # Import Nothing
Once Perl brings in the drop_anchor.pm file, it ignores another attempt to require it||Once Perl brings In The drop_anchor.pm File, It 忽略了 另一个 尝试 To Require It
Volunteers around the world automatically download and test each distribution on whatever setup they have.||Volunteers Around The World Automatically download And Test Each 分配 On Whatever setup They Have.
This function [ more here ].||This Function [ More Here ].
We should make sure that sqrt(-1) yields a fatal error and that sqrt(-100) does too.||We Should Make Sure That sqrt(-1) yields a Fatal Error And That sqrt(-100) Does Too.
Many people choose to rename the files to reflect a specific ordering and purpose by using names like 01-core.t, 02-basic.t, 03-advanced.t, 04-saving.t, and so on.||Many People 选择 To rename The Files To 反射 a 特殊的 订购 And Purpose By Using Names Like 01-core.t, 02-basic.t, 03-advanced.t, 04-saving.t, And So On.
However, the Perl idiom is to do everything in one step.||However, The Perl 习语 Is To Do Everything In One 脚步.
Reread Chapter 17 if you must.||Reread Chapter 17 If You Must.
my $count = grep {||My $计算 = Grep {
We don't want those sorts of things filling up our logfiles, now, do we?||We Don't Want Those 各样 Of Things Filling Up Our logfiles, Now, Do We?
Installation location||Installation 地点
How much?||How Much?
Let's take the reference to ourselves, display a debugging message about the particular barn being destroyed, and then ask for the name of each inhabitant in turn.||Let's Take The Reference To 我们自己, 陈列 a Debugging 音讯 About The Particular 谷仓 Being destroyed, And Then 问 For The Name Of Each 居民 In 转向.
Be sure to update the documentation and MANIFEST file as you go along.||Be Sure To Update The 提供文件 And MANIFEST File As You Go 沿着.
professor.hut gilligan.crew.hut 1250 professor.hut lovey.howell.hut 910 thurston.howell.hut lovey.howell.hut 1250 professor.hut lovey.howell.hut 450 ginger.girl.hut professor.hut 1218 ginger.girl.hut maryann.girl.hut 199||professor.hut gilligan.crew.小屋 1250 professor.hut lovey.howell.小屋 910 thurston.howell.小屋 lovey.howell.小屋 1250 professor.hut lovey.howell.小屋 450 ginger.girl.小屋 professor.hut 1218 ginger.girl.小屋 maryann.girl.小屋 199
The first time through the loop, the filehandle must be created.||The First Time 通过 The Loop, The Filehandle Must Be Created.
For every missing provision, we push that provision onto an array, forcing the passenger to consider the item:||For Every Missing 准备, We Push That 准备 到 An Array, 迫使 The 旅客 To Consider The 条款:
with the method name preceding the class name and the arguments at the end.||With The Method Name 前面的 The Class Name And The Arguments At The End.
If all of that makes you nervous and wish that none of this stuff existed, that's good.||If All Of That 使 You 神经质的 And Wish That 没人 Of This 材料 existed, That's Good.
The other ways are useful mainly for trying out a new version of an old module before replacing the old module (and possibly breaking the programs that use it).||The Other Ways Are Useful 主要地 For 尝试 Out a New Version Of An Old Module Before replacing The Old Module (And Possibly 打破 The Programs That Use It).
What about that third test, where we allowed the value to vary within some tolerance?||What About That 第三 Test, Where We Allowed The Value To 变化 Within Some 宽容?
Even though the variable has gone out of scope before we call either subroutine, they still share the same heritage and can use the variable to communicate the result of the calculation.||Even Though The Variable Has 不见了 Out Of Scope Before We Call Either Subroutine, They Still 份 The Same heritage And Can Use The Variable To 传播 The Result Of The 计算（结果）.
Getting Our Braces Off Most of the time, the array reference we want to dereference is a simple scalar variable, such as @{$items} or ${$items}[1].||Getting Our Braces Off Most Of The Time, The Array Reference We Want To 废弃 Is a Simple Scalar Variable, Such As @{$物品} Or ${$物品}[1].
Whether we change the value, or the variable itself goes away, Perl notes it as an appropriate reduction in the number of references to the data.||Whether We Change The Value, Or The Variable Itself 去 Away, Perl 备忘 It As An 恰当的 减少 In The Number Of References To The Data.
my @handlepairs;||My @handlepairs;
When you change the module files, you'll need to run make again too, although that happens when you run make test or make dist.||When You Change The Module Files, You'我 Need To Run Make Again Too, Although That Happens When You Run Make Test Or Make dist.
This is because RaceHorse will be a "friend" class (in C++ or Java terminology), accessing the instance variables directly.||This Is Because RaceHorse Will Be a "朋友" Class (In C++ Or Java 术语（总称）), 访问 The 例子 Variables 直接地.
Here's a trickier one.||Here's a trickier One.
If you have a non-Unix system, a make-like utility should also be available.||If You Have a Non-Unix System, a Make-Like 效用 Should Also Be Available.
The last evaluated expression in the block is the testing expression.||The Last 评估 Expression In The Block Is The testing Expression.
Professor walks into the room.||Professor walks Into The 房间.
Which one is correct?||Which One Is 正确的?
use Navigate::SeatOfPants||Use Navigate::SeatOfPants
Ahh, so that line was being parsed as:||Ahh, So That Line Was Being Parsed As:
But perldiag should list all the messages you should ever get from Perl, along with a longer explanation of what each one means, why it's a problem, and how to fix it.||But perldiag Should List All The Messages You Should 曾经 Get From Perl, 沿着 With a 长 说明 Of What Each One Means, Why It's a Problem, And How To 固定 It.
and we'll get:||And We'我 Get:
For example, suppose we want to find the items in a list that have odd digit sums but don't want the items themselves.||For Example, 猜想 We Want To 寻找 The 物品 In a List That Have 古怪的 数字 sums But Don't Want The 物品 他们、它们自己.
At this point, we have four different ways to access the data contained in @skipper:||At This 尖, We Have 四 Different Ways To Access The Data 包含 In @skipper:
The distribution is required to contain a Makefile.PL, which is a Perl program to build a Makefile.||The 分配 Is 要求 To Contain a Makefile.PL, Which Is a Perl Program To Build a Makefile.
[Mr. Ed has gone off to the glue factory.]||[Mr. Ed Has 不见了 Off To The 胶水n 工厂.]
{ package LivingCreature;||{ Package LivingCreature;
You can read the lengthy analysis on Perl Monks : http://www.perlmonks.com/?node_id=393128.||You Can Read The lengthy 分析 On Perl Monks : http://www.perlmonks.com/?node_id=393128.
Removing the top of a tree of data generally removes all the data contained within.||Removing The 顶 Of a 树 Of Data Generally Removes All The Data 包含 Within.
This uses an explicit reference to $_.||This Uses An 清楚的 Reference To $_.
Now we get back the list of 1, 16, and 32.||Now We Get Back The List Of 1, 16, And 32.
If eval can't properly compile and run the Perl code we hand it, it sets $@ just like in its block form.||If Eval Can't Properly Compile And Run The Perl Code We Hand It, It Sets $@ Just Like In Its Block Form.
Test many things at once.||Test Many Things At Once.
For example, it's easy to sort a list of items or to add or remove items, even in the middle of the list.||For Example, It's Easy To Sort a List Of 物品 Or To 增添 Or 移开 物品, Even In The 当中 Of The List.
sub compute_heading_to_island {||Sub compute_heading_to_island {
Exercise 1 In this exercise, we have to use three different output methods: to a file, which you're already familiar with; to a scalar (and you'll need Perl 5.8 for this); or to both at the same time.||Exercise 1 In This 锻炼, We Have To Use Three Different 出产 Methods: To a File, Which You'Re Already 熟悉的 With; To a Scalar (And You'我 Need Perl 5.8 For This); Or To Both At The Same Time.
perl Build perl Build test perl Build install||Perl Build Perl Build Test Perl Build 安装
Running the cover command turns that information into a set of HTML pages.||Running The 盖 命令 Turns That Information Into a Set Of HTML 页.
The Comprehensive Perl Archive Network We covered the basic CPAN history in Chapter 3, but that was from a user's perspective.||The Comprehensive Perl 存档文件 Network We covered The 基本的 Perl综合典藏网 历史 In Chapter 3, But That Was From a User's 展望.
The croak function places the blame on the caller by making the error message look like it came from the spot where we called the method instead of the spot where we issued the error.||The croak Function Places The 责备 On The Caller By 制作 The Error 音讯 Look Like It 来 From The 点 Where We Called The Method Instead Of The 点 Where We issued The Error.
Note the addition of the @missing array.||Note The 增加 Of The @Missing Array.
Calling a Second Method to Simplify Things We can call out from speak to a helper method called sound.||Calling a Second Method To Simplify Things We Can Call Out From 说话 To a helper Method Called 声.
This whitespace is legal in a program, even though most programs won't use it.||This Whitespace Is 合法的 In a Program, Even Though Most Programs Won't Use It.
This is the list the foreach now scans.||This Is The List The Foreach Now 扫描.
Enough on that for this discussion, however.||Enough On That For This 讨论, However.
sub factorial {||Sub factorial {
Note that we can't use the more traditional filehandle read or filehandle print operations, because the reading and writing filehandles were not in a simple scalar variable.||Note That We Can't Use The More 传统的 Filehandle Read Or Filehandle Print 操作, Because The 读书 And 写作 Filehandles Were Not In a Simple Scalar Variable.
require 'navigation.pm';||Require 'navigation.pm';
Answers for Chapter 18 A.17.1.||Answers For Chapter 18 A.17.1.
To invoke sound, Perl first notes that $tv_horse is a blessed reference, and thus an instance.||To 调用 声, Perl First 备忘 That $tv_horse Is a 有福的 Reference, And 如此 An 例子.
To make the AUTOLOAD subroutine work only for the right subroutines, we defined %Allowed_methods to hold the names of the methods that will work.||To Make The AUTOLOAD Subroutine Work Only For The Right Subroutines, We Defined %Allowed_methods To Hold The Names Of The Methods That Will Work.
Appendix A. Answers to Exercises This appendix contains the answers to the exercises presented throughout the book.||Appendix A. Answers To Exercises This 附录 包含 The answers To The exercises 提出 Throughout The 书.
If the value inside the curly braces is a simple scalar variable, we can drop the braces:||If The Value 里面 The 卷曲的 牙套 Is a Simple Scalar Variable, We Can 落下 The 牙套:
sub navigation_turn_toward_heading {||Sub navigation_turn_toward_heading {
# are there any more parameters?|| # Are There Any More Parameters?
One downside of the isa call here is that it works only on blessed references or scalars that look like class names.||One downside Of The isa Call Here Is That It Works Only On 有福的 References Or Scalars That Look Like Class Names.
The caller will get an error message like this, giving the line number in their code where the wrong method was called:||The Caller Will Get An Error 音讯 Like This, Giving The Line Number In Their Code Where The 错误的 Method Was Called:
There's also a corresponding isnt( ) when we want to compare for inequality rather than equality.||There's Also a 相应的 isnt( ) When We Want To 比较 For inequality Rather Than 平等.
Class begins after you turn the page . . . .||Class begins After You 转向 The 页 . . . .
Or maybe the data items themselves are impractical to sort, such as a month's worth of server logs.||Or 或许 The Data 物品 他们、它们自己 Are 不可行的 To Sort, Such As a 月份's worth Of server logs.
Earlier we showed a simple (although hypothetical) example for File::Basename.||Earlier We showed a Simple (Although 假设的) Example For File::Basename.
If we had turned on warnings, we would have seen a message stating that; but otherwise, Perl really doesn't care.||If We Had 转 On 警告, We Would Have Seen a 音讯 stating That; But Otherwise, Perl Really Doesn't Care.
In this case, the reference to the newly created empty array is dereferenced, and we push the blue shirt to the provisions list.||In This Case, The Reference To The 新 Created Empty Array Is dereferenced, And We Push The 蓝色的 衬衣 To The provisions List.
Is there anything extra that the users of our software will need?||Is There Anything Extra That The Users Of Our 软件 Will Need?
When we reach the last statement, we see:||When We 到达 The Last Statement, We See:
sub import {||Sub Import {
In any of these forms, when the scalar variable goes out of scope (or we assign another value to it), Perl closes the file.||In Any Of These 形式, When The Scalar Variable 去 Out Of Scope (Or We Assign 另一个 Value To It), Perl closes The File.
[*] This code seems to have an extra semicolon at the end of the line that assigns to $callback, doesn't it?||[*] This Code 似乎 To Have An Extra semicolon At The End Of The Line That Assigns To $callback, Doesn't It?
How do we keep the number of monkey requests to a minimum?||How Do We 保持 The Number Of 猴子 Requests To a 最少量?
1..4 ok 1 - 1 + 2 = = 3 ok 2 - 2 * 4 = = 8 ok 3 - 5 / 3 = = (approx) 1.666667 ok 4 - -3 + 3 = = 0||1..4 Ok 1 - 1 + 2 = = 3 Ok 2 - 2 * 4 = = 8 Ok 3 - 5 / 3 = = (approx) 1.666667 Ok 4 - -3 + 3 = = 0
In the BEGIN block, we first test if we can use My::List::Util.||In The BEGIN Block, We First Test If We Can Use My::List::Util.
[] Actually, it imports them into the current package, but we haven't told you about those yet.||[] Actually, It Imports Them Into The Current Package, But We 还't told You About Those 仍然.
And because it's not zero, Perl thinks there might still be a way to get to the data, even though there isn't!||And Because It's Not 零, Perl Thinks There Might Still Be a Way To Get To The Data, Even Though There Isn't!
If you tried running this, Perl may have given you a helpful diagnostic message as a warning.||If You tried 连续的 This, Perl May Have Given You a 有用的 诊断 音讯 As a Warning.
[] Some names are always in package main regardless of the current package: ARGV, ARGVOUT, ENV, INC, SIG, STDERR, STDIN, and STDOUT.||[] Some Names Are Always In Package Main 不顾的（地） Of The Current Package: 命令行传入参数, 命令行传入参数OUT, ENV, INC, SIG, STDERR, STDIN, And STDOUT.
We let the Horse class build a new horse:||We Let The Horse Class Build a New 马:
We've got the same number of characters, all constant, no variables.||We'Ve Got The Same Number Of Characters, All Constant, No Variables.
The test harness uses the upper number to verify that the test file hasn't just terminated early.||The Test 支配 Uses The Upper Number To 检验 That The Test File hasn't Just terminated Early.
In this example, we again use a naked block to create a section of code to skip, and we label it with SKIP.||In This Example, We Again Use a 裸体的 Block To Create a Section Of Code To 跳过, And We 标签 It With SKIP.
Even if it's just for you, a few months later, when your brain has been 42, 000 other places before you look at the code again, you'll be glad to have those notes.||Even If It's Just For You, a Few 月 更晚, When Your 脑子 Has Been 42, 000 Other Places Before You Look At The Code Again, You'我 Be 快乐的 To Have Those 备忘.
We're now looking at the two array references within one top-level array.||We'Re Now 看 At The Two Array References Within One 顶-Level Array.
Autovivification and Hashes Autovivification also works for hash references .||Autovivification And Hashes Autovivification Also Works For Hash References .
We must either return a pointer to a static memory space, making the subroutine nonreentrant, or we must malloc new memory space, requiring the caller to know to free the data.||We Must Either Return a Pointer To a Static Memory Space, 制作 The Subroutine nonreentrant, Or We Must malloc New Memory Space, 需要 The Caller To Know To Free The Data.
my $tv_horse = Horse->named('Mr. Ed'); $tv_horse->set_name('Mister Ed'); $tv_horse->set_color('grey'); print $tv_horse->name, ' is ', $tv_horse->color, "\n"; print Sheep->name, ' colored ', Sheep->color, ' goes ', Sheep->sound, "\n";||My $tv_horse = Horse->Named('Mr. Ed'); $tv_horse->set_name('Mister Ed'); $tv_horse->set_color('灰色的'); Print $tv_horse->Name, ' Is ', $tv_horse->颜色, "\n"; Print Sheep->Name, ' colored ', Sheep->颜色, ' 去 ', Sheep->声, "\n";
See the documentation for Storable.||See The 提供文件 For Storable.
package Test::Minnow::RequiredItems; use strict;||Package Test::Minnow::RequiredItems; Use Strict;
my %passenger_2 = {||My %passenger_2 = {
You can invoke it directly from the newly created Makefile by simply typing make test, as in:||You Can 调用 It 直接地 From The 新 Created Makefile By Simply 打字 Make Test, As In:
Perl next checks for speak inside Animal instead, as in Animal::speak.||Perl 下一次 检查 For 说话 里面 Animal Instead, As In Animal::说话.
For example, if we copy Gilligan's provisions:||For Example, If We Copy Gilligan's provisions:
But all Horse objects would have to be absolutely identical.||But All Horse Objects Would Have To Be 绝对 同一的.
That is, wherever we write skipper to name the array, we use the reference inside curly braces: { $items }.||That Is, 无论哪里 We Write skipper To Name The Array, We Use The Reference 里面 卷曲的 牙套: { $物品 }.
Even though normal subroutines and method calls are both defined as subroutines in the package, the caller and the author must agree as to which is which.||Even Though Normal Subroutines And Method Calls Are Both Defined As Subroutines In The Package, The Caller And The 作者 Must 同意 As To Which Is Which.
If that element is beyond the end of @y, we automatically select it.||If That Element Is Beyond The End Of @y, We Automatically 挑选 It.
But rather than define her greeting behavior as a named subroutine, we create an anonymous subroutine:||But Rather Than Define Her 问候 Behavior As a Named Subroutine, We Create An Anonymous Subroutine:
my $string = '';||My $String = '';
The DEFAULT tag pulls in the same things as if we had provided no import list:||The DEFAULT 标签 pulls In The Same Things As If We Had Provided No Import List:
That's not very useful to an end user and only barely more usable to the programmer, except as an indication of the lack of appropriate dereferencing.||That's Not Very Useful To An End User And Only 赤裸裸地 More Usable To The Programmer, Except As An 表示 Of The 缺少 Of 恰当的 dereferencing.
When we try to compute the sum, we use two variables to which we haven't given values.||When We Try To 计算 The 总数, We Use Two Variables To Which We 还't Given Values.
my $tv_horse =||My $tv_horse =
Skipper: Hey there, Ginger!||Skipper: Hey There, Ginger!
and we get our desired output.||And We Get Our Desired 出产.
We can start it like this:||We Can Start It Like This:
So, for example, a portion of the File::Basename file might look something like this, if we took out all the good stuff:||So, For Example, a 一份 Of The File::Basename File Might Look Something Like This, If We took Out All The Good 材料:
This supports another basic rule of OOP: if only the object accesses its internal data, there's less code to change when it's time to modify that structure.||This Supports 另一个 基本的 Rule Of OOP: If Only The Object Accesses Its Internal Data, There's 更少的 Code To Change When It's Time To Modify That Structure.
This code is clever: it only runs tests if the user has installed Test::Pod, and doesn't cause any problems if she hasn't.||This Code Is 聪明的: It Only 跑 测试 If The User Has 安装 Test::Pod, And Doesn't 原因 Any 问题 If 她 hasn't.
$tee_fh = IO::Tee->new( $read_fh, $log_fh, $scalar_fh );||$tee_fh = IO::Tee->New( $read_fh, $log_fh, $scalar_fh );
For example, it temporarily places items from a list into $_ one at a time, and the syntax allows both the expression block forms.||For Example, It temporarily Places 物品 From a List Into $_ One At a Time, And The Syntax Allows Both The Expression Block 形式.
Note the added @ISA array.||Note The added @ISA Array.
Once you have the name, force it to lowercase so that an entry for "Maryann" will get filed in the same place as one for "MaryAnn."||Once You Have The Name, Force It To lowercase So That An Entry For "Maryann" Will Get filed In The Same Place As One For "MaryAnn."
Earlier, we were able to do this by making $total_size visible.||Earlier, We Were Able To Do This By 制作 $total_size Visible.
But that doesn't matter.||But That Doesn't Matter.
Part of the work involved rearranging and organizing the separate archives.||Part Of The Work 涉及的 rearranging And organizing The Separate archives.
use Carp qw(croak);||Use Carp qw(croak);
What if the caller invoked use in a package other than main?||What If The Caller invoked Use In a Package Other Than Main?
We can check the Skipper and the Professor with just a bit more code:||We Can Check The Skipper And The Professor With Just a Bit More Code:
You can read about it in the December 2004 issue of The Perl Journal at http://www.tpj.com/documents/s=9622/tpj0412e/0412e.html.||You Can Read About It In The December 2004 发行发布 Of The Perl Journal At http://www.tpj.com/documents/s=9622/tpj0412e/0412e.html.
my @skipper = qw(blue_shirt hat jacket preserver sunscreen); my @skipper_with_name = ('Skipper', \@skipper); my @professor = qw(sunscreen water_bottle slide_rule batteries radio); my @professor_with_name = ('Professor', \@professor); my @gilligan = qw(red_shirt hat lucky_socks water_bottle); my @gilligan_with_name = ('Gilligan', \@gilligan);||My @skipper = Qw(blue_shirt 帽子 短外套 preserver sunscreen); My @skipper_with_name = ('Skipper', \@skipper); My @教授 = Qw(sunscreen water_bottle slide_rule batteries 无线电); My @professor_with_name = ('Professor', \@教授); My @gilligan = Qw(red_shirt 帽子 lucky_socks water_bottle); My @gilligan_with_name = ('Gilligan', \@gilligan);
For each element of the directory, we pass a path consisting of the incoming path followed by the current directory entry, and the data pointer is either undef for a file or a subdirectory hash reference for another directory.||For Each Element Of The Directory, We Pass a Path consisting Of The Incoming Path 跟着 By The Current Directory Entry, And The Data Pointer Is Either Undef For a File Or a 子目录 Hash Reference For 另一个 Directory.
Anonymous Subroutines In that last example, we never explicitly called subroutines such as professor_greets( ), we only called them indirectly through the coderef.||Anonymous Subroutines In That Last Example, We Never 清晰地 Called Subroutines Such As professor_greets( ), We Only Called Them 间接地 通过 The coderef.
We can always refer to @INC and be assured of getting @main::INC.||We Can Always Refer To @INC And Be 感到放心的 Of 得到 @Main::INC.
my $temp_fh = IO::File->new_tmpfile;||My $temp_fh = IO::File->new_tmpfile;
That last part looks very repetitive.||That Last Part Looks Very 重复的.
my $callback; {||My $callback; {
# not found in list?|| # Not Found In List?
In this subroutine, $a and $b are still two elements from the list of things to be sorted.||In This Subroutine, $a And $b Are Still Two Elements From The List Of Things To Be 分类.
For example, let's single-step through one version of the byte-counting program from Chapter 5:||For Example, Let's Single-脚步 通过 One Version Of The 字节-counting Program From Chapter 5:
The CPAN distribution management tools use the version number to track a particular release, and the CPAN installation tools can determine missing or out-of-date distributions.||The Perl综合典藏网 分配 管理（人员） Tools Use The Version Number To 径赛 a Particular Release, And The Perl综合典藏网 安装 Tools Can 决心 Missing Or Out-Of-Date 分布.
Sure, but we sacrifice clarity:||Sure, But We 牺牲（品） 清晰:
# no definition for speak( )|| # No Definition For 说话( )
(If it can't find the method, inheritance kicks in, but we'll show that later.)||(If It Can't 寻找 The Method, Inheritance kicks In, But We'我 Show That 更晚.)
eval '$sum = 2 + 2'; print "The sum is $sum\n";||Eval '$总数 = 2 + 2'; Print "The 总数 Is $总数\n";
@ skipper @{ $items }||@ skipper @{ $物品 }
It is not until we invoke them as a callback or an explicit subroutine dereferencing that they actually do their duty.||It Is Not Until We 调用 Them As a callback Or An 清楚的 Subroutine dereferencing That They Actually Do Their 责任.
[] That string might be something like /home/gilligan/web_docs/photos/USS_Minnow.gif on a Unix system.||[] That String Might Be Something Like /家/gilligan/web_docs/photos/USS_Minnow.gif On a Unix System.
How to run a Perl program on your system||How To Run a Perl Program On Your System
However, if you are testing a module, you certainly don't want to install it into the system directories, possibly corrupting a previous version of your module and breaking production programs.||However, If You Are testing a Module, You Certainly Don't Want To 安装 It Into The System directories, Possibly corrupting a Previous Version Of Your Module And 打破 生产 Programs.
Then, when we use that name as a filehandle, Perl knows to look for the filehandle portion of the typeglob.||Then, When We Use That Name As a Filehandle, Perl 知道 To Look For The Filehandle 一份 Of The typeglob.
In the log_message( ) routine, we take the first element off of the argument list and store it in another typeglob.||In The log_message( ) Routine, We Take The First Element Off Of The Argument List And 商店 It In 另一个 typeglob.
One practical solution to this problem is to change the block in which the static local appears into a BEGIN block:||One 实用的 解决 To This Problem Is To Change The Block In Which The Static Local Appears Into a BEGIN Block:
What to Do with @_ In that last example, had there been any additional parameters to the speak method (like how many times, or in what pitch for singing, for example), the parameters would be ignored by the Mouse::speak method.||What To Do With @_ In That Last Example, Had There Been Any Additional Parameters To The 说话 Method (Like How Many Times, Or In What 搭帐篷 For singing, For Example), The Parameters Would Be Ignored By The Mouse::说话 Method.
When you run the completed program with this subroutine, your output should show only file modification dates on the previous Monday (unless you changed the code to use a different day of the week, of course).||When You Run The completed Program With This Subroutine, Your 出产 Should Show Only File 修改 dates On The Previous Monday (Unless You 改变 The Code To Use a Different 一天 Of The 星期, Of Course).
If $a comes before $b in our desired sorting order, it should return -1; it should return +1 if $b comes before $a; if the order doesn't matter, it should return 0.||If $a 来 Before $b In Our Desired sorting Order, It Should Return -1; It Should Return +1 If $b 来 Before $a; If The Order Doesn't Matter, It Should Return 0.
is($tv_horse->name, 'Mr. Ed', 'I am Mr. Ed!');||Is($tv_horse->Name, 'Mr. Ed', 'I Am Mr. Ed!');
my @cows = map Cow->named($_), qw(Bessie Gwen); my @horses = map Horse->named($_), ('Trigger', 'Mr. Ed'); my @racehorses = RaceHorse->named('Billy Boy'); print "We've seen:\n", map(" $_\n", Animal->registered); print "End of program.\n";||My @cows = Map Cow->Named($_), Qw(Bessie Gwen); My @horses = Map Horse->Named($_), ('Trigger', 'Mr. Ed'); My @racehorses = RaceHorse->Named('Billy Boy'); Print "We'Ve Seen:\n", Map(" $_\n", Animal->登记的); Print "End Of Program.\n";
do 'navigation.pm'; die $@ if $@;||Do 'navigation.pm'; Die $@ If $@;
To resolve the situation, Perl automatically inserts a reference to a new empty anonymous array into the variable and continues the operation.||To 决定 The 形势, Perl Automatically inserts a Reference To a New Empty Anonymous Array Into The Variable And 继续 The Operation.
If there's anything there at the end of the scan, we add it to the original provision list.||If There's Anything There At The End Of The 浏览, We 增添 It To The Original 准备 List.
After the Exporter setup, we get the version number for our new module.||After The Exporter setup, We Get The Version Number For Our New Module.
He still has to be able to read it, of course, but Gilligan can use this technique to try a new version of his library with the Skipper's program, for example.||He Still Has To Be Able To Read It, Of Course, But Gilligan Can Use This 技术 To Try a New Version Of 他的 Library With The Skipper's Program, For Example.
Exercise 2 [40 min] Add a Person class at the same level as Animal, and have both of them inherit from a new class called LivingCreature.||Exercise 2 [40 min] Add a Person Class At The Same Level As Animal, And Have Both Of Them 继承 From a New Class Called LivingCreature.
Exercise 1 [20 min] Write a module named MyDate that has an AUTOLOAD method that handles the calls to the methods named day, month, and year, returning the appropriate value for each one.||Exercise 1 [20 min] Write a Module Named MyDate That Has An AUTOLOAD Method That 处理 The Calls To The Methods Named 一天, 月份, And 年, Returning The 恰当的 Value For Each One.
You can (in some hypothetical future version of this program) use such quoting to denote NFS-mounted directories or other special items.||You Can (In Some 假设的 Future Version Of This Program) Use Such 引用 To 表示 NFS-mounted directories Or Other Special 物品.
In fact, we can access won with an infinite number of names, such as $data1[2][3][2][3][2][3][1].||In Fact, We Can Access Won With An 无限大的 Number Of Names, Such As $data1[2][3][2][3][2][3][1].
with the anonymous hash constructor:||With The Anonymous Hash 构造函数:
And then there's the buzzworthy notion of object-oriented programming (OOP), which allows parts of your code (or hopefully code from others) to be reused with minor or major variations within the same program.||And Then There's The buzzworthy 概念 Of Object-Oriented Programming (OOP), Which Allows 部分 Of Your Code (Or 可以指望 Code From 别人) To Be 重用 With 较小的 Or 主要的 variations Within The Same Program.
[*] Actually, assigning new scalars to elements of @_ after the shift modifies the corresponding variable being passed, but that still wouldn't let us extend the array with additional mandatory provisions.||[*] Actually, assigning New Scalars To Elements Of @_ After The Shift Modifies The 相应的 Variable Being Passed, But That Still Wouldn't Let Us 延伸 The Array With Additional 强制性 provisions.
However, because it is still referenced by subroutine in $callback, it stays alive as an anonymous scalar variable.[*] When the callback is invoked from find, the value of the variable formerly known as $count is incremented from 1 to 2 to 3, and so on.||However, Because It Is Still 参考 By Subroutine In $callback, It 停留 活着的 As An Anonymous Scalar Variable.[*] When The callback Is invoked From 寻找, The Value Of The Variable 从前 Known As $计算 Is incremented From 1 To 2 To 3, And So On.
It's easy to forget to put the proper punctuation after the closing curly brace of an anonymous subroutine declaration.||It's Easy To 忘记 To Put The 合适的 准时 After The closing 卷曲的 支撑 Of An Anonymous Subroutine Declaration.
ok(1 + 2 = = 3, '1 + 2 = = 3'); ok(2 * 4 = = 8, '2 * 4 = = 8'); my $divide = 5 / 3; ok(abs($divide - 1.666667) < 0.001, '5 / 3 = = (approx) 1.666667'); my $subtract = -3 + 3; ok(($subtract eq '0' or $subtract eq '-0'), '-3 + 3 = = 0');||Ok(1 + 2 = = 3, '1 + 2 = = 3'); Ok(2 * 4 = = 8, '2 * 4 = = 8'); My $分开 = 5 / 3; Ok(abs($分开 - 1.666667) < 0.001, '5 / 3 = = (approx) 1.666667'); My $减去 = -3 + 3; Ok(($减去 Eq '0' Or $减去 Eq '-0'), '-3 + 3 = = 0');
Skipper walks into the room.||Skipper walks Into The 房间.
Let's use it like so:||Let's Use It Like So:
Now we've added bytes flowing from professor.hut to lovey.howell.hut.||Now We'Ve added 字节 flowing From professor.hut To lovey.howell.小屋.
We can request this notification by giving the object a DESTROY method.||We Can 请求 This 通知书 By Giving The Object a DESTROY Method.
sub sum_ok {||Sub sum_ok {
Call the debug method on the MyDate object.||Call The debug Method On The MyDate Object.
We didn't really expect you to solve this problem since, in 1936, Alan Turing proved you couldn't create a general solution.||We Didn't Really 盼望 You To 解答 This Problem Since, In 1936, Alan Turing proved You 也't Create a General 解决.
Chapter 8, Filehandle References Store filehandles in scalar variables that you can easily pass around your program or store in data structures.||Chapter 8, Filehandle References Store Filehandles In Scalar Variables That You Can 容易地 Pass Around Your Program Or 商店 In Data Structures.
We'll feed each horse a last meal; at the end of the program, each horse's destructor is called.||We'我 喂养 Each 马 a Last 膳食; At The End Of The Program, Each 马's destructor Is Called.
If you can find another way to do what you need, try that first.||If You Can 寻找 另一个 Way To Do What You Need, Try That First.
This prints:||This Prints:
Now for the directory part.||Now For The Directory Part.
The answer is in this footnote.[*] You can simplify this program, perhaps.||The Answer Is In This footnote.[*] You Can 简单化 This Program, 也许.
The power of an eval block to trap errors extends for as long as it's executing, so it catches errors deep within nested subroutine calls. eval can't trap the most serious of errors, though: the ones in which Perl itself stops running.||The 力 Of An Eval Block To 陷井 Errors Extends For As Long As It's 执行, So It catches Errors 深的 Within 嵌套的 Subroutine Calls. Eval Can't 陷井 The Most 慎重的 Of Errors, Though: The Ones In Which Perl Itself stops 连续的.
Frequently, the routines to manage the data structures end up as recursive subroutines.||Frequently, The Routines To 管理 The Data Structures End Up As 递归 Subroutines.
Manipulating Complex Data Structures Now that you've seen the basics of references, let's look at additional ways to manipulate complex data.||Manipulating Complex Data Structures Now That You'Ve Seen The basics Of References, Let's Look At Additional Ways To 操纵 综合的 Data.
# time passes $dir_fh->rewind;||# Time 经过 $dir_fh->rewind;
Besides that, you can FTP the distribution to ftp://pause.perl.org.||Besides That, You Can FTP The 分配 To ftp://pause.perl.org.
my $all = "**all machines**";||My $All = "**All Machines**";
You just have to put the module file in the right place and ensure that Makefile.PL or Build.PL knows about it.||You Just Have To Put The Module File In The Right Place And Ensure That Makefile.PL Or Build.PL 知道 About It.
Person->speak; # just hmms Person->speak("Hello, world!");||Person->说话; # Just hmms Person->说话("Hello, World!");
Visit the list archives (pointers can be found at http://lists.perl.org) to see what the typical conversations look like.||Visit The List archives (pointers Can Be Found At http://lists.perl.org) To See What The 典型的 conversations Look Like.
But what about that nasty little 4 constant in the first line?||But What About That 肮脏的 Little 4 Constant In The First Line?
Because your module will probably be used in programs along with other modules from other authors, you need to ensure that the package names for modules don't collide with existing modules or confuse the people who browse CPAN.||Because Your Module Will Probably Be Used In Programs 沿着 With Other Modules From Other 作者, You Need To Ensure That The Package Names For Modules Don't 猛烈碰撞 With 现存的 Modules Or 混淆 The People Who browse Perl综合典藏网.
And wouldn't you know it; the only name is Gilligan.||And Wouldn't You Know It; The Only Name Is Gilligan.
## in Animal sub AUTOLOAD {||## In Animal Sub AUTOLOAD {
Exercise 1 [20 min] Write a program that prints the date and the day of the week, but allow the user to choose to send the output either to a file, a scalar, or both at the same time.||Exercise 1 [20 min] Write a Program That Prints The Date And The 一天 Of The 星期, But Allow The User To 选择 To 派遣 The 出产 Either To a File, a Scalar, Or Both At The Same Time.
These are the things that typically set apart the beginning and intermediate Perl programmers.||These Are The Things That 典型的 Set 分离 The 开端 And 中间的 Perl Programmers.
To do this, make a single distribution file.||To Do This, Make a Single 分配 File.
It's another way to express the same thing, and some people may like one way over the other.[*] Good tests also give confidence to the user that your code (and all its dependencies) is portable enough to work on her system.||It's 另一个 Way To Express The Same Thing, And Some People May Like One Way 在 The Other.[*] Good 测试 Also Give 信任 To The User That Your Code (And All Its dependencies) Is 手提的 Enough To Work On Her System.
foreach my $beast (@barnyard) {||Foreach My $野兽 (@barnyard) {
However, from a maintenance point of view, the reduced clutter of not having all the intermediate names saves screen and brain space.||However, From a 保养 尖 Of 视域, The 减少 clutter Of Not Having All The 中间的 Names saves 屏 And 脑子 Space.
resulting in:||造成 In:
my @gilligan = ... gilligan items ...; my @skipper = ... skipper items ...; my @professor = ... professor items ...; my %all = (||My @gilligan = ... gilligan 物品 ...; My @skipper = ... skipper 物品 ...; My @教授 = ... 教授 物品 ...; My %All = (
The use operator can be given a version number in addition to (or instead of) the import list, forcing the use operation to fail if the imported module is not equal to or greater than that version:||The Use Operator Can Be Given a Version Number In 增加 To (Or Instead Of) The Import List, 迫使 The Use Operation To 失败 If The Imported Module Is Not Equal To Or 更大的 Than That Version:
my $cwd = getcwd;||My $cwd = getcwd;
Immediately after we declare the @skipper array, we have one reference to the five-element list.||Immediately After We Declare The @skipper Array, We Have One Reference To The five-Element List.
In Perl Best Practices, Damian Conway recommends putting braces around the filehandle portion to explicitly state what you intend.||In Perl Best Practices, Damian Conway 推荐 Putting 牙套 Around The Filehandle 一份 To 清晰地 State What You 打算.
How do we turn the horse into a hash?[*] Recall that an object is any blessed reference.||How Do We 转向 The 马 Into a Hash?[*] Recall That An Object Is Any 有福的 Reference.
## in Animal sub color { $_[0]->{Color} } sub set_color { $_[0]->{Color} = $_[1] }||## In Animal Sub 颜色 { $_[0]->{Color} } Sub set_color { $_[0]->{Color} = $_[1] }
[*] Although Test::Number::Delta can handle this for us.||[*] Although Test::Number::Delta Can Handle This For Us.
How about that last test?||How About That Last Test?
While the resulting .pm file was useful, it wasn't very practical.||While The 造成 .Pm File Was Useful, It Wasn't Very 实用的.
In each case, $class gets the value appropriate for that method.||In Each Case, $Class Gets The Value 恰当的 For That Method.
use Horse; my $trigger = Horse->named('Trigger'); isa_ok($trigger, 'Horse'); isa_ok($trigger, 'Animal'); can_ok($trigger, $_) for qw(eat color);||Use Horse; My $扳机 = Horse->Named('Trigger'); isa_ok($扳机, 'Horse'); isa_ok($扳机, 'Animal'); can_ok($扳机, $_) For Qw(吃 颜色);
It looks funny at first, but after doing it a couple (okay, maybe several) times, you'll get used to it and like it better. ''''''' open my $log_fh, '>> castaways.log'||It Looks Funny At First, But After Doing It a 一对 (Okay, 或许 Several) Times, You'我 Get Used To It And Like It Better. ''''''' Open My $log_fh, '>> castaways.log'
We're never really done, though.||We'Re Never Really Done, Though.
the hash slice notation from a reference looks like:||The Hash 薄片 符号 From a Reference Looks Like:
Because that item will be at the head of the sorted list, why wasn't shift used to discard it, since that would avoid checking repeatedly for $all inside the inner loop?||Because That 条款 Will Be At The Head Of The 分类 List, Why Wasn't Shift Used To 丢弃 It, Since That Would Avoid Checking 重复地 For $All 里面 The Inner Loop?
If the testing expression is complex, we can hide it in a subroutine:||If The testing Expression Is 综合的, We Can Hide It In a Subroutine:
## in Sheep sub default_color { 'white' }||## In Sheep Sub default_color { '白的' }
Gilligan sorts into position 1 Skipper sorts into position 5 Professor sorts into position 4 Ginger sorts into position 2 Mary_Ann sorts into position 3||Gilligan 各样 Into Position 1 Skipper 各样 Into Position 5 Professor 各样 Into Position 4 Ginger 各样 Into Position 2 Mary_Ann 各样 Into Position 3
We can even increase the reference count at this point:||We Can Even 增加 The Reference 计算 At This 尖:
However, wouldn't the call to My::OOModule::Derived->import eventually find its way up to Exporter via My::OOModule::Base?||However, Wouldn't The Call To My::OOModule::Derived->Import 最终 寻找 Its Way Up To Exporter Via My::OOModule::Base?
$ wget http://www.cpan.org/.../HTTP-Cookies-Safari-1.10.tar.gz $ tar -xzf HTTP-Cookies-Safari-1.10.tar.gz $ cd HTTP-Cookies-Safari-1.10s||$ wget http://www.cpan.org/.../HTTP-Cookies-Safari-1.10.tar.gz $ 沥青 -xzf HTTP-Cookies-Safari-1.10.tar.gz $ cd HTTP-Cookies-Safari-1.10s
To solve this problem, brian wrote Test::Pod to go through his modules looking for POD errors.[*] For most things, we can take the entire test code from the Test::Pod documentation.||To 解答 This Problem, brian 写 Test::Pod To Go 通过 他的 Modules 看 For POD Errors.[*] For Most Things, We Can Take The 完全的 Test Code From The Test::Pod 提供文件.
As with array references, we can use shortcuts to replace the complex curly-braced forms under some circumstances.||As With Array References, We Can Use shortcuts To 归还原处 The 综合的 卷曲的-braced 形式 在 Some 情况下.
In our Horse class, we override the DESTROY method we inherited from Animal so we can do extra processing.||In Our Horse Class, We Override The DESTROY Method We 继承 From Animal So We Can Do Extra 加工（的）.
Both of these modules can do more than what we've shown you, so check their documentation to get the full story.||Both Of These Modules Can Do More Than What We'Ve shown You, So Check Their 提供文件 To Get The Full 故事.
my $filespec = File::Spec->catfile( $homedir{gilligan}, ||My $filespec = File::Spec->catfile( $homedir{gilligan},
If you create temporary files like this, please note that your current directory is the same as the test script (even if you're running make test from the parent directory).||If You Create temporary Files Like This, 使高兴 Note That Your Current Directory Is The Same As The Test 临时单据 (Even If You'Re 连续的 Make Test From The 父或母亲 Directory).
[*] Basic code coverage tools such as Devel::Cover are available in CPAN.||[*] Basic Code 覆盖率 Tools Such As Devel::Cover Are Available In Perl综合典藏网.
We take the list that comes out of that grep and send it into map, where we turn each string into an IO::Dir object (ignoring error handling for the moment).||We Take The List That 来 Out Of That Grep And 派遣 It Into Map, Where We 转向 Each String Into An IO::Dir Object (Ignoring Error 处理 For The Moment).
Perl uses the eval operator as its error-trapping mechanism.||Perl Uses The Eval Operator As Its Error-trapping Mechanism.
Trivial make dist After some testing, you may decide it's time to share your work with friends and associates.||Trivial Make dist After Some testing, You May Decide It's Time To 份 Your Work With 朋友 And Associates.
For example, for @{$_[1]} from that last subroutine rewrite, we can't remove the braces.||For Example, For @{$_[1]} From That Last Subroutine 重写, We Can't 移开 The 牙套.
Rather than define an explicit subroutine that we'd use for only a single test, we can put the body of a subroutine directly in line in the grep operator, using the block forms:[*]||Rather Than Define An 清楚的 Subroutine That We'd Use For Only a Single Test, We Can Put The 身体 Of a Subroutine 直接地 In Line In The Grep Operator, Using The Block 形式:[*]
Play favorites, if you like.||Play favorites, If You Like.
# a person's name (no leading whitespace)||# a 人's Name (No 领先的 Whitespace)
Following that, we get the standard, good-practice pragmas.||Following That, We Get The Standard, Good-Practice 的.
If it returns an undesired value, we use the croak function from the Carp module (which comes in the standard distribution).||If It Returns An undesired Value, We Use The croak Function From The Carp Module (Which 来 In The Standard 分配).
## $provisions{$person} = [ ] unless exists $provisions{$person};||## $provisions{$人} = [ ] Unless Exists $provisions{$人};
Name this file date.pm within a directory of Oogaboogoo in one of the directories given in your @INC variable, such as the current directory.||Name This File date.pm Within a Directory Of Oogaboogoo In One Of The directories Given In Your @INC Variable, Such As The Current Directory.
The ethos of the project has been that anyone should be able to contribute and that it should be easy for people to share their work.||The ethos Of The 计划 Has Been That 无论谁 Should Be Able To 捐献 And That It Should Be Easy For People To 份 Their Work.
sub professor_greets {||Sub professor_greets {
This program should be available as the file named ex6-1.plx in the downloadable files, available on the O'Reilly web site.)||This Program Should Be Available As The File Named ex6-1.plx In The downloadable Files, Available On The O'Reilly 网 场所.)
Perl provides a lot of introspection capabilities.||Perl Provides a 许多 Of 内省 capabilitie(绑定操作符)s.
Now that you have your abstract base class, define some concrete classes that can have instances:||Now That You Have Your 抽象的 Base Class, Define Some 混凝土 类 That Can Have 实例:
Backing up for a minute, if we found a Build.PL file instead of a Makefile.PL, the process is the same.||Backing Up For a 分钟, If We Found a Build.PL File Instead Of a Makefile.PL, The 程序 Is The Same.
However, there are circumstances in which even that can lead to ambiguity (e.g., when a subroutine named new has been seen, and the class name itself has not been seen as a package).||However, There Are 情况下 In Which Even That Can 铅 To 歧义性 (e.g., When a Subroutine Named New Has Been Seen, And The Class Name Itself Has Not Been Seen As a Package).
Tests live in files in the t directory at the top level of the distribution, and each test file ends in .t.||Tests 居住生存 In Files In The t Directory At The 顶 Level Of The 分配, And Each Test File Ends In .t.
Announcing the Module How will users learn about your module?||Announcing The Module How Will Users 学习 About Your Module?
We can specify a new comparison using a sort block that we place between the sort keyword and the list of things to sort.[] Within the sort block, $a and $b stand in for two of the items sort will compare.||We Can Specify a New 比较 Using a Sort Block That We Place Between The Sort Keyword And The List Of Things To Sort.[] Within The Sort Block, $a And $b 站立 In For Two Of The 物品 Sort Will 比较.
Now we can see all the animals we've made:||Now We Can See All The animals We'Ve Made:
We could certainly do it with enough hard-to-maintain code, but we can simplify the process by adding a bit of indirection, just as we did with arrays and hashes.||We Could Certainly Do It With Enough 硬的-To-Maintain Code, But We Can 简单化 The 程序 By Adding a Bit Of indirection, Just As We Did With Arrays And Hashes.
In the expression form of grep, there must be a comma between the expression and the list.||In The Expression Form Of Grep, There Must Be a 逗号 Between The Expression And The List.
use Navigate::SeatOfPants qw(:DEFAULT);||Use Navigate::SeatOfPants Qw(:DEFAULT);
If an AUTOLOAD exists, the subroutine is called in place of the original method, passing it the normal predetermined argument list: the class name or instance reference, followed by any arguments provided to the method call.||If An AUTOLOAD Exists, The Subroutine Is Called In Place Of The Original Method, Passing It The Normal predetermined Argument List: The Class Name Or 例子 Reference, 跟着 By Any Arguments Provided To The Method Call.
If it's a person, we remember the name and create the hash element for that person.||If It's a 人, We 记得 The Name And Create The Hash Element For That 人.
In this case, it's as simple as destructively altering the barn array, rather than iterating over it.[*] Let's alter the Barn to Barn2 to illustrate this:||In This Case, It's As Simple As destructively altering The 谷仓 Array, Rather Than iterating 在 It.[*] Let's 改变 The Barn To Barn2 To 图解 This:
Have tests!||Have 测试!
Tools such as perldoc can extract the POD and display it in a variety of formats.||Tools Such As perldoc Can 取出 The POD And 陈列 It In a 多样（性） Of Formats.
The archive of the distribution includes the version number of the primary module by default.||The archive Of The 分配 包括 The Version Number Of The 首要的 Module By Default.
Three names in; three references out.[*] Or, let's go a different way.||Three Names In; Three References Out.[*] Or, Let's Go a Different Way.
my %Allowed_methods = qw( date 3 month 4 year 5 ); my @Offsets = qw(0 0 0 0 1 1900 0 0 0);||My %Allowed_methods = Qw( Date 3 月份 4 年 5 ); My @Offsets = Qw(0 0 0 0 1 1900 0 0 0);
Mr. Ed eats hay. an unnamed Sheep eats grass.||Mr. Ed Eats 干草. An unnamed Sheep Eats 草.
How long would it take to enable Perl's warnings?||How Long Would It Take To 使能够 Perl's 警告?
### remainder of program is unchanged||### 剩余部分 Of Program Is unchanged
When the filehandle is a variable, we can put anything we like in it and decide what to put in it at runtime.||When The Filehandle Is a Variable, We Can Put Anything We Like In It And Decide What To Put In It At Runtime.
Now we call for the name:||Now We Call For The Name:
We cannot declare this variable within the naked block (the block following that is not part of a larger Perl syntax construct), or Perl will recycle it at the end of that block.||We Cannot Declare This Variable Within The 裸体的 Block (The Block Following That Is Not Part Of a larger Perl Syntax Construct), Or Perl Will recycle It At The End Of That Block.
Since objects don't live beyond the end of the program, Perl makes one final pass over all remaining data and destroys it.||Since Objects Don't 居住生存 Beyond The End Of The Program, Perl 使 One 最终的 Pass 在 All Remaining Data And destroys It.
Luckily, the same reference simplification rules apply.||Luckily, The Same Reference simplification 规则 应用.
while a nonempty directory should appear with nested contents, indented two spaces:||While a nonempty Directory Should Appear With 嵌套的 Contents, indented Two spaces:
Perl gives the subroutine five items in its @_ array initially: the name gilligan and the four items belonging to Gilligan.||Perl Gives The Subroutine five 物品 In Its @_ Array 最初: The Name gilligan And The 四 物品 Belonging To Gilligan.
In fact, Perl searches for libraries along a library search path, similar to what the shell does with the PATH environment variable.||In Fact, Perl searches For 库 沿着 a Library 搜查 Path, Similar To What The 壳 Does With The PATH 环境 Variable.
It all depends upon what classes you'll need in the future and how you'll use them.||It All Depends Upon What 类 You'我 Need In The Future And How You'我 Use Them.
When we use $self as a key, Perl stringifies it, which means it turns into a string unique to the object.||When We Use $自己 As a Key, Perl stringifies It, Which Means It Turns Into a String 唯一的 To The Object.
and now we'll fix speak to use this:||And Now We'我 固定 说话 To Use This:
That's just the number of tests that we actually ran, which might not be the number we intended to run:||That's Just The Number Of 测试 That We Actually ran, Which Might Not Be The Number We 预期 To Run:
In this case, let's add a way to get at the name:||In This Case, Let's 增添 a Way To Get At The Name:
We'll start by using the debugger to examine complex data structures and then use Data::Dumper to show the data under programmatic control.||We'我 Start By Using The Debugger To 检查 综合的 Data Structures And Then Use Data::Dumper To Show The Data 在 programmatic Control.
The optional third argument is the name we give the test, just as we did with the ok function earlier.||The Optional 第三 Argument Is The Name We Give The Test, Just As We Did With The Ok Function Earlier.
If not, the original string and the regex are reported along with the test failure.||If Not, The Original String And The 正则表达式 Are reported 沿着 With The Test 失败.
# arrayref } sub color {|| # Arrayref } Sub 颜色 {
[*] Normally, our own method calls will cause an error if Perl doesn't find them.||[*] Normally, Our Own Method Calls Will 原因 An Error If Perl Doesn't 寻找 Them.
The Problem of Namespace Collisions Sometimes the Skipper runs a ship into an island, but sometimes the collision involved is just a couple of names in a Perl program.||The Problem Of Namespace Collisions Sometimes The Skipper 跑 a 船 Into An 岛屿, But Sometimes The 猛烈碰拉 涉及的 Is Just a 一对 Of Names In a Perl Program.
This code uses a simple check, via a pattern match, to ensure that the user doesn't enter Alpaca or another unavailable animal, because doing so will crash the program.||This Code Uses a Simple Check, Via a 模式 Match, To Ensure That The User Doesn't 进入 Alpaca Or 另一个 unavailable 动物, Because Doing So Will 碰撞 The Program.
If we find the method name in %Allowed_methods, we get the value, which is the position of the value in the localtime list.||If We 寻找 The Method Name In %Allowed_methods, We Get The Value, Which Is The Position Of The Value In The localtime List.
$ perl Build.PL||$ Perl Build.PL
When we get to the step of invoking $class->sound while performing the print, it looks for Cow->sound:||When We Get To The 脚步 Of 调用 $Class->声 While performing The Print, It Looks For Cow->声:
my $callback = create_find_callback_that_counts( ); find($callback, '.');||My $callback = create_find_callback_that_counts( ); 寻找($callback, '.');
If a particular invocation results in an empty list, map concatenates that empty result into the larger list, contributing nothing to the list.||If a Particular 调用 Results In An Empty List, Map concatenates That Empty Result Into The larger List, contributing Nothing To The List.
The main challenge is getting the item names correct.||The Main 挑战 Is 得到 The 条款 Names 正确的.
Eventually, the values end up in the global @all_with_names.||Eventually, The Values End Up In The Global @all_with_names.
my $gilligan_stuff = $all_with_names[2][1];||My $gilligan_stuff = $all_with_names[2][1];
Such memory is available to Perl for other data later in this program invocation, and generally Perl doesn't give it back to the operating system.||Such Memory Is Available To Perl For Other Data 更晚 In This Program 调用, And Generally Perl Doesn't Give It Back To The Operating System.
Thus, to keep Gilligan from having to say Navigation::turn_toward_heading, the navigation.pm file can say:||Thus, To 保持 Gilligan From Having To Say Navigation::turn_toward_heading, The navigation.pm File Can Say:
Chapter 6, Manipulating Complex Data Structures Create, access, and print arbitrarily deep and nested data structures, including arrays of arrays and hashes of hashes.||Chapter 6, Manipulating Complex Data Structures Create, Access, And Print 任意 深的 And 嵌套的 Data Structures, Including Arrays Of Arrays And Hashes Of Hashes.
This means that the use operation happens at compile time, rather than runtime, and indeed it does.||This Means That The Use Operation Happens At Compile Time, Rather Than Runtime, And 的确 It Does.
Actually, they're there, even if you're not curious.||Actually, They'Re There, Even If You'Re Not 好奇的.
# if typo snuck in|| # If typo 偷偷 In
(Imagine that a little sticky-note that says Horse is now attached to $name.)||(Imagine That a Little 黏的-Note That 说 Horse Is Now attached To $Name.)
Indeed, most of the 50+ MB of the most recent distribution are from modules.||Indeed, Most Of The 50+ MB Of The Most 近来的 分配 Are From Modules.
This marker tells Perl that there's no Perl code anywhere later in the file and that the Perl parser can stop now.[] Following the _ _END_ _ marker, you'll find the embedded documentation for the module:||This marker 告诉 Perl That There's No Perl Code Anywhere 更晚 In The File And That The Perl Parser Can Stop Now.[] Following The _ _END_ _ marker, You'我 寻找 The embedded 提供文件 For The Module:
Finally, in the section to show the data, we call the getter routines to fetch the results.||Finally, In The Section To Show The Data, We Call The getter Routines To 去取来 The Results.
In the section to set up the subroutines, we create three instances of callback-and-getter pairs.||In The Section To Set Up The Subroutines, We Create Three 实例 Of callback-And-getter 双.
The "what to do" is specified as a subroutine reference:||The "What To Do" Is 指定 As a Subroutine Reference:
Amazingly, the only additional syntax to achieve object nirvana is the method call, introduced shortly.||Amazingly, The Only Additional Syntax To Achieve Object nirvana Is The Method Call, Introduced 立刻.
&implement($_) foreach @rescue_scheme; # die inside sub?||&实行($_) Foreach @rescue_scheme; # Die 里面 Sub?
We rewrite the tests from the previous section (and throw in a couple more) in this test script, which uses the ok( ) function from Test::More.||We 重写 The 测试 From The Previous Section (And 投 In a 一对 More) In This Test 临时单据, Which Uses The Ok( ) Function From Test::More.
We've been burned in the past when a setter became a getter because another function returned more parameters than expected after an upgrade.||We'Ve Been burned In The 过去的 When a setter Became a getter Because 另一个 Function Returned More Parameters Than Expected After An upgrade.
We win down the line when we spend less time debugging, both because we've fixed most of the problems before they were problems and because the tests usually point us right at the problem we need to fix.||We 赢得 向下 The Line When We 花费 更少的 Time Debugging, Both Because We'Ve Fixed Most Of The 问题 Before They Were 问题 And Because The 测试 Usually 尖 Us Right At The Problem We Need To 固定.
print Horse->name, "\n"; # prints "an unnamed Horse\n"||Print Horse->Name, "\n"; # Prints "An unnamed Horse\n"
my $db = Test::MockObject->new( );||My $db = Test::MockObject->New( );
After that, we have to run our make test and get Devel::Cover to do its magic at the same time.||After That, We Have To Run Our Make Test And Get Devel::Cover To Do Its Magic At The Same Time.
We don't have to identify every special case at this point (we can always add tests later), but we want to ensure that we test several different ways to call the subroutine.||We Don't Have To 认出 Every Special Case At This 尖 (We Can Always 增添 测试 更晚), But We Want To Ensure That We Test Several Different Ways To Call The Subroutine.
my $cow = Cow->named('Bessie'); print $cow->name, " eats.\n";||My $母牛 = Cow->Named('Bessie'); Print $母牛->Name, " Eats.\n";
Whether we call it at the beginning or the end of our own destructor is a matter of hotly contested debate.||Whether We Call It At The 开端 Or The End Of Our Own destructor Is a Matter Of hotly contested 辩论.
Modifying the Array You've seen how to solve the excessive copying problem with an array reference.||Modifying The Array You'Ve Seen How To 解答 The 过分的 复制 Problem With An Array Reference.
print "$ref->[2]\n"; # still prints jacket\n||Print "$Ref->[2]\n"; # Still Prints 短外套\n
# main::turn_toward_heading|| # Main::turn_toward_heading
The Improved Way Starting with Perl 5.6, open can create a filehandle reference in a normal scalar variable.||The Improved Way Starting With Perl 5.6, Open Can Create a Filehandle Reference In a Normal Scalar Variable.
our @EXPORT = qw(day mon); our %EXPORT_TAGS = ( all => \@EXPORT );||Our @EXPORT = Qw(一天 mon); Our %EXPORT_TAGS = ( All => \@EXPORT );
One part is the declaration of $countdown as a lexical variable.||One Part Is The Declaration Of $countdown As a Lexical Variable.
If the line is a provision, push it to the end of the correct array, using the array reference.||If The Line Is a 准备, Push It To The End Of The 正确的 Array, Using The Array Reference.
my @remapped_list = map {||My @remapped_list = Map {
If that doesn't work for you, you can't expect it to work for anyone else who downloads your distribution from the CPAN.||If That Doesn't Work For You, You Can't 盼望 It To Work For 无论谁 Else Who downloads Your 分配 From The Perl综合典藏网.
sub check_items_for_all {||Sub check_items_for_all {
In its simplest form, we give the find subroutine two parameters: a starting directory and "what to do" for each file or directory name found recursively below that starting directory.||In Its simplest Form, We Give The 寻找 Subroutine Two Parameters: a Starting Directory And "What To Do" For Each File Or Directory Name Found Recursively Below That Starting Directory.
Nested Data Structures In this example, the array @_ contains two elements, one of which is also an array.||Nested Data Structures In This Example, The Array @_ 包含 Two Elements, One Of Which Is Also An Array.
Once we have the module, we just have to follow the example in the documentation.||Once We Have The Module, We Just Have To 跟随 The Example In The 提供文件.
my $tv_horse = Horse->named('Mr. Ed'); $tv_horse->eat('hay'); Sheep->eat('grass');||My $tv_horse = Horse->Named('Mr. Ed'); $tv_horse->吃('干草'); Sheep->吃('草');
Remember that CPAN is just a big storage device.||Remember That Perl综合典藏网 Is Just a Big 贮藏 装置.
Then, to keep from having to define one for each additional class, define a backstop method, which serves as the "default default, " directly in Animal:||Then, To 保持 From Having To Define One For Each Additional Class, Define a 控股 Method, Which 服务 As The "Default Default, " 直接地 In Animal:
Let's not grep the values themselves but the index for each item:||Let's Not Grep The Values 他们、它们自己 But The Index For Each 条款:
README The next file is README, which is a standard name for the first bit of information you want all users of your module to read.||README The 下一次 File Is README, Which Is a Standard Name For The First Bit Of Information You Want All Users Of Your Module To Read.
[*] We'd make a reference to chickens and eggs, but that would introduce yet another derived class to Animal.||[*] We'd Make a Reference To chickens And eggs, But That Would 介绍 仍然 另一个 派生 Class To Animal.
[] In later chapters, we'll show how to set up tests to be used while maintaining reused code.||[] In 更晚 chapters, We'我 Show How To Set Up 测试 To Be Used While maintaining 重用 Code.
To get something closer to what we saw before, we can be more explicit about the return value:||To Get Something 近 To What We 锯 Before, We Can Be More 清楚的 About The Return Value:
Nothing spectacular here: simple subroutines, albeit from separate packages, and called using the full package name.||Nothing 壮观的 Here: Simple Subroutines, 虽然 From Separate Packages, And Called Using The Full Package Name.
We like to encourage good practices.||We Like To Encourage Good 实践.
You can look at the results for any module through the Testers web site or on CPAN Search (http://search.cpan.org).||You Can Look At The Results For Any Module 通过 The Testers 网 场所 Or On Perl综合典藏网 Search (http://search.cpan.org).
You can generally find a Perl user group near you by looking on the Perl Mongers web site at http://www.pm.org.||You Can Generally 寻找 a Perl User Group 近 You By 看 On The Perl 推动者 网 场所 At http://www.pm.org.
We can also take a reference to a subroutine (sometimes called a coderef).||We Can Also Take a Reference To a Subroutine (Sometimes Called a coderef).
Things get even more interesting if the hashref is changed to an arrayref as well.||Things Get Even More Interesting If The Hashref Is 改变 To An Arrayref As Well.
There's nothing inherently wrong with doing this, although it would be better to decide why the original author used a "loopy" data structure and then recode the algorithm to use Perl's strengths.||There's Nothing 固有的 错误的 With Doing This, Although It Would Be Better To Decide Why The Original 作者 Used a "loopy" Data Structure And Then recode The 算法 To Use Perl's strengths.
[] In the %INC hash, as described in the entry for require in the perlfunc documentation.||[] In The %INC Hash, As Described In The Entry For Require In The perlfunc 提供文件.
The debugger shows the values similarly:||The Debugger Shows The Values 同样:
Let's see what happens when each input produces two output items:||Let's See What Happens When Each Input Produces Two 出产 物品:
What happens?||What Happens?
sub name {||Sub Name {
If we test and debug it only once, we'll save more time.||If We Test And debug It Only Once, We'我 Save More Time.
Perl has such an operation, called require.||Perl Has Such An Operation, Called Require.
[*] This check also catches misspellings and mistaken subroutine names, keeping you from wondering why the get_direction_from_professor routine isn't working.||[*] This Check Also catches misspellings And 搞错了的 Subroutine Names, 一致 You From wondering Why The get_direction_from_professor Routine Isn't Working.
MyDate->import; # we don't use it my $date = MyDate->new( );||MyDate->Import; # We Don't Use It My $Date = MyDate->New( );
Fixed again.||Fixed Again.
We give it the module name we're interested in, and it prints out its documentation.||We Give It The Module Name We'Re 感兴趣的 In, And It Prints Out Its 提供文件.
Returned from subroutine.||Returned From Subroutine.
The difference between doing this as a test and doing it as a simple use is that the test won't completely abort if the use fails, although many other tests are likely to fail as well.||The Difference Between Doing This As a Test And Doing It As a Simple Use Is That The Test Won't 完全地 abort If The Use 失败, Although Many Other 测试 Are Likely To 失败 As Well.
## in Animal sub DESTROY {||## In Animal Sub DESTROY {
We'll have to remember to call the import method to get the symbols into our main namespace.||We'我 Have To 记得 To Call The Import Method To Get The Symbols Into Our Main Namespace.
Instead of using $_ to get the number of interest, use $input_numbers[$_]:||Instead Of Using $_ To Get The Number Of 兴趣, Use $input_numbers[$_]:
The parents might want to hold references to all their children, while each child might want to hold references to each parent.||The 父母 Might Want To Hold References To All Their children, While Each 孩子 Might Want To Hold References To Each 父或母亲.
which then builds the files into a shared area.||Which Then builds The Files Into a Shared Area.
$ cat t/1.t # Before 'make install' is performed this script should be runnable with # 'make test'.||$ 猫 t/1.t # Before 'Make 安装' Is 进行 This 临时单据 Should Be runnable With # 'Make Test'.
# it's an instance, return name|| # It's An 例子, Return Name
The examples in this section show how this works.||The Examples In This Section Show How This Works.
If we add a method, all horses automatically share it.||If We 增添 a Method, All horses Automatically 份 It.
## in Horse sub DESTROY {||## In Horse Sub DESTROY {
Using our rules again, it's ${$all_with_names[2]}[1].||Using Our 规则 Again, It's ${$all_with_names[2]}[1].
The second argument comes from the input list to our map and shows up in $_.||The Second Argument 来 From The Input List To Our Map And Shows Up In $_.
Since Module::Build is not a core Perl module, [*] we have to install it before we can install the distribution that needs it.||Since Module::Build Is Not a Core Perl Module, [*] We Have To 安装 It Before We Can 安装 The 分配 That Needs It.
In this case, Perl only reclaims memory when @skipper and all the references we created to it disappear.||In This Case, Perl Only reclaims Memory When @skipper And All The References We Created To It 失踪.
So the value of @result is 101, 102, 104, 108, 116, 132, and 164.||So The Value Of @Result Is 101, 102, 104, 108, 116, 132, And 164.
Exercise 2 [40 min] Starting with the script you wrote for the previous exercise, add a UNIVERSAL::debug function that prints a timestamp before the message you pass to it.||Exercise 2 [40 min] Starting With The 临时单据 You 写 For The Previous 锻炼, 增添 a UNIVERSAL::debug Function That Prints a timestamp Before The 音讯 You Pass To It.
Selecting and Altering Complex Data We can use these operators on more complex data.||Selecting And Altering Complex Data We Can Use These Operators On More 综合的 Data.
When that works, we write a test for another feature, repeat the process, and keep doing that until we're done.||When That Works, We Write a Test For 另一个 Feature, 重复 The 程序, And 保持 Doing That Until We'Re Done.
The @EXPORT list both defines a list of available subroutines for export (the public interface) and provides a default list for Perl to use when we don't specify an import list.||The @EXPORT List Both 定义 a List Of Available Subroutines For Export (The 公众的 Interface) And Provides a Default List For Perl To Use When We Don't Specify An Import List.
There are a variety of ways to create an IO::File object.||There Are a 多样（性） Of Ways To Create An IO::File Object.
For example, a recursive subroutine handling the factorial function, which is one of the simplest recursive functions, might look like:||For Example, a 递归 Subroutine 处理 The factorial Function, Which Is One Of The simplest 递归 Functions, Might Look Like:
Well, that's what IO::Tee does for us.||Well, That's What IO::Tee Does For Us.
Look at the current module list.||Look At The Current Module List.
We're going to show you how to create your own modules later in the book, but until we do, you can still use modules you already have.||We'Re Going To Show You How To Create Your Own Modules 更晚 In The 书, But Until We Do, You Can Still Use Modules You Already Have.
# takes arrayref }|| # Takes Arrayref }
Exercise [Infinite min] Write a module to solve the halting problem with respect to Perl source code.[*] Your module should export a function, will_halt, which takes a string and returns true if the string is the source code for a no-input Perl program that does not infinitely loop, and false otherwise.||Exercise [Infinite min] Write a Module To 解答 The halting Problem With 尊重 To Perl Source Code.[*] Your Module Should Export a Function, will_halt, Which Takes a String And Returns True If The String Is The Source Code For a No-Input Perl Program That Does Not 无限地 Loop, And False Otherwise.
We start by declaring the package, then turning on strictures because we want to be good programmers (even if this three-hour tour is ultimately doomed, it won't be from one of our software errors).||We Start By 宣布 The Package, Then Turning On 狭窄 Because We Want To Be Good Programmers (Even If This Three-小时 旅行 Is 最后 doomed, It Won't Be From One Of Our 软件 Errors).
Its entire interface uses class methods, such as new, against the class name to create instances, and then calls instance methods, such as bpow and bstr, against those instances.||Its 完全的 Interface Uses Class Methods, Such As New, 反对 The Class Name To Create 实例, And Then Calls 例子 Methods, Such As bpow And bstr, 反对 Those 实例.
Exercise 3 my @dictionary_sorted =||Exercise 3 My @dictionary_sorted =
However, this was only one of the two ways to access the data!||However, This Was Only One Of The Two Ways To Access The Data!
As ugly as this is, it works.||As 丑恶的 As This Is, It Works.
Inside the block, $_ is a small integer, from 0 to 6 (seven items total).||Inside The Block, $_ Is a Small 整数, From 0 To 6 (seven 物品 总).
You can read more about portability issues in the perlport documentation.||You Can Read More About 可移植性 Issues In The perlport 提供文件.
Why chance breaking anything if you don't need to?||Why Chance 打破 Anything If You Don't Need To?
These three subroutines are then defined in the File::Basename package, not the package in which our use occurs.||These Three Subroutines Are Then Defined In The File::Basename Package, Not The Package In Which Our Use Occurs.
There is a better way to do this, though.||There Is a Better Way To Do This, Though.
We want to know whether the array element at that index has an odd digit sum.||We Want To Know Whether The Array Element At That Index Has An 古怪的 数字 总数.
So can we share the definition for speak between the cow and the horse?||So Can We 份 The Definition For 说话 Between The 母牛 And The 马?
We can declare the variable right in the open statement.||We Can Declare The Variable Right In The Open Statement.
file_exists_ok( $file ); file_not_empty_ok( $file ); file_readable_ok( $file ); file_min_size_ok( $file, 500 ); file_mode_is( $file, 0775 );||file_exists_ok( $File ); file_not_empty_ok( $File ); file_readable_ok( $File ); file_min_size_ok( $File, 500 ); file_mode_is( $File, 0775 );
The tests tell us how healthy our code is.||The 测试 Tell Us How 健康的 Our Code Is.
(That is, your program should skip them.||(That Is, Your Program Should 跳过 Them.
use Navigate::SeatOfPants qw(according_to_GPS);||Use Navigate::SeatOfPants qw(according_to_GPS);
Intermediate Foundations Before we get started on the meat of the book, we want to introduce some intermediate-level Perl idioms that we use throughout the book.||Intermediate Foundations Before We Get 开始 On The Meat Of The 书, We Want To 介绍 Some 中间的-Level Perl idioms That We Use Throughout The 书.
Don't Look Inside the Box We might have obtained or set the color outside the class simply by following the hash reference: $tv_horse->{Color}.||Don't Look Inside The Box We Might Have Obtained Or Set The 颜色 Outside The Class Simply By Following The Hash Reference: $tv_horse->{Color}.
package Navigation;||Package Navigation;
Extending @INC We may run into some cases where we can't install modules in the pre-configured directories in @INC.||Extending @INC We May Run Into Some Cases Where We Can't 安装 Modules In The Pre-configured directories In @INC.
# no talking to yourself||# No 说话 To 你（们）自己
We could do it the hard way, using the string form of eval that we discussed in Chapter 2.||We Could Do It The 硬的 Way, Using The String Form Of Eval That We 讨论 In Chapter 2.
$tee_fh = IO::Tee->new( $log_fh, $scalar_fh );||$tee_fh = IO::Tee->New( $log_fh, $scalar_fh );
These tests are numbered as counting numbers, starting with one.||These 测试 Are numbered As counting 编号, Starting With One.
In every place the previous sort expression returned -1, this expression returns +1, and vice versa.||In Every Place The Previous Sort Expression Returned -1, This Expression Returns +1, And 坏事 versa.
An instance method with parameters gets invoked with the instance, and then the list of parameters.||An 例子 Method With Parameters Gets invoked With The 例子, And Then The List Of Parameters.
[] Except in regard to @INC, %INC, and missing file handling, which we'll show later.||[] Except In Regard To @INC, %INC, And Missing File 处理, Which We'我 Show 更晚.
# $db = DBI->connect( ... ); $db->mock(||# $db = DBI->连接( ... ); $db->嘲笑(
First, we determine all the sources:||First, We 决心 All The 来源:
After 'make install' it should work as 'perl 1.t'||After 'Make 安装' It Should Work As 'Perl 1.t'
In fact, as the author of File::Basename, if we simply want to force filename, basename, and fileparse from the current package into the main package, we can write import like this:||In Fact, As The 作者 Of File::Basename, If We Simply Want To Force 文件名, basename, And fileparse From The Current Package Into The Main Package, We Can Write Import Like This:
ok( 1, '1 is true' );||Ok( 1, '1 Is True' );
Here, we pass all parameters to the superclass, which should return a fully formed Horse.||Here, We Pass All Parameters To The 基类, Which Should Return a Fully formed Horse.
in our programs because it prevents future users from subclassing that class.||In Our Programs Because It 防止 Future Users From subclassing That Class.
You don't need to implement them!||You Don't Need To 实行 Them!
Since Gilligan doesn't have all of his required items, the test fails.||Since Gilligan Doesn't Have All Of 他的 要求 物品, The Test 失败.
More Tests Mean Better Code Why should we test during development?||More Tests Mean Better Code Why Should We Test 在 进展?
But what if one of the references outlives the variable name?||But What If One Of The References outlives The Variable Name?
References and Scoping We can copy and pass around references like any other scalar.||References And Scoping We Can Copy And Pass Around References Like Any Other Scalar.
my $name = $hash_ref->{'name'};||My $Name = $hash_ref->{'Name'};
We get a debugging value:||We Get a Debugging Value:
Looks good Writing Makefile for Island::Plotting::Maps||Looks Good Writing Makefile For Island::Plotting::Maps
Sure, if Gilligan has warnings enabled, he'll notice something is wrong, but why should he have to count on that?||Sure, If Gilligan Has 警告 Enabled, 他'我 Notice Something Is 错误的, But Why Should 他 Have To 计算 On That?
The getters and setters for the four instance attributes (name, height, color, and age) are defined automatically, using the method color to get the color and set_color to set the color.||The getters And setters For The 四 例子 Attributes (Name, 高度, 颜色, And 年龄) Are Defined Automatically, Using The Method 颜色 To Get The 颜色 And set_color To Set The 颜色.
For example, these two calls are equivalent:||For Example, These Two Calls Are Equivalent:
SYNOPSIS||概述
Perl adds those directories to its module directory search list.||Perl Adds Those directories To Its Module Directory 搜查 List.
Package variables can't be lexical variables, so we can't use my.||Package Variables Can't Be Lexical Variables, So We Can't Use My.
Because we access this variable within the subroutine referenced by the return value of the print_bigger_than variable, it becomes a closure variable, with a value that persists for the duration of that subroutine reference.||Because We Access This Variable Within The Subroutine 参考 By The Return Value Of The print_bigger_than Variable, It Becomes a Closure Variable, With a Value That persists For The 期间 Of That Subroutine Reference.
Let's see what we've got:||Let's See What We'Ve Got:
Thus, the sort is in the opposite order, and so it doesn't need a reverse.||Thus, The Sort Is In The 对立的 Order, And So It Doesn't Need a 颠倒的.
Only the tests in that file run, and they run in the order we have them in the file.||Only The 测试 In That File Run, And They Run In The Order We Have Them In The File.
main::(bytecounts:2): my %total_bytes;||Main::(bytecounts:2): My %total_bytes;
bless $tv_horse, 'Horse';||保佑 $tv_horse, 'Horse';
However, even though Perl can certainly support the needed operations, that approach is usually slower and more cumbersome.||However, Even Though Perl Can Certainly Support The Needed 操作, That 接近 Is Usually slower And More cumbersome.
MANIFEST The h2xs program created a directory and several files.||MANIFEST The h2xs Program Created a Directory And Several Files.
In other words, Perl does the right thing, as always.||In Other Words, Perl Does The Right Thing, As Always.
Notice how much it simplifies the code.||Notice How Much It simplifies The Code.
Advanced Testing The Test::More module provides some simple and general functions, but other Test::* modules provide more specific tests for particular problem domains so that we don't have to write much code to do what we need.||Advanced Testing The Test::More Module Provides Some Simple And General Functions, But Other Test::* Modules Provide More 特殊的 测试 For Particular Problem domains So That We Don't Have To Write Much Code To Do What We Need.
Modify the code from this chapter so that each source machine's portion of the output shows the total number of bytes from that machine.||Modify The Code From This 章 So That Each Source 机器's 一份 Of The 出产 Shows The 总 Number Of 字节 From That 机器.
That is to say, it may be that you're not yet familiar with some of the Perl techniques and syntax in the synopsis, but you can generally just follow the example and make everything work.||That Is To Say, It May Be That You'Re Not 仍然 熟悉的 With Some Of The Perl 技术 And Syntax In The 内容提要, But You Can Generally Just 跟随 The Example And Make Everything Work.
Billy Boy has standings of: 3 wins, 0 places, 1 shows, 1 losses.||Billy Boy Has standings Of: 3 赢得, 0 Places, 1 Shows, 1 losses.
my $tv_horse = Horse->named("Mr. Ed"); $tv_horse->set_name("Mister Ed"); $tv_horse->set_color("grey"); print $tv_horse->name, " is ", $tv_horse->color, "\n"; print Sheep->name, " colored ", Sheep->color, " goes ", Sheep->sound, "\n";||My $tv_horse = Horse->Named("Mr. Ed"); $tv_horse->set_name("Mister Ed"); $tv_horse->set_color("灰色的"); Print $tv_horse->Name, " Is ", $tv_horse->颜色, "\n"; Print Sheep->Name, " colored ", Sheep->颜色, " 去 ", Sheep->声, "\n";
By using the reference form, we've decoupled the code and the method of array access from the actual array.||By Using The Reference Form, We'Ve decoupled The Code And The Method Of Array Access From The Actual Array.
Example Two could be a visual representation of a filesystem consisting of directories containing files and other directories.||Example Two Could Be a 视觉的 表示 Of a filesystem consisting Of directories Containing Files And Other directories.
my @numerically_descending =||My @numerically_descending =
This code skeleton has a three-level sort comparison, using three computed values saved in the anonymous array (alongside the original data item to be sorted, which always comes first).||This Code 骨架 Has a Three-Level Sort 比较, Using Three computed Values Saved In The Anonymous Array (在 The Original Data 条款 To Be 分类, Which Always 来 First).
So which name is real, $_ or $File::Find::name? $File::Find::name gives the name relative to the starting directory, but during the callback, the working directory is the one that holds the item just found.||So Which Name Is Real, $_ Or $File::Find::Name? $File::Find::Name Gives The Name 亲戚 To The Starting Directory, But 在 The callback, The Working Directory Is The One That holds The 条款 Just Found.
Because it's a full block, we can introduce variables that are scoped to the block.||Because It's a Full Block, We Can 介绍 Variables That Are Scoped To The Block.
It's at the beginning of the line and has a newline immediately following it:||It's At The 开端 Of The Line And Has a 换行符 立即 Following It:
A practical example might be a data-dumping routine for debugging or maybe a marshaling strategy to dump all application objects to a file.||A 实用的 Example Might Be a Data-倾销 Routine For Debugging Or 或许 a marshaling 战略 To 倾倒 All 申请 Objects To a File.
Hands-on training gets the job done better.||Hands-On 训练 Gets The 工作 Done Better.
When we create the distribution archive, the Makefile creates this file, ensures that it's in MANIFEST, and includes it in distribution.||When We Create The 分配 archive, The Makefile Creates This File, ensures That It's In MANIFEST, And 包括 It In 分配.
Of course, you're installing it only into the path specified by the PREFIX in the earlier step, but that's enough to show how it would have worked for the user's installation .[*] The installation is triggered with make install:||Of Course, You'Re installing It Only Into The Path 指定 By The PREFIX In The Earlier 脚步, But That's Enough To Show How It Would Have 工作 For The User's 安装 .[*] The 安装 Is 触发 With Make 安装:
use Business::ISBN;||Use Business::ISBN;
Applying a Bit of Indirection Some problems that may appear very complex are actually simple once we've seen a solution or two.||Applying a Bit Of Indirection Some 问题 That May Appear Very 综合的 Are Actually Simple Once We'Ve Seen a 解决 Or Two.
Recursive algorithms deal with the unlimited complexity of their data by beginning with a base case and building upon that.[*] The base case considers what to do in the simplest case: when the leaf node has no branches, when the array is empty, when the counter is at zero.||Recursive algorithms 处理 With The 无限的 复杂性 Of Their Data By 开端 With a Base Case And 建筑物 Upon That.[*] The Base Case considers What To Do In The simplest Case: When The 叶子 node Has No 分支, When The Array Is Empty, When The Counter Is At 零.
It gives us an interactive module installation shell.||It Gives Us An 互动 Module 安装 壳.
$ perl Build.PL --install_base /Users/home/Ginger||$ Perl Build.PL --install_base /Users/家/Ginger
named still builds a scalar sheep, so let's fix that as well:||Named Still builds a Scalar 绵羊, So Let's 固定 That As Well:
Exercise 2 You will be keeping count of how much data has been sent to all machines, so at the start, set the variable $all to a name that will stand in for all of them.||Exercise 2 You Will Be 一致 计算 Of How Much Data Has Been 打发 To All Machines, So At The Start, Set The Variable $All To a Name That Will 站立 In For All Of Them.
We also know that we'll need a DESTROY method, since Perl will automatically look for it when it tries to clean up the object.||We Also Know That We'我 Need a DESTROY Method, Since Perl Will Automatically Look For It When It 试 To 清洁的 Up The Object.
Our mice will still say goes, which means the code still has the bug.||Our mice Will Still Say 去, Which Means The Code Still Has The 臭虫.
use Island::Plotting::Maps qw(:all)||Use Island::Plotting::Maps Qw(:All)
The references to the cows disappear only when the barn destructor is completely finished.||The References To The cows 失踪 Only When The 谷仓 destructor Is 完全地 制成的.
[*] However, whenever the discussion comes up in other languages, the first thing they do is try to set restrictions, which CPAN purposedly avoided.||[*] However, 无论何时 The 讨论 来 Up In Other Languages, The First Thing They Do Is Try To Set 限制, Which Perl综合典藏网 purposedly avoided.
We'll get to the details later, but for now we start with the Test::More module, [] which comes with the standard Perl distribution.||We'我 Get To The Details 更晚, But For Now We Start With The Test::More Module, [] Which 来 With The Standard Perl 分配.
The first parameter is $class (because we're using an arrow again), so the found speak method gets Mouse as its first entry and eventually works its way back to Mouse::sound for the details.||The First Parameter Is $Class (Because We'Re Using An 箭 Again), So The Found 说话 Method Gets Mouse As Its First Entry And 最终 Works Its Way Back To Mouse::声 For The Details.
First, we need to run the Makefile.PL. After that, we find a new file, Makefile, in our directory.||First, We Need To Run The Makefile.PL. After That, We 寻找 a New File, Makefile, In Our Directory.
The Exporter function takes care of all of that for us by providing the import method that we talked about in Chapter 15.||The Exporter Function Takes Care Of All Of That For Us By 提供 The Import Method That We 谈了 About In Chapter 15.
Somebody stop the madness!)||Somebody Stop The 疯狂!)
Clearly, the navigation_turn_toward_heading comes from the navigation.pm file.||Clearly, The navigation_turn_toward_heading 来 From The navigation.pm File.
If our whole program is only a couple hundred lines of code, using objects is probably overkill.||If Our Whole Program Is Only a 一对 hundred Lines Of Code, Using Objects Is Probably overkill.
for my $file (@files) {||For My $File (@Files) {
He finds himself cutting and pasting a very common routine into each program:||He 发现 他自己 切片 And pasting a Very Common Routine Into Each Program:
This autovivification also works for multiple levels of assignment:||This autovivification Also Works For Multiple levels Of Assignment:
And, just as was promised and delivered in Learning Perl, we'll entertain you along the way with interesting examples and bad puns.||And, Just As Was promised And delivered In Learning Perl, We'我 招待 You 沿着 The Way With Interesting Examples And 坏的 双关语.
$ cat Changes Revision history for Perl extension Island::Plotting::Maps.||$ 猫 Changes Revision 历史 For Perl 延伸 Island::Plotting::Maps.
our @ISA = qw(Exporter);||Our @ISA = qw(Exporter);
A method is the object-oriented version of the subroutine, so we'll say "method" from now on.[*] That's not completely accurate, but we'll go on one step at a time.||A Method Is The Object-Oriented Version Of The Subroutine, So We'我 Say "Method" From Now On.[*] That's Not 完全地 准确的, But We'我 Go On One 脚步 At a Time.
my @all_with_names;||My @all_with_names;
Multiple Inheritance How does Perl wander through the @ISA TRee?||Multiple Inheritance How Does Perl 徘徊 通过 The @ISA TRee?
[] Although, if the test passes when we said it should fail, it warns us that the test unexpectedly passed.||[] Although, If The Test 经过 When We Said It Should 失败, It warns Us That The Test 竟然 Passed.
This three-argument form has the added advantage of access to the Perl IO filters.||This Three-Argument Form Has The added 优点 Of Access To The Perl IO Filters.
The Prototype Module Itself Finally we come to the most important part of the distribution, which is the actual code:||The Prototype Module Itself Finally We 来到 To The Most Important Part Of The 分配, Which Is The Actual Code:
[*] And variables, although far less common, and arguably the wrong thing to do.||[*] And Variables, Although Far 更少的 Common, And arguably The 错误的 Thing To Do.
At the start of the block, we call the skip( ) function to tell it why we want to skip the tests and how many tests we want to skip.||At The Start Of The Block, We Call The 跳过( ) Function To Tell It Why We Want To 跳过 The 测试 And How Many 测试 We Want To 跳过.
In theory, this would be fine.||In 理论, This Would Be Fine.
That is, unless we have a lot of time on our hands to let the function recurse forever.||That Is, Unless We Have a 许多 Of Time On Our 手 To Let The Function recurse 永远.
Test::NoWarnings tells us when that happens so we can fix it.||Test::NoWarnings 告诉 Us When That Happens So We Can 固定 It.
As we write the code, we run the tests.||As We Write The Code, We Run The 测试.
A class may not need to implement any methods of its own if it inherits everything it needs from its parent classes through multiple inheritance||A Class May Not Need To 实行 Any Methods Of Its Own If It 继承 Everything It Needs From Its 父或母亲 类 通过 Multiple Inheritance
[*] Even though the dummy item will sort to the head of the sorted list, it won't necessarily be the first item in the list.||[*] Even Though The 傀儡 条款 Will Sort To The Head Of The 分类 List, It Won't Necessarily Be The First 条款 In The List.
Hint: you can find a file's timestamp (mtime) with code such as:||Hint: You Can 寻找 a File's timestamp (mtime) With Code Such As:
#!/usr/bin/perl use strict;||#!/usr/bin/Perl Use Strict;
Or, without using the intermediate array from the map:||Or, Without Using The 中间的 Array From The Map:
[] Even if you weren't the system administrator, you'd soon have all the powers of the system administrator.||[] Even If You 傻乎乎的't The System administrator, You'd 不久 Have All The powers Of The System administrator.
The downside of reference counting is that it breaks when the data structure is not a directed graph that is, when some parts of the structure point back in to other parts in a looping way.||The downside Of Reference counting Is That It 打破 When The Data Structure Is Not a 执导 图象 That Is, When Some 部分 Of The Structure 尖 Back In To Other 部分 In a looping Way.
dbmopen (our %STANDINGS, "standings", 0666)||dbmopen (Our %STANDINGS, "standings", 0666)
Let's not sort the actual names but rather the indices of each name:||Let's Not Sort The Actual Names But Rather The indices Of Each Name:
The filehandle is another Perl data type, although people don't talk about it too much since it doesn't get its own special sigil.||The Filehandle Is 另一个 Perl Data Type, Although People Don't 谈话 About It Too Much Since It Doesn't Get Its Own Special 印记.
As long as the named arrays within the subroutine have had at least one reference taken of them, and it is still part of the return value, the data remains alive.[*] If we alter or discard the references in @all_with_names, Perl reduces the reference count for the corresponding arrays.||As Long As The Named Arrays Within The Subroutine Have Had At Least One Reference Taken Of Them, And It Is Still Part Of The Return Value, The Data 剩余 活着的.[*] If We 改变 Or 丢弃 The References In @all_with_names, Perl reduces The Reference 计算 For The 相应的 Arrays.
[*] Perl doesn't make us create an explicit main( ) loop like C. Perl knows that every script needs one, so it gives it to us for free.||[*] Perl Doesn't Make Us Create An 清楚的 Main( ) Loop Like C. Perl 知道 That Every 临时单据 Needs One, So It Gives It To Us For Free.
A Perl Authors Upload Server (PAUSE) ID||A Perl 作者 Upload Server (PAUSE) ID
The IO::Scalar module uses the magic of tie behind the scenes to give us a filehandle reference that appends to a scalar.||The IO::Scalar Module Uses The Magic Of tie（绑定操作符）(绑定操作符) 在 The scenes To Give Us a Filehandle Reference That appends To a Scalar.
You saw a bit of that back in the AUTOLOAD mechanism earlier in Chapter 14.||You 锯 a Bit Of That Back In The AUTOLOAD Mechanism Earlier In Chapter 14.
setenv PERL5LIB /home/skipper/perl-lib||setenv PERL5LIB /家/skipper/Perl-lib
Inserting Code with eval The Skipper can save disk space (and brain space) by bringing the definition for turn_toward_heading out into a separate file.||Inserting Code With Eval The Skipper Can Save disk Space (And 脑子 Space) By bringing The Definition For turn_toward_heading Out Into a Separate File.
[] The exact details are documented in the perldoc Test::Harness::TAP, if you're curious.||[] The Exact Details Are Documented In The perldoc Test::Harness::TAP, If You'Re 好奇的.
The second argument is typically a regular expression object (created here with qr), but we can also use a simple string, which like( ) will convert to a regular expression object.||The Second Argument Is 典型的 a 正则表达式 Object (Created Here With qr), But We Can Also Use a Simple String, Which Like( ) Will Convert To a 正则表达式 Object.
my($gather, $yield) = gather_mtime_between($start, $stop); find($gather, @starting_directories); my @files = $yield->( );||My($聚集, $生产) = gather_mtime_between($Start, $Stop); 寻找($聚集, @starting_directories); My @Files = $生产->( );
That is, those symbols are only available in that package unless we use the full package specification.||That Is, Those Symbols Are Only Available In That Package Unless We Use The Full Package 规格.
It's better suited because compared to Data::Dumper, Storable produces smaller and faster-to-process files.||It's Better suited Because 相比 To Data::Dumper, Storable Produces smaller And Faster-To-程序 Files.
Perl executes that code in the lexical context of the code around it, meaning that it's virtually as if we had typed that code right there.||Perl 实行 That Code In The Lexical Context Of The Code Around It, Meaning That It's 几乎 As If We Had 打印 That Code Right There.
When map concatenates the results lists, we end up with 1, 2, 4, 8, 1, 6, 3, 2, 6, and 4.||When Map concatenates The Results Lists, We End Up With 1, 2, 4, 8, 1, 6, 3, 2, 6, And 4.
Perl recycles the memory for the array only when all references (including the name of the array) go away.||Perl recycles The Memory For The Array Only When All References (Including The Name Of The Array) Go Away.
We use the -e file test operator in the ok( ) function from Test::More.||We Use The -g File Test Operator In The Ok( ) Function From Test::More.
From there, we do the same sort of thing we did before.||From There, We Do The Same Sort Of Thing We Did Before.
Let's see how that changes the rest of this subroutine:||Let's See How That Changes The 休息 Of This Subroutine:
[*] The format used by Storable is architecture byte-order dependent by default.||[*] The Format Used By Storable Is 建筑学 字节-Order 依靠的 By Default.
That's a mild case of the general dependency headache, and all the coconuts on our castaways' island aren't going to fix it.||That's a 温和的 Case Of The General 依赖 头疼, And All The coconuts On Our castaways' 岛屿 还't Going To 固定 It.
or a function-oriented module:||Or a Function-Oriented Module:
Testing Object-Oriented Features For object-oriented modules, we want to ensure that we get back an object when we call the constructor.||Testing Object-Oriented Features For Object-Oriented Modules, We Want To Ensure That We Get Back An Object When We Call The 构造函数.
In fact, we can also nest them in our provisions list:||In Fact, We Can Also 巢 Them In Our provisions List:
Dereferencing a code reference is similar to dereferencing other references.||Dereferencing a Code Reference Is Similar To dereferencing Other References.
Generally, we should provide a fandango method for specific classes of interest and then provide a definition in UNIVERSAL::fandango as a backstop, in case Perl can't find a more specific method.||Generally, We Should Provide a fandango Method For 特殊的 类 Of 兴趣 And Then Provide a Definition In UNIVERSAL::fandango As a 控股, In Case Perl Can't 寻找 a More 特殊的 Method.
This prints 0 3 4 2 1, which means that the first element of the sorted list is element 0 of the original list, Gilligan.||This Prints 0 3 4 2 1, Which Means That The First Element Of The 分类 List Is Element 0 Of The Original List, Gilligan.
sub shuffle { # Fisher-Yates shuffle from perlfaq4||Sub 拖脚走 { # Fisher-Yates 拖脚走 From perlfaq4
Exercise 1 [15 min] Write a program that takes a list of filenames on the command line and uses grep to select the ones whose size in bytes is less than 1000.||Exercise 1 [15 min] Write a Program That Takes a List Of filenames On The 命令 Line And Uses Grep To 挑选 The Ones Whose Size In 字节 Is 更少的 Than 1000.
my $ref;||My $Ref;
These modules can use advanced techniques (described in the Exporter documentation) to make it easy to import batches of related symbols.||These Modules Can Use 先进的 技术 (Described In The Exporter 提供文件) To Make It Easy To Import batches Of Related Symbols.
We'll presume the Skipper has had some experience at that, but we'll show some more on that in later chapters.||We'我 假定 The Skipper Has Had Some 经历 At That, But We'我 Show Some More On That In 更晚 chapters.
An empty directory should show up as:||An Empty Directory Should Show Up As:
Once we go through the other logic, the only thing we need to do at the end is tell the test harness if the test is ok or not_ok.||Once We Go 通过 The Other 逻辑, The Only Thing We Need To Do At The End Is Tell The Test 支配 If The Test Is Ok Or not_ok.
Testing STDOUT or STDERR One advantage to using the ok( ) functions (and friends) is that they don't write to STDOUT directly, but to a filehandle secretly duplicated from STDOUT when our test script begins.||Testing STDOUT Or STDERR One 优点 To Using The Ok( ) Functions (And 朋友) Is That They Don't Write To STDOUT 直接地, But To a Filehandle secretly duplicated From STDOUT When Our Test 临时单据 begins.
Animals may exist all over the program namespace but are lost once they're handed back from the named constructor method.[*]||Animals May Exist All 在 The Program Namespace But Are Lost Once They'Re handed Back From The Named 构造函数 Method.[*]
At any given time, Perl knows the number of references to a particular data item.||At Any Given Time, Perl 知道 The Number Of References To a Particular Data 条款.
sub check_required_items_ok {||Sub check_required_items_ok {
And now for the constructor:||And Now For The 构造函数:
Because we no longer use the method arrow, we get one and only one chance to hit the right method because we're treating it like a regular subroutine with no inheritance magic.||Because We No 长 Use The Method 箭, We Get One And Only One Chance To 打 The Right Method Because We'Re 治疗 It Like a Regular Subroutine With No Inheritance Magic.
my @input = qw(Gilligan Skipper Professor Ginger Mary_Ann); my @sorted_positions = sort { $input[$a] cmp $input[$b] } 0..$#input; print "@sorted_positions\n";||My @Input = Qw(Gilligan Skipper Professor Ginger Mary_Ann); My @sorted_positions = Sort { $Input[$a] cmp $Input[$b] } 0..$#Input; Print "@sorted_positions\n";
my $string_log = ''; my $scalar_fh = IO::Scalar->new( \$string_log );||My $string_log = ''; My $scalar_fh = IO::Scalar->New( \$string_log );
Note that we have just three elements, each of which is a reference to an array that has two elements: the name and its corresponding initial provisions.||Note That We Have Just Three Elements, Each Of Which Is a Reference To An Array That Has Two Elements: The Name And Its 相应的 Initial provisions.
However, unlike other method calls, there's no error if Perl doesn't find a suitable method.[*]||However, 不同的 Other Method Calls, There's No Error If Perl Doesn't 寻找 a Suitable Method.[*]
That works fine and dandy.||That Works Fine And dandy.
In Perl 5.6, we can emulate the same function using the WeakRef CPAN module.||In Perl 5.6, We Can 模仿 The Same Function Using The WeakRef Perl综合典藏网 Module.
# mtime via slice||# mtime Via 薄片
To get that 1..17, we tell Test::More we're running 17 tests.||To Get That 1..17, We Tell Test::More We'Re 连续的 17 测试.
@handlepairs = grep { CONDITION } @handlepairs;||@handlepairs = Grep { CONDITION } @handlepairs;
At first, most of the tests will fail, but as we add more code (and possibly debug the code that's already there), more and more tests pass.||At First, Most Of The 测试 Will 失败, But As We 增添 More Code (And Possibly debug The Code That's Already There), More And More 测试 Pass.
For maximum portability, print the entire string of ok N or not ok N in one print step.||For 最大量 可移植性, Print The 完全的 String Of Ok N Or Not Ok N In One Print 脚步.
Does this comment let you know which of the two situations we want?||Does This Comment Let You Know Which Of The Two 情况 We Want?
Just post the notice, and within a day or two, your news posting will be whisking around to news servers all over the globe.||Just 柱 The Notice, And Within a 一天 Or Two, Your 新闻 posting Will Be whisking Around To 新闻 servers All 在 The 地球.
my @keys = keys % gilligan_info; my @keys = keys % { $hash_ref };||My @Keys = Keys % gilligan_info; My @Keys = Keys % { $hash_ref };
We don't have to worry about printing that ourselves, though, because Test::More does it for us.||We Don't Have To 烦恼 About 印刷 That 我们自己, Though, Because Test::More Does It For Us.
ok( -e 'minnow.db' );||Ok( -g 'minnow.db' );
This only works for main since that's what we hardcoded into the routine.||This Only Works For Main Since That's What We hardcoded Into The Routine.
The Even Better Way So far, our examples have shown the two-argument form of open, but that actually has a catch: the open mode and the filename both live in the second argument.||The Even Better Way So Far, Our Examples Have shown The Two-Argument Form Of Open, But That Actually Has a Catch: The Open 方式 And The 文件名 Both 居住生存 In The Second Argument.
In a scalar context, map returns the number of elements that are returned in a list context.||In a Scalar Context, Map Returns The Number Of Elements That Are Returned In a List Context.
After that, we go through @ARGV again to find the elements that are valid directories.||After That, We Go 通过 @命令行传入参数 Again To 寻找 The Elements That Are Valid directories.
$class->SUPER::speak(@_);||$Class->SUPER::说话(@_);
Most importantly, we'll also save time by not processing the file more than once.||Most 重要的是, We'我 Also Save Time By Not 加工（的） The File More Than Once.
You never really stop learning Perl, so Learning More Perl doesn't really tell you much about the book.||You Never Really Stop 学问 Perl, So Learning More Perl Doesn't Really Tell You Much About The 书.
At the beginning of the while loop, use a pattern to extract the person's name from the data line, issuing a warning if that's not found.||At The 开端 Of The While Loop, Use a 模式 To 取出 The 人's Name From The Data Line, issuing a Warning If That's Not Found.
As the template describes, you're expected to edit portions of this text to fit your particular module.||As The template describes, You'Re Expected To 校订 portions Of This 正文 To 适合的 Your Particular Module.
First, we open all the files, both inputs and outputs:'||First, We Open All The Files, Both inputs And outputs:'
Since we can't look at your module, let's suppose that we want to test Perl's sqrt function, which calculates square roots.||Since We Can't Look At Your Module, Let's 猜想 That We Want To Test Perl's sqrt Function, Which calculates 正方形 roots.
In this case, we are passing both data (the list of starting directories) and behavior as parameters to the find routine.||In This Case, We Are Passing Both Data (The List Of Starting directories) And Behavior As Parameters To The 寻找 Routine.
Because it's comprised of spaces, either end will work.||Because It's comprised Of spaces, Either End Will Work.
Hence, it's simpler to say that $tv_horse is the horse, not "the thing that $tv_horse references."||Hence, It's simpler To Say That $tv_horse Is The 马, Not "The Thing That $tv_horse References."
If you are an especially boring person, you could call it a referent instead.||If You Are An Especially 讨厌的 人, You Could Call It a 被谈到的事 Instead.
You're probably used to thinking of it as a function, but remember that missing comma after the filehandle.||You'Re Probably Used To 思想 Of It As a Function, But 记得 That Missing 逗号 After The Filehandle.
my $tv_horse = Horse->named('Mr. Ed'); $tv_horse->color('black-and-white'); print $tv_horse->name, ' is colored ', $tv_horse->color, "\n";||My $tv_horse = Horse->Named('Mr. Ed'); $tv_horse->颜色('黑的-And-白的'); Print $tv_horse->Name, ' Is colored ', $tv_horse->颜色, "\n";
my $copy_of_ref = $ref;||My $copy_of_ref = $Ref;
In general, we shouldn't use:||In General, We 应该't Use:
Again, the advantage to test functions is that they wrap reusable code in a function name.||Again, The 优点 To Test Functions Is That They 包 reusable Code In a Function Name.
Using this syntax, start with Animal to find speak and use all of Animal's inheritance chain if not found immediately.||Using This Syntax, Start With Animal To 寻找 说话 And Use All Of Animal's Inheritance 链条 If Not Found 立即.
Extending @INC with PERL5LIB The Skipper must edit each program that uses his private libraries to include those lines from the previous section.||Extending @INC With PERL5LIB The Skipper Must 校订 Each Program That Uses 他的 Private 库 To Include Those Lines From The Previous Section.
It works without changing the MyDate module.||It Works Without Changing The MyDate Module.
$ export PERL5LIB=/Users/home/Ginger||$ Export PERL5LIB=/Users/家/Ginger
How do these subroutines get from the module's package into the user's package?||How Do These Subroutines Get From The Module's Package Into The User's Package?
Bring your MANIFEST up to date.||Bring Your MANIFEST Up To Date.
Your employer may require you to change the copyright notice to include your company name rather than your name, for example.||Your 雇主 May Require You To Change The copyright Notice To Include Your 公司 Name Rather Than Your Name, For Example.
Well, if the instance is something more complicated than a simple scalar variable:||Well, If The 例子 Is Something More 错综复杂的 Than a Simple Scalar Variable:
The Perl distribution itself comes with thousands of tests, designed to verify that Perl compiles correctly on our machine in every possible way.||The Perl 分配 Itself 来 With thousands Of 测试, 设计 To 检验 That Perl compiles 正确地 On Our 机器 In Every Possible Way.
The "Recent modules" page of http://search.cpan.org||The "Recent Modules" 页 Of http://search.cpan.org
Note that this subroutine will be accessible as Ooogaboogoo::date::day:||Note That This Subroutine Will Be Accessible As Ooogaboogoo::Date::一天:
Of course, if we ever see something like this in our output, it almost certainly means we have a bug; users of our program have little interest in hex dumps of storage addresses!||Of Course, If We 曾经 See Something Like This In Our 出产, It Almost Certainly Means We Have a 臭虫; Users Of Our Program Have Little 兴趣 In hex dumps Of 贮藏 地址!
The Schwartzian Transform The intermediate variables between each of these steps were not necessary, except as input to the next step.||The Schwartzian Transform The 中间的 Variables Between Each Of These 步骤 Were Not 必要的, Except As Input To The 下一次 脚步.
Trivial make install Since you know the module can at least compile, let's be daring and install it.||Trivial Make 安装 Since You Know The Module Can At Least Compile, Let's Be 大胆的 And 安装 It.
use FindBin qw($Bin);||Use FindBin Qw($Bin);
my @names = map $_->[0], @sorted_names_and_pineapples;||My @Names = Map $_->[0], @sorted_names_and_pineapples;
Fortunately, the ref operator lets us throw an exception when called incorrectly.||Fortunately, The Ref Operator Lets Us 投 An Exception When Called incorrectly.
Cow::speak; Horse::speak; Sheep::speak;||Cow::说话; Horse::说话; Sheep::说话;
This is what the modules in Chapter 3 were doing when they imported symbols into our scripts, but we didn't tell you the whole story then.||This Is What The Modules In Chapter 3 Were Doing When They Imported Symbols Into Our Scripts, But We Didn't Tell You The Whole 故事 Then.
Now we want to contribute to CPAN, so we have to look at it from an author's perspective.||Now We Want To 捐献 To Perl综合典藏网, So We Have To Look At It From An 作者's 展望.
If she chose "file", we open $fh to a file, as you know from before.||If 她 chose "File", We Open $Fh To a File, As You Know From Before.
Like references, Perl's object architecture was grafted on after a substantial amount of existing pre-Perl 5 code was already in use, so we had to ensure that it wouldn't break existing syntax.||Like References, Perl's Object 建筑学 Was grafted On After a 可观的 数量 Of 现存的 Pre-Perl 5 Code Was Already In Use, So We Had To Ensure That It Wouldn't 打破 现存的 Syntax.
In their theme song, the castaways don't come in alphabetical order, but sort can fix that for us.||In Their 主题 歌, The castaways Don't 来到 In alphabetical Order, But Sort Can 固定 That For Us.
In our modules, we use the %EXPORT_TAGS hash to define these tags.||In Our Modules, We Use The %EXPORT_TAGS Hash To Define These tags.
{ package Barn2;||{ Package Barn2;
These are the basic tricks that Lincoln used to work his CGI magic, and it's the same stuff that the Test::More module, which we introduce in Chapter 17, uses in its own import to control how testing works.||These Are The 基本的 把戏 That Lincoln Used To Work 他的 (（CGI）通用网关界面)通用网关界面 Magic, And It's The Same 材料 That The Test::More Module, Which We 介绍 In Chapter 17, Uses In Its Own Import To Control How testing Works.
For example, if we return the updated parameter, we can use it again for another object:||For Example, If We Return The Updated Parameter, We Can Use It Again For 另一个 Object:
[*] The name plays off Test::Simple, which did some of the same stuff but with far fewer convenience functions.||[*] The Name plays Off Test::Simple, Which Did Some Of The Same 材料 But With Far fewer 方便 Functions.
# return RGB list }|| # Return RGB List }
(Hint: the year and month numbers returned by localtime may not be what you'd expect, so you need to check the documentation.)||(Hint: The 年 And 月份 编号 Returned By localtime May Not Be What You'd 盼望, So You Need To Check The 提供文件.)
But, to avoid having "the Llama book" be big and intimidating, we left a lot of information out, deliberately and carefully.||But, To Avoid Having "The Llama 书" Be Big And intimidating, We Left a 许多 Of Information Out, 故意地 And 仔细.
When the user uses all, your module should import all of the subroutine names.||When The User Uses All, Your Module Should Import All Of The Subroutine Names.
If the user chooses to send the output to a scalar, at the end of the program print the scalar's value to standard output.||If The User chooses To 派遣 The 出产 To a Scalar, At The End Of The Program Print The Scalar's Value To Standard 出产.
we can replace it with:||We Can 归还原处 It With:
So we can leave that out:||So We Can 出发 That Out:
Notice the use of local there.||Notice The Use Of Local There.
Pull in the .pm file from a place in your @INC path:||Pull In The .Pm File From a Place In Your @INC Path:
[] The search is recursive, depth-first, and left to right in each @ISA.||[] The 搜查 Is 递归, 深度-First, And Left To Right In Each @ISA.
[*] If we had left the inner brackets off, we'd end up with six items out.||[*] If We Had Left The Inner 支架 Off, We'd End Up With six 物品 Out.
.. @homeport .. # refers to the package variable||.. @homeport .. # Refers To The Package Variable
You can read about the halting problem at Wikipedia: http://en.wikipedia.org/wiki/Halting_problem.||You Can Read About The halting Problem At Wikipedia: http://en.wikipedia.org/wiki/Halting_problem.
By the end of the chapter, though, we'll show how to make strict-compliant code again.||By The End Of The 章, Though, We'我 Show How To Make Strict-柔顺 Code Again.
All we have to do is plug in the proper two operations, and we're done.||All We Have To Do Is 塞子 In The 合适的 Two 操作, And We'Re Done.
At this point, the five-element list is in an anonymous array, which is a fancy term for an array without a name.||At This 尖, The five-Element List Is In An Anonymous Array, Which Is a 幻想 期限 For An Array Without a Name.
Now we can use it with either an instance or a class.||Now We Can Use It With Either An 例子 Or a Class.
However, the latter works; the former doesn't.||However, The 后面的 Works; The Former Doesn't.
However, if we want precise control over the parent class's behavior, we should determine the argument list explicitly and pass it.||However, If We Want 精确的 Control 在 The 父或母亲 Class's Behavior, We Should 决心 The Argument List 清晰地 And Pass It.
We just spell it out with its full package specification:||We Just 拼写 It Out With Its Full Package 规格:
our @EXPORT = qw(day mon); our %EXPORT_TAGS = ( all => [ @EXPORT ] );||Our @EXPORT = Qw(一天 mon); Our %EXPORT_TAGS = ( All => [ @EXPORT ] );
So far, so good.||So Far, So Good.
As part of the extension provided by this custom import, you can use the CGI module as an object-oriented module:||As Part Of The 延伸 Provided By This 风俗 Import, You Can Use The (（CGI）通用网关界面)通用网关界面 Module As An Object-Oriented Module:
my %gilligan_info = (||My %gilligan_info = (
Trapping Errors with eval Many lines of ordinary code have the potential to terminate a program prematurely if something goes wrong.||Trapping Errors With Eval Many Lines Of Ordinary Code Have The 潜在的 To 终止 a Program prematurely If Something 去 错误的.
Adding an animal just pushes it to the back of the barn.||Adding An 动物 Just pushes It To The Back Of The 谷仓.
Sorting with Indices In the same way we used indices to solve a few problems with grep and map back in Chapter 2, we can also use indices with sort to get some interesting results.||Sorting With Indices In The Same Way We Used indices To 解答 a Few 问题 With Grep And Map Back In Chapter 2, We Can Also Use indices With Sort To Get Some Interesting Results.
The Animal class comes next, making appropriate sounds but unable to talk (except to Dr. Dolittle):||The Animal Class 来 下一次, 制作 恰当的 听起来 But 不能的 To 谈话 (Except To Dr. Dolittle):
A weak reference doesn't count as far as the reference counting, um, counts.||A 弱的 Reference Doesn't 计算 As Far As The Reference counting, 嗯, 计数.
In other words, we can dereference an array reference, picking out a particular element of that array by simply following the expression defining the array reference with an arrow and a square-bracketed subscript.||In Other Words, We Can 废弃 An Array Reference, picking Out a Particular Element Of That Array By Simply Following The Expression 定义 The Array Reference With An 箭 And a 正方形-bracketed 下标.
Thus, back to the temporary file problem.||Thus, Back To The temporary File Problem.
Change the previous code to simply:||Change The Previous Code To Simply:
# Assume no nondigit characters|| # Assume No nondigit Characters
The object itself||The Object Itself
does the right thing to find the version-specific directory below it, as well as the architecture-specific directory below it, if needed (usually for architecture-specific files, such as compiled binaries).||Does The Right Thing To 寻找 The Version-特殊的 Directory Below It, As Well As The 建筑学-特殊的 Directory Below It, If Needed (Usually For 建筑学-特殊的 Files, Such As Compiled binaries).
There is a lot more to this file, and its format documentation reference is right there in the file.||There Is a 许多 More To This File, And Its Format 提供文件 Reference Is Right There In The File.
For this reason, UNIVERSAL is hardly used for anything except methods that must be completely, well, universal, like during debugging or other Perl-internal behavior that ordinary programmers may blissfully ignore.||For This Reason, UNIVERSAL Is 刚刚 Used For Anything Except Methods That Must Be 完全地, Well, 宇宙的, Like 在 Debugging Or Other Perl-Internal Behavior That Ordinary Programmers May blissfully 忽视.
Note that the preceding ampersand is mandatory here, and the lack of trailing parentheses is also intentional.||Note That The 前面的 ampersand Is 强制性 Here, And The 缺少 Of 落后 Parentheses Is Also 有意的.
[*] There are more efficient ways to check list membership for large lists, but for a few items, this is probably the easiest way to do so with just a few lines of code.||[*] There Are More Efficient Ways To Check List 会员资格 For Large Lists, But For a Few 物品, This Is Probably The easiest Way To Do So With Just a Few Lines Of Code.
The inline block of code splits each number into its individual digits.||The inline Block Of Code Splits Each Number Into Its Individual digits.
If you're on a recent-enough Perl (5.6 or later), you can use the our declaration to shorten it to:||If You'Re On a 近来的-Enough Perl (5.6 Or 更晚), You Can Use The Our Declaration To 缩短 It To:
The module author is responsible for providing an appropriate import routine.||The Module 作者 Is 负责的 For 提供 An 恰当的 Import Routine.
ref($some_object) eq 'SomeClass'||Ref($some_object) Eq 'SomeClass'
foreach my $file ( glob( '*.input' ) ) {||Foreach My $File ( Glob( '*.Input' ) ) {
Let's look at the old problems and the new solutions.||Let's Look At The Old 问题 And The New solutions.
For much more detail, you can also check out Perl Testing: A Developer's Notebook, which covers the subject further.||For Much More 细节, You Can Also Check Out Perl Testing: A Developer's Notebook, Which covers The Subject Further.
eval { sqrt(1) }; is( $@, '', '$@ is not set after sqrt(1)' );||Eval { sqrt(1) }; Is( $@, '', '$@ Is Not Set After sqrt(1)' );
[] As of version 5.8.6, Perl recognizes the reverse sort and does it without generating the temporary, intermediate list.||[] As Of Version 5.8.6, Perl recognizes The 颠倒的 Sort And Does It Without Generating The temporary, 中间的 List.
The second element of the sorted list is element 3 of the original list, which is Ginger, and so on.||The Second Element Of The 分类 List Is Element 3 Of The Original List, Which Is Ginger, And So On.
(Later we'll show that arguments will take their place following the instance variable, just as with classes.)||(Later We'我 Show That Arguments Will Take Their Place Following The 例子 Variable, Just As With 类.)
If you destroy data that is held by a weak reference before its time, you may have some very confusing programming problems to solve and debug.||If You 破坏 Data That Is Held By a 弱的 Reference Before Its Time, You May Have Some Very 混淆 Programming 问题 To 解答 And debug.
Along the way, we'll also introduce you to the cast of characters that we'll use in the examples throughout the book.||Along The Way, We'我 Also 介绍 You To The 掷 Of Characters That We'我 Use In The Examples Throughout The 书.
The updated parameter (same as what was passed in)||The Updated Parameter (Same As What Was Passed In)
Exercises You can find the answers to these exercises in "Answers for Chapter 5" in the Appendix.||Exercises You Can 寻找 The answers To These exercises In "Answers For Chapter 5" In The Appendix.
my @required = qw(preserver sunscreen water_bottle jacket); my @skipper = qw(blue_shirt hat jacket preserver sunscreen);||My @要求 = Qw(preserver sunscreen water_bottle 短外套); My @skipper = Qw(blue_shirt 帽子 短外套 preserver sunscreen);
We could test for file existence very easily.||We Could Test For File 存在 Very 容易地.
Now, CPAN.pm handles all the work of downloading, unpacking, building, testing, and installing the module, and it does so recursively for all its dependencies.||Now, Perl综合典藏网.Pm 处理 All The Work Of downloading, unpacking, 建筑物, testing, And installing The Module, And It Does So Recursively For All Its dependencies.
Going back to that drop_anchor.pm library for a second, what if the Skipper wrote a program that needed to "drop anchor" as well as navigate?||Going Back To That drop_anchor.pm Library For a Second, What If The Skipper 写 a Program That Needed To "落下 锚" As Well As 浏览?
Perl tracks how many ways it can access the data through a mechanism called reference counting .||Perl 轨迹 How Many Ways It Can Access The Data 通过 a Mechanism Called Reference counting .
Whether you place your POD at the end of the file (as the template suggests) or intertwined with your code (as presented in the preceding paragraphs), the important thing to remember is always to document your code.||Whether You Place Your POD At The End Of The File (As The template suggests) Or intertwined With Your Code (As 提出 In The 前面的 paragraphs), The Important Thing To 记得 Is Always To Document Your Code.
That's not all, though.||That's Not All, Though.
Its tempfile routine knows how to make temporary files, including where to put them and so on, so we don't have to.||Its tempfile Routine 知道 How To Make temporary Files, Including Where To Put Them And So On, So We Don't Have To.
Be sure to consider where your head will be a month from now when you have to reread your own code.||Be Sure To Consider Where Your Head Will Be a 月份 From Now When You Have To reread Your Own Code.
Once you know a little about references, you're on your way to arbitrarily complex data structures.||Once You Know a Little About References, You'Re On Your Way To 任意 综合的 Data Structures.
(That is, don't let speak have any parameters for an animal.)||(That Is, Don't Let 说话 Have Any Parameters For An 动物.)
my $LIB_DIR = '/home/gilligan/lib'; ... use lib $LIB_DIR; # BROKEN use Navigation::SeatOfPants;||My $LIB_DIR = '/家/gilligan/lib'; ... Use lib $LIB_DIR; # BROKEN Use Navigation::SeatOfPants;
We can also use this file to help us track changes and their effects: if we realize that a certain bug turned up three releases back, we can look here to remind ourselves of new features or bug fixes that we introduced in that release.||We Can Also Use This File To Help Us 径赛 Changes And Their Effects: If We 认识到 That a 确信的 臭虫 转 Up Three Releases Back, We Can Look Here To 提醒 我们自己 Of New 特征 Or 臭虫 fixes That We Introduced In That Release.
# $cow is destroyed here } print "Start of program.\n"; my $outer_cow = Cow->named('Bessie'); print "Now have a cow named ", $outer_cow->name, ".\n"; feed_a_cow_named('Gwen'); print "Returned from subroutine.\n";||# $母牛 Is destroyed Here } Print "Start Of Program.\n"; My $outer_cow = Cow->Named('Bessie'); Print "Now Have a 母牛 Named ", $outer_cow->Name, ".\n"; feed_a_cow_named('Gwen'); Print "Returned From Subroutine.\n";
When the last reference to an objectsay, $bessiedisappears, Perl invokes that object's DESTROY method automatically, as if we had called it ourselves.||When The Last Reference To An objectsay, $bessiedisappears, Perl invokes That Object's DESTROY Method Automatically, As If We Had Called It 我们自己.
Once again, Larry Wall's background as a linguist has come back to influence Perl.||Once Again, Larry Wall's 背景 As a 语言学者 Has 来到 Back To 影响 Perl.
$root -> [2][1][0]||$Root -> [2][1][0]
ok( ! -e 'minnow.db' );||Ok( ! -g 'minnow.db' );
The PREREQ_PM setting is important if your module depends on non-core Perl modules, especially if you plan to upload your code to the CPAN.||The PREREQ_PM Setting Is Important If Your Module Depends On Non-Core Perl Modules, Especially If You 计划平面图 To upload Your Code To The Perl综合典藏网.
As long as someone understands that and is a partial evaluator and that print returns true when everything is okay, this is a fine replacement.||As Long As Someone understands That And Is a 局部的 evaluator And That Print Returns True When Everything Is Okay, This Is a Fine Replacement.
Should we pass the test if the file is there?||Should We Pass The Test If The File Is There?
We need a hash reference, which we declare as a named hash inside the subroutine.||We Need a Hash Reference, Which We Declare As a Named Hash 里面 The Subroutine.
require "Island/Plotting/Maps.pm";||Require "Island/Plotting/Maps.pm";
List Operators You already know about several list operators in Perl, but you may not have thought of them as working with lists.||List Operators You Already Know About Several List Operators In Perl, But You May Not Have Thought Of Them As Working With Lists.
Recall the example from Chapter 4:||Recall The Example From Chapter 4:
While testing, Test::More will not execute these tests, unlike the TODO block where it ran them anyway.||While testing, Test::More Will Not Execute These 测试, 不同的 The TODO Block Where It ran Them 不管怎样.
Let's look at the importance of references by starting with an example.||Let's Look At The 重要性 Of References By Starting With An Example.
The Professor can use this printout to reconfigure the network for efficiency.||The Professor Can Use This printout To reconfigure The 网络 For Efficiency.
We wrote the test already, since it was part of our specification.||We 写 The Test Already, Since It Was Part Of Our 规格.
The uppercase name for %REGISTRY is a reminder that this variable is more global than most variables.||The 大写的 Name For %REGISTRY Is a reminder That This Variable Is More Global Than Most Variables.
In this case, it's a meta-variable that contains information about many instances.||In This Case, It's a 梅塔-Variable That 包含 Information About Many 实例.
eval { &rescue_scheme_42 } ; print "Continuing after error: $@" if $@;||Eval { &rescue_scheme_42 } ; Print "Continuing After Error: $@" If $@;
For example, go back to that "leaking" data from Chapter 5:||For Example, Go Back To That "leaking" Data From Chapter 5:
my $log_fh; open $log_fh, '>> castaways.log'||My $log_fh; Open $log_fh, '>> castaways.log'
Exercise You can find the answer to this exercise in "Answer for Chapter 16" in the Appendix.||Exercise You Can 寻找 The Answer To This 锻炼 In "Answer For Chapter 16" In The Appendix.
Your goal is to create a module My::List::Util that exports two routines on request: sum( ) and shuffle( ).||Your Goal Is To Create a Module My::List::Util That exports Two Routines On 请求: 总数( ) And 拖脚走( ).
This means that an OO module typically exports nothing, so we'll have:||This Means That An OO Module 典型的 exports Nothing, So We'我 Have:
The test harness knows that if it doesn't see a header, it's expecting a footer.||The Test 支配 知道 That If It Doesn't See a Header, It's expecting a footer.
From there we go one of two ways (which we'll explain in detail in Chapter 16).||From There We Go One Of Two Ways (Which We'我 Explain In 细节 In Chapter 16).
# my $Minnow = Real::Object::Class->new( ... ); my $Minnow = Test::MockObject->new( );||# My $Minnow = Real::Object::Class->New( ... ); My $Minnow = Test::MockObject->New( );
In this case, $provisions{"The Professor"} gives an array reference of the provisions brought by the Professor, and $provisions{"Gilligan"}[-1] gives the last item Gilligan thought to bring.||In This Case, $provisions{"The Professor"} Gives An Array Reference Of The provisions brought By The Professor, And $provisions{"Gilligan"}[-1] Gives The Last 条款 Gilligan Thought To 拿来.
Some module interfaces don't give us that option, so we have to make it look like we are printing to a file by using a filehandle.||Some Module 接口 Don't Give Us That 选择, So We Have To Make It Look Like We Are 印刷 To a File By Using a Filehandle.
This is a nice style element to adopt because it allows for easy maintenance.||This Is a Nice Style Element To 采用 Because It Allows For Easy 保养.
More Interesting Instances What if an instance needs more data?||More Interesting Instances What If An 例子 Needs More Data?
This is true whether the data is held in lexical variables or package global variables.||This Is True Whether The Data Is Held In Lexical Variables Or Package Global Variables.
A descending sort is simple in Perl:[]||A descending Sort Is Simple In Perl:[]
For example, you won't see an explanation in this book that shows how to access the elements of an array or return a value from a subroutine.||For Example, You Won't See An 说明 In This 书 That Shows How To Access The Elements Of An Array Or Return a Value From a Subroutine.
sub gilligan_greets {||Sub gilligan_greets {
What happens when we invoke Cow->speak now?||What Happens When We 调用 Cow->说话 Now?
The output of this shows us that the unnamed Horse is not quite what we thought it was.||The 出产 Of This Shows Us That The unnamed Horse Is Not Quite What We Thought It Was.
Thus, SUPER::speak means to look in the current package's @ISA for speak, invoking the first one found if there's more than one.||Thus, SUPER::说话 Means To Look In The Current Package's @ISA For 说话, 调用 The First One Found If There's More Than One.
We load the module with use, as we did before.||We Load The Module With Use, As We Did Before.
We don't want to see the whole string, which might be hundreds or thousands of characters long.||We Don't Want To See The Whole String, Which Might Be hundreds Or thousands Of Characters Long.
But sometimes just adding a -I fixes things right up.[*] This works even if Gilligan can't edit the Skipper's program.||But Sometimes Just Adding a -I fixes Things Right Up.[*] This Works Even If Gilligan Can't 校订 The Skipper's Program.
We use a code reference as a closure to do the job.||We Use a Code Reference As a Closure To Do The 工作.
[] Using -w should be the first step when Perl does something we don't understand.||[] Using -w Should Be The First 脚步 When Perl Does Something We Don't Understand.
This time, we added a new source, ginger.girl.hut.||This Time, We added a New Source, ginger.girl.小屋.
The void context trick can be used here too, although with questionable value because we've already established $self.||The Void Context 诡计 Can Be Used Here Too, Although With questionable Value Because We'Ve Already 已建立的 $自己.
my @skipper = qw(blue_shirt hat jacket preserver sunscreen); check_required_items("The Skipper", \@skipper);||My @skipper = Qw(blue_shirt 帽子 短外套 preserver sunscreen); check_required_items("The Skipper", \@skipper);
Something to contribute, ideally already in the shape of a module||Something To 捐献, ideally Already In The 形状 Of a Module
sub test_this { ...||Sub test_this { ...
print "Enter type of output [Scalar/File/Tee]> "; my $type = <STDIN>;||Print "Enter Type Of 出产 [Scalar/File/Tee]> "; My $Type = <STDIN>;
Why the end and not the beginning?||Why The End And Not The 开端?
An empty list is different from an absent list.||An Empty List Is Different From An 缺席的 List.
if (eval { $unknown_thing->isa('Animal') }) {||If (Eval { $unknown_thing->isa('Animal') }) {
That's a bit too much work, though, so brian created the cpan script, which also comes with Perl.||That's a Bit Too Much Work, Though, So brian Created The Cpan 临时单据, Which Also 来 With Perl.
This makes it easier to find and update when we need to move the file to a new system or when the lib directory's name changes.||This 使 It Easier To 寻找 And Update When We Need To Move The File To a New System Or When The lib Directory's Name Changes.
We'll also look at the basics of using modules that others have already written.||We'我 Also Look At The basics Of Using Modules That 别人 Have Already Written.
For simplicity, use four space-separated integers for the value in the DBM hash.||For 简单, Use 四 Space-Separated 整数 For The Value In The DBM Hash.
Perl stores the reference to the subroutine (a coderef) within $ref_to_greeter, and, like all other references, it fits nearly anywhere a scalar fits.||Perl stores The Reference To The Subroutine (a coderef) Within $ref_to_greeter, And, Like All Other References, It fits 几乎 Anywhere a Scalar fits.
You will not find anything in a footnote that you'll need to understand any of the material we present later.||You Will Not 寻找 Anything In a footnote That You'我 Need To Understand Any Of The 材料 We 在场的 更晚.
Horse::sound($tv_horse)||Horse::声($tv_horse)
What else do I have to include with my code to make it usable?||What Else Do I Have To Include With My Code To Make It Usable?
Once we implement the My::List::Util minimal module, the use_ok will pass but this will fail.||Once We 实行 The My::List::Util 最小 Module, The use_ok Will Pass But This Will 失败.
On Windows, for example, you may have dmake or another program.||On 微软视窗操作系统, For Example, You May Have dmake Or 另一个 Program.
The purpose of the original blessing is to associate a class with that reference to allow Perl to find the proper method.||The Purpose Of The Original 祝福 Is To Associate a Class With That Reference To Allow Perl To 寻找 The 合适的 Method.
Thus, since the hash already has a value for that person's name, the hash's value is used and assigned directly to $handle without having to (re)create the file.||Thus, Since The Hash Already Has a Value For That 人's Name, The Hash's Value Is Used And Assigned 直接地 To $Handle Without Having To (Re)Create The File.
Then we pass it to the first subroutine:||Then We Pass It To The First Subroutine:
Look at that.||Look At That.
which makes the C++ people feel right at home.||Which 使 The C++ People 感到 Right At 家.
To solve either or both of these problems, we need pass by reference rather than pass by value.||To 解答 Either Or Both Of These 问题, We Need Pass By Reference Rather Than Pass By Value.
Before that statement, $provisions{"The Skipper"} didn't exist, so Perl created it.||Before That Statement, $provisions{"The Skipper"} Didn't Exist, So Perl Created It.
We don't have to do that much work, though, and we don't have to count the tests ourselves.||We Don't Have To Do That Much Work, Though, And We Don't Have To 计算 The 测试 我们自己.
The weak reference mechanism is built into the core of Perl version 5.8.||The 弱的 Reference Mechanism Is Built Into The Core Of Perl Version 5.8.
We can drop the first brace pair because the only thing within is a simple scalar value, yielding:||We Can 落下 The First 支撑 对 Because The Only Thing Within Is a Simple Scalar Value, yielding:
The IO::Dir module has been part of the standard Perl distribution since 5.6.||The IO::Dir Module Has Been Part Of The Standard Perl 分配 Since 5.6.
sub navigation_turn_toward_port {||Sub navigation_turn_toward_port {
or even by setting the PERL5LIB environment variable (using sh-like syntax here):||Or Even By Setting The PERL5LIB 环境 Variable (Using sh-Like Syntax Here):
ok( $product > 6.999 && $product < 7.001, ||Ok( $产品 > 6.999 && $产品 < 7.001,
As you develop your code, you may want to consider if you want to use only core modules, so that you can be sure that anyone with Perl will have that module as long as they have at least the same version as you.[] We'll avoid that debate here, mostly because we love CPAN too much to do without it.||As You 发展 Your Code, You May Want To Consider If You Want To Use Only Core Modules, So That You Can Be Sure That 无论谁 With Perl Will Have That Module As Long As They Have At Least The Same Version As You.[] We'我 Avoid That 辩论 Here, Mostly Because We 爱 Perl综合典藏网 Too Much To Do Without It.
We don't want to require everyone to install the module though, so the suggested test code first checks if we can load the module by using the string form of eval that we told you about in Chapter 2.||We Don't Want To Require Everyone To 安装 The Module Though, So The 建议 Test Code First 检查 If We Can Load The Module By Using The String Form Of Eval That We told You About In Chapter 2.
We need a mechanism that tracks which files we've brought in and then brings them in only once.||We Need a Mechanism That 轨迹 Which Files We'Ve brought In And Then brings Them In Only Once.
[] There is also a Test::Simple module, but most people use its successor, Test::More, so we'll stick to that.||[] There Is Also a Test::Simple Module, But Most People Use Its 继承人, Test::More, So We'我 Stick To That.
We can set the testing harness switches with the HARNESS_PERL_SWITCHES environment variable, in which we put the -MDevel::Cover we used on the command line previously.||We Can Set The testing 支配 Switches With The HARNESS_PERL_SWITCHES 环境 Variable, In Which We Put The -MDevel::Cover We Used On The 命令 Line Previously.
This is a typical data-reduction report generation strategy.[*] Simply create a hash-of-hashrefs (perhaps nested even deeper, as you'll see later), using autovivification to fill in the gaps in the upper data structures as needed, and then walk through the resulting data structure to display the results.||This Is a 典型的 Data-减少 报告 Generation 战略.[*] Simply Create a Hash-Of-hashrefs (也许 嵌套的 Even deeper, As You'我 See 更晚), Using autovivification To 装满 In The gaps In The Upper Data Structures As Needed, And Then 步行 通过 The 造成 Data Structure To 陈列 The Results.
is( sqrt( test_sub( ) ), 100, 'String value works in sqrt( )' );||Is( sqrt( test_sub( ) ), 100, 'String Value Works In sqrt( )' );
doesn't work.||Doesn't Work.
These numbers have a digit sum with a remainder of "1" in the last line of the subroutine, which counts as true.||These 编号 Have a 数字 总数 With a 剩余部分 Of "1" In The Last Line Of The Subroutine, Which 计数 As True.
Chapter 14, Some Advanced Object Topics Use multiple inheritance, automatic methods, and references to filehandles.||Chapter 14, Some Advanced Object Topics Use Multiple Inheritance, Automatic Methods, And References To Filehandles.
First, start with the way we would have written it before we heard of references (including the optional ampersand prefix):||First, Start With The Way We Would Have Written It Before We heard Of References (Including The Optional ampersand 前缀):
Because the arrays inside @all_with_names also contain a reference (such as the reference to @skipper), Perl reduces that reference count by one.||Because The Arrays 里面 @all_with_names Also Contain a Reference (Such As The Reference To @skipper), Perl reduces That Reference 计算 By One.
my @castaways = reverse qw(Gilligan Skipper Ginger Professor Mary-Ann);||My @castaways = 颠倒的 Qw(Gilligan Skipper Ginger Professor Mary-Ann);
If We Could Talk to the Animals...||If We Could Talk To The Animals...
The Test::Output module can handle this for us.||The Test::Output Module Can Handle This For Us.
Here's the result:||Here's The Result:
Now, instead of copying the entire provision list into the @_ array, we get a single element of a reference to that provisions array.||Now, Instead Of 复制 The 完全的 准备 List Into The @_ Array, We Get a Single Element Of a Reference To That provisions Array.
It's a good thing we've shown you how to use modules!||It's a Good Thing We'Ve shown You How To Use Modules!
On our local machine, we can read the module documentation with the perldoc command.||On Our Local 机器, We Can Read The Module 提供文件 With The perldoc 命令.
A picture of that is in Figure 4-1.||A 图片 Of That Is In Figure 4-1.
This makes the code shorter and (likely) a bit faster as well.||This 使 The Code 短 And (Likely) a Bit Faster As Well.
# jump into it|| # 跳跃 Into It
If the Skipper calls this on .cshrc, he'll get back an undef value, indicating that a file was seen.||If The Skipper Calls This On .cshrc, 他'我 Get Back An Undef Value, 指示 That a File Was Seen.
and then the programmer wonders why it didn't pull in the definitions.||And Then The Programmer wonders Why It Didn't 拖 In The 定义.
However, once the barn is gone, the inhabitants have no additional references, so they also go away, and thus Perl invokes their destructors too.||However, Once The 谷仓 Is 不见了, The inhabitants Have No Additional References, So They Also Go Away, And 如此 Perl invokes Their destructors Too.
The module automatically starts with an appropriate package directive.||The Module Automatically Starts With An 恰当的 Package 命令.
Inside the block, we create a local version of $TODO, which holds as its value the reason we think the tests will fail.||Inside The Block, We Create a Local Version Of $TODO, Which holds As Its Value The Reason We 想 The 测试 Will 失败.
If that weren't already simple enough, there's one more rule: if the arrow ends up between "subscripty kinds of things, " such as square brackets, we can also drop the arrow. $all_with_names[2]->[1]->[0] becomes $all_with_names[2][1][0].||If That 傻乎乎的't Already Simple Enough, There's One More Rule: If The 箭 Ends Up Between "subscripty 种类 Of Things, " Such As 正方形 支架, We Can Also 落下 The 箭. $all_with_names[2]->[1]->[0] Becomes $all_with_names[2][1][0].
The anonymous hash constructor always evaluates its contents in a list context and then constructs a hash from key/value pairs, just as if we had assigned that list to a named hash.||The Anonymous Hash 构造函数 Always 评价 Its Contents In a List Context And Then Constructs a Hash From Key/Value 双, Just As If We Had Assigned That List To a Named Hash.
If we don't have a subroutine to test, we wrap the code we want to test in a subroutine and use that.||If We Don't Have a Subroutine To Test, We 包 The Code We Want To Test In a Subroutine And Use That.
If we return the object itself, we can chain settings:||If We Return The Object Itself, We Can 链条 settings:
This is a single element of the larger list.||This Is a Single Element Of The larger List.
my $dir_fh = IO::Dir->new( '.' ) || die "Could not open dirhandle! $!\n";||My $dir_fh = IO::Dir->New( '.' ) || Die "Could Not Open dirhandle! $!\n";
ok( $Quartermaster->has_maps, "We can find the maps" );||Ok( $Quartermaster->has_maps, "We Can 寻找 The 地图" );
because we were thinking about the indirect object equivalents for:||Because We Were 思想 About The Indirect Object Equivalents For:
[*] The .pm portion is defined by the interface and can't be changed.||[*] The .Pm 一份 Is Defined By The Interface And Can't Be 改变.
## in Animal sub name {||## In Animal Sub Name {
open STDOUT, ">test.out" or die "Could not redirect STDOUT! $!"; $trigger->eat("hay"); close STDOUT;||Open STDOUT, ">test.out" Or Die "Could Not redirect STDOUT! $!"; $扳机->吃("干草"); Close STDOUT;
Imagine for a moment that the intermediate variables are all part of a subroutine:||Imagine For a Moment That The 中间的 Variables Are All Part Of a Subroutine:
This is a job for the reference.||This Is a 工作 For The Reference.
Obviously, we don't want to create and maintain a data structure by changing literals in the program.||Obviously, We Don't Want To Create And Maintain a Data Structure By Changing literals In The Program.
Now it's looking even easier on the eyes.||Now It's 看 Even Easier On The eyes.
When Reference Counting Goes Bad Reference counting as a way to manage memory has been around for a long time.||When Reference Counting Goes Bad Reference counting As a Way To 管理 Memory Has Been Around For a Long Time.
Figure 10-1 illustrates how the Skipper can use his common library.||Figure 10-1 illustrates How The Skipper Can Use 他的 Common Library.
Of course, we can shorten this as well, since the entire dereferenced array matches the argument list precisely:||Of Course, We Can 缩短 This As Well, Since The 完全的 dereferenced Array 比赛 The Argument List 精确地:
When using stat inside the callback, the filename is $_, but when returning the filename (or reporting it to the user), the name is $File::Find::name.||When Using stat 里面 The callback, The 文件名 Is $_, But When Returning The 文件名 (Or reporting It To The User), The Name Is $File::Find::Name.
We use a map with seven inputs and seven outputs, turning each castaway item into a separate array reference, with each referenced array consisting of the castaway name and the pineapple count reported by the monkey:||We Use a Map With seven inputs And seven outputs, Turning Each castaway 条款 Into a Separate Array Reference, With Each 参考 Array consisting Of The castaway Name And The 菠萝 计算 reported By The 猴子:
# it's a callback from File::Find:||# It's a callback From File::Find:
A callback defines what to do when a subroutine reaches a particular place in an algorithm.||A callback 定义 What To Do When a Subroutine reaches a Particular Place In An 算法.
In fact, we can clear out either one and not the other, and it still works nicely.||In Fact, We Can 清楚的 Out Either One And Not The Other, And It Still Works 好.
As you can see, the documentation for the subroutines is now very near the subroutine definition, in the hope that as one gets updated, the other will be similarly changed.||As You Can See, The 提供文件 For The Subroutines Is Now Very 近 The Subroutine Definition, In The 希望 That As One Gets Updated, The Other Will Be 同样 改变.
Well, wonder no more.||Well, 想知道诧异 No More.
my @not_dirs = grep { ! -d } @ARGV; foreach my $not_dir ( @not_dirs ) {||My @not_dirs = Grep { ! -d } @命令行传入参数; Foreach My $not_dir ( @not_dirs ) {
The Test::MockObject module creates "pretend" objects.||The Test::MockObject Module Creates "假装" Objects.
Exercise First, start the Animal package:||Exercise First, Start The Animal Package:
Exercise 2 [30 min] The Professor has to read a logfile that looks like:||Exercise 2 [30 min] The Professor Has To Read a logfile That Looks Like:
my($sec, $min, $hour, $mday, $mon, $year, $wday) = localtime;||My($sec, $min, $小时, $mday, $mon, $年, $wday) = localtime;
Test things one at a time.||Test Things One At a Time.
Testing Our Objects for Good Behavior Besides providing a place for us to put universally available methods, the UNIVERSAL package comes preloaded with two very useful utility methods: isa and can.||Testing Our Objects For Good Behavior Besides 提供 a Place For Us To Put 普遍地 Available Methods, The UNIVERSAL Package 来 preloaded With Two Very Useful 效用 Methods: isa And Can.
By default, the prefix is empty, of course.||By Default, The 前缀 Is Empty, Of Course.
Most core and CPAN modules use new, with notable exceptions, such as DBI's DBI->connect( ).||Most Core And Perl综合典藏网 Modules Use New, With 值得注意的 exceptions, Such As DBI's DBI->连接( ).
Handling Module Dependencies We just saw that if we try to install a module that uses Module::Build, we have to install Module::Build first.||Handling Module Dependencies We Just 锯 That If We Try To 安装 a Module That Uses Module::Build, We Have To 安装 Module::Build First.
For example, we'll decide the dead horses need a further use.||For Example, We'我 Decide The 死的 horses Need a Further Use.
{ package RaceHorse;||{ Package RaceHorse;
sub turn_toward_port { # Navigation::turn_toward_port||Sub turn_toward_port { # Navigation::turn_toward_port
The file produced by this step is under 100 bytes, which is quite a bit shorter than the equivalent Data::Dumper output.||The File produced By This 脚步 Is 在 100 字节, Which Is Quite a Bit 短 Than The Equivalent Data::Dumper 出产.
That element is also undef, so Perl stuffs it with a reference to another empty anonymous array.||That Element Is Also Undef, So Perl stuffs It With a Reference To 另一个 Empty Anonymous Array.
So, Perl finds UNIVERSAL::debug before it has to use our AUTOLOAD magic.||So, Perl 发现 UNIVERSAL::debug Before It Has To Use Our AUTOLOAD Magic.
For the callback's convenience, the current working directory is the item's containing directory, and the item's name within that directory is found in $_.||For The callback's 方便, The Current Working Directory Is The 条款's Containing Directory, And The 条款's Name Within That Directory Is Found In $_.
But we're not limited to having only one output for each input.||But We'Re Not Limited To Having Only One 出产 For Each Input.
Class::method('Class', @args);||Class::Method('Class', @Args);
## gather the data for (keys %subs) {||## 聚集 The Data For (Keys %Subs) {
The s command single-steps the program, while the x command dumps a list of values in a nice format.||The s 命令 Single-步骤 The Program, While The x 命令 dumps a List Of Values In a Nice Format.
# prints to $log_fh and $scalar_fh print $tee_fh $message;||# Prints To $log_fh And $scalar_fh Print $tee_fh $音讯;
List the source machines in order from most to least data transferred.||List The Source Machines In Order From Most To Least Data transferred.
Where is the documentation for the module?||Where Is The 提供文件 For The Module?
Simplifying Nested Element References with Arrows Look at the curly-brace dereferencing again.||Simplifying Nested Element References With Arrows Look At The 卷曲的-支撑 dereferencing Again.
if (UNIVERSAL::isa($unknown_thing, 'Animal')) {||If (UNIVERSAL::isa($unknown_thing, 'Animal')) {
We just told you about creating the tests before you write the code, so maybe we should follow our own advice.||We Just told You About Creating The 测试 Before You Write The Code, So 或许 We Should 跟随 Our Own 忠告.
Or maybe it should be the zeroth, because we should normally have -w in effect whenever we're developing code.||Or 或许 It Should Be The zeroth, Because We Should Normally Have -w In Effect 无论何时 We'Re 发展中的 Code.
If you dereference it as @{$all_with_names[2]}, you get a two-element array, "Gilligan" and another array reference.||If You 废弃 It As @{$all_with_names[2]}, You Get a Two-Element Array, "Gilligan" And 另一个 Array Reference.
my $reference_to_skipper = \@skipper;||My $reference_to_skipper = \@skipper;
We're not really testing the object for the ship, but we want to test our quartermaster object, which takes a ship as an argument.||We'Re Not Really testing The Object For The 船, But We Want To Test Our quartermaster Object, Which Takes a 船 As An Argument.
use Fcntl qw( :flock ); # import all flock constants||Use Fcntl Qw( :群 ); # Import All 群 Constants
If make encounters an error, it won't go on.||If Make encounters An Error, It Won't Go On.
Getting Prepared Since CPAN is just a big file-storage site, you just need to upload your code.||Getting Prepared Since Perl综合典藏网 Is Just a Big File-贮藏 场所, You Just Need To upload Your Code.
One example is the LWP library, available on the CPAN as part of the libwww-perl distribution.||One Example Is The LWP Library, Available On The Perl综合典藏网 As Part Of The libwww-Perl 分配.
An initial naive approach to find the offenders from greatest to least might be something like:||An Initial 天真的 接近 To 寻找 The offenders From greatest To Least Might Be Something Like:
The CPANPLUS module also comes with a convenience script, called cpanp.||The Perl综合典藏网PLUS Module Also 来 With a 方便 临时单据, Called cpanp.
We can even say they're identical, because, in fact, they are the same thing.||We Can Even Say They'Re 同一的, Because, In Fact, They Are The Same Thing.
A daily announcement in the "Perl news" mailing list||A 每日的 通知 In The "Perl 新闻" 邮寄 List
Now for the fun part: Perl takes the class in which the instance was blessed, in this case, Horse, and uses it to locate and invoke the method, as if we had said Horse->sound instead of $tv_horse->sound.||Now For The 娱乐 Part: Perl Takes The Class In Which The 例子 Was 有福的, In This Case, Horse, And Uses It To Locate And 调用 The Method, As If We Had Said Horse->声 Instead Of $tv_horse->声.
Now we can rank information rather than just move the names around.||Now We Can 军衔 Information Rather Than Just Move The Names Around.
use Navigate::SeatOfPants qw(guess_direction_toward); # same||Use Navigate::SeatOfPants qw(guess_direction_toward); # Same
We change that to no_plan so Test::More can figure it out later.||We Change That To no_plan So Test::More Can 数字 It Out 更晚.
Luckily, the Makefile contains provisions for considering an alternate installation location for scripts, manpages, and libraries.||Luckily, The Makefile 包含 provisions For considering An 轮流 安装 地点 For Scripts, 帮助文档, And 库.
We could do all that, but it's too much work!||We Could Do All That, But It's Too Much Work!
If you get a warning, fix that (it's probably a missing file, if anything) and try again.||If You Get a Warning, 固定 That (It's Probably a Missing File, If Anything) And Try Again.
Your module gets noticed automatically in many places, including:||Your Module Gets Noticed Automatically In Many Places, Including:
We have a lot more work to do before we can share our work, whether that means simply installing it ourselves on another one of our machines or giving it to someone else to use.||We Have a 许多 More Work To Do Before We Can 份 Our Work, Whether That Means Simply installing It 我们自己 On 另一个 One Of Our Machines Or Giving It To Someone Else To Use.
As in our earlier example, the array reference for Gilligan's provision list is ${$all_with_names[2]}[1].||As In Our Earlier Example, The Array Reference For Gilligan's 准备 List Is ${$all_with_names[2]}[1].
All we did was replace @_ (the copy of the provisions list) with @{$items}, a dereferencing of the reference to the original provisions array.||All We Did Was 归还原处 @_ (The Copy Of The provisions List) With @{$物品}, a dereferencing Of The Reference To The Original provisions Array.
We don't need to change anything in the Makefile.PL or in the test harness: the file is noticed and executed automatically.||We Don't Need To Change Anything In The Makefile.PL Or In The Test 支配: The File Is Noticed And Executed Automatically.
If every name has a package name inserted in front of it, what about names in the main program?||If Every Name Has a Package Name 插入 In Front Of It, What About Names In The Main Program?
Every exercise has its answer in the Appendix.||Every 锻炼 Has Its Answer In The Appendix.
The only stuff we haven't shown you is Test::Builder.||The Only 材料 We 还't shown You Is Test::Builder.
Alter the invoking code so that it uses the imported routines (rather than the full package specification, as you did before), and test it.||Alter The 调用 Code So That It Uses The Imported Routines (Rather Than The Full Package 规格, As You Did Before), And Test It.
If Ginger used a PREFIX of /home/ginger/Testing, you need to add the appropriate directory below it to the search path.||If Ginger Used a PREFIX Of /家/姜/Testing, You Need To 增添 The 恰当的 Directory Below It To The 搜查 Path.
my @barnyard = ( ); {||My @barnyard = ( ); {
If you can't see the problem after a minute or two, see whether trying to run it will give you a hint of how to fix it.||If You Can't See The Problem After a 分钟 Or Two, See Whether 尝试 To Run It Will Give You a 暗示 Of How To 固定 It.
If a named subroutine accesses lexical variables, and those variables go out of scope, the named subroutine retains a reference to the lexicals, just as you saw with anonymous subroutines.||If a Named Subroutine Accesses Lexical Variables, And Those Variables Go Out Of Scope, The Named Subroutine retains a Reference To The Lexicals, Just As You 锯 With Anonymous Subroutines.
The File::Spec module provides several other methods for dealing with file paths in a portable manner.||The File::Spec Module Provides Several Other Methods For 交往 With File paths In a 手提的 Manner.
When we talk to our boss or coworkers, we'll also have the confidence in our code to answer their queries and questions.||When We 谈话 To Our 上司 Or coworkers, We'我 Also Have The 信任 In Our Code To Answer Their queries And Questions.
The key is in the last line of that subroutine.||The Key Is In The Last Line Of That Subroutine.
sub digit_sum_is_odd {||Sub digit_sum_is_odd {
The Animal class name is now hardwired into the method selection.||The Animal Class Name Is Now hardwired Into The Method 选择.
Now we group them all:||Now We Group Them All:
package Navigate::SeatOfPants; use base qw(Exporter);||Package Navigate::SeatOfPants; Use Base qw(Exporter);
The Makefile uses the Test::Harness module to run the tests, watch the output, and report the results.||The Makefile Uses The Test::Harness Module To Run The 测试, 观看 The 出产, And 报告 The Results.
Here, we're really being minimalistic in the object definition.||Here, We'Re Really Being minimalistic In The Object Definition.
## backstops (should be overridden) sub default_color { "brown" } sub sound { croak "subclass must define a sound" }||## backstops (Should Be Overridden) Sub default_color { "褐色（的）" } Sub 声 { croak "子类 Must Define a 声" }
In the template, it is indicated by a simple comment:||In The template, It Is 表明 By a Simple Comment:
However, a parent won't disappear as long as it still has offspring.||However, a 父或母亲 Won't 失踪 As Long As It Still Has 子女.
We store that in $slice_index and use it to get the value from localtime as well as the offset for that value.||We 商店 That In $slice_index And Use It To Get The Value From localtime As Well As The Offset For That Value.
The phrase "blah blah blah" is often used in the templates to indicate things that must be changed.[*] If we leave unchanged the blah blah blah and other placeholder notes from h2xs, potential users will suspect that bugs in our code have also escaped our scrutiny, so we should proofread this stuff (along with our code) before we distribute our module.||The 词组 "blah blah blah" Is Often Used In The templates To 指明 Things That Must Be 改变.[*] If We 出发 unchanged The blah blah blah And Other placeholder 备忘 From h2xs, 潜在的 Users Will 怀疑 That bugs In Our Code Have Also escaped Our 细看, So We Should proofread This 材料 (沿着 With Our Code) Before We 分配 Our Module.
It's a lot harder to miscommunicate the intent when we have to type it out.||It's a 许多 Harder To miscommunicate The 意图 When We Have To Type It Out.
Next, we'll see if the method is a getter for one of these keys, and, if so, we install a getter and jump to it:||Next, We'我 See If The Method Is a getter For One Of These Keys, And, If So, We 安装 a getter And 跳跃 To It:
To create a new barn, we simply bless an empty array reference into the class name passed as the first parameter.||To Create a New 谷仓, We Simply 保佑 An Empty Array Reference Into The Class Name Passed As The First Parameter.
The initialization occurred in the original subroutine (create_find_callback_that_counts), not the callback (unnamed) subroutine:||The Initialization Occurred In The Original Subroutine (create_find_callback_that_counts), Not The callback (unnamed) Subroutine:
# plain file|| # 明白的 File
The IO::File module supplies the constants.||The IO::File Module Supplies The Constants.
As described in the Exporter documentation, a few shortcuts are available automatically.||As Described In The Exporter 提供文件, a Few shortcuts Are Available Automatically.
Thus, we can always use a map in place of a grep, but not vice versa.||Thus, We Can Always Use a Map In Place Of a Grep, But Not 坏事 versa.
The next step finds the data:||The 下一次 脚步 发现 The Data:
But the meaning of that syntax requires a bit of study, so let's proceed.||But The Meaning Of That Syntax Requires a Bit Of Study, So Let's 前进.
The %EXPORT_TAGS hash lets us give names to sets of variables and functions so we can export groups of symbols without making the user type too much.||The %EXPORT_TAGS Hash Lets Us Give Names To Sets Of Variables And Functions So We Can Export groups Of Symbols Without 制作 The User Type Too Much.
[*] In the block form of grep, there's no comma between the block and the input list.||[*] In The Block Form Of Grep, There's No 逗号 Between The Block And The Input List.
[*] Just don't ask us about it.||[*] Just Don't 问 Us About It.
By using trailing spaces, you can call the subroutine like this:||By Using 落后 spaces, You Can Call The Subroutine Like This:
But, just as we can create anonymous hashes and arrays, we can create anonymous subroutines !||But, Just As We Can Create Anonymous Hashes And Arrays, We Can Create Anonymous Subroutines !
This process is called autovivification.||This 程序 Is Called autovivification.
Although a scalar can be an arbitrary string, which allows complex data to be encoded into an array or hash, none of the three data types are well suited to complex data interrelationships.||Although a Scalar Can Be An 专横的 String, Which Allows 综合的 Data To Be encoded Into An Array Or Hash, 没人 Of The Three Data Types Are Well suited To 综合的 Data 相互关系的.
So, in navigation.pm, we can use variables such as:[]||So, In navigation.pm, We Can Use Variables Such As:[]
When the subroutine exited, the array names all went away, but the references remained.||When The Subroutine Exited, The Array Names All 去 Away, But The References remained.
The subroutine is free to create additional copies of that reference, which Perl notes as needed.||The Subroutine Is Free To Create Additional Copies Of That Reference, Which Perl 备忘 As Needed.
Thus, the code above practically says:||Thus, The Code Above 实际地 说:
Its documentation shows how to create byte-order-independent storage files.||Its 提供文件 Shows How To Create 字节-Order-独立的 贮藏 Files.
Of course, everything we can do with map and grep, we can also do with explicit foreach loops.||Of Course, Everything We Can Do With Map And Grep, We Can Also Do With 清楚的 Foreach loops.
Create a README file.||Create a README File.
print $fh <<"HERE"; This is run $$ The date is $date The day of the week is $day_of_week HERE||Print $Fh <<"HERE"; This Is Run $$ The Date Is $Date The 一天 Of The 星期 Is $day_of_week HERE
On a successful test, this doesn't give much advantage, but on a failed test, we get much more interesting output.||On a 成功的 Test, This Doesn't Give Much 优点, But On a failed Test, We Get Much More Interesting 出产.
And, now that we've created the Test::Minnow::RequiredItems module, how we do we test the test?||And, Now That We'Ve Created The Test::Minnow::RequiredItems Module, How We Do We Test The Test?
The naked block of code we labeled with TODO to mark the section of the tests that we expect to fail.||The 裸体的 Block Of Code We labeled With TODO To 痕迹 The Section Of The 测试 That We 盼望 To 失败.
References to Hashes Just as we can take a reference to an array, we can also take a reference to a hash.||References To Hashes Just As We Can Take a Reference To An Array, We Can Also Take a Reference To a Hash.
After all, if the current heading is 234 degrees and he needs to turn to 234 degrees, we see:||After All, If The Current 标题 Is 234 度 And 他 Needs To 转向 To 234 度, We See:
use Test::More 'no_plan'; use Test::Minnow::RequiredItems;||Use Test::More 'no_plan'; Use Test::Minnow::RequiredItems;
my @pasture = qw(Cow Cow Horse Sheep Sheep); foreach my $beast (@pasture) {||My @牧场 = Qw(Cow Cow Horse Sheep Sheep); Foreach My $野兽 (@牧场) {
# Back up one day|| # Back Up One 一天
Dictionary order ignores all capitalization and internal punctuation.||Dictionary Order 忽略了 All 资本化 And Internal 准时.
The Skipper can set PERL5LIB once and forget about it.||The Skipper Can Set PERL5LIB Once And 忘记 About It.
Next, make a sorted list.||Next, Make a 分类 List.
my $dirname = File::Basename::dirname($some_path);||My $dirname = File::Basename::dirname($some_path);
Answers for Chapter 11 A.10.1.||Answers For Chapter 11 A.10.1.
Documentation is important.||文档 Is Important.
[] The name h2xs has an interesting pedigree.||[] The Name h2xs Has An Interesting pedigree.
# no, don't select it|| # No, Don't 挑选 It
my %total_bytes; while (<>) {||My %total_bytes; While (<>) {
my $tv_horse = Horse->named("Mr. Ed"); if ($tv_horse->isa('Animal')) { # is it an Animal?||My $tv_horse = Horse->Named("Mr. Ed"); If ($tv_horse->isa('Animal')) { # Is It An Animal?
Create a table that maps people to the behavior they exhibit to greet others, and then rewrite that previous example using the table:||Create a Table That 地图 People To The Behavior They 展出 To 打招呼 别人, And Then 重写 That Previous Example Using The Table:
The problem is that Gilligan defined turn_toward_port as meaning "turn toward the port on the island, " while the Skipper defined it as "turn toward the left."||The Problem Is That Gilligan Defined turn_toward_port As Meaning "转向 向 The 港口 On The 岛屿, " While The Skipper Defined It As "转向 向 The Left."
If you have a single module (such as a .pm file) in your distribution, it's usually best to grab the version number from there with VERSION_FROM.||If You Have a Single Module (Such As a .Pm File) In Your 分配, It's Usually Best To 抓住 The Version Number From There With VERSION_FROM.
In those cases, we can drop the curly braces, unambiguously forming @$items or $$items[1].||In Those Cases, We Can 落下 The 卷曲的 牙套, 明确 forming @$物品 Or $$物品[1].
For each of the seven items map places into $_, we get a single output result: the number that is 100 greater than the input number.||For Each Of The seven 物品 Map Places Into $_, We Get a Single 出产 Result: The Number That Is 100 更大的 Than The Input Number.
} # end scope block||} # End Scope Block
my @numerically_sorted = sort {||My @numerically_sorted = Sort {
Modules are the building blocks for our programs.||Modules Are The 建筑物 Blocks For Our Programs.
We can dereference a hash reference to get back to the original data.||We Can 废弃 a Hash Reference To Get Back To The Original Data.
for my $greet (\&skipper_greets, \&gilligan_greets) {||For My $打招呼 (\&skipper_greets, \&gilligan_greets) {
List Filtering with grep The grep operator takes a list of values and a "testing expression."||List Filtering With Grep The Grep Operator Takes a List Of Values And a "testing Expression."
Please be aware of all the other reserved method names that can't be used by your OO module (as described in the Exporter manpage).||Please Be 知道的 Of All The Other Reserved Method Names That Can't Be Used By Your OO Module (As Described In The Exporter manpage).
That's what the perldiag manpage is for.||That's What The perldiag manpage Is For.
Documentation||文档
[] Or any other convenient and unique string.||[] Or Any Other 便利的 And 唯一的 String.
If we don't have permission to install modules in the system-wide directories, [*] we can tell Perl to install them under another path by using the PREFIX argument:||If We Don't Have 允许 To 安装 Modules In The System-宽的 directories, [*] We Can Tell Perl To 安装 Them 在 另一个 Path By Using The PREFIX Argument:
How to Build a Horse If we constructed all our horses by hand, we'd most likely make mistakes from time to time.||How To Build a Horse If We 构造 All Our horses By Hand, We'd Most Likely Make mistakes From Time To Time.
In this example, we know that we want to add the talk( ) method to our Horses class, but we haven't actually done it.||In This Example, We Know That We Want To 增添 The 谈话( ) Method To Our Horses Class, But We 还't Actually Done It.
The Mouse package is slightly different because of the extra quietness:||The Mouse Package Is 轻微地 Different Because Of The Extra 平静:
## in Animal sub color {||## In Animal Sub 颜色 {
So, as long as our libraries are in our current working directory, everything is fine.||So, As Long As Our 库 Are In Our Current Working Directory, Everything Is Fine.
The coverage database shows up in cover_db, and the top-level page shows up in cover_db/coverage.html.||The 覆盖率 database Shows Up In cover_db, And The 顶-Level 页 Shows Up In cover_db/coverage.html.
Give yourself extra credit if you thought to do this.||Give 你（们）自己 Extra 信誉 If You Thought To Do This.
Now, let us pump the data from the input files to the output files.||Now, Let Us 泵 The Data From The Input Files To The 出产 Files.
Exercise You can find the answer to this exercise in "Answer for Chapter 19" in the Appendix.||Exercise You Can 寻找 The Answer To This 锻炼 In "Answer For Chapter 19" In The Appendix.
$ginger->[2][1] ${$ginger[2]}[1] $ginger->[2]->[1] ${$ginger->[2]}[1]||$姜->[2][1] ${$姜[2]}[1] $姜->[2]->[1] ${$姜->[2]}[1]
print "ISBN is " . $isbn->as_string . "\n"; print "Country code: " . $isbn->country_code . "\n"; print "Publisher code: " . $isbn->publisher_code . "\n";||Print "ISBN Is " . $isbn->as_string . "\n"; Print "Country Code: " . $isbn->country_code . "\n"; Print "Publisher Code: " . $isbn->publisher_code . "\n";
[] As of Perl 5.8, that is.||[] As Of Perl 5.8, That Is.
We ask the monkey about Ginger, get a number back, and then ask the monkey about Gilligan...again.||We 问 The 猴子 About Ginger, Get a Number Back, And Then 问 The 猴子 About Gilligan...Again.
The result will be only the horses (or racehorses) from the array.||The Result Will Be Only The horses (Or racehorses) From The Array.
our $AUTOLOAD; if ($AUTOLOAD =~ /::(\w+)$/ and grep $1 eq $_, @elements) {||Our $AUTOLOAD; If ($AUTOLOAD =~ /::(\w+)$/ And Grep $1 Eq $_, @Elements) {
You can then retrieve the data but only if the datafile already exists.||You Can Then retrieve The Data But Only If The datafile Already Exists.
The year number is offset by 1900 for historical purposes, so you need to fix that:||The 年 Number Is Offset By 1900 For Historical purposes, So You Need To 固定 That:
Notice that the racehorses and cows die at the end of the block, but the ordinary horses die at the end of the program.||Notice That The racehorses And cows Die At The End Of The Block, But The Ordinary horses Die At The End Of The Program.
Different people have different ideas about testing.||Different People Have Different 思想 About testing.
In any case, you should call the controlling file a Makefile, even though its name may vary as well.||In Any Case, You Should Call The controlling File a Makefile, Even Though Its Name May 变化 As Well.
my @skipper = qw(blue_shirt hat jacket preserver sunscreen); my @professor = qw(sunscreen water_bottle slide_rule batteries radio); check_required_items('skipper', @skipper); check_required_items('professor', @professor);||My @skipper = Qw(blue_shirt 帽子 短外套 preserver sunscreen); My @教授 = Qw(sunscreen water_bottle slide_rule batteries 无线电); check_required_items('skipper', @skipper); check_required_items('教授', @教授);
Package names are like variable names: they consist of alphanumerics and underscores but can't begin with a digit.||Package Names Are Like Variable Names: They 由 Of alphanumerics And underscores But Can't 开始 With a 数字.
Back in the early days of Perl 5, Larry invented the XS language to describe the glue code that Perl needs to talk to C-language functions and libraries.||Back In The Early 天 Of Perl 5, Larry 发明 The XS 语言 To 描写 The 胶水n Code That Perl Needs To 谈话 To C-语言 Functions And 库.
Filename generation||Filename Generation
You'll typically see this with the new method where module authors replace the arrow syntax:||You'我 典型的 See This With The New Method Where Module 作者 归还原处 The 箭 Syntax:
Exercise 3 Here's one way to do it.||Exercise 3 Here's One Way To Do It.
Finally, the methods that work only for the particular instance:||Finally, The Methods That Work Only For The Particular 例子:
or equivalently:||Or 设置:
Inside the second map, which executes first, make a copy of $_.||Inside The Second Map, Which 实行 First, Make a Copy Of $_.
Create them as necessary.||Create Them As 必要的.
But how do we get from a reference back into the original array?||But How Do We Get From a Reference Back Into The Original Array?
The first two digits control the testing order, while the rest of the name gives a hint about the general area of testing.||The First Two digits Control The testing Order, While The 休息 Of The Name Gives a 暗示 About The General Area Of testing.
use Data::Dumper;||Use Data::Dumper;
my @skipper = ...;||My @skipper = ...;
Test::More won't really count it as a failure.||Test::More Won't Really 计算 It As a 失败.
The result is straightforward:||The Result Is 直爽的:
Everything shows up in a directory named cover_db in the current working directory.||Everything Shows Up In a Directory Named cover_db In The Current Working Directory.
We can be fairly certain, or at least assume, that other parts of the system work.||We Can Be 公平地 确信的, Or At Least 假定, That Other 部分 Of The System Work.
Typically, all references to a variable are gone before the variable itself.||Typically, All References To a Variable Are 不见了 Before The Variable Itself.
use lib '/home/gilligan/lib/Navigation/SeatOfPants.pm'; # WRONG||Use lib '/家/gilligan/lib/Navigation/SeatOfPants.pm'; # WRONG
Adding a few more castaways is as simple as putting the entry for the greeting behavior into the hash and adding them into the list of people entering the room.||Adding a Few More castaways Is As Simple As Putting The Entry For The 问候 Behavior Into The Hash And Adding Them Into The List Of People entering The 房间.
not ok 1 1..1 # Gilligan needs preserver sunscreen jacket. # Failed test (/Users/Ginger/Desktop/package_test.pl at line 49) # Looks like you failed 1 test of 1.||Not Ok 1 1..1 # Gilligan Needs preserver sunscreen 短外套. # Failed Test (/Users/Ginger/Desktop/package_test.pl At Line 49) # Looks Like You failed 1 Test Of 1.
We have to include some information for Exporter, and h2xs sets that up for us.||We Have To Include Some Information For Exporter, And h2xs Sets That Up For Us.
We'll get to that in a minute.||We'我 Get To That In a 分钟.
For example, suppose we want only the split digits of numbers ending in 4:||For Example, 猜想 We Want Only The Split digits Of 编号 结局 In 4:
However, now the Skipper decides to modify his navigation.pm library, adding a routine called turn_toward_port that makes a 45-degree turn toward the left (known as "port" in nautical jargon).||However, Now The Skipper decides To Modify 他的 navigation.pm Library, Adding a Routine Called turn_toward_port That 使 a 45-程度 转向 向 The Left (Known As "港口" In nautical jargon).
This ensures that the last evaluated expression is, in fact, true.||This ensures That The Last 评估 Expression Is, In Fact, True.
If you've used other languages, you may have noticed programming tasks that are comparatively easy in Perl.||If You'Ve Used Other Languages, You May Have Noticed Programming Tasks That Are 比较地 Easy In Perl.
Now the module only gives us those two subroutines and leaves our own dirname alone.||Now The Module Only Gives Us Those Two Subroutines And 叶子 Our Own dirname 单独的.
It's easy for people to understand what you meant to test based on a single function name, but that gets harder as you write out several statements to do the same thing.||It's Easy For People To Understand What You 意味着 To Test 基于 On a Single Function Name, But That Gets Harder As You Write Out Several Statements To Do The Same Thing.
They each have their distinct purpose.||They Each Have Their 不同的 Purpose.
my @gilligan = qw(red_shirt hat lucky_socks water_bottle); my @professor = qw(sunscreen water_bottle slide_rule batteries radio); my @skipper = qw(blue_shirt hat jacket preserver sunscreen); my %all = (||My @gilligan = Qw(red_shirt 帽子 lucky_socks water_bottle); My @教授 = Qw(sunscreen water_bottle slide_rule batteries 无线电); My @skipper = Qw(blue_shirt 帽子 短外套 preserver sunscreen); My %All = (
Because of the second point, most files evaluated for require have a cryptic 1; as their last line of code.||Because Of The Second 尖, Most Files 评估 For Require Have a cryptic 1; As Their Last Line Of Code.
Let's add a method or two to get and set the color:||Let's 增添 a Method Or Two To Get And Set The 颜色:
This module gives us several functions that automatically take care of all of the details.||This Module Gives Us Several Functions That Automatically Take Care Of All Of The Details.
$ cat Makefile.PL use 5.008; use ExtUtils::MakeMaker; # See lib/ExtUtils/MakeMaker.pm for details of how to influence # the contents of the Makefile that is written.||$ 猫 Makefile.PL Use 5.008; Use ExtUtils::MakeMaker; # See lib/ExtUtils/MakeMaker.pm For Details Of How To 影响 # The Contents Of The Makefile That Is Written.
They both get an argument list in @_, and we have to make sure we do the right thing.||They Both Get An Argument List In @_, And We Have To Make Sure We Do The Right Thing.
use Test::More; eval "use Test::Pod 1.00"; plan skip_all => "Test::Pod 1.00 required for testing POD" if $@; all_pod_files_ok( 'lib/Maps.pm' );||Use Test::More; Eval "Use Test::Pod 1.00"; 计划平面图 skip_all => "Test::Pod 1.00 要求 For testing POD" If $@; all_pod_files_ok( 'lib/Maps.pm' );
The reference is otherwise unchanged and can still be used with traditional dereferencing operators.[]||The Reference Is Otherwise unchanged And Can Still Be Used With 传统的 dereferencing Operators.[]
In there, put the code you lift for Test::Pod:||In There, Put The Code You 举起 For Test::Pod:
{ package Animal;||{ Package Animal;
package Island::Plotting::Maps;||Package Island::Plotting::Maps;
These are all the sources for transferred bytes seen in this particular logfile.||These Are All The 来源 For transferred 字节 Seen In This Particular logfile.
Invoke make disttest, which builds a distribution archive of everything in MANIFEST, unpacks the archive into a separate directory, and then runs the tests on your distribution.||Invoke Make disttest, Which builds a 分配 archive Of Everything In MANIFEST, unpacks The archive Into a Separate Directory, And Then 跑 The 测试 On Your 分配.
Note that we're still getting the Animal and Horse destructor.||Note That We'Re Still 得到 The Animal And Horse destructor.
(We want a descending sort because the Professor wants the first name on the list to be the person who uses the most pineapples.)||(We Want a descending Sort Because The Professor 要 The First Name On The List To Be The 人 Who Uses The Most pineapples.)
They coordinated their efforts on the perl-packrats mailing list in late 1993 and decided that disk space was getting cheap enough that the same information should be replicated on all sites rather than having specialization on each site.||They coordinated Their efforts On The Perl-packrats 邮寄 List In 迟到的 1993 And 明确的 That disk Space Was 得到 便宜的 Enough That The Same Information Should Be replicated On All sites Rather Than Having specialization On Each 场所.
Using h2xs We'll explain the Makefile.PL process using the awkwardly named h2xs.[] We use h2xs to create a set of template files that are a starting point for our distribution files.||Using h2xs We'我 Explain The Makefile.PL 程序 Using The 笨拙地 Named h2xs.[] We Use h2xs To Create a Set Of template Files That Are a Starting 尖 For Our 分配 Files.
This operator returns a string (the class name) when used on a blessed reference, and undef when used on a string (like a class name).||This Operator Returns a String (The Class Name) When Used On a 有福的 Reference, And Undef When Used On a String (Like a Class Name).
Embedded Documentation Immediately following the mandatory true value in the file, you'll find the _ _END_ _ marker.||Embedded 文档 Immediately Following The 强制性 True Value In The File, You'我 寻找 The _ _END_ _ marker.
But you can fix the problem simply by changing the two pairs of curly braces to parentheses.||But You Can 固定 The Problem Simply By Changing The Two 双 Of 卷曲的 牙套 To Parentheses.
Before, we would have seen the bareword between the angle brackets:||Before, We Would Have Seen The Bareword Between The 角 支架:
However, the downside of any of these methods (other than the use lib method) is that they require you to do something more than just execute the file.||However, The downside Of Any Of These Methods (Other Than The Use lib Method) Is That They Require You To Do Something More Than Just Execute The File.
The PAUSE ID is your passport to contributing to CPAN.||The PAUSE ID Is Your 护照 To contributing To Perl综合典藏网.
This module lets us write portable code easily, at least where file specs are concerned.||This Module Lets Us Write 手提的 Code 容易地, At Least Where File specs Are 有关的.
It wasn't necessary to code the castaways' names into this program, because they will be read in as data.||It Wasn't 必要的 To Code The castaways' Names Into This Program, Because They Will Be Read In As Data.
The inner map walks over this item list, executing the expression to construct an anonymous array reference for each item.||The Inner Map walks 在 This 条款 List, 执行 The Expression To Construct An Anonymous Array Reference For Each 条款.
Perl just does the right thing.||Perl Just Does The Right Thing.
For example, you'll learn how to work with multiple programmers on the same project.||For Example, You'我 学习 How To Work With Multiple Programmers On The Same 计划.
Your users will thank you for it.||Your Users Will 谢谢 You For It.
Now $average is either the quotient or undef, depending upon whether the operation completed successfully or not.||Now $平均的 Is Either The quotie(绑定操作符)nt Or Undef, Depending Upon Whether The Operation completed 成功地 Or Not.
We can write a routine to display the data.||We Can Write a Routine To 陈列 The Data.
# files or symbolic links|| # Files Or Symbolic 链接
First, start with the package directive and use strict:||First, Start With The Package 命令 And Use Strict:
Where is our code going to be stored on the system?||Where Is Our Code Going To Be Stored On The System?
print map { " " .||Print Map { " " .
The README is used to introduce the module and provide instructions on how to install the module, any machine dependencies it may have (for example C compilers and installed libraries) and any other information that should be provided before the module is installed.||The README Is Used To 介绍 The Module And Provide instructions On How To 安装 The Module, Any 机器 dependencies It May Have (For Example C compilers And 安装 库) And Any Other Information That Should Be Provided Before The Module Is 安装.
Creating an Anonymous Array Directly In the get_provisions_list routine earlier, we created a half dozen array names that we used only so that we could take a reference to them immediately afterward.||Creating An Anonymous Array Directly In The get_provisions_list Routine Earlier, We Created a 一半 一打 Array Names That We Used Only So That We Could Take a Reference To Them 立即 后来.
This is great for compile-as-you-go programs because it minimizes startup overhead.||This Is 大的 For Compile-As-You-Go Programs Because It minimizes startup 头上的.
What do we do then?||What Do We Do Then?
[*] It's the simplest, but rarely used in real code for reasons we'll show shortly.||[*] It's The simplest, But 难得 Used In Real Code For Reasons We'我 Show 立刻.
They're generally looking for speakers (usually for the meeting coming up in the next week or two), and the group size is usually small enough to be a nice casual setting.||They'Re Generally 看 For speakers (Usually For The 会议 coming Up In The 下一次 星期 Or Two), And The Group Size Is Usually Small Enough To Be a Nice 偶然的 Setting.
The test harness invokes each file separately, so an exit or die terminates only the testing in that file, not the whole testing process.[*]||The Test 支配 invokes Each File 分别地, So An Exit Or Die 终止 Only The testing In That File, Not The Whole testing 程序.[*]
Object Destruction In the previous two chapters, we looked at basic object creation and manipulation.||Object Destruction In The Previous Two chapters, We looked At 基本的 Object 创造 And 操纵.
Mostly, it's important to remember everything we have ever done wrong while programming (or heard other people do), and then test that we didn't do it again for this project.||Mostly, It's Important To 记得 Everything We Have 曾经 Done 错误的 While Programming (Or heard Other People Do), And Then Test That We Didn't Do It Again For This 计划.
Cleaning Up After Yourself Suppose our object uses a temporary file to hold data that won't fit entirely in memory.||Cleaning Up After Yourself Suppose Our Object Uses a temporary File To Hold Data That Won't 适合的 完全地 In Memory.
Go up one level to the Skipper's home directory, which is likely to contain a few files along with the personal bin directory:||Go Up One Level To The Skipper's 家 Directory, Which Is Likely To Contain a Few Files 沿着 With The 私人的 bin Directory:
my $ref_to_gilligan_info = {||My $ref_to_gilligan_info = {
We modify the name method first to notice the change:||We Modify The Name Method First To Notice The Change:
Thus, Gilligan's program ends up looking like:||Thus, Gilligan's Program Ends Up 看 Like:
We pull in the Exporter module and add required_items_ok to @EXPORT, since we want that function to show in the calling namespace, just as we discussed in Chapter 15.||We 拖 In The Exporter Module And 增添 required_items_ok To @EXPORT, Since We Want That Function To Show In The Calling Namespace, Just As We 讨论 In Chapter 15.
Originally, this code was written entirely by hand, but the h2xs tool was written to scan simple C-include header files (ending in .h) and generate most of the XS directly.||Originally, This Code Was Written 完全地 By Hand, But The h2xs 工具 Was Written To 浏览 Simple C-Include Header Files (结局 In .h) And Generate Most Of The XS 直接地.
then we can't just swap it around to the indirect notation:||Then We Can't Just 交换 It Around To The Indirect 符号:
Skipper: Hey there, Gilligan!||Skipper: Hey There, Gilligan!
(The Storable module is standard in recent versions of Perl, but you can always install it from the CPAN if it's missing.)||(The Storable Module Is Standard In 近来的 Versions Of Perl, But You Can Always 安装 It From The Perl综合典藏网 If It's Missing.)
for my $person (@all_with_names) {||For My $人 (@all_with_names) {
It's a nice system that has worked quite well over the years.||It's a Nice System That Has 工作 Quite Well 在 The Years.
We don't have to create a new directory handle if we decide we want to go through the list again (perhaps later in the program).||We Don't Have To Create a New Directory Handle If We Decide We Want To Go 通过 The List Again (也许 更晚 In The Program).
The map operator evaluates the expression in a list context (not a scalar context like grep).||The Map Operator 评价 The Expression In a List Context (Not a Scalar Context Like Grep).
Its trick is that AUTOLOAD is completely invisible to the subroutine.||Its 诡计 Is That AUTOLOAD Is 完全地 Invisible To The Subroutine.
Finally, the instance methods are defined:||Finally, The 例子 Methods Are Defined:
Our first tag, all, includes all of the exportable symbols (everything in both @EXPORT and @EXPORT_OK).||Our First 标签, All, 包括 All Of The 可供出口的 Symbols (Everything In Both @EXPORT And @EXPORT_OK).
As long as we have pairs, we keep passing the list through the grep structure:||As Long As We Have 双, We 保持 Passing The List 通过 The Grep Structure:
The is( ) test checks for string equality.||The Is( ) Test 检查 For String 平等.
Add a test for the POD documentation using Test::Pod.||Add a Test For The POD 提供文件 Using Test::Pod.
[*] If there is a conflict among the methods of Horse and Racer, or if their implementations aren't able to work together, the situation can become much more difficult.||[*] If There Is a 冲突 Among The Methods Of Horse And Racer, Or If Their 实现 还't Able To Work Together, The 形势 Can 变成 Much More 困难的.
A hash reference prints as a string that looks like HASH(0x1a2b3c), showing the hexadecimal memory address of the hash.||A Hash Reference Prints As a String That Looks Like HASH(0x1a2b3c), showing The hexadecimal Memory 地址 Of The Hash.
my @odd_digit_sums = @input_numbers[ @indices_of_odd_digit_sums ];||My @odd_digit_sums = @input_numbers[ @indices_of_odd_digit_sums ];
We'd have a much easier time if filehandles had sigils! ''''''''''''''''''''''''' sub log_message {||We'd Have a Much Easier Time If Filehandles Had sigils! ''''''''''''''''''''''''' Sub log_message {
# unknown method|| # Unknown Method
Here we have a base case where $n is less than or equal to 1, which does not invoke the recursive instance, along with a recursive case for $n greater than 1, which calls the routine to handle a portion of the problem (i.e., compute the factorial of the next lower number).||Here We Have a Base Case Where $n Is 更少的 Than Or Equal To 1, Which Does Not 调用 The 递归 例子, 沿着 With a 递归 Case For $n 更大的 Than 1, Which Calls The Routine To Handle a 一份 Of The Problem (i.e., 计算 The factorial Of The 下一次 Lower Number).
And we don't always need to produce the same number of output items.||And We Don't Always Need To Produce The Same Number Of 出产 物品.
If the expression evaluates to a true value, grep passes $_ on to the output list.||If The Expression 评价 To a True Value, Grep 经过 $_ On To The 出产 List.
However, even adding:||However, Even Adding:
Better yet, are you reinventing a subset of something that already exists, or can you contribute your work as a patch to another module?||Better 仍然, Are You reinventing a 子集 Of Something That Already Exists, Or Can You 捐献 Your Work As a 补丁 To 另一个 Module?
(The modern interface in the URI module doesn't export such a constructor.)||(The Modern Interface In The URI Module Doesn't Export Such a 构造函数.)
use File::Basename;||Use File::Basename;
Because we can leave out the line that initializes the hash element's value to a reference to an empty array:||Because We Can 出发 Out The Line That 初始化 The Hash Element's Value To a Reference To An Empty Array:
Using the -s operator to determine the file's size is an expensive operation; by caching its value, you can save some time.||Using The -s Operator To 决心 The File's Size Is An Expensive Operation; By 缓存 Its Value, You Can Save Some Time.
We run a Perl script that creates a file that pulls together all the information it needs to prepare and install the code.||We Run a Perl 临时单据 That Creates a File That pulls Together All The Information It Needs To 准备 And 安装 The Code.
my $top; $top->[2]->[4] = 'lee-lou';||My $顶; $顶->[2]->[4] = 'lee-lou';
a Mouse goes squeak! [but you can barely hear it!]||a Mouse 去 squeak! [But You Can 赤裸裸地 听见 It!]
Exercise 1 This is similar to what you saw in Chapter 5, but now it uses Storable.||Exercise 1 This Is Similar To What You 锯 In Chapter 5, But Now It Uses Storable.
my $subtract = -3 + 3; like($subtract, qr/^-?0$/, '-3 + 3 = = 0');||My $减去 = -3 + 3; Like($减去, qr/^-?0$/, '-3 + 3 = = 0');
In the subroutine, the first parameter is a hashref, so we dereference it to get the keys and the corresponding values:||In The Subroutine, The First Parameter Is a Hashref, So We 废弃 It To Get The Keys And The 相应的 Values:
A recursive subroutine has a branch from which it calls itself to handle a portion of the task, and a branch that doesn't call itself to handle the base cases.||A 递归 Subroutine Has a 树枝 From Which It Calls Itself To Handle a 一份 Of The 工作, And a 树枝 That Doesn't Call Itself To Handle The Base Cases.
The eval catches the syntax error and puts the message in $@, which we check immediately after calling eval.||The Eval catches The Syntax Error And 把 The 音讯 In $@, Which We Check 立即 After Calling Eval.
sub DESTROY { # instance method, automatically invoked||Sub DESTROY { # 例子 Method, Automatically invoked
That's not very useful, unless we're creating a different hash from them.||That's Not Very Useful, Unless We'Re Creating a Different Hash From Them.
However, if Perl doesn't find Class::method, it examines @Class::ISA (recursively) to locate a package that does indeed contain method and then invokes that version instead.||However, If Perl Doesn't 寻找 Class::Method, It examines @Class::ISA (Recursively) To Locate a Package That Does 的确 Contain Method And Then invokes That Version Instead.
my @professor = qw(sunscreen water_bottle slide_rule batteries radio); check_required_items('Professor', \@professor);||My @教授 = Qw(sunscreen water_bottle slide_rule batteries 无线电); check_required_items('Professor', \@教授);
Gilligan walks into the room.||Gilligan walks Into The 房间.
my @end_in_4 = grep /4$/, @input_numbers;||My @end_in_4 = Grep /4$/, @input_numbers;
The Schwartzian Transform has since proven to be a very nice thing to have in our bag of sorting tricks.||The Schwartzian Transform Has Since proven To Be a Very Nice Thing To Have In Our 袋子 Of sorting 把戏.
Copyright 2006 by Ginger Grant||Copyright 2006 By Ginger Grant
Answer for Chapter 7 A.6.1.||Answer For Chapter 7 A.6.1.
Archive completeness||存档文件 completeness
That's a really noisy piece of syntax.||That's a Really 吵闹的 件 Of Syntax.
Start of program.||Start Of Program.
The easiest is to just spell out the package name:||The easiest Is To Just 拼写 Out The Package Name:
Can't call method "isa" on unblessed reference at ...||Can't Call Method "isa" On unblessed Reference At ...
If Animal also had an @ISA, Perl would check there too.[] Typically, each @ISA has only one element (multiple elements means multiple inheritance and multiple headaches), so we get a nice tree of inheritance.[]||If Animal Also Had An @ISA, Perl Would Check There Too.[] Typically, Each @ISA Has Only One Element (Multiple Elements Means Multiple Inheritance And Multiple headaches), So We Get a Nice 树 Of Inheritance.[]
Now, we should get all destinations.||Now, We Should Get All destinations.
# finds $VERSION|| # 发现 $VERSION
The next time you have the same name in $name, the ||= operator kicks in.||The 下一次 Time You Have The Same Name In $Name, The ||= Operator kicks In.
Exercise 1 Since you're starting with your distribution from the last chapter, we don't have much code to show you.||Exercise 1 Since You'Re Starting With Your 分配 From The Last 章, We Don't Have Much Code To Show You.
And, like most things in Perl, there's more than one way to do it.||And, Like Most Things In Perl, There's More Than One Way To Do It.
Finally, the whole thing is wrapped in a BEGIN block.||Finally, The Whole Thing Is wrapped In a BEGIN Block.
This invocation quotes the entire output by prefixing each line with the given string.||This 调用 引用 The 完全的 出产 By prefixing Each Line With The Given String.
If the number of tests disagree or there's no footer (and no header), it's a broken result.||If The Number Of 测试 意见不合 Or There's No footer (And No Header), It's a Broken Result.
The Skipper needs a way to write the code in one place and then share it among many programs.||The Skipper Needs a Way To Write The Code In One Place And Then 份 It Among Many Programs.
In CPANPLUS, the successor to CPAN.pm, we do something similar:||In Perl综合典藏网PLUS, The 继承人 To Perl综合典藏网.Pm, We Do Something Similar:
sub scale_map {||Sub scale_map {
sandbar, an empty directory||sandbar, An Empty Directory
(You don't have to type all of this code.||(You Don't Have To Type All Of This Code.
stdout_is { print "Welcome Aboard" } "Welcome Aboard";||stdout_is { Print "Welcome Aboard" } "Welcome Aboard";
You might think that we should just add our module directory to @INC before we call the use.||You Might 想 That We Should Just 增添 Our Module Directory To @INC Before We Call The Use.
But with a bit more magic, we can get there as well:||But With a Bit More Magic, We Can Get There As Well:
All of those show up in the calling package unless we tell use otherwise.||All Of Those Show Up In The Calling Package Unless We Tell Use Otherwise.
The only things acceptable to indirect object syntax are a bareword (e.g., a class name), a simple scalar variable, or braces denoting a block returning either a blessed reference or a classname.[*] This means we have to write it like so:||The Only Things Acceptable To Indirect Object Syntax Are a Bareword (e.g., a Class Name), a Simple Scalar Variable, Or 牙套 denoting a Block Returning Either a 有福的 Reference Or a 名字.[*] This Means We Have To Write It Like So:
Class->class_method(@args); $instance->instance_method(@other);||Class->class_method(@Args); $例子->instance_method(@Other);
But that's not very nice, especially if we need to keep doing this kind of task repeatedly.||But That's Not Very Nice, Especially If We Need To 保持 Doing This Kind Of 工作 重复地.
We now have everything we need to finish the task.||We Now Have Everything We Need To 结束 The 工作.
Exercise 1 They're all referring to the same thing, except for the second one, ${$ginger[2]}[1].||Exercise 1 They'Re All Referring To The Same Thing, Except For The Second One, ${$姜[2]}[1].
And that goes from simple to ugly in one step.||And That 去 From Simple To 丑恶的 In One 脚步.
Be aware though: use weak references carefully and don't just throw them at a problem of circular references.||Be 知道的 Though: Use 弱的 References 仔细 And Don't Just 投 Them At a Problem Of 圆圈的 References.
Exporter In Chapter 3, we showed you how to use modules, some of which pulled functions into the current namespace.||Exporter In Chapter 3, We showed You How To Use Modules, Some Of Which 拉 Functions Into The Current Namespace.
Let's replace all that clutter with that simple pragma we used before:||Let's 归还原处 All That clutter With That Simple Pragma We Used Before:
It works all the way back to perl5.6, at least.||It Works All The Way Back To perl5.6, At Least.
We simply put the right thing in the second argument.||We Simply Put The Right Thing In The Second Argument.
instance_method $somehash->{$somekey}->[42] @parms;||instance_method $somehash->{$somekey}->[42] @Parms;
That's because once all those little numbers in square brackets were written, we discovered that we didn't know how to add.||That's Because Once All Those Little 编号 In 正方形 支架 Were Written, We discovered That We Didn't Know How To 增添.
The Makefile.PL method has been around for a long time, and it mostly works, except in odd cases.||The Makefile.PL Method Has Been Around For a Long Time, And It Mostly Works, Except In 古怪的 Cases.
Maybe you have noticed that, in the previous code, we used $File::Find::name for the item's name.||Maybe You Have Noticed That, In The Previous Code, We Used $File::Find::Name For The 条款's Name.
As the developer of the module, use this makefile to build and test your module and prepare a distribution file:||As The developer Of The Module, Use This makefile To Build And Test Your Module And 准备 a 分配 File:
As it's written, this can be done by giving an empty file (such as /dev/null) as the input.||As It's Written, This Can Be Done By Giving An Empty File (Such As /Dev/Null) As The Input.
my $racer = RaceHorse->named('Billy Boy'); # record the outcomes: 3 wins, 1 show, 1 loss $racer->won; $racer->won; $racer->won; $racer->showed; $racer->lost; print $racer->name, ' has standings of: ', $racer->standings, ".\n";||My $racer = RaceHorse->Named('Billy Boy'); # Record The outcomes: 3 赢得, 1 Show, 1 丧失 $racer->Won; $racer->Won; $racer->Won; $racer->showed; $racer->Lost; Print $racer->Name, ' Has standings Of: ', $racer->standings, ".\n";
If you omit that check, you can get warnings of an undefined value during the comparison with $begin and $end.||If You 省略 That Check, You Can Get 警告 Of An Undefined Value 在 The 比较 With $开始 And $End.
If you expect to add features to Animal that would be needed for Person, it makes sense for Person to inherit from Animal.||If You 盼望 To 增添 特征 To Animal That Would Be Needed For Person, It 使 Sense For Person To 继承 From Animal.
This means that even if navigation.pm contains require "drop_anchor.pm", Perl imports the drop_anchor.pm file exactly once, and we'll get no annoying error messages about duplicate subroutine definitions (see Figure 10-2).||This Means That Even If navigation.pm 包含 Require "drop_anchor.pm", Perl Imports The drop_anchor.pm File Exactly Once, And We'我 Get No annoying Error Messages About 二重的 Subroutine 定义 (See Figure 10-2).
[] The ambiguity shows up because print( ) itself is a method called on the filehandle.||[] The 歧义性 Shows Up Because Print( ) Itself Is a Method Called On The Filehandle.
To create @_, Perl copies the entire contents of the array to be scanned.||To Create @_, Perl Copies The 完全的 Contents Of The Array To Be scanned.
Exercise 2 [40 min] The Professor's datafile (mentioned earlier in this chapter) is available as coconet.dat in the files you can download from the O'Reilly web site.||Exercise 2 [40 min] The Professor's datafile (Mentioned Earlier In This 章) Is Available As coconet.dat In The Files You Can download From The O'Reilly 网 场所.
Just because we wrote them next to each other doesn't mean they execute in that order.||Just Because We 写 Them 下一次 To Each Other Doesn't Mean They Execute In That Order.
The implementation given earlier returns the newly updated value.||The 实行 Given Earlier Returns The 新 Updated Value.
Anytime we need an element of a list to be a reference to an array, we can create that reference with an anonymous array constructor.||Anytime We Need An Element Of a List To Be a Reference To An Array, We Can Create That Reference With An Anonymous Array 构造函数.
Recalling the operation of require from earlier, this means Perl looks in the current value of @INC, checking through each directory for a subdirectory named Island that contains a further subdirectory named Plotting that contains the file named Maps.pm.[*] If Perl doesn't find an appropriate file after looking at all of @INC, the program dies.[] Otherwise, the first file found is read and evaluated.||Recalling The Operation Of Require From Earlier, This Means Perl Looks In The Current Value Of @INC, Checking 通过 Each Directory For a 子目录 Named Island That 包含 a Further 子目录 Named Plotting That 包含 The File Named Maps.pm.[*] If Perl Doesn't 寻找 An 恰当的 File After 看 At All Of @INC, The Program Dies.[] Otherwise, The First File Found Is Read And 评估.
Its initial value is undef, which acts like a zero when you add 1250 to it, and the result of 1250 is inserted back into the hash.||Its Initial Value Is Undef, Which 徒 Like a 零 When You 增添 1250 To It, And The Result Of 1250 Is 插入 Back Into The Hash.
The six subroutines (and the three $total_size variables they share) are reference counted.||The six Subroutines (And The Three $total_size Variables They 份) Are Reference 数.
# yes, select it|| # Yes, 挑选 It
Essential Testing As we briefly described in Chapter 16, a distribution contains a testing facility that we can invoke from make test.||Essential Testing As We 简单地 Described In Chapter 16, a 分配 包含 a testing 方便 That We Can 调用 From Make Test.
Instead of using a bareword for the filehandle name, we use a scalar variable whose value is undef.||Instead Of Using a Bareword For The Filehandle Name, We Use a Scalar Variable Whose Value Is Undef.
Any mention of @homeport will then be the newly introduced lexical variable, but a fully qualified mention of @Navigation::homeport accesses the package variable instead.||Any 提及 Of @homeport Will Then Be The 新 Introduced Lexical Variable, But a Fully 有资格的 提及 Of @Navigation::homeport Accesses The Package Variable Instead.
In this case, it's just Cow.||In This Case, It's Just Cow.
Ginger walks into the room.||Ginger walks Into The 房间.
Exercise 1 [15 min] Using the glob operator, a naive sort of every name in the /bin directory by their relative sizes might be written as:||Exercise 1 [15 min] Using The Glob Operator, a 天真的 Sort Of Every Name In The /bin Directory By Their 亲戚 sizes Might Be Written As:
There's only one reason to get back to the original subroutine by dereferencing the coderef: to invoke it.||There's Only One Reason To Get Back To The Original Subroutine By dereferencing The coderef: To 调用 It.
But now, how can we tell Perl to pull in that program snippet from another file?||But Now, How Can We Tell Perl To 拖 In That Program snippet From 另一个 File?
This construct invokes the subroutine currently referenced by $ref_to_greeter, passing it the single Gilligan parameter.||This Construct invokes The Subroutine Currently 参考 By $ref_to_greeter, Passing It The Single Gilligan Parameter.
If our code is short enough, we might want to skip the step where we define a named subroutine and use an anonymous one.||If Our Code Is 短的 Enough, We Might Want To 跳过 The 脚步 Where We Define a Named Subroutine And Use An Anonymous One.
[*] Have you ever wondered why there is no comma after the filehandle portion of the print?||[*] Have You 曾经 wondered Why There Is No 逗号 After The Filehandle 一份 Of The Print?
Here's some code to try; it should list only items that were last modified on the most recent Monday, although you could easily change it to work with a different day.||Here's Some Code To Try; It Should List Only 物品 That Were Last Modified On The Most 近来的 Monday, Although You Could 容易地 Change It To Work With a Different 一天.
Next, let's provide some access methods:||Next, Let's Provide Some Access Methods:
15.3. @EXPORT and @EXPORT_OK The import provided by Exporter examines the @EXPORT variable in the module's package to determine which variables it exports by default.||15.3. @EXPORT And @EXPORT_OK The Import Provided By Exporter examines The @EXPORT Variable In The Module's Package To 决心 Which Variables It exports By Default.
Here, the lib pragma takes one or more arguments and adds them at the beginning of the @INC array, just like unshift did before.[*] It works because it executes at compile time, not runtime.||Here, The lib Pragma Takes One Or More Arguments And Adds Them At The 开端 Of The @INC Array, Just Like unshift Did Before.[*] It Works Because It 实行 At Compile Time, Not Runtime.
If we replace the outer parentheses (on the first and last lines) with square brackets, we construct an anonymous array that's two elements long and then take the reference to that array as the only element of the ultimate @skipper_with_name array.[*] So, in summary, if we have this syntax:||If We 归还原处 The 外部的 Parentheses (On The First And Last Lines) With 正方形 支架, We Construct An Anonymous Array That's Two Elements Long And Then Take The Reference To That Array As The Only Element Of The 最终的 @skipper_with_name Array.[*] So, In 概要, If We Have This Syntax:
Exercise 1 [25 min] The Oogaboogoo natives on the island have unusual names for the days and months.||Exercise 1 [25 min] The Oogaboogoo natives On The 岛屿 Have 不寻常的 Names For The 天 And 月.
Storing it in a variable is convenient for writing the program and makes it easy to change later.||Storing It In a Variable Is 便利的 For 写作 The Program And 使 It Easy To Change 更晚.
That can break our program in hard-to-understand ways unless we take @INC into consideration.||That Can 打破 Our Program In 硬的-To-Understand Ways Unless We Take @INC Into 考虑.
They provide reusable subroutines, variables, and even object-oriented classes.||They Provide reusable Subroutines, Variables, And Even Object-Oriented 类.
The punctuation mark variables, such as $_, $2, and $!, are either all lexicals or forced into package main, so when we write $., we never get $Navigation::. by mistake.||The 准时 痕迹 Variables, Such As $_, $2, And $!, Are Either All Lexicals Or 迫使 Into Package Main, So When We Write $., We Never Get $Navigation::. By 错误.
As in the case of isa, we can test for acceptable behaviors with the can method.||As In The Case Of isa, We Can Test For Acceptable Behaviors With The Can Method.
Here, we go through the operators + - * / and use each of those inside our eval code.||Here, We Go 通过 The Operators + - * / And Use Each Of Those 里面 Our Eval Code.
That's everything after the last ::, so we use the substitution operator to get rid of everything up to that point.||That's Everything After The Last ::, So We Use The 代替 Operator To Get 使摆脱 Of Everything Up To That 尖.
For example, suppose an animal wanted to record its pedigree.||For Example, 猜想 An 动物 想要 To Record Its pedigree.
The modules area also contains indices that are generally in easy-to-parse-with-Perl formats, such as the Data::Dumper output for the detailed module index.||The Modules Area Also 包含 indices That Are Generally In Easy-To-Parse-With-Perl Formats, Such As The Data::Dumper 出产 For The Detailed Module Index.
This is fine for non-object-oriented modules, but object-oriented modules typically don't export anything since they require the user to call methods on an object.||This Is Fine For Non-Object-Oriented Modules, But Object-Oriented Modules 典型的 Don't Export Anything Since They Require The User To Call Methods On An Object.
At the beginning of our test module, we create a new Test::Builder object that we assign to the lexical variable $Test, which is scoped to the entire file.[*]||At The 开端 Of Our Test Module, We Create a New Test::Builder Object That We Assign To The Lexical Variable $Test, Which Is Scoped To The 完全的 File.[*]
For example, let's say the Professor gets an island-area network up and running (perhaps using Coco-Net or maybe Vines) and now wants to track the traffic from host to host.||For Example, Let's Say The Professor Gets An 岛屿-Area 网络 Up And 连续的 (也许 Using Coco-Net Or 或许 Vines) And Now 要 To 径赛 The 交通 From 一大群 To 一大群.
First, the require is a package-name require, rather than the string-expression require from Chapter 10.||First, The Require Is a Package-Name Require, Rather Than The String-Expression Require From Chapter 10.
As we can see, Bessie had no home by being booted out of the barn immediately, so she also died.||As We Can See, Bessie Had No 家 By Being booted Out Of The 谷仓 立即, So 她 Also died.
Start with sum( ).||Start With 总数( ).
Answers for Chapter 2||Answers For Chapter 2
Perl sticks a reference to an empty anonymous hash in that element, which it then immediately extends to include the element with a key of gilligan.crew.hut.||Perl sticks a Reference To An Empty Anonymous Hash In That Element, Which It Then 立即 Extends To Include The Element With a Key Of gilligan.crew.小屋.
Now we can say:||Now We Can Say:
The keys to %EXPORT_TAGS are the group labels, and the hash values are anonymous arrays of symbols that belong to that tag.||The Keys To %EXPORT_TAGS Are The Group labels, And The Hash Values Are Anonymous Arrays Of Symbols That 属于 To That 标签.
To most of us, it's just POD.||To Most Of Us, It's Just POD.
Take $root.||Take $Root.
If Perl did not find Horse::sound, it would walk up the @Horse::ISA list to try to find the method in one of the superclasses, just as for a class method.||If Perl Did Not 寻找 Horse::声, It Would 步行 Up The @Horse::ISA List To Try To 寻找 The Method In One Of The 策略, Just As For a Class Method.
[*] After you make it through this book, you should be able to use Module::CoreList to discover that count for yourself.||[*] After You Make It 通过 This 书, You Should Be Able To Use Module::CoreList To 发现 That 计算 For 你（们）自己.
Typing perl -V on the command line shows what these directories are, in the last dozen lines of the output.||Typing Perl -V On The 命令 Line Shows What These directories Are, In The Last 一打 Lines Of The 出产.
The import method is just a regular method, so we can make it do anything that we want.||The Import Method Is Just a Regular Method, So We Can Make It Do Anything That We Want.
The isa method tests to see whether a given class or instance is a member of a given class or a member of a class that inherits from the given class.||The isa Method 测试 To See Whether a Given Class Or 例子 Is a Member Of a Given Class Or a Member Of a Class That 继承 From The Given Class.
If an error happens while running code inside an eval block, the block is done executing.||If An Error Happens While 连续的 Code 里面 An Eval Block, The Block Is Done 执行.
PERL5LIB=/home/skipper/perl-lib; export PERL5LIB||PERL5LIB=/家/skipper/Perl-lib; Export PERL5LIB
Once we have our regular expression, we do that same thing we did in the previous answer.||Once We Have Our 正则表达式, We Do That Same Thing We Did In The Previous Answer.
However, the modules portion has come to be the largest and most interesting part of the CPAN.||However, The Modules 一份 Has 来到 To Be The largest And Most Interesting Part Of The Perl综合典藏网.
Have tolerance.||Have 宽容.
Well, we can build a table first.||Well, We Can Build a Table First.
We still use Test::More to set the plan.[*]||We Still Use Test::More To Set The 计划平面图.[*]
In this example, we need to make a Horse object an instance variable of a RaceHorse and put the rest of the data in separate instance variables.||In This Example, We Need To Make a Horse Object An 例子 Variable Of a RaceHorse And Put The 休息 Of The Data In Separate 例子 Variables.
The code for that is a difference of one character.||The Code For That Is a Difference Of One Character.
That's certainly what the Professor would do.||That's Certainly What The Professor Would Do.
my $countdown = 10;||My $countdown = 10;
When we pass in the instance, we'll use a blessed scalar reference as a string, which shows up as we showed it just nowsimilar to a stringified reference, but with the class name in front.||When We Pass In The 例子, We'我 Use a 有福的 Scalar Reference As a String, Which Shows Up As We showed It Just nowsimilar To a stringified Reference, But With The Class Name In Front.
Answers for Chapter 6 A.5.1.||Answers For Chapter 6 A.5.1.
We're not going to import a subroutine named debug.||We'Re Not Going To Import a Subroutine Named debug.
If we don't like that, we can make a fresh copy so the two do not reference each other.||If We Don't Like That, We Can Make a 新鲜的 Copy So The Two Do Not Reference Each Other.
which constructs an argument list of:||Which Constructs An Argument List Of:
Like Learning Perl, this book relegates some of the more esoteric items out of the way for the first reading and places those items in footnotes.[*] You should skip those the first time through and pick them up on a rereading.||Like Learning Perl, This 书 relegates Some Of The More esoteric 物品 Out Of The Way For The First 读书 And Places Those 物品 In footnotes.[*] You Should 跳过 Those The First Time 通过 And 拣 Them Up On a rereading.
Exercise 2 [30 min] Using the final version of check_required_items, write a subroutine check_items_for_all that takes a hash reference as its only parameter, pointing at a hash whose keys are the people aboard the Minnow and whose corresponding values are array references of the things they intend to bring onboard.||Exercise 2 [30 min] Using The 最终的 Version Of check_required_items, Write a Subroutine check_items_for_all That Takes a Hash Reference As Its Only Parameter, 指向 At a Hash Whose Keys Are The People 船上 The Minnow And Whose 相应的 Values Are Array References Of The Things They 打算 To 拿来 onboard.
When we assign one typeglob to another, we create aliases to the same data.||When We Assign One typeglob To 另一个, We Create Aliases To The Same Data.
[*] Particularly, if Animal has a custom isa method (perhaps it rejects a mutant branch of talking animals in the family tree), calling UNIVERSAL::isa skips past Animal::isa and may give you the wrong answer.||[*] Particularly, If Animal Has a 风俗 isa Method (也许 It rejects a mutant 树枝 Of 说话 animals In The 家庭 树), Calling UNIVERSAL::isa 翻斗车 过去的 Animal::isa And May Give You The 错误的 Answer.
We can do that with the like( ) function:||We Can Do That With The Like( ) Function:
Now we can use it to construct the larger list:||Now We Can Use It To Construct The larger List:
is( sqrt, 0, 'sqrt( ) works on $_ (undefined) by default' );||Is( sqrt, 0, 'sqrt( ) Works On $_ (Undefined) By Default' );
The trick is to store the output channels in the same variable that you'll use for the print statement.||The 诡计 Is To 商店 The 出产 channels In The Same Variable That You'我 Use For The Print Statement.
my @tv_horses = map Horse->named($_), ('Trigger', 'Mr. Ed'); $_->eat('an apple') for @tv_horses; # their last meal print "End of program.\n";||My @tv_horses = Map Horse->Named($_), ('Trigger', 'Mr. Ed'); $_->吃('An 苹果') For @tv_horses; # Their Last 膳食 Print "End Of Program.\n";
That's fine once we're shipping the code, but while we're testing, retesting (retesting some more), and adding more tests, we don't want to keep updating that number to keep the test harness from complaining about too many or too few tests.||That's Fine Once We'Re 船运 The Code, But While We'Re testing, retesting (retesting Some More), And Adding More 测试, We Don't Want To 保持 updating That Number To 保持 The Test 支配 From complaining About Too Many Or Too Few 测试.
The output from this method ends up in the test.out file.||The 出产 From This Method Ends Up In The test.out File.
print Dump(\%total_bytes);||Print Dump(\%total_bytes);
Thus, we wasted some brain cells to come up with a name for the subroutine used only in one other place, to initialize the data structure.||Thus, We 浪费 Some 脑子 cells To 来到 Up With a Name For The Subroutine Used Only In One Other Place, To Initialize The Data Structure.
Answers for Chapter 15 A.14.1.||Answers For Chapter 15 A.14.1.
After reading the data, use Storable again to write it back out to the same disk file.||After 读书 The Data, Use Storable Again To Write It Back Out To The Same disk File.
If the maintainer of Horse or Animal ever changes representation or names of variables, there could be a collision, which might go undetected until that important day when we're showing off our code to the investors.||If The maintainer Of Horse Or Animal 曾经 Changes 表示 Or Names Of Variables, There Could Be a 猛烈碰拉, Which Might Go undetected Until That Important 一天 When We'Re showing Off Our Code To The investors.
In particular, this is the "magic goto."||In Particular, This Is The "Magic Goto."
my @skipper = qw(blue_shirt hat jacket preserver sunscreen); check_required_items('The Skipper', \@skipper);||My @skipper = Qw(blue_shirt 帽子 短外套 preserver sunscreen); check_required_items('The Skipper', \@skipper);
For example, we can assign undef to the variable:||For Example, We Can Assign Undef To The Variable:
So, the rule is:||So, The Rule Is:
In this example, it doesn't really matter what the object actually looks like.||In This Example, It Doesn't Really Matter What The Object Actually Looks Like.
${ $crew[0] } { 'name' } my $ref = $crew[0]; $$ref{'name'} $crew[0]->{'name'} $crew[0]{'name'}||${ $（飞机等的）全体人员[0] } { 'Name' } My $Ref = $（飞机等的）全体人员[0]; $$Ref{'Name'} $（飞机等的）全体人员[0]->{'Name'} $（飞机等的）全体人员[0]{'Name'}
If the index is good, return the resulting array value.||If The Index Is Good, Return The 造成 Array Value.
opendir my $dh, '.' or die "Could not open directory: $!";||Opendir My $dh, '.' Or Die "Could Not Open Directory: $!";
If we want the test to pass when the file is there, we use file_exists_ok.||If We Want The Test To Pass When The File Is There, We Use file_exists_ok.
The most important thing to remember is that the import method must be defined from the Exporter class, so we add it like so:||The Most Important Thing To 记得 Is That The Import Method Must Be Defined From The Exporter Class, So We 增添 It Like So:
Next, in the section to gather the data, we call find three times with each corresponding callback subroutine reference.||Next, In The Section To 聚集 The Data, We Call 寻找 Three Times With Each 相应的 callback Subroutine Reference.
Exercise 2 [15 min] Make a program that uses your library and the following code to print out a message, such as Today is dip, sen 15, 2011, meaning that today is a Monday in August.||Exercise 2 [15 min] Make a Program That Uses Your Library And The Following Code To Print Out a 音讯, Such As Today Is 蘸, sen 15, 2011, Meaning That 今天现在 Is a Monday In August.
print Dumper(\%total_bytes);||Print Dumper(\%total_bytes);
Finally, the goto construct jumps into the newly defined subroutine.||Finally, The Goto Construct jumps Into The 新 Defined Subroutine.
The best starting point is the Devel::Coverage::Tutorial documentation.||The Best Starting 尖 Is The Devel::Coverage::Tutorial 提供文件.
Later, in our script, we can't use the module because Perl won't find a file for it.||Later, In Our 临时单据, We Can't Use The Module Because Perl Won't 寻找 a File For It.
You may start to notice a lot of repeated code here and think that we should refactor that into a common subroutine that we can reuse (and you'd be right):||You May Start To Notice a 许多 Of 重复 Code Here And 想 That We Should 重构 That Into a Common Subroutine That We Can Reuse (And You'd Be Right):
my $bin_directory = {||My $bin_directory = {
or a -I option:||Or a -I 选择:
We use wget here, but it doesn't matter which tool you use.||We Use wget Here, But It Doesn't Matter Which 工具 You Use.
use URI::URL; my $u = url('http://www.gilligan.crew.hut/maps/island.pdf');||Use URI::URL; My $u = url('http://www.gilligan.crew.hut/maps/island.pdf');
If we don't want to make a tar achive, we can create a zip file.||If We Don't Want To Make a 沥青 achive, We Can Create a 活动 File.
Let's construct a hash of provisions.||Let's Construct a Hash Of provisions.
In this example, the castaways log message goes to both the logfile and the scalar variable.||In This Example, The castaways 原木 音讯 去 To Both The logfile And The Scalar Variable.
After the initial output to indicate success, ok( ) adds a hyphen and then the name of the test.||After The Initial 出产 To 指明 成功, Ok( ) Adds a hyphen And Then The Name Of The Test.
When we find a test that does not work, we can find it by the name that we gave it.||When We 寻找 a Test That Does Not Work, We Can 寻找 It By The Name That We 给 It.
After $ref is initialized, we'll have two, down to the end of the block.||After $Ref Is 初始化, We'我 Have Two, 向下 To The End Of The Block.
The README file also has a special responsibility: the master CPAN archiving tools pull out the README file as a separate entry automatically, permitting the search engines on the various worldwide archives to index them.||The README File Also Has a Special 责任: The 主人 Perl综合典藏网 archiving Tools 拖 Out The README File As a Separate Entry Automatically, permitting The 搜查 engines On The 各种各样的 全世界的 archives To Index Them.
However, if you're thinking about doing this in order to have a complex data structure persist from one program invocation to the next, please keep reading.||However, If You'Re 思想 About Doing This In Order To Have a 综合的 Data Structure 坚持 From One Program 调用 To The 下一次, 使高兴 保持 读书.
Test what happens for unexpected values such as undef.||Test What Happens For 意外的 Values Such As Undef.
[*] Again, trappable with eval.||[*] Again, trappable With Eval.
[*] Don't ask why it isn't called that.||[*] Don't 问 Why It Isn't Called That.
The square brackets take the value within (evaluated in a list context); establish a new, anonymous array initialized to those values; and (here's the important part) return a reference to that array.||The 正方形 支架 Take The Value Within (评估 In a List Context); 建立 a New, Anonymous Array 初始化 To Those Values; And (Here's The Important Part) Return a Reference To That Array.
[*] That's because Andy Lester wrote both examples.||[*] That's Because Andy Lester 写 Both Examples.
We don't have anything left to tell you in this book.||We Don't Have Anything Left To Tell You In This 书.
use lib '/home/gilligan/lib'; use Navigation::SeatOfPants;||Use lib '/家/gilligan/lib'; Use Navigation::SeatOfPants;
For the next step, we sort the arrayrefs, ordering them by the monkey-returned value:||For The 下一次 脚步, We Sort The arrayrefs, 订购 Them By The 猴子-Returned Value:
Now the BEGIN block compiles and executes at compile time, setting up the proper path for the following use.||Now The BEGIN Block compiles And 实行 At Compile Time, Setting Up The 合适的 Path For The Following Use.
So, not only do the explicit function names communicate intent, but they also contribute to parallel structure in the code.||So, Not Only Do The 清楚的 Function Names 传播 意图, But They Also 捐献 To 平行的 Structure In The Code.
When we developed the classroom materials concerning indirect object references, we wrote:||When We 发达 The 教室 materials 关于 Indirect Object References, We 写:
An instance will have associated properties, called instance variables (or member variables, if you come from a C++ or Java background).||An 例子 Will Have Associated propertie(绑定操作符)s, Called 例子 Variables (Or Member Variables, If You 来到 From a C++ Or Java 背景).
The bless operator follows the reference to find what variable it points toin this case, the scalar $name.||The 保佑 Operator Follows The Reference To 寻找 What Variable It 分 toin This Case, The Scalar $Name.
For a small number of not-long strings, a simple my @output_data = sort { "\U$a" cmp "\U$b"} @input_data is probably more efficient.||For a Small Number Of Not-Long Strings, a Simple My @output_data = Sort { "\U$a" cmp "\U$b"} @input_data Is Probably More Efficient.
For example, consider two routines that count coconuts for Gilligan:||For Example, Consider Two Routines That 计算 coconuts For Gilligan:
Each file should contain all the lines that begin with that name.||Each File Should Contain All The Lines That 开始 With That Name.
You probably already know that given the chance, users will find every other way to use your code.||You Probably Already Know That Given The Chance, Users Will 寻找 Every Other Way To Use Your Code.
What does the setter return?||What Does The setter Return?
If that's not enough, consider the new person who will take over your job after you have left.[*]||If That's Not Enough, Consider The New 人 Who Will Take 在 Your 工作 After You Have Left.[*]
Suppose that the Skipper has added all his cool and useful routines to navigation.pm and that Gilligan has incorporated the library into his own navigation package, head_toward_island:||Suppose That The Skipper Has added All 他的 凉的 And Useful Routines To navigation.pm And That Gilligan Has 有限的 The Library Into 他的 Own 航行 Package, head_toward_island:
use Navigation::SeatOfPants;||Use Navigation::SeatOfPants;
What would happen if we wanted to find all the files with a 0 in them?||What Would 发生 If We 想要 To 寻找 All The Files With a 0 In Them?
ok 1 - The object isa Horse ok 2 - The object isa Horse ok 3 - Trigger's name is correct ok 4 - Mr. Ed's name is correct not ok 5 # Failed test (1.t at line 13) # got: 'an unnamed Horse' # expected: 'a generic Horse' 1..5 # Looks like you failed 1 tests of 5.||Ok 1 - The Object isa Horse Ok 2 - The Object isa Horse Ok 3 - Trigger's Name Is 正确的 Ok 4 - Mr. Ed's Name Is 正确的 Not Ok 5 # Failed Test (1.t At Line 13) # Got: 'An unnamed Horse' # Expected: 'a 通用 Horse' 1..5 # Looks Like You failed 1 测试 Of 5.
We might also want to build up our content before we write it to a file so we can encrypt it, compress it, or send it as email directly from your program.||We Might Also Want To Build Up Our 含量 Before We Write It To a File So We Can encrypt It, 压缩 It, Or 派遣 It As 電子郵件 直接地 From Your Program.
while( <LOG_FH> ) { ... }||While( <LOG_FH> ) { ... }
We can use references to acquire, store, and process such hierarchical information.||We Can Use References To 求得, 商店, And 程序 Such 层次 Information.
Restricting a Method to Class-Only or Instance-Only Setting the name of an unnameable generic Horse is probably not a good idea; neither is calling named on an instance.||Restricting a Method To Class-Only Or Instance-Only Setting The Name Of An unnameable 通用 Horse Is Probably Not a Good 思想; Neither Is Calling Named On An 例子.
[*] A famous computing maxim states that "there is no problem so complex that it cannot be solved with appropriate additional layers of indirection."||[*] A 著名的 computing maxim states That "There Is No Problem So 综合的 That It Cannot Be 解决 With 恰当的 Additional 层 Of indirection."
eval { $average = $total / $count } ;||Eval { $平均的 = $总 / $计算 } ;
It's really up to the author.||It's Really Up To The 作者.
use Carp;||Use Carp;
Initially, we might gather the data using a simple loop:||Initially, We Might 聚集 The Data Using a Simple Loop:
This routine gives the shortest turn to make from the current heading (returned by the subroutine current_heading( )) to a new heading (given as the first parameter to the subroutine).||This Routine Gives The shortest 转向 To Make From The Current 标题 (Returned By The Subroutine current_heading( )) To a New 标题 (Given As The First Parameter To The Subroutine).
It shouldn't take longer than a couple of days, though.||It 应该't Take 长 Than a 一对 Of 天, Though.
Using the Debugger to View Complex Data The Perl debugger can display complex data easily.||Using The Debugger To View Complex Data The Perl Debugger Can 陈列 综合的 Data 容易地.
It won't work to store a string ('blue') where an arrayref is needed ([0, 0, 255]) or to use an arrayref as a string.||It Won't Work To 商店 a String ('蓝色的') Where An Arrayref Is Needed ([0, 0, 255]) Or To Use An Arrayref As a String.
If you are especially motivated, you can do the same thing with Test::Pod::Coverage.||If You Are Especially motivated, You Can Do The Same Thing With Test::Pod::Coverage.
Object-Oriented Interfaces Contrast the subroutines imported by File::Basename with what another core module has by looking at File::Spec.||Object-Oriented Interfaces Contrast The Subroutines Imported By File::Basename With What 另一个 Core Module Has By 看 At File::Spec.
That is, until we need the library to depend on the result of a calculation.||That Is, Until We Need The Library To 依靠 On The Result Of a 计算（结果）.
Here the ?: operator selects either the dereference or a derived string.||Here The ?: Operator 选择 Either The 废弃 Or a 派生 String.
The search path is a list of elements in the special @INC array, as we briefly discussed in Chapter 3.||The 搜查 Path Is a List Of Elements In The Special @INC Array, As We 简单地 讨论 In Chapter 3.
my $timestamp = (stat $file_name)[9];||My $timestamp = (stat $file_name)[9];
You might find a helpful hint if you read them!)||You Might 寻找 a 有用的 暗示 If You Read Them!)
We've created the hash entries through autovivification.||We'Ve Created The Hash Entries 通过 autovivification.
This time we use the result of glob as the input list and a pattern match inside the grep.||This Time We Use The Result Of Glob As The Input List And a 模式 Match 里面 The Grep.
Let's let them walk into the room one at a time:||Let's Let Them 步行 Into The 房间 One At a Time:
use Navigate::SeatOfPants; # gets guess_direction_toward||Use Navigate::SeatOfPants; # Gets guess_direction_toward
We can store those pairs in a hash, if we need a hash showing what number is three times a small power of two:||We Can 商店 Those 双 In a Hash, If We Need a Hash showing What Number Is Three Times a Small 力 Of Two:
We won't have to look at a lot of output to find the important bits once Test::Harness goes through it for us.||We Won't Have To Look At a 许多 Of 出产 To 寻找 The Important 位 Once Test::Harness 去 通过 It For Us.
[*] Note that we added whitespace in these two displays to make the similar parts line up.||[*] Note That We added Whitespace In These Two displays To Make The Similar 部分 Line Up.
If we still have a reference to data, we still have the data.||If We Still Have a Reference To Data, We Still Have The Data.
Because $b appears to the left of $a, it'll be a descending sort as well.||Because $b Appears To The Left Of $a, It'我 Be a descending Sort As Well.
When you're ready, run make dist.||When You'Re 准备好的, Run Make dist.
sub { ... body of subroutine ... };||Sub { ... 身体 Of Subroutine ... };
All of the functions take a code reference as their first argument, but that's not a problem because we told you all about those in Chapter 7.||All Of The Functions Take a Code Reference As Their First Argument, But That's Not a Problem Because We told You All About Those In Chapter 7.
from the shell prompt.||From The 壳 及时的.
This library is free software; you can redistribute it and/or modify it under the same terms as Perl itself.||This Library Is Free 软件; You Can redistribute It And/Or Modify It 在 The Same Terms As Perl Itself.
The three basic Perl variable types: scalars, arrays, and hashes||The Three 基本的 Perl Variable Types: Scalars, Arrays, And Hashes
Again, with a simple make invocation (make dist), you end up with the required file:||Again, With a Simple Make 调用 (Make dist), You End Up With The 要求 File:
We simply add those names to %Allowed_methods.||We Simply 增添 Those Names To %Allowed_methods.
We can do so by establishing an instance.||We Can Do So By establishing An 例子.
This method call is like most other method calls: Perl starts at the class of the object and works its way up the inheritance hierarchy until it finds a suitable method.||This Method Call Is Like Most Other Method Calls: Perl Starts At The Class Of The Object And Works Its Way Up The Inheritance 层次 Until It 发现 a Suitable Method.
$year += 1900;||$年 += 1900;
my $ref_to_skipper_info = {||My $ref_to_skipper_info = {
This script yields much more useful output that tells us what is( ) was expecting and what it actually got.||This 临时单据 yields Much More Useful 出产 That 告诉 Us What Is( ) Was expecting And What It Actually Got.
or the equivalent:||Or The Equivalent:
A Perl scalar variable holds a single value.||A Perl Scalar Variable holds a Single Value.
package My::OOModule::Derived; use base qw(My::OOModule::Base);||Package My::OOModule::Derived; Use Base Qw(My::OOModule::Base);
find . -print||寻找 . -Print
For 1, 2, 4, and 8, we get a single result.||For 1, 2, 4, And 8, We Get a Single Result.
We can also add new interfaces now to enable the direct setting and getting of the RGB triple:||We Can Also 增添 New 接口 Now To 使能够 The Direct Setting And 得到 Of The RGB 三倍的:
Inside, we take the first element of each pair and try to read from it.||Inside, We Take The First Element Of Each 对 And Try To Read From It.
Gilligan's program will fail in a catastrophic way as soon as he tries to head to port: he'll start steering the ship in circles!||Gilligan's Program Will 失败 In a 灾难性的 Way As 不久 As 他 试 To Head To 港口: 他'我 Start steering The 船 In circles!
You get a PAUSE ID by simply asking.||You Get a PAUSE ID By Simply 问.
It's also part of a statement, so we need a trailing semicolon or other expression separator after it in most cases.||It's Also Part Of a Statement, So We Need a 落后 semicolon Or Other Expression Separator After It In Most Cases.
If we can't load the module, Perl normally would stop the program.||If We Can't Load The Module, Perl Normally Would Stop The Program.
The first step of this destructor is to call the parent destructor.||The First 脚步 Of This destructor Is To Call The 父或母亲 destructor.
For example, Ginger is the second element of the sorted list and was the fourth element of the original list.||For Example, Ginger Is The Second Element Of The 分类 List And Was The 第四 Element Of The Original List.
print "The names are @names\n";||Print "The Names Are @Names\n";
my $seconds_per_day = 24 * 60 * 60; my($sec, $min, $hour, $day, $mon, $yr, $dow) = localtime; my $start = timelocal(0, 0, 0, $day, $mon, $yr); # midnight today while ($dow != $target_dow) {||My $seconds_per_day = 24 * 60 * 60; My($sec, $min, $小时, $一天, $mon, $yr, $dow) = localtime; My $Start = timelocal(0, 0, 0, $一天, $mon, $yr); # 午夜 今天现在 While ($dow != $target_dow) {
Along the way, we've verified the functionality and features.||Along The Way, We'Ve verified The Functionality And 特征.
Indirect Object Notation The arrow syntax used to invoke a method is sometimes called the direct object syntax because there's also the indirect object syntax, also known as the "only works sometimes" syntax, for reasons we explain in a moment.||Indirect Object Notation The 箭 Syntax Used To 调用 a Method Is Sometimes Called The Direct Object Syntax Because There's Also The Indirect Object Syntax, Also Known As The "Only Works Sometimes" Syntax, For Reasons We Explain In a Moment.
Closures We could also use File::Find to find out some other things about files, such as their size.||Closures We Could Also Use File::Find To 寻找 Out Some Other Things About Files, Such As Their Size.
On the first go-around, the test fails.||On The First Go-Around, The Test 失败.
sub log_message {||Sub log_message {
[*] An expensive operation is one that takes a relatively long time or a relatively large amount of memory.||[*] An Expensive Operation Is One That Takes a 比较地 Long Time Or a 比较地 Large 数量 Of Memory.
This is one of the most important uses of references: decoupling the code from the data structure on which it operates so we can reuse the code more readily.||This Is One Of The Most Important Uses Of References: decoupling The Code From The Data Structure On Which It operates So We Can Reuse The Code More 容易地.
In an extreme (but extremely useful) case, we can specify an empty list for the import list, as in:||In An Extreme (But 极其 Useful) Case, We Can Specify An Empty List For The Import List, As In:
use Test::More "noplan"; use Test::Warn;||Use Test::More "noplan"; Use Test::Warn;
Finally, have the person speak:||Finally, Have The 人 说话:
This is called marshaling the data: converting complex data into a form that we can write to a file as a stream of bytes for later reconstruction.||This Is Called marshaling The Data: converting 综合的 Data Into a Form That We Can Write To a File As a 小溪 Of 字节 For 更晚 reconstruction.
However, the Professor has a new router logfile each day and doesn't want to keep all that data in one giant file that takes longer and longer to process.||However, The Professor Has a New router logfile Each 一天 And Doesn't Want To 保持 All That Data In One 巨人 File That Takes 长 And 长 To 程序.
We can change @INC itself before the require, so Perl searches our directories too.||We Can Change @INC Itself Before The Require, So Perl searches Our directories Too.
The result will be the indices at which 1, 16, and 32 appear in the list: 0, 4, and 5.||The Result Will Be The indices At Which 1, 16, And 32 Appear In The List: 0, 4, And 5.
To avoid confusion, if we've have two digits after the decimal point in one release, we should have two digits in the next release.[]||To Avoid 混乱, If We'Ve Have Two digits After The 十进制的 尖 In One Release, We Should Have Two digits In The 下一次 Release.[]
We'll employ these modules in slightly different fashions, but as long as we can check the documentation, we shouldn't have a problem.||We'我 雇用 These Modules In 轻微地 Different fashions, But As Long As We Can Check The 提供文件, We 应该't Have a Problem.
[] If you come from another OO language background, you might choose $this or $me for the variable name, but you'll probably confuse most other Perl OO hackers.||[] If You 来到 From 另一个 OO 语言 背景, You Might 选择 $This Or $Me For The Variable Name, But You'我 Probably 混淆 Most Other Perl OO 黑客.
require 'drop_anchor.pm'; require 'navigation.pm';||Require 'drop_anchor.pm'; Require 'navigation.pm';
A particularly nice dumping package is included in the Perl core distribution, called Data::Dumper.||A 特别地 Nice 倾销 Package Is 包括 In The Perl Core 分配, Called Data::Dumper.
Any lexical variables in $more_code remain local to the evaluated code.[*] If there's a syntax error, Perl sets the $@ variable and causes the subroutine to die with the appropriate error message.||Any Lexical Variables In $more_code 依旧的 Local To The 评估 Code.[*] If There's a Syntax Error, Perl Sets The $@ Variable And Causes The Subroutine To Die With The 恰当的 Error 音讯.
Ginger: (in a sultry voice) Well hello, Gilligan!||Ginger: (In a 闷热的 声音) Well 你好, Gilligan!
Consider Writing an Article or Giving a Talk Many of the short talks at Perl conferences involve the author of a distribution talking about his own work.||Consider Writing An Article Or Giving a Talk Many Of The 短的 talks At Perl 会议 使卷入 The 作者 Of a 分配 说话 About 他的 Own Work.
{ package Horse;||{ Package Horse;
At the moment, PAUSE IDs must be between four and nine characters.||At The Moment, PAUSE IDs Must Be Between 四 And nine Characters.
Thus, even though find invokes the callback subroutine (and would not have direct access to $total_size), the callback subroutine accesses and updates the variable.||Thus, Even Though 寻找 invokes The callback Subroutine (And Would Not Have Direct Access To $total_size), The callback Subroutine Accesses And 更新 The Variable.
Create a t/pod_coverage.t file and lift the code directly from the module documentation.||Create a t/pod_coverage.t File And 举起 The Code 直接地 From The Module 提供文件.
myhost% perl bytecounts2 <bytecounts-in $VAR1 = {||myhost% Perl bytecounts2 <bytecounts-In $VAR1 = {
How does he do it?||How Does 他 Do It?
The outer map selects one person at a time.||The 外部的 Map 选择 One 人 At a Time.
We can show a reference to an empty anonymous array using an empty anonymous array constructor.||We Can Show a Reference To An Empty Anonymous Array Using An Empty Anonymous Array 构造函数.
First, the .pm file was copied to the testing staging area: the area headed by blib (build library) below the current directory.[*] Next, the perl that invoked the Makefile.PL is called upon to run the test harnessa program that manages all test invocations and reports the results at the end.[]||First, The .Pm File Was 复制 To The testing staging Area: The Area headed By blib (Build Library) Below The Current Directory.[*] Next, The Perl That invoked The Makefile.PL Is Called Upon To Run The Test harnessa Program That 管理 All Test invocations And Reports The Results At The End.[]
our %EXPORT_TAGS = (||Our %EXPORT_TAGS = (
The hash key is the name of the tag (without the colon), and the value is an anonymous array of symbols.||The Hash Key Is The Name Of The 标签 (Without The 结肠), And The Value Is An Anonymous Array Of Symbols.
Let's say that, for maritime safety, every person on-board the Minnow needs to have a life preserver, some sunscreen, a water bottle, and a rain jacket.||Let's Say That, For maritime 安全, Every 人 On-木板 The Minnow Needs To Have a 生活 preserver, Some sunscreen, a 水 瓶子, And a 雨 短外套.
As we can see with the debugger, we can easily show the data, even structured data, to help us understand our program.||As We Can See With The Debugger, We Can 容易地 Show The Data, Even structured Data, To Help Us Understand Our Program.
Now, because name and named were the only methods that referenced the structure of the object, the remaining methods can stay the same, so speak still works as before.||Now, Because Name And Named Were The Only Methods That 参考 The Structure Of The Object, The Remaining Methods Can Stay The Same, So 说话 Still Works As Before.
use IO::Dir;||Use IO::Dir;
This method provides the constant text for the sound itself:||This Method Provides The Constant 正文 For The 声 Itself:
The error output doesn't have to show us the whole string to tell us where things went wrong.||The Error 出产 Doesn't Have To Show Us The Whole String To Tell Us Where Things 去 错误的.
$ perl -MDevel::Cover yourprog args $ cover||$ Perl -MDevel::Cover yourprog Args $ 盖
In each case, the last evaluated expression should be a call to $Test->ok( ), so that becomes the return value of the entire function.[*] If we discovered missing items, we want the test to fail, so we pass a false value to $Test->ok( ), but before we do that we use $Test->diag( ) with a message to tell us what went wrong.||In Each Case, The Last 评估 Expression Should Be a Call To $Test->Ok( ), So That Becomes The Return Value Of The 完全的 Function.[*] If We discovered Missing 物品, We Want The Test To 失败, So We Pass a False Value To $Test->Ok( ), But Before We Do That We Use $Test->diag( ) With a 音讯 To Tell Us What 去 错误的.
$ perl Makefile.PL Checking if your kit is complete...||$ Perl Makefile.PL Checking If Your 全套工具、装备 Is Complete...
They'll appreciate a patch even more!||They'我 欣赏 a 补丁 Even More!
Weak references can also solve some memory leak issues.||Weak References Can Also 解答 Some Memory 漏 Issues.
my %skipper_info = (||My %skipper_info = (
That syntax might look funny to you, though, and even if it doesn't look funny to you, it might look odd to the person who has to read your code later.||That Syntax Might Look Funny To You, Though, And Even If It Doesn't Look Funny To You, It Might Look 古怪的 To The 人 Who Has To Read Your Code 更晚.
We can kill off each reference by using the variable for something other than a reference to the value of @skipper.||We Can 杀死 Off Each Reference By Using The Variable For Something Other Than a Reference To The Value Of @skipper.
Why did we stop using the arrow?||Why Did We Stop Using The 箭?
foreach my $dh ( @dir_hs ) { print_contents( $dh ) };||Foreach My $dh ( @dir_hs ) { print_contents( $dh ) };
use Color::Conversions qw(color_name_to_rgb rgb_to_color_name); ... sub set_color {||Use Color::Conversions Qw(color_name_to_rgb rgb_to_color_name); ... Sub set_color {
Andy Lester created Module::Starter to make a better starter distribution, Jim Keenan created ExtUtils::ModuleMaker to make a better h2xs, and many other module creation systems popped up.[]||Andy Lester Created Module::Starter To Make a Better starter 分配, Jim Keenan Created ExtUtils::ModuleMaker To Make a Better h2xs, And Many Other Module 创造 系统 popped Up.[]
We can even use an inline block of code, like we did with grep and map.||We Can Even Use An inline Block Of Code, Like We Did With Grep And Map.
The optional second argument is the filehandle mode.[]||The Optional Second Argument Is The Filehandle 方式.[]
That's what we did to get those numbers, after all.||That's What We Did To Get Those 编号, After All.
package My::OOModule::Base; our @EXPORT = ( ); # you may even omit this line use base qw(Exporter);||Package My::OOModule::Base; Our @EXPORT = ( ); # You May Even 省略 This Line Use Base qw(Exporter);
The result of the sort are the indices, in an order defined by the corresponding elements of @input.||The Result Of The Sort Are The indices, In An Order Defined By The 相应的 Elements Of @Input.
You also need to change the Makefile.PL or Build.PL to tell it about the new module files.||You Also Need To Change The Makefile.PL Or Build.PL To Tell It About The New Module Files.
That's its magic.||That's Its Magic.
Because UNIVERSAL defines these methods, they are available to all objects.||Because UNIVERSAL 定义 These Methods, They Are Available To All Objects.
Later on, we'll see how Perl takes all of this output to create a nice report for us.||Later On, We'我 See How Perl Takes All Of This 出产 To Create a Nice 报告 For Us.
Dynamic Code with eval There's also a second form of eval, whose parameter is a string expression instead of a block.||Dynamic Code With Eval There's Also a Second Form Of Eval, Whose Parameter Is a String Expression Instead Of a Block.
The subroutine definitions are right within the only data structure that references them directly.||The Subroutine 定义 Are Right Within The Only Data Structure That References Them 直接地.
followed by a newline.||跟着 By a 换行符.
What if Animal::speak didn't exist before, and it inherited from a class mentioned in @Animal::ISA?||What If Animal::说话 Didn't Exist Before, And It 继承 From a Class Mentioned In @Animal::ISA?
We simply provide the general method in UNIVERSAL and override it in the specific classes for unusual objects.||We Simply Provide The General Method In UNIVERSAL And Override It In The 特殊的 类 For 不寻常的 Objects.
If this succeeds, you get an "OK" sign, and the overall test file succeeds.||If This 成功, You Get An "OK" Sign, And The 总的 Test File 成功.
1..1 not ok 1 - no warnings # Failed test 'no warnings' # in /usr/local/lib/perl5/5.8.7/Test/NoWarnings.pm at line 45. # There were 2 warning(s) # Previous test 0 '' # Use of uninitialized value in addition (+) at nowarnings.pl line 6. # # ---------- # Previous test 0 '' # Use of uninitialized value in addition (+) at nowarnings.pl line 6. # # Looks like you failed 1 test of 1 run.||1..1 Not Ok 1 - No 警告 # Failed Test 'No 警告' # In /usr/Local/lib/perl5/5.8.7/Test/NoWarnings.pm At Line 45. # There Were 2 warning(s) # Previous Test 0 '' # Use Of 未初始化的 Value In 增加 (+) At nowarnings.pl Line 6. # # ---------- # Previous Test 0 '' # Use Of 未初始化的 Value In 增加 (+) At nowarnings.pl Line 6. # # Looks Like You failed 1 Test Of 1 Run.
For now, let's say that Class->method invokes subroutine method in package Class.||For Now, Let's Say That Class->Method invokes Subroutine Method In Package Class.
my @data1 = qw(one won); my @data2 = qw(two too to);||My @data1 = Qw(One Won); My @data2 = Qw(Two Too To);
chdir; # go to our home directory||Chdir; # Go To Our 家 Directory
Let's get the sound that $tv_horse makes:||Let's Get The 声 That $tv_horse 使:
use strict; { package LivingCreature;||Use Strict; { Package LivingCreature;
Although removing an installed module is generally difficult, you'll be able to simply delete the testing directory, along with its contents.||Although removing An 安装 Module Is Generally 困难的, You'我 Be Able To Simply Delete The testing Directory, 沿着 With Its Contents.
The CPAN installation tools can download it and display it without downloading the entire distribution.||The Perl综合典藏网 安装 Tools Can download It And 陈列 It Without downloading The 完全的 分配.
Like the spaceship operator, we can indicate a string sort with cmp, although this is rarely used alone because it is the default comparison.||Like The 太空船 Operator, We Can 指明 a String Sort With cmp, Although This Is 难得 Used 单独的 Because It Is The Default 比较.
# also returns $self }||# Also Returns $自己 }
We need to turn this into a Test::* module that simply checks the items (so it doesn't add the missing ones) and then outputs the right thing.||We Need To 转向 This Into a Test::* Module That Simply 检查 The 物品 (So It Doesn't 增添 The Missing Ones) And Then outputs The Right Thing.
@ $hash_ref { qw(name position) }||@ $hash_ref { Qw(Name Position) }
[*] A few of the modules we've used from CPAN are easier to learn from test examples than by the actual POD.||[*] A Few Of The Modules We'Ve Used From Perl综合典藏网 Are Easier To 学习 From Test Examples Than By The Actual POD.
The $Test object is going to handle all of the testing details for us.||The $Test Object Is Going To Handle All Of The testing Details For Us.
Because the Animal::speak method expects a class name as its first parameter, not an instance.||Because The Animal::说话 Method Expects a Class Name As Its First Parameter, Not An 例子.
Now that we know more about what the method invocation arrow actually does, we've got an easier way to do the same thing.||Now That We Know More About What The Method 调用 箭 Actually Does, We'Ve Got An Easier Way To Do The Same Thing.
This only works if the scalar variable does not already have a value, and the handle automatically closes when the variable goes out of scope or we assign it a new value.||This Only Works If The Scalar Variable Does Not Already Have a Value, And The Handle Automatically closes When The Variable 去 Out Of Scope Or We Assign It a New Value.
Gilligan: Sir, yes, sir, Skipper!||Gilligan: Sir, Yes, 先生, Skipper!
That is, the do operator acts as if the code from navigation.pm were incorporated into the current program, although in its own scope block, so that lexicals (my variables) and most directives (such as use strict) from the included file don't leak into the main program.||That Is, The Do Operator 徒 As If The Code From navigation.pm Were 有限的 Into The Current Program, Although In Its Own Scope Block, So That Lexicals (My Variables) And Most directives (Such As Use Strict) From The 包括 File Don't 漏 Into The Main Program.
Feel free to crank up the explicitness if it helps you and your coworkers understand and maintain the code.||Feel Free To crank Up The explicitness If It 帮助 You And Your coworkers Understand And Maintain The Code.
Be sure that your result works under use strict.||Be Sure That Your Result Works 在 Use Strict.
For example, let's derive a RaceHorse class that is everything a Horse is but also tracks its win/place/show/lose standings.||For Example, Let's 从 a RaceHorse Class That Is Everything a Horse Is But Also 轨迹 Its 赢得/Place/Show/失去 standings.
These are mostly the same files that the other module creation tools set up for us, so even if you decide not to use h2xs, you still need to understand these files.||These Are Mostly The Same Files That The Other Module 创造 Tools Set Up For Us, So Even If You Decide Not To Use h2xs, You Still Need To Understand These Files.
We save a bit of typing when we do this, and the code is slightly faster, although probably not enough for us to notice it with everything else that's going on in our program.||We Save a Bit Of 打字 When We Do This, And The Code Is 轻微地 Faster, Although Probably Not Enough For Us To Notice It With Everything Else That's Going On In Our Program.
This subroutine is a closure because it refers to the lexical $count variable.||This Subroutine Is a Closure Because It Refers To The Lexical $计算 Variable.
Answer for Chapter 16 A.15.1.||Answer For Chapter 16 A.15.1.
[*] Technically, you don't need :all because /^/ (include all symbols that match at least a beginning of string) does the same.||[*] Technically, You Don't Need :All Because /^/ (Include All Symbols That Match At Least a 开端 Of String) Does The Same.
The directory handle reference obeys the same rules we laid out before.||The Directory Handle Reference obeys The Same 规则 We 铺设 Out Before.
my $append_fh = IO::File->new( 'castaways.log', O_WRONLY|O_APPEND );||My $append_fh = IO::File->New( 'castaways.log', O_WRONLY|O_APPEND );
if ($reference_to_skipper = = $second_reference_to_skipper) {||If ($reference_to_skipper = = $second_reference_to_skipper) {
The naked block defines the scope of the package MyDate statement.||The 裸体的 Block 定义 The Scope Of The Package MyDate Statement.
The answer is that Person::speak would have to handle its parameters, if any, before or after (or instead of) calling SUPER::speak.||The Answer Is That Person::说话 Would Have To Handle Its Parameters, If Any, Before Or After (Or Instead Of) Calling SUPER::说话.
We'll catch the error and recover on our own when this happens.||We'我 Catch The Error And 寻回 On Our Own When This Happens.
We can keep adding files until we get to 9.t, but once we add 10.t, we might notice that it gets executed between 1.t and 2.t.||We Can 保持 Adding Files Until We Get To 9.t, But Once We 增添 10.t, We Might Notice That It Gets Executed Between 1.t And 2.t.
Things get a bit more complicated when the libraries aren't in the current directory.||Things Get a Bit More 错综复杂的 When The 库 还't In The Current Directory.
[] On a non-Unix system, or even a few odd Unix systems, you'll see different behavior but roughly the same overall result.||[] On a Non-Unix System, Or Even a Few 古怪的 Unix 系统, You'我 See Different Behavior But 大约地 The Same 总的 Result.
The user should not type the forward slashes that are traditionally used to delimit pattern matches in Perl; the input pattern is delimited by the trailing newline.||The User Should Not Type The Forward slashes That Are traditionally Used To delimit 模式 比赛 In Perl; The Input 模式 Is delimited By The 落后 换行符.
A person is a living creature, so define the derived class here:||A 人 Is a 活着的 家伙, So Define The 派生 Class Here:
Selecting What to Import Fortunately, we can tell the use operation to limit its actions by specifying a list of subroutine names following the module name, called the import list:||Selecting What To Import Fortunately, We Can Tell The Use Operation To 界限 Its 行动 By Specifying a List Of Subroutine Names Following The Module Name, Called The Import List:
is( sqrt( 0), 0, 'The square root of 0 is 0' ); is( sqrt( 1), 1, 'The square root of 1 is 1' ); is( sqrt( 49), 7, 'The square root of 49 is 7' ); is( sqrt(100), 10, 'The square root of 100 is 10' );||Is( sqrt( 0), 0, 'The 正方形 Root Of 0 Is 0' ); Is( sqrt( 1), 1, 'The 正方形 Root Of 1 Is 1' ); Is( sqrt( 49), 7, 'The 正方形 Root Of 49 Is 7' ); Is( sqrt(100), 10, 'The 正方形 Root Of 100 Is 10' );
It covers what you need to write programs that are 100 to 10, 000 lines long.||It covers What You Need To Write Programs That Are 100 To 10, 000 Lines Long.
[*] Well, since Perl 5 at least, when the third party module system came into being.||[*] Well, Since Perl 5 At Least, When The 第三 聚会 Module System 来 Into Being.
Name "main::name" used only once: possible typo at ./foo line 92. print( ) on unopened filehandle name at ./foo line 92.||Name "Main::Name" Used Only Once: Possible typo At ./Foo Line 92. Print( ) On unopened Filehandle Name At ./Foo Line 92.
The SUPER Way of Doing Things By changing the Animal class to the SUPER class in that invocation, we get a search of all our superclasses (classes listed in @ISA) automatically:||The SUPER Way Of Doing Things By Changing The Animal Class To The SUPER Class In That 调用, We Get a 搜查 Of All Our 策略 (类 Listed In @ISA) Automatically:
We just use an empty, anonymous hash blessed into the current package (that's the first thing in the argument list, so it's $_[0]).||We Just Use An Empty, Anonymous Hash 有福的 Into The Current Package (That's The First Thing In The Argument List, So It's $_[0]).
So far, we've used the method arrow syntax:||So Far, We'Ve Used The Method 箭 Syntax:
The other two animals come out similarly:||The Other Two animals 来到 Out 同样:
Instead, use some of the handy modules built on top of it.||Instead, Use Some Of The 方便的 Modules Built On 顶 Of It.
After that, an infinite while loop keeps our code running, at least until we can't satisfy the condition to last that breaks us out of the loop.||After That, An 无限大的 While Loop 保持 Our Code 连续的, At Least Until We Can't 满足 The 状态 To Last That 打破 Us Out Of The Loop.
Now we have a proper numeric comparison, so we have a proper numeric sort.||Now We Have a 合适的 数值 比较, So We Have a 合适的 数值 Sort.
This runs without an error, no matter what $unknown_thing contains.||This 跑 Without An Error, No Matter What $unknown_thing 包含.
We can see the results by running:||We Can See The Results By 连续的:
What if we invoke this new subroutine more than once?||What If We 调用 This New Subroutine More Than Once?
package Cow; use base qw(Animal);||Package Cow; Use Base qw(Animal);
Here we go.||Here We Go.
The shuffle( ) routine takes a list of values and randomly shuffles the ordering, returning the list.||The 拖脚走( ) Routine Takes a List Of Values And randomly shuffles The 订购, Returning The List.
In turn, this breaks our prior usage of calling speak and eat on generic animals, since they call the accessors.||In 转向, This 打破 Our 较早的 使用 Of Calling 说话 And 吃 On 通用 animals, Since They Call The accessors.
Since import is just a method, any arguments to it (that's the import list, remember) show up in @_.||Since Import Is Just a Method, Any Arguments To It (That's The Import List, 记得) Show Up In @_.
Exercise 2 [5 min] To make it really useful, what other features should be added to that program?||Exercise 2 [5 min] To Make It Really Useful, What Other 特征 Should Be added To That Program?
Coverage Testing We can also test our testing.||Coverage Testing We Can Also Test Our testing.
If you chose to write the hash's data to a file the hard way, by writing your own code and your own file format, you're working too hard.||If You chose To Write The Hash's Data To a File The 硬的 Way, By 写作 Your Own Code And Your Own File Format, You'Re Working Too 硬的.
Chapter 4, Introduction to References Introduce a level of redirection to allow the same code to operate on different sets of data.||Chapter 4, Introduction To References Introduce a Level Of redirection To Allow The Same Code To 运转 On Different Sets Of Data.
Obviously, this can lead to confusing code, so we shouldn't introduce such duplication needlessly.||Obviously, This Can 铅 To 混淆 Code, So We 应该't 介绍 Such duplication needlessly.
Now we can call the subroutine a few times, as before:||Now We Can Call The Subroutine a Few Times, As Before:
We then spin out along that newly created array, setting the fifth element to lee-lou.||We Then 自转 Out 沿着 That 新 Created Array, Setting The fifth Element To lee-lou.
Along with that, we'll find that it's psychologically easier to modify code because the tests will tell us if we broke something.||Along With That, We'我 寻找 That It's psychologically Easier To Modify Code Because The 测试 Will Tell Us If We broke Something.
my @bigger_indices = grep {||My @bigger_indices = Grep {
If we give it the i switch and a list of modules, it installs them just like before.||If We Give It The 我 Switch And a List Of Modules, It 安装 Them Just Like Before.
If the index is bad, return an empty list, making that item disappear.||If The Index Is 坏的, Return An Empty List, 制作 That 条款 失踪.
Using Mock Objects Sometimes we don't want to ramp up the entire system to test only parts of it.||Using Mock Objects Sometimes We Don't Want To ramp Up The 完全的 System To Test Only 部分 Of It.
For example, let us write a subroutine to create a File::Find callback that prints files exceeding a certain size:||For Example, Let Us Write a Subroutine To Create a File::Find callback That Prints Files exceeding a 确信的 Size:
Presuming the block doesn't cause a fatal error, compilation then continues with the text following the block.||Presuming The Block Doesn't 原因 a Fatal Error, 编译 Then 继续 With The 正文 Following The Block.
It also makes it difficult to search through our code to find the setters of a particular parameter, which are often more important than the getters.||It Also 使 It 困难的 To 搜查 通过 Our Code To 寻找 The setters Of a Particular Parameter, Which Are Often More Important Than The getters.
And that's just what the doctor (or Professor) ordered.||And That's Just What The 医生 (Or Professor) ordered.
use strict; require 'Oogaboogoo/date.pm';||Use Strict; Require 'Oogaboogoo/date.pm';
use Test::More "noplan"; use Test::Output;||Use Test::More "noplan"; Use Test::Output;
If you have time, unpack the distribution into a different directory, pick a new prefix, and install it again to verify that the distribution archive contains everything necessary.||If You Have Time, unpack The 分配 Into a Different Directory, 拣 a New 前缀, And 安装 It Again To 检验 That The 分配 archive 包含 Everything 必要的.
If we don't have it, our AUTOLOAD will complain about an unknown method when it tries to handle DESTROY on its own (comment out the DESTROY to see what happens).||If We Don't Have It, Our AUTOLOAD Will 抱怨 About An Unknown Method When It 试 To Handle DESTROY On Its Own (Comment Out The DESTROY To See What Happens).
A package prefix ensures that we are accessing a package variable and never a lexical variable.||A Package 前缀 ensures That We Are 访问 a Package Variable And Never a Lexical Variable.
What's with the Exercises?||What's With The Exercises?
undef $append_fh;||Undef $append_fh;
Until the value of $ref changes, or $ref itself disappears, we can still use all the dereferencing strategies we used prior to when the name of the array disappeared.||Until The Value Of $Ref Changes, Or $Ref Itself disappears, We Can Still Use All The dereferencing 策略 We Used 较早的 To When The Name Of The Array disappeared.
use Navigate::SeatOfPants qw(:DEFAULT get_north_from_professor);||Use Navigate::SeatOfPants Qw(:DEFAULT get_north_from_professor);
Thus, an easier-on-the-eyes version of that subroutine might be:||Thus, An Easier-On-The-eyes Version Of That Subroutine Might Be:
The result is:||The Result Is:
[] The qr// form wasn't introduced until Perl 5.005.||[] The qr// Form Wasn't Introduced Until Perl 5.005.
Dereference it as an array reference, taking the third element of that array (index number 2).||Dereference It As An Array Reference, Taking The 第三 Element Of That Array (Index Number 2).
Perhaps this code's author intended to assign to scalar variables (like $passenger_1 and $passenger_2) instead of hashes.||Perhaps This Code's 作者 预期 To Assign To Scalar Variables (Like $passenger_1 And $passenger_2) Instead Of Hashes.
[] Actually, $tv_horse points to the object, but, in common terms, we nearly always deal with objects by references to those objects.||[] Actually, $tv_horse 分 To The Object, But, In Common Terms, We 几乎 Always 处理 With Objects By References To Those Objects.
While the code we brought in from a .pm file can have direct executable statements, it's much more common to simply define subroutines that we can load using do.||While The Code We brought In From a .Pm File Can Have Direct executable Statements, It's Much More Common To Simply Define Subroutines That We Can Load Using Do.
If the last digit is 4, we return the digits themselves by evaluating @digits (which is in list context).||If The Last 数字 Is 4, We Return The digits 他们、它们自己 By evaluating @digits (Which Is In List Context).
It's also easy to remember because if $a is to the left of $b, we get out the lower items first, just like a and b would be in the resulting list.||It's Also Easy To 记得 Because If $a Is To The Left Of $b, We Get Out The Lower 物品 First, Just Like a And b Would Be In The 造成 List.
We get this scaling of effort because we have preserved the behavior as data over which you can iterate and look up, thanks to your friendly subroutine references.||We Get This scaling Of 努力 Because We Have preserved The Behavior As Data 在 Which You Can iterate And Look Up, 感谢int To Your 友好的 Subroutine References.
Just follow the example of what is already there.||Just 跟随 The Example Of What Is Already There.
# refers to the package variable|| # Refers To The Package Variable
Because the tests are always executed in sorted order.||Because The 测试 Are Always Executed In 分类 Order.
Write a subroutine that returns undef for a given pathname if the path is a file, or a hash reference of the directory contents if the path is a directory.||Write a Subroutine That Returns Undef For a Given pathname If The Path Is a File, Or a Hash Reference Of The Directory Contents If The Path Is a Directory.
First, you should at least ensure that the code you've written even compiles before you install it and start playing with it.||First, You Should At Least Ensure That The Code You'Ve Written Even compiles Before You 安装 It And Start 玩 With It.
You should get email from the PAUSE indexer telling you what happened.||You Should Get 電子郵件 From The PAUSE indexer telling You What Happened.
We all strive to make our code warning-free, and we can test for that too.||We All 努力 To Make Our Code Warning-Free, And We Can Test For That Too.
$ perl -MCPANPLUS -eshell cpanp> r Island::Plotting::Maps||$ Perl -MPerl综合典藏网PLUS -eshell cpanp> r Island::Plotting::Maps
We dereference them to get to the corresponding array itself, and pick out item 1 from the array (the monkey's pineapple value).||We 废弃 Them To Get To The 相应的 Array Itself, And 拣 Out 条款 1 From The Array (The 猴子's 菠萝 Value).
You might pick up deeper insight into these topics in this book, but we're going to presume you know the basics.||You Might 拣 Up deeper 洞察力 Into These 主题 In This 书, But We'Re Going To 假定 You Know The basics.
In case you didn't catch our warning before, we'll say it again: be very careful with this form of eval.||In Case You Didn't Catch Our Warning Before, We'我 Say It Again: Be Very Careful With This Form Of Eval.
If we are writing a class that simply adds to the parent class behavior, it's best to simply pass along arguments we haven't dealt with.||If We Are 写作 a Class That Simply Adds To The 父或母亲 Class Behavior, It's Best To Simply Pass 沿着 Arguments We 还't 处理 With.
[*] More precisely: we got an '8' but were expecting a '6'.||[*] More 精确地: We Got An '8' But Were expecting a '6'.
[] We can use File::Spec::Functions if we want a functional interface.||[] We Can Use File::Spec::Functions If We Want a Functional Interface.
We also need to add a new method:||We Also Need To 增添 a New Method:
Thus, the code that we bring in from separate files permits easy maintenance and interprogrammer cooperation.||Thus, The Code That We 拿来 In From Separate Files permits Easy 保养 And interprogrammer 合作.
But what if we wanted to look at the original list and determine which element of the original list now appears as the first, second, third, and so on, element of the sorted list?||But What If We 想要 To Look At The Original List And 决心 Which Element Of The Original List Now Appears As The First, Second, 第三, And So On, Element Of The 分类 List?
Those modules imported the subroutines and variables into the current package (again, that's main in our scripts, usually).||Those Modules Imported The Subroutines And Variables Into The Current Package (Again, That's Main In Our Scripts, Usually).
Testing POD We can even test things that aren't code.||Testing POD We Can Even Test Things That 还't Code.
Demonstrate the Person class by invoking a person with nothing to say, and then demonstrate it a second time by invoking a person with something to say.||Demonstrate The Person Class By 调用 a 人 With Nothing To Say, And Then 论证 It a Second Time By 调用 a 人 With Something To Say.
While the grep is running, it shadows any existing value in $_, which is to say that grep borrows the use of this variable but puts the original value back when it's done.||While The Grep Is 连续的, It shadows Any 现存的 Value In $_, Which Is To Say That Grep borrows The Use Of This Variable But 把 The Original Value Back When It's Done.
There are never too many tests.||There Are Never Too Many 测试.
If we reverse the position of $a and $b, the spaceship will sort everything in the opposite order:||If We 颠倒的 The Position Of $a And $b, The 太空船 Will Sort Everything In The 对立的 Order:
It depends.||It Depends.
For example, a simplified version of the Animal class might be defined as follows:||For Example, a simplified Version Of The Animal Class Might Be Defined As Follows:
is( $@, '', '$@ is not set at start' );||Is( $@, '', '$@ Is Not Set At Start' );
my @input = qw(Gilligan Skipper Professor Ginger Mary_Ann); my @sorted_positions = sort { $input[$a] cmp $input[$b] } 0..$#input; my @ranks; @ranks[@sorted_positions] = (0..$#sorted_positions); print "@ranks\n";||My @Input = Qw(Gilligan Skipper Professor Ginger Mary_Ann); My @sorted_positions = Sort { $Input[$a] cmp $Input[$b] } 0..$#Input; My @ranks; @ranks[@sorted_positions] = (0..$#sorted_positions); Print "@ranks\n";
Or, maybe we just let the variable go out of scope:||Or, 或许 We Just Let The Variable Go Out Of Scope:
# come in, get comfy }||# 来到 In, Get 舒服的 }
That symbolic coderef dereferencing there in the body of the loop is pretty nasty.||That Symbolic coderef dereferencing There In The 身体 Of The Loop Is 精致的 肮脏的.
[*] If make manifest adds too many files, you can create a MANIFEST.SKIP file that has a set of Perl regular expressions that tells make manifest which files to ignore.||[*] If Make 表明 Adds Too Many Files, You Can Create a MANIFEST.SKIP File That Has a Set Of Perl Regular Expressions That 告诉 Make 表明 Which Files To 忽视.
if (Horse->isa('Animal')) { # does Horse inherit from Animal?||If (Horse->isa('Animal')) { # Does Horse 继承 From Animal?
If you add files that should be part of the distribution, they also need to be in the MANIFEST.||If You 增添 Files That Should Be Part Of The 分配, They Also Need To Be In The MANIFEST.
Next, the lexical $count variable is initialized to 0.||Next, The Lexical $计算 Variable Is 初始化 To 0.
The Test::More module realizes this and allows us to mark a test as TODO, meaning that we expect it to fail and we'll get to it later.||The Test::More Module realizes This And Allows Us To 痕迹 a Test As TODO, Meaning That We 盼望 It To 失败 And We'我 Get To It 更晚.
It's most common after an eval to immediately check $@, which will either be empty (meaning that there was no error) or the dying words Perl had from the code that failed, perhaps something like "divide by zero" or a longer error message.||It's Most Common After An Eval To 立即 Check $@, Which Will Either Be Empty (Meaning That There Was No Error) Or The dying Words Perl Had From The Code That failed, 也许 Something Like "分开 By 零" Or a 长 Error 音讯.
That line starts with ok if the test passed, or not ok if the test failed.||That Line Starts With Ok If The Test Passed, Or Not Ok If The Test failed.
The keys of the hash serve as the names of parts of the object (also called instance or member variables), and the corresponding values are, well, the values.||The Keys Of The Hash 服务 As The Names Of 部分 Of The Object (Also Called 例子 Or Member Variables), And The 相应的 Values Are, Well, The Values.
[*] As it turns out, we can tell File::Temp to do this automatically, but then we wouldn't be able to illustrate doing it manually.||[*] As It Turns Out, We Can Tell File::Temp To Do This Automatically, But Then We Wouldn't Be Able To 图解 Doing It manually.
instance variable needed at their_code line 1234||例子 Variable Needed At their_code Line 1234
There are several other list operators that you already know about from Learning Perl.||There Are Several Other List Operators That You Already Know About From Learning Perl.
Why the "generally" caveat on when you can replace the arrow syntax with indirect object syntax?||Why The "Generally" caveat On When You Can 归还原处 The 箭 Syntax With Indirect Object Syntax?
Defaulting to backwards compatibility with perl 5.8.7 If you intend this module to be compatible with earlier perl versions, please specify a minimum perl version with the -b option.||Defaulting To backwards 兼容性 With Perl 5.8.7 If You 打算 This Module To Be Compatible With Earlier Perl Versions, 使高兴 Specify a 最少量 Perl Version With The -b 选择.
BEGIN { unshift @INC, '/home/gilligan/lib'; } use Navigation::SeatOfPants;||BEGIN { unshift @INC, '/家/gilligan/lib'; } Use Navigation::SeatOfPants;
Even a simple function such as sqrt should get a couple dozen tests; if our code does more complex tasks than sqrt does, expect it to need more tests, too.||Even a Simple Function Such As sqrt Should Get a 一对 一打 测试; If Our Code Does More 综合的 Tasks Than sqrt Does, 盼望 It To Need More 测试, Too.
Then we dereference that coderef, passing it the name of the person being greeted, and we get the correct behavior, resulting in:||Then We 废弃 That coderef, Passing It The Name Of The 人 Being greeted, And We Get The 正确的 Behavior, 造成 In:
We know that the superclass uses a hash reference and that the superclass hierarchy doesn't use the four names chosen for a derived class.||We Know That The 基类 Uses a Hash Reference And That The 基类 层次 Doesn't Use The 四 Names 选择 For a 派生 Class.
From that web site, you can search for modules, look at their documentation, browse through their distributions, inspect their CPAN Testers reports, and do many other things.||From That 网 场所, You Can 搜查 For Modules, Look At Their 提供文件, browse 通过 Their 分布, 检查 Their Perl综合典藏网 Testers Reports, And Do Many Other Things.
This is great for Gilligan but awkward for the Skipper, as his file now has longer subroutine names:||This Is 大的 For Gilligan But 笨拙的 For The Skipper, As 他的 File Now Has 长 Subroutine Names:
sub main::turn_toward_heading {||Sub Main::turn_toward_heading {
my $isbn = Business::ISBN->new( $ARGV[0] );||My $isbn = Business::ISBN->New( $命令行传入参数[0] );
[*] We often don't use the return value since most people call most test functions in a void context, but we might as well return something that makes sense.||[*] We Often Don't Use The Return Value Since Most People Call Most Test Functions In a Void Context, But We Might As Well Return Something That 使 Sense.
{ package Mouse;||{ Package Mouse;
A typeglob works with the symbol table, which means it's dealing with package variables.||A typeglob Works With The Symbol Table, Which Means It's 交往 With Package Variables.
This is handled as Perl executes the code during the run phase.||This Is 处理 As Perl 实行 The Code 在 The Run 阶段.
If the two are nearly completely distinct, and nearly anything that a Person has in common with an Animal is common to all LivingCreatures, it's probably better to avoid the extra inheritance step.||If The Two Are 几乎 完全地 不同的, And 几乎 Anything That a Person Has In Common With An Animal Is Common To All LivingCreatures, It's Probably Better To Avoid The Extra Inheritance 脚步.
We don't need to open expensive database connections or instantiate objects with large memory footprints to test every part of the code.||We Don't Need To Open Expensive database connections Or 被实例化 Objects With Large Memory footprints To Test Every Part Of The Code.
Since we don't want to stomp on anything else that might be named FH somewhere else in the script, we must use local to say that the name FH has a temporary value for the duration of the log_message subroutine and that when the subroutine finishes, Perl should restore any previous values to FH as if we were never there.||Since We Don't Want To 踩 On Anything Else That Might Be Named FH Somewhere Else In The 临时单据, We Must Use Local To Say That The Name FH Has a temporary Value For The 期间 Of The log_message Subroutine And That When The Subroutine finishes, Perl Should Restore Any Previous Values To FH As If We Were Never There.
Proper use of the prerequisites list can make installing your module nearly painless, and your user community will thank you.||Proper Use Of The prerequisites List Can Make installing Your Module 几乎 painless, And Your User 团体 Will 谢谢 You.
Now every time the test harness wants to invoke Perl (which is for every test file), it also loads Devel::Cover.||Now Every Time The Test 支配 要 To 调用 Perl (Which Is For Every Test File), It Also loads Devel::Cover.
When it finds names within that directory (and its subdirectories), it calls the anonymous subroutine.||When It 发现 Names Within That Directory (And Its subdirectories), It Calls The Anonymous Subroutine.
$ cover -delete $ HARNESS_PERL_SWITCHES=-MDevel::Cover make test $ cover||$ 盖 -Delete $ HARNESS_PERL_SWITCHES=-MDevel::Cover Make Test $ 盖
# hope no DST! :-)||# 希望 No DST! :-)
my $tv_horse = Horse->named('Mr. Ed'); $tv_horse->set_color('black-and-white'); print $tv_horse->name, ' is colored ', $tv_horse->color, "\n";||My $tv_horse = Horse->Named('Mr. Ed'); $tv_horse->set_color('黑的-And-白的'); Print $tv_horse->Name, ' Is colored ', $tv_horse->颜色, "\n";
Your program should ask the user to enter the names of one or more barnyard animals.||Your Program Should 问 The User To 进入 The Names Of One Or More barnyard animals.
The easiest way for us to add additional tests is to create t/2.t.||The easiest Way For Us To 增添 Additional 测试 Is To Create t/2.t.
We're almost done, but what if we just wanted the top names, rather than the names and pineapple counts?||We'Re Almost Done, But What If We Just 想要 The 顶 Names, Rather Than The Names And 菠萝 计数?
If a subclass fails to define the method, the method Class::MethodMaker generates for Animal's sound dies.||If a 子类 失败 To Define The Method, The Method Class::MethodMaker 产生 For Animal's 声 Dies.
$ perl -I /home/ginger/Testing/lib/site_perl myproggy||$ Perl -I /家/姜/Testing/lib/site_perl myproggy
When we invoke create_find_callback_that_counts( ), we initialize the lexical variable $count to 0.||When We 调用 create_find_callback_that_counts( ), We Initialize The Lexical Variable $计算 To 0.
If the scalar already has a value, this doesn't work because Perl won't stomp on our data.||If The Scalar Already Has a Value, This Doesn't Work Because Perl Won't 踩 On Our Data.
my @passengers = (\%passenger_1, \%passenger_2);||My @passengers = (\%passenger_1, \%passenger_2);
Although our example is a bit contrived, imagine doing this with a web page, configuration file, or some other huge chunk of data that we don't want cluttering our testing output.||Although Our Example Is a Bit contrived, 想象 Doing This With a 网 页, Configuration File, Or Some Other 庞大的 chunk Of Data That We Don't Want cluttering Our testing 出产.
We've declared @skipper_with_name, the first element of which is the Skipper's name string, and the second element is an array reference, obtained by placing the five provisions into an array and taking a reference to it.||We'Ve Declared @skipper_with_name, The First Element Of Which Is The Skipper's Name String, And The Second Element Is An Array Reference, Obtained By placing The five provisions Into An Array And Taking a Reference To It.
We want to change @INC before the use executes.||We Want To Change @INC Before The Use 实行.
Testing Large Strings We showed in Chapter 17 that when a test fails, Test::More can show us what we expected and what we actually got.||Testing Large Strings We showed In Chapter 17 That When a Test 失败, Test::More Can Show Us What We Expected And What We Actually Got.
The mechanism for sharing your work is called the Comprehensive Perl Archive Network (CPAN), which is 10 years old as we write this and has about 9, 000 different modules.||The Mechanism For sharing Your Work Is Called The Comprehensive Perl 存档文件 Network (Perl综合典藏网), Which Is 10 Years Old As We Write This And Has About 9, 000 Different Modules.
A Simple Test Script Before we go on, let's write some Perl code.||A Simple Test Script Before We Go On, Let's Write Some Perl Code.
my $shuffled = $array; shuffle( $shuffled );||My $shuffled = $Array; 拖脚走( $shuffled );
[*] Behind the scenes, Perl is limited by the architecture it's on.||[*] Behind The scenes, Perl Is Limited By The 建筑学 It's On.
We can always use the full name regardless of the import list, as in:[*]||We Can Always Use The Full Name 不顾的（地） Of The Import List, As In:[*]
We wish that we didn't have to cover it here (if you don't know about it, you can't use it), but it sticks around in otherwise good code, so you need to know what is going on.||We Wish That We Didn't Have To 盖 It Here (If You Don't Know About It, You Can't Use It), But It sticks Around In Otherwise Good Code, So You Need To Know What Is Going On.
You define what you want, ensure that the test fails when the infrastructure is missing, then make it pass.||You Define What You Want, Ensure That The Test 失败 When The infrastructure Is Missing, Then Make It Pass.
(After Version 1.9, the next release can't be Version 1.10, because even if you're calling it "version one point ten, " it's still merely 1.1 to the tools that compare version numbers.)||(After 版本 1.9, The 下一次 Release Can't Be 版本 1.10, Because Even If You'Re Calling It "Version One 尖 ten, " It's Still 仅仅 1.1 To The Tools That 比较 Version 编号.)
We can put a scalar reference to an array as part of a larger list:||We Can Put a Scalar Reference To An Array As Part Of a larger List:
$ make test cp Maps.pm blib/lib/Island/Plotting/Maps.pm PERL_DL_NONLAZY=1 /usr/local/bin/perl "-MExtUtils::Command::MM" "-e" "test_harness(0, 'blib/lib', 'blib/arch')" t/*.t t/1....ok All tests successful.||$ Make Test cp Maps.pm blib/lib/Island/Plotting/Maps.pm PERL_DL_NONLAZY=1 /usr/Local/bin/Perl "-MExtUtils::Command::MM" "-g" "test_harness(0, 'blib/lib', 'blib/拱门')" t/*.t t/1....Ok All 测试 成功的.
[] Perl Best Practices recommends using a three-part version string, such as qv(1.2.3), but their use is not widespread, requires version.pm (a non-core module as of Perl 5.8), does not integrate with common tools yet, and has lexical issues.||[] Perl Best Practices 推荐 Using a Three-Part Version String, Such As qv(1.2.3), But Their Use Is Not 流传广泛的, Requires version.pm (a Non-Core Module As Of Perl 5.8), Does Not 整合 With Common Tools 仍然, And Has Lexical Issues.
Users typically check this file to see what's new with the module and to decide if they want to upgrade.[*] In this file, we note any bugs we fixed, features we added, and how important the changes are (i.e., should everyone upgrade right away?).||Users 典型的 Check This File To See What's New With The Module And To Decide If They Want To upgrade.[*] In This File, We Note Any bugs We Fixed, 特征 We added, And How Important The Changes Are (i.e., Should Everyone upgrade Right Away?).
None by default.||None By Default.
It can go into an element of an array or a hash, or into a plain scalar variable, like this:||It Can Go Into An Element Of An Array Or a Hash, Or Into a 明白的 Scalar Variable, Like This:
Yes, a map within a map.||Yes, a Map Within a Map.
But look at all that common code.||But Look At All That Common Code.
Note that because we've stopped using the method arrow, we have to include the $class parameter (almost surely the value Mouse) as the first parameter to Animal::speak.||Note That Because We'Ve stopped Using The Method 箭, We Have To Include The $Class Parameter (Almost 一定 The Value Mouse) As The First Parameter To Animal::说话.
But there is much more to learn about Perl now than when that first book was written.||But There Is Much More To 学习 About Perl Now Than When That First 书 Was Written.
my @dirs = grep { -d } @ARGV;||My @dirs = Grep { -d } @命令行传入参数;
To install a module along with its dependencies, we issue the install command with the name of the module.||To 安装 a Module 沿着 With Its dependencies, We 发行发布 The 安装 命令 With The Name Of The Module.
Now the maintainer of that class changes goes to says.||Now The maintainer Of That Class Changes 去 To 说.
Since this isn't Dr. Dolittle, make sure the animals can't talk.||Since This Isn't Dr. Dolittle, Make Sure The animals Can't 谈话.
A Few Notes About @ISA This magical @ISA variable (pronounced "is a" not "ice-uh") declares that Cow "is a" Animal.[*] Note that it's an array, not a simple single value, because on rare occasions it makes sense to have more than one parent class searched for the missing methods.||A Few Notes About @ISA This Magical @ISA Variable (pronounced "Is a" Not "冰-uh") Declares That Cow "Is a" Animal.[*] Note That It's An Array, Not a Simple Single Value, Because On 稀有的 occasions It 使 Sense To Have More Than One 父或母亲 Class searched For The Missing Methods.
If the test we give in the second argument fails between the first and third arguments, then we get a descriptive error message with both of the values and the comparison, rather than a simple pass or fail value as before.||If The Test We Give In The Second Argument 失败 Between The First And 第三 Arguments, Then We Get a descriptive Error 音讯 With Both Of The Values And The 比较, Rather Than a Simple Pass Or 失败 Value As Before.
You need to think like that when you test.||You Need To 想 Like That When You Test.
We won't get anything imported if we give use an empty import list.||We Won't Get Anything Imported If We Give Use An Empty Import List.
How would we get the total size of all found files from the callback?||How Would We Get The 总 Size Of All Found Files From The callback?
## in Animal our %REGISTRY; sub named {||## In Animal Our %REGISTRY; Sub Named {
${${${$root}[2]}[1]}[0]||${${${$Root}[2]}[1]}[0]
myhost% perl -d bytecounts bytecounts-in||myhost% Perl -d bytecounts bytecounts-In
We can inspect the argument list and decide what to do.||We Can 检查 The Argument List And Decide What To Do.
[*] As well as a utility routine, fileparse_set_fstype.||[*] As Well As a 效用 Routine, fileparse_set_fstype.
Installing Modules from CPAN Installing a simple module from CPAN can be straightforward: we download the module distribution archive, unpack it, and change into its directory.||Installing Modules From Perl综合典藏网 Installing a Simple Module From Perl综合典藏网 Can Be 直爽的: We download The Module 分配 archive, unpack It, And Change Into Its Directory.
Or, if you're including someone else's code in your module, you may need to mention their copyright (or lack thereof) as well.||Or, If You'Re Including Someone Else's Code In Your Module, You May Need To 提及 Their copyright (Or 缺少 及其) As Well.
The data stays alive until we destroy the last reference:||The Data 停留 活着的 Until We 破坏 The Last Reference:
When we see $$items[1], a pretty noisy piece of syntax, we can tell that the curly braces must belong around the simple scalar variable, $items.||When We See $$物品[1], a 精致的 吵闹的 件 Of Syntax, We Can Tell That The 卷曲的 牙套 Must 属于 Around The Simple Scalar Variable, $物品.
$ make dist rm -rf Island-Plotting-Maps-0.01 /usr/local/bin/perl "-MExtUtils::Manifest=manicopy, maniread" \||$ Make dist rm -rf Island-Plotting-Maps-0.01 /usr/Local/bin/Perl "-MExtUtils::Manifest=manicopy, maniread" \
my $average = $total / $count; # divide by zero? print "okay\n" unless /$match/; # illegal pattern?||My $平均的 = $总 / $计算; # 分开 By 零? Print "Okay\n" Unless /$Match/; # 不合法的 模式?
Who brought fewer than five items?||Who brought fewer Than five 物品?
The code prints 0 4 3 1 2.||The Code Prints 0 4 3 1 2.
Typically, this routine aliases some of the names from the imported namespace to the importing namespace.||Typically, This Routine Aliases Some Of The Names From The Imported Namespace To The Importing Namespace.
Exercise sub gather_mtime_between {||Exercise Sub gather_mtime_between {
my $ref_to_greeter = \&skipper_greets;||My $ref_to_greeter = \&skipper_greets;
For which line does Perl report the error?||For Which Line Does Perl 报告 The Error?
It finds the full path to the script directory so we can use it to build paths.||It 发现 The Full Path To The 临时单据 Directory So We Can Use It To Build paths.
Thus, another way to calculate an average safely looks like this:||Thus, 另一个 Way To 计算 An 平均的 Safely Looks Like This:
Now let's define a common method package called Animal with the definition for speak:||Now Let's Define a Common Method Package Called Animal With The Definition For 说话:
We run a few queries against this data.||We Run a Few queries 反对 This Data.
It goes through our embedded documentation and tells us which subroutine names don't have corresponding entries in the documentation.||It 去 通过 Our embedded 提供文件 And 告诉 Us Which Subroutine Names Don't Have 相应的 Entries In The 提供文件.
## in Animal sub default_color { 'brown' }||## In Animal Sub default_color { '褐色（的）' }
Their values are their offsets in the list we get back from localtime.||Their Values Are Their 抵消 In The List We Get Back From localtime.
The || operator has a higher precedence than the assignment, so it is evaluated first; the program will die if the file can't be created.||The || Operator Has a 更高的 领先 Than The Assignment, So It Is 评估 First; The Program Will Die If The File Can't Be Created.
Next, define the subroutine for day-of-week number to name.||Next, Define The Subroutine For 一天-Of-星期 Number To Name.
Let's make a sheep that has a name and a color:||Let's Make a 绵羊 That Has a Name And a 颜色:
Before you send your first email to the PAUSE admins, it's probably a good idea to do a few things first:||Before You 派遣 Your First 電子郵件 To The PAUSE admins, It's Probably a Good 思想 To Do a Few Things First:
Since the performance cost of a method call is higher than the cost of a hash lookup, in some circumstances it may make sense to have a friend class peek inside.||Since The 执行 成本 Of a Method Call Is 更高的 Than The 成本 Of a Hash 查找, In Some 情况下 It May Make Sense To Have a 朋友 Class peek 里面.
That sounds like a lot of work, but how much work would we have to do to add new methods for the hour and minute?||That 听起来 Like a 许多 Of Work, But How Much Work Would We Have To Do To 增添 New Methods For The 小时 And 分钟?
my @skipper = qw(blue_shirt hat jacket preserver sunscreen); my @skipper_with_name = ('The Skipper', \@skipper);||My @skipper = Qw(blue_shirt 帽子 短外套 preserver sunscreen); My @skipper_with_name = ('The Skipper', \@skipper);
(Poor Gwen suffers the same fate.)||(Poor Gwen suffers The Same 命运.)
That's due to one of the quirks in Perl's syntax.||That's Due To One Of The quirks In Perl's Syntax.
Closure Variables as Static Local Variables A subroutine does not have to be an anonymous subroutine to be a closure.||Closure Variables As Static Local Variables A Subroutine Does Not Have To Be An Anonymous Subroutine To Be a Closure.
END { unlink "test.out" } # clean up after the horses||END { unlink "test.out" } # 清洁的 Up After The horses
The module takes care of finding all the POD files, which it then checks for format.||The Module Takes Care Of 发现 All The POD Files, Which It Then 检查 For Format.
Module::Build will be part of the Perl standard distribution starting with Perl 5.10 and is likely the future for Perl modules.||Module::Build Will Be Part Of The Perl Standard 分配 Starting With Perl 5.10 And Is Likely The Future For Perl Modules.
The order might not matter, for example, if it's a case-insensitive sort comparing "FRED" to "Fred", or if it's a numeric sort comparing 42 to 42.[*]||The Order Might Not Matter, For Example, If It's a Case-insensitive Sort comparing "FRED" To "Fred", Or If It's a 数值 Sort comparing 42 To 42.[*]
We'll call these "core modules " or note that they're in "the standard distribution ."||We'我 Call These "Core Modules " Or Note That They'Re In "The Standard 分配 ."
It occurs when a class's @ISA has more than one element.||It Occurs When a Class's @ISA Has More Than One Element.
Thankfully, there's a standard import that's available in the Exporter module.||Thankfully, There's a Standard Import That's Available In The Exporter Module.
As always with require, the last expression evaluated must be true (or the program dies), [*] and once Perl has read a file, it will not reread if requested again.||As Always With Require, The Last Expression 评估 Must Be True (Or The Program Dies), [*] And Once Perl Has Read a File, It Will Not reread If Requested Again.
To install into our private directories using Module::Build, we add the install_base parameter.||To 安装 Into Our Private directories Using Module::Build, We 增添 The install_base Parameter.
Review of Sorting Perl's built-in sort operator sorts text strings in their natural text order, by default.[*] This is fine if we want to sort text strings:||Review Of Sorting Perl's Built-In Sort Operator 各样 正文 Strings In Their 自然的 正文 Order, By Default.[*] This Is Fine If We Want To Sort 正文 Strings:
sub print_hello { print STDOUT "Welcome Aboard!\n" } sub print_error { print STDERR "There's a hole in the ship!\n" }||Sub print_hello { Print STDOUT "Welcome Aboard!\n" } Sub print_error { Print STDERR "There's a 洞 In The 船!\n" }
## show the data for (sort keys %subs) {||## Show The Data For (Sort Keys %Subs) {
And limited.||And Limited.
And, just to be interesting, we'll make the barn a blessed array reference, not a hash reference.||And, Just To Be Interesting, We'我 Make The 谷仓 a 有福的 Array Reference, Not a Hash Reference.
@ gilligan_info { qw(name position) }||@ gilligan_info { Qw(Name Position) }
The module comes with a program named cover, which handles most of the things that we need to do.||The Module 来 With a Program Named 盖, Which 处理 Most Of The Things That We Need To Do.
Exercises You can find the answers to these exercises in "Answers for Chapter 3" in the Appendix.||Exercises You Can 寻找 The answers To These exercises In "Answers For Chapter 3" In The Appendix.
That's why the interface is there, after all: to hide the details.||That's Why The Interface Is There, After All: To Hide The Details.
sub load_map {||Sub load_map {
The File::Basename module knows what sort of system it's on, and thus its functions figure out how to correctly parse the strings for the different delimiters we might encounter.||The File::Basename Module 知道 What Sort Of System It's On, And 如此 Its Functions 数字 Out How To 正确地 Parse The Strings For The Different delimiters We Might 面临.
Now the data have only one reference each, which all go to zero references at the end of the block.||Now The Data Have Only One Reference Each, Which All Go To 零 References At The End Of The Block.
If you have a mailing list set up for your module, mention it here.||If You Have a 邮寄 List Set Up For Your Module, 提及 It Here.
Exercise 2 [20 min] Write your own test module, Test::My::List::Util, that has a single test function, sum_ok, which takes two arguments: the actual sum and the expected sum.||Exercise 2 [20 min] Write Your Own Test Module, Test::My::List::Util, That Has a Single Test Function, sum_ok, Which Takes Two Arguments: The Actual 总数 And The Expected 总数.
You should find a new archive file in the current directory.||You Should 寻找 a New archive File In The Current Directory.
or even:||Or Even:
No matter which method the user chose, the output channels, whether sole or multiple, end up in the same variable.||No Matter Which Method The User chose, The 出产 channels, Whether 唯一的 Or Multiple, End Up In The Same Variable.
In our while loop, we'll extract the log messages that contain Gilligan (which is probably most of them, since he's always part of the mess):||In Our While Loop, We'我 取出 The 原木 Messages That Contain Gilligan (Which Is Probably Most Of Them, Since 他's Always Part Of The 肮脏):
because according_to_GPS is in neither @EXPORT nor @EXPORT_OK.[*] Thus, with those two arrays, we have control over our public interface.||Because according_to_GPS Is In Neither @EXPORT Nor @EXPORT_OK.[*] Thus, With Those Two Arrays, We Have Control 在 Our 公众的 Interface.
Answers for Chapter 3||Answers For Chapter 3
Worse than that, if we have warnings enabled, [*] we'll get a warning from Perl that we've redefined the subroutine, even if it's the same definition.||Worse Than That, If We Have 警告 Enabled, [*] We'我 Get a Warning From Perl That We'Ve 重新定义了 The Subroutine, Even If It's The Same Definition.
[*] If there's more than one module, you need to designate the primary module in the Makefile.PL.||[*] If There's More Than One Module, You Need To 指明 The 首要的 Module In The Makefile.PL.
use constant LIB_DIR => '/home/gilligan/lib'; ... use lib LIB_DIR; use Navigation::SeatOfPants;||Use Constant LIB_DIR => '/家/gilligan/lib'; ... Use lib LIB_DIR; Use Navigation::SeatOfPants;
my @indices_of_odd_digit_sums = grep {||My @indices_of_odd_digit_sums = Grep {
{ # naked block ... my $ref = \@skipper; ... ... } # $ref goes out of scope at this point||{ # 裸体的 Block ... My $Ref = \@skipper; ... ... } # $Ref 去 Out Of Scope At This 尖
Here's the trick: we can place any reference to an array in curly braces in place of the name of an array, ending up with a method to access the original array.||Here's The 诡计: We Can Place Any Reference To An Array In 卷曲的 牙套 In Place Of The Name Of An Array, 结局 Up With a Method To Access The Original Array.
Of course we would never make a looped data structure in a real program!||Of Course We Would Never Make a looped Data Structure In a Real Program!
Returning the two subroutine references from the creating subroutine does not invoke them.||Returning The Two Subroutine References From The Creating Subroutine Does Not 调用 Them.
my %greets = (||My %greets = (
eval { $average = $total / $count } ; print "Continuing after error: $@" if $@;||Eval { $平均的 = $总 / $计算 } ; Print "Continuing After Error: $@" If $@;
Autovivification Let's look again at the provisions list.||Autovivification Let's Look Again At The provisions List.
We can't make it a lexical variable, though: it has to belong to the package to be found by the inheritance mechanism.||We Can't Make It a Lexical Variable, Though: It Has To 属于 To The Package To Be Found By The Inheritance Mechanism.
Invoking an Instance Method The method arrow can be used on instances, as well as names of packages (classes).||Invoking An Instance Method The Method 箭 Can Be Used On 实例, As Well As Names Of Packages (类).
Finally, return the modified RaceHorse to the caller.||Finally, Return The Modified RaceHorse To The Caller.
use Test::More 'no_plan'; use Test::LongString;||Use Test::More 'no_plan'; Use Test::LongString;
Answers for Chapter 4 A.3.1.||Answers For Chapter 4 A.3.1.
Invoking Animal::speak directly is a mess, however.||Invoking Animal::说话 直接地 Is a 肮脏, However.
That's clearly not what we wanted, so we had to add additional syntax to disambiguate the call.[]||That's 清晰地 Not What We 想要, So We Had To 增添 Additional Syntax To disambiguate The Call.[]
(Where will it all end?||(Where Will It All End?
package Oogaboogoo::date; use strict;||Package Oogaboogoo::Date; Use Strict;
To call isa more robustly, we could call it as a subroutine:||To Call isa More robustly, We Could Call It As a Subroutine:
Finally, returning a success status is useful if it's fairly common for an update to fail, rather than an exceptional event.||Finally, Returning a 成功 形势 Is Useful If It's 公平地 Common For An Update To 失败, Rather Than An 异常的 Event.
Can you reuse part of that answer for this problem?||Can You Reuse Part Of That Answer For This Problem?
The gps tag comprises only the functions that deal with GPS, and the direction tag includes all the functions that deal with direction.||The gps 标签 comprises Only The Functions That 处理 With GPS, And The 方向 标签 包括 All The Functions That 处理 With 方向.
One of OOP's core principles is to minimize common code: if we write it only once, we'll save time.||One Of OOP's Core 原则 Is To 使减到最小 Common Code: If We Write It Only Once, We'我 Save Time.
Well, even Perl programmers sometimes copy an algorithm from another programming language.||Well, Even Perl Programmers Sometimes Copy An 算法 From 另一个 Programming 语言.
In this case, we look in the one and only base class, Animal, find Animal::speak, and pass it Mouse as its only parameter.||In This Case, We Look In The One And Only Base Class, Animal, 寻找 Animal::说话, And Pass It Mouse As Its Only Parameter.
It's also much less readable for humans.||It's Also Much 更少的 可读性 For humans.
This isn't the best solution, however.||This Isn't The Best 解决, However.
sub data_for_path {||Sub data_for_path {
Instead of letting the filenames dictate the order of tests, the file t/test_manifest does.||Instead Of 让 The filenames 口授 The Order Of 测试, The File t/test_manifest Does.
Be sure you don't mangle the data!||Be Sure You Don't mangle The Data!
like( 'Alpaca Book', qr/alpaca/i, 'I found an alpaca!' );||Like( 'Alpaca Book', qr/alpaca/我, 'I Found An alpaca!' );
## this code is bad (see text)||## This Code Is 坏的 (See 正文)
Skipper: Hey there, Professor!||Skipper: Hey There, Professor!
And for the other passengers, we repeat as needed.||And For The Other passengers, We 重复 As Needed.
There's More Than One Way To Do It A distribution contains the module (or collection of related modules), plus all the support files required to document, test, ship, and install the module.||There's More Than One Way To Do It A 分配 包含 The Module (Or Collection Of Related Modules), Plus All The Support Files 要求 To Document, Test, 船, And 安装 The Module.
But once again, we have a lot of similar structure.||But Once Again, We Have a 许多 Of Similar Structure.
We're only going to set $debug to a true value if it's there, then do the same stuff we did before.||We'Re Only Going To Set $debug To a True Value If It's There, Then Do The Same 材料 We Did Before.
a Cow goes moooo! a Horse goes neigh! a Sheep goes baaaah!||a Cow 去 moooo! a Horse 去 neigh! a Sheep 去 baaaah!
Let us add another island inhabitant: Ginger.||Let Us 增添 另一个 岛屿 居民: Ginger.
my $format = "%-15s %-7s %-7s %-15s\n"; printf $format, qw(Name Shirt Hat Position); for my $crewmember (@crew) {||My $Format = "%-15s %-7s %-7s %-15s\n"; Printf $Format, Qw(Name Shirt Hat Position); For My $crewmember (@（飞机等的）全体人员) {
Chapter 11, Introduction to Objects Work with classes, method calls, inheritance, and overriding.||Chapter 11, Introduction To Objects Work With 类, Method Calls, Inheritance, And Overriding.
Exercise 4 sub data_for_path {||Exercise 4 Sub data_for_path {
log_message( *LOG_FH, 'An astronaut passes overhead' );||log_message( *LOG_FH, 'An 宇宙飞行员 经过 头上的' );
Other tools and services, including the ones we cover in Chapter 19, can use this file to discover things about the module without having to run any of the distribution code.||Other Tools And services, Including The Ones We 盖 In Chapter 19, Can Use This File To 发现 Things About The Module Without Having To Run Any Of The 分配 Code.
Answers for Chapter 5 A.4.1.||Answers For Chapter 5 A.4.1.
As a function, eval has a return value much like a subroutine's (the last expression evaluated, or a value returned early by the return keyword).||As a Function, Eval Has a Return Value Much Like a Subroutine's (The Last Expression 评估, Or a Value Returned Early By The Return Keyword).
To contribute to CPAN, you need two things:||To 捐献 To Perl综合典藏网, You Need Two Things:
# no Silence of the Lambs }|| # No Silence Of The Lambs }
At this point, we have two names for the data in @data1: @data1 itself and @{$data2[3]}, and two names for the data in @data2: @data2 itself and @{$data1[2]}.||At This 尖, We Have Two Names For The Data In @data1: @data1 Itself And @{$data2[3]}, And Two Names For The Data In @data2: @data2 Itself And @{$data1[2]}.
It's really quite flexible.[*]||It's Really Quite 柔韧的.[*]
Without going into too many details, a typeglob stores pointers to all the package variables of that name.||Without Going Into Too Many Details, a typeglob stores pointers To All The Package Variables Of That Name.
Too often, we see code written like:||Too Often, We See Code Written Like:
my %hash = @result;||My %Hash = @Result;
# set global||# Set Global
Animal::speak('Cow');||Animal::说话('Cow');
In other words, taking $all_with_names[2], we dereference it in an expression that would be something like $DUMMY[1] as an ordinary array, so we'll place {$all_with_names[2]} in place of DUMMY.||In Other Words, Taking $all_with_names[2], We 废弃 It In An Expression That Would Be Something Like $DUMMY[1] As An Ordinary Array, So We'我 Place {$all_with_names[2]} In Place Of DUMMY.
The key is that Perl programmers rarely do so because the most important reasons to use those data structures don't apply in Perl.||The Key Is That Perl Programmers 难得 Do So Because The Most Important Reasons To Use Those Data Structures Don't 应用 In Perl.
There's another downside: ambiguous parsing.||There's 另一个 downside: 模棱两可的 解析.
my $name = 'Mr. Ed'; my $tv_horse = \$name;||My $Name = 'Mr. Ed'; My $tv_horse = \$Name;
It might also be connected to a socket, a scalar variable, an external command's output, [*] or anything else we can dream up.||It Might Also Be connected To a socket, a Scalar Variable, An External 命令's 出产, [*] Or Anything Else We Can 梦 Up.
Take a list of @castaways, create some arrayrefs by asking the monkey a simple question, sort the list of arrayrefs, and then extract the names from each arrayref.||Take a List Of @castaways, Create Some arrayrefs By 问 The 猴子 a Simple Question, Sort The List Of arrayrefs, And Then 取出 The Names From Each Arrayref.
We pass the 1024 parameter into the print_bigger_than, which then gets shifted into the $minimum_size lexical variable.||We Pass The 1024 Parameter Into The print_bigger_than, Which Then Gets shifted Into The $minimum_size Lexical Variable.
When Perl destroys the last reference to the Animal-ish object (even if it's at the end of the program), it also automatically removes the temporary file to avoid a mess.||When Perl destroys The Last Reference To The Animal-芬兰 Object (Even If It's At The End Of The Program), It Also Automatically Removes The temporary File To Avoid a 肮脏.
Well, the reference count for the two arrays goes down from two to one, but not zero.||Well, The Reference 计算 For The Two Arrays 去 向下 From Two To One, But Not 零.
Chapter 13 shows how to create weak references, which can help with many of these problems.||Chapter 13 Shows How To Create 弱的 References, Which Can Help With Many Of These 问题.
To switch the behavior, we simply change the module name.||To Switch The Behavior, We Simply Change The Module Name.
Read this as data from the keyboard; don't get it from the command-line arguments.||Read This As Data From The 键盘; Don't Get It From The 命令-Line Arguments.
We wrap an eval { } around the pattern match in case the pattern doesn't compile (for instance, it has an unmatched parenthesis or square bracket).||We 包 An Eval { } Around The 模式 Match In Case The 模式 Doesn't Compile (For 例子, It Has An unmatched parenthesis Or 正方形 括号).
The element $VAR1 corresponds to a reference to @data1, while $VAR2 corresponds to a reference to @data2.||The Element $VAR1 对应吗 To a Reference To @data1, While $VAR2 对应吗 To a Reference To @data2.
Also, @$items (and its more generic form, @{$items}) works within a double-quoted string.||Also, @$物品 (And Its More 通用 Form, @{$物品}) Works Within a 两倍的-引用 String.
$ perl Makefile.PL $ make $ make test $ make install||$ Perl Makefile.PL $ Make $ Make Test $ Make 安装
[*] Please keep the number of questions to a minimum, however.||[*] Please 保持 The Number Of Questions To a 最少量, However.
Which way is better?||Which Way Is Better?
The Comprehensive Perl Archive Network CPAN is the result of many volunteers working together, many of whom were originally operating their own little (or big) Perl FTP sites back before that Web thing came along.||The Comprehensive Perl 存档文件 Network Perl综合典藏网 Is The Result Of Many volunteers Working Together, Many Of 谁（宾格） Were Originally Operating Their Own Little (Or Big) Perl FTP sites Back Before That Web Thing 来 沿着.
Note that we've gotten rid of numeric equality and instead asked if "this is that."||Note That We'Ve gotten 使摆脱 Of 数值 平等 And Instead 问 If "This Is That."
For this example, this means we can pick out the array reference for Gilligan with a simple $all_with_names[2]->[1], and Gilligan's first provision with $all_with_names[2]->[1]->[0].||For This Example, This Means We Can 拣 Out The Array Reference For Gilligan With a Simple $all_with_names[2]->[1], And Gilligan's First 准备 With $all_with_names[2]->[1]->[0].
We eliminated the reference to @data2 from within @data1, and vice versa.||We eliminated The Reference To @data2 From Within @data1, And 坏事 versa.
Many people are familiar with typing :all, and it's far more self-documenting than /^/ is, so include it if you can.||Many People Are 熟悉的 With 打字 :All, And It's Far More 自己-记录 Than /^/ Is, So Include It If You Can.
Here's what happens when we step into the inner loop:||Here's What Happens When We 脚步 Into The Inner Loop:
Exercise 2 [15 min] Modify your answer to Exercise 1 to use an export tag named all.||Exercise 2 [15 min] Modify Your Answer To Exercise 1 To Use An Export 标签 Named All.
The keys of the hash will be the person's name, and the value will be an array reference to an array containing a list of provisions.||The Keys Of The Hash Will Be The 人's Name, And The Value Will Be An Array Reference To An Array Containing a List Of provisions.
The other variations would have to indicate failure by throwing an exception with die.||The Other variations Would Have To 指明 失败 By 投掷 An Exception With Die.
my @packed_light = grep @{ $provisions{$_} } < 5, keys %provisions;||My @packed_light = Grep @{ $provisions{$_} } < 5, Keys %provisions;
The answer may be simple or complex.||The Answer May Be Simple Or 综合的.
The more we can decouple our implementation (hash versus array, names of hash keys, or types of elements) from the interface (method names, parameter lists, or types of return values), the more flexible and maintainable our system becomes.||The More We Can decouple Our 实行 (Hash 对 Array, Names Of Hash Keys, Or Types Of Elements) From The Interface (Method Names, Parameter Lists, Or Types Of Return Values), The More 柔韧的 And maintainable Our System Becomes.
As our first attempt, let's invoke the Animal::speak method directly:||As Our First 尝试, Let's 调用 The Animal::说话 Method 直接地:
The eval TRaps that error and returns undef, which is false.||The Eval TRaps That Error And Returns Undef, Which Is False.
Among them, they test your module on just about every platform, operating system, and Perl version that matters (and many that you probably don't pay attention to).||Among Them, They Test Your Module On Just About Every 讲台, Operating System, And Perl Version That matters (And Many That You Probably Don't 支付 注意 To).
Exercise 2 use IO::File; my %output_handles; while (<>) {||Exercise 2 Use IO::File; My %output_handles; While (<>) {
Any nonexistent variable, or a variable containing undef, which we dereference while looking for a variable location (technically called an lvalue context), is automatically stuffed with the appropriate reference to an empty item, and Perl allows the operation to proceed.||Any nonexistent Variable, Or a Variable Containing Undef, Which We 废弃 While 看 For a Variable 地点 (technically Called An 左值 Context), Is Automatically 塞 With The 恰当的 Reference To An Empty 条款, And Perl Allows The Operation To 前进.
(How long would it take you to debug this without Perl's warnings to help you?||(How Long Would It Take You To debug This Without Perl's 警告 To Help You?
Now, a word from our parser: because blocks and anonymous hash constructors both use curly braces in roughly the same places in the syntax tree, the compiler has to make ad hoc determinations about which of the two you mean.||Now, a 字 From Our Parser: Because Blocks And Anonymous Hash 构造函数 Both Use 卷曲的 牙套 In 大约地 The Same Places In The Syntax 树, The Compiler Has To Make 广告 hoc determinations About Which Of The Two You Mean.
We can shorten it with a hash slice.||We Can 缩短 It With a Hash 薄片.
When we evaluate the code as Perl code, we end up with two package variables, $VAR1 and $VAR2, that are equivalent to the original data.||When We 估价 The Code As Perl Code, We End Up With Two Package Variables, $VAR1 And $VAR2, That Are Equivalent To The Original Data.
{ package Barn;||{ Package Barn;
This construct is commonly called the Schwartzian Transform, which was named after Randal (but not by Randal), thanks to a Usenet posting he made many years ago.||This Construct Is 通常 Called The Schwartzian Transform, Which Was Named After Randal (But Not By Randal), 感谢int To a Usenet posting 他 Made Many Years 以前.
We wanted to see if the result was a 0 or minus 0 (on the rare systems that give back a minus 0).||We 想要 To See If The Result Was a 0 Or 减去 0 (On The 稀有的 系统 That Give Back a 减去 0).
How do we know it works the same on other operating systems or versions of Perl?||How Do We Know It Works The Same On Other Operating 系统 Or Versions Of Perl?
If in doubt, benchmark.||If In 怀疑, benchmark.
We write the hash syntax as we would have without references and then replace the name of the hash with a pair of curly braces surrounding the thing holding the reference.||We Write The Hash Syntax As We Would Have Without References And Then 归还原处 The Name Of The Hash With a 对 Of 卷曲的 牙套 周围 The Thing 支持 The Reference.
Answers for Chapter 14 A.13.1.||Answers For Chapter 14 A.13.1.
is(1 + 2, 3, '1 + 2 is 3'); is(2 * 4, 6, '2 * 4 is 6');||Is(1 + 2, 3, '1 + 2 Is 3'); Is(2 * 4, 6, '2 * 4 Is 6');
If the compiler ever decides incorrectly, you might need to provide a hint to get what you want.||If The Compiler 曾经 decides incorrectly, You Might Need To Provide a 暗示 To Get What You Want.
Similarly, the syntax $skipper[1] consists of the name of the array in the middle and some syntax around the outside to get at the second element of the array (index value 1 is the second element because index values start at 0).||Similarly, The Syntax $skipper[1] consists Of The Name Of The Array In The 当中 And Some Syntax Around The Outside To Get At The Second Element Of The Array (Index Value 1 Is The Second Element Because Index Values Start At 0).
Exercises You can find the answers to these exercises in "Answers for Chapter 15" in the Appendix.||Exercises You Can 寻找 The answers To These exercises In "Answers For Chapter 15" In The Appendix.
Finally, it's time for the output:||Finally, It's Time For The 出产:
while (@handlepairs) {||While (@handlepairs) {
In fact, it's still a fully functional array that we can shrink or grow just as we do any other Perl array:||In Fact, It's Still a Fully Functional Array That We Can 收缩 Or Grow Just As We Do Any Other Perl Array:
And like Learning Perl, we've developed the material in this book for a teaching environment and used it in that setting, including for our own use at Stonehenge Consulting Services, as we conduct on-site and open-enrollment trainings.||And Like Learning Perl, We'Ve 发达 The 材料 In This 书 For a 教学 环境 And Used It In That Setting, Including For Our Own Use At Stonehenge Consulting Services, As We 行为 On-场所 And Open-enrollment trainings.
Turn the input hash into a series of references to arrays.||Turn The Input Hash Into a 系列 Of References To Arrays.
[*] Why not upgrade?||[*] Why Not upgrade?
Exercise 2 Here's one way to do it.||Exercise 2 Here's One Way To Do It.
Answer for Chapter 17 A.16.1.||Answer For Chapter 17 A.16.1.
Hint: use a hash, keyed by the castaway name, holding IO::File objects for each output file.||Hint: Use a Hash, keyed By The castaway Name, 支持 IO::File Objects For Each 出产 File.
One way around this is to define a more general version of name to handle either a class or instance and then change the other routines to call it:||One Way Around This Is To Define a More General Version Of Name To Handle Either a Class Or 例子 And Then Change The Other Routines To Call It:
$ perl Makefile.PL $ make tardist||$ Perl Makefile.PL $ Make tardist
And what better way to accomplish a tricky but repetitive task than with a program?||And What Better Way To 完成 a 巧妙的 But 重复的 工作 Than With a Program?
my $skipper_home = {||My $skipper_home = {
my $basename = File::Basename::basename($some_path);||My $basename = File::Basename::basename($some_path);
For example, suppose the eat method for an animal is complex but unused in nearly every invocation of the program.||For Example, 猜想 The 吃 Method For An 动物 Is 综合的 But unused In 几乎 Every 调用 Of The Program.
In this example, we use a fictional (at the time of this writing) Color::Conversions module to change the format of the color data behind the scenes:||In This Example, We Use a 虚构的 (At The Time Of This 写作) Color::Conversions Module To Change The Format Of The 颜色 Data 在 The scenes:
my $product = sqrt(7) * sqrt(7);||My $产品 = sqrt(7) * sqrt(7);
We save this name in $person, and then we extract the item list from the hash.||We Save This Name In $人, And Then We 取出 The 条款 List From The Hash.
Importing with Exporter In Chapter 3, we skipped over that "and now magic happens" part where the import routine (defined by the module author) is supposed to take File::Basename::fileparse and somehow alias it into the caller's package so it's callable as fileparse.||Importing With Exporter In Chapter 3, We Skipped 在 That "And Now Magic Happens" Part Where The Import Routine (Defined By The Module 作者) Is 应该 To Take File::Basename::fileparse And 以某种方式 Alias It Into The Caller's Package So It's 提前赎回的 As fileparse.
Otherwise, we look at the individual corresponding values of the two arrays, selecting only the ones that meet our match.||Otherwise, We Look At The Individual 相应的 Values Of The Two Arrays, 选择 Only The Ones That 遇到 Our Match.
However, we can record the created animal in a hash and iterate over that hash.||However, We Can Record The Created 动物 In a Hash And iterate 在 That Hash.
This is great, because unless you work 35 hours each day, you'll need some help with larger tasks.||This Is 大的, Because Unless You Work 35 小时 Each 一天, You'我 Need Some Help With larger Tasks.
This subroutine is similar to the x command in the debugger.||This Subroutine Is Similar To The x 命令 In The Debugger.
For good measure, we should probably sort both lists to be consistent:||For Good 尺寸, We Should Probably Sort Both Lists To Be 始终如一的:
## Add these new keywords supported since 5.005|| ## Add These New Keywords Supported Since 5.005
The first element of each array is a name string, while the second element is a reference to an anonymous array of varying lengths naming the provisionsall without having to come up with temporary names for any of the intermediate layers.||The First Element Of Each Array Is a Name String, While The Second Element Is a Reference To An Anonymous Array Of 不同 长度 Naming The provisionsall Without Having To 来到 Up With temporary Names For Any Of The 中间的 层.
use Test::More "no_plan"; # during development||Use Test::More "no_plan"; # 在 进展
The grep in a scalar context returns the number of times the expression $item eq $_ returns true, which is 1 if the item is in the list and 0 if not.[*] If the value is 0, it's false, and we print the message.||The Grep In a Scalar Context Returns The Number Of Times The Expression $条款 Eq $_ Returns True, Which Is 1 If The 条款 Is In The List And 0 If Not.[*] If The Value Is 0, It's False, And We Print The 音讯.
sub print_contents {||Sub print_contents {
use lib $Bin;||Use lib $Bin;
Perl then constructs an argument list, similar to the way an argument list was constructed when we used the method arrow with a class name.||Perl Then Constructs An Argument List, Similar To The Way An Argument List Was 构造 When We Used The Method 箭 With a Class Name.
We merely need to perform another map to transform the references back to the original data:||We 仅仅 Need To 执行 另一个 Map To 转变 The References Back To The Original Data:
But each new destination host extends a hash to include a new initially undef byte count, and each new source host uses autovivification to create a destination host hash.||But Each New 终点 一大群 Extends a Hash To Include a New 最初 Undef 字节 计算, And Each New Source 一大群 Uses autovivification To Create a 终点 一大群 Hash.
If the count is 0, there's no bottle, so the result is false for the outer grep.||If The 计算 Is 0, There's No 瓶子, So The Result Is False For The 外部的 Grep.
We define the initial color as the default color, as before, because the generated new method calls the init method.||We Define The Initial 颜色 As The Default 颜色, As Before, Because The Generated New Method Calls The Init Method.
Perl operators such as grep, map, sort, and print||Perl Operators Such As Grep, Map, Sort, And Print
(A file specification is usually a file or directory name, but it may be a name of a file that doesn't existin which case, it's not really a filename, is it?)||(A File 规格 Is Usually a File Or Directory Name, But It May Be a Name Of a File That Doesn't existin Which Case, It's Not Really a 文件名, Is It?)
While looking at the second line of input, we'll end up with this effect:||While 看 At The Second Line Of Input, We'我 End Up With This Effect:
Inside the loop, print out the total number of bytes sent from that source machine, and then make a sorted list of the destination files (similar to the list in @sources).||Inside The Loop, Print Out The 总 Number Of 字节 打发 From That Source 机器, And Then Make a 分类 List Of The 终点 Files (Similar To The List In @来源).
which results in:||Which Results In:
Either style is fine, as long as we document our particular way of giving birth to an object.||Either Style Is Fine, As Long As We Document Our Particular Way Of Giving 出生 To An Object.
sub named {||Sub Named {
Creating an Anonymous Hash Similar to creating an anonymous array, you can also create an anonymous hash.||Creating An Anonymous Hash Similar To Creating An Anonymous Array, You Can Also Create An Anonymous Hash.
The first part of this is trivial:||The First Part Of This Is 琐碎的:
If the user chose "tee", we create filehandles for a file and a scalar, then combine both of those in an IO::Tee object that we store in $fh.||If The User chose "tee", We Create Filehandles For a File And a Scalar, Then 组合 Both Of Those In An IO::Tee Object That We 商店 In $Fh.
[] And writing the documentation at the same time, made easier by Test::Inline, as we'll see later.||[] And 写作 The 提供文件 At The Same Time, Made Easier By Test::Inline, As We'我 See 更晚.
You can even test the use with Test::More when you want to ensure that the module loads correctly:||You Can Even Test The Use With Test::More When You Want To Ensure That The Module loads 正确地:
After that, we use the convenience functions from Test::More, which we'll go through later.||After That, We Use The 方便 Functions From Test::More, Which We'我 Go 通过 更晚.
When our output gets to IO::Tee, it can go to two (or more) different channels at the same time.||When Our 出产 Gets To IO::Tee, It Can Go To Two (Or More) Different channels At The Same Time.
The URI::URL module, now deprecated and replaced by the URI module, deals with universal resource identifiers, most commonly seen as URLs such as http://www.gilligan.crew.hut/maps/island.pdf.||The URI::URL Module, Now deprecated And Replaced By The URI Module, deals With 宇宙的 资源 Identifiers, Most 通常 Seen As URLs Such As http://www.gilligan.crew.hut/maps/island.pdf.
As you step through that list, use next to skip over the dummy $all item.||As You 脚步 通过 That List, Use 下一次 To 跳过 在 The 傀儡 $All 条款.
Of course, any really good example should be repeated in your module's POD documentation.||Of Course, Any Really Good Example Should Be 重复 In Your Module's POD 提供文件.
#!/usr/bin/perl||#!/usr/bin/Perl
The interface is similar to using Data::Dumper, except we must put everything into one reference.||The Interface Is Similar To Using Data::Dumper, Except We Must Put Everything Into One Reference.
Now let's look at modifying the original array.||Now Let's Look At modifying The Original Array.
For example, continuing on with the Animal family from the previous chapters:||For Example, continuing On With The Animal 家庭 From The Previous chapters:
For example, to invoke the Skipper's get_us_home program, the command line might be something like:||For Example, To 调用 The Skipper's get_us_home Program, The 命令 Line Might Be Something Like:
The variables %gilligan_info and %skipper_info are just temporaries we needed to create the hashes for the final data structure.||The Variables %gilligan_info And %skipper_info Are Just temporaries We Needed To Create The Hashes For The 最终的 Data Structure.
my $ginger = sub {||My $姜 = Sub {
If we place this code at the beginning of the program, we declare the variable $count inside the naked block scope, and the two subroutines that reference the variable become closures.||If We Place This Code At The 开端 Of The Program, We Declare The Variable $计算 里面 The 裸体的 Block Scope, And The Two Subroutines That Reference The Variable 变成 Closures.
sub Sheep::speak {||Sub Sheep::说话 {
sub skipper_greets {||Sub skipper_greets {
Perl automatically calls a routine called import in the module's package, passing along the entire import list.||Perl Automatically Calls a Routine Called Import In The Module's Package, Passing 沿着 The 完全的 Import List.
When we're sorting numbers, $a and $b are numbers; when we're sorting references, $a and $b are references.||When We'Re sorting 编号, $a And $b Are 编号; When We'Re sorting References, $a And $b Are References.
Note the comment about DST.||Note The Comment About DST.
Then there are always the future releases to think about.||Then There Are Always The Future Releases To 想 About.
Thus, all module filenames must end in dot-p-m.||Thus, All Module filenames Must End In 点-m-m.
Why wouldn't it be between subscripty things?||Why Wouldn't It Be Between subscripty Things?
We end up with a complex data structure, which can be quite useful.||We End Up With a 综合的 Data Structure, Which Can Be Quite Useful.
Island-Plotting-Maps version 0.01 = == == == == == == == == == == == == == == == ==||Island-Plotting-Maps Version 0.01 = == == == == == == == == == == == == == == == ==
However, there should be an easier way.||However, There Should Be An Easier Way.
Taking a Reference to an Array Among its many other meanings, the backslash (\) character is also the "take a reference to" operator.||Taking a Reference To An Array Among Its Many Other Meanings, The 反斜杠 (\) Character Is Also The "Take a Reference To" Operator.
The @INC array is an ordinary array, so have the Skipper add a directory below his home directory to the mix:||The @INC Array Is An Ordinary Array, So Have The Skipper 增添 a Directory Below 他的 家 Directory To The 混合:
Getting Our Deposit Back Because of the way the code is written, the setter also returns the updated value.||Getting Our Deposit Back Because Of The Way The Code Is Written, The setter Also Returns The Updated Value.
We have to fill in (or not fill in) three variables:||We Have To 装满 In (Or Not 装满 In) Three Variables:
#!/usr/bin/perl use Test::More 'no_plan'; is( "Hello Perl", "Hello perl" );||#!/usr/bin/Perl Use Test::More 'no_plan'; Is( "Hello Perl", "Hello Perl" );
After writing a dozen programs using this routine, the Skipper realizes that the output is excessively chatty when he's already taken the time to steer the proper course (or perhaps simply started drifting in the proper direction).||After 写作 a 一打 Programs Using This Routine, The Skipper realizes That The 出产 Is excessively chatty When 他's Already Taken The Time To 驾驶 The 合适的 Course (Or 也许 Simply 开始 drifting In The 合适的 方向).
Answers for Chapter 10 A.9.1.||Answers For Chapter 10 A.9.1.
Ginger: (in a sultry voice) Well hello, Skipper!||Ginger: (In a 闷热的 声音) Well 你好, Skipper!
For example, turn this hash into a list of array references, with each array containing two items.||For Example, 转向 This Hash Into a List Of Array References, With Each Array Containing Two 物品.
At first, it may look a bit mystifying, but if we walk through the code slowly, we'll see it's always doing the right thing.||At First, It May Look a Bit mystifying, But If We 步行 通过 The Code 慢慢地, We'我 See It's Always Doing The Right Thing.
An instance has a unique identity (like the serial number of a registered horse), shared properties (the color and talents of the horse), and common behavior (e.g., pulling the reins back tells the horse to stop).||An 例子 Has a 唯一的 认同 (Like The 串行 Number Of a 登记的 马), Shared propertie(绑定操作符)s (The 颜色 And talents Of The 马), And Common Behavior (e.g., pulling The reins Back 告诉 The 马 To Stop).
Now all the animals are talking, and safely at that, without the use of symbolic coderefs.||Now All The animals Are 说话, And Safely At That, Without The Use Of Symbolic coderefs.
If there is a subdirectory, the nested subroutine call uses readdir to extract the contents of that directory and returns a hash reference, which is inserted into the hash structure created by the caller.||If There Is a 子目录, The 嵌套的 Subroutine Call Uses Readdir To 取出 The Contents Of That Directory And Returns a Hash Reference, Which Is 插入 Into The Hash Structure Created By The Caller.
for my $source (keys %total_bytes) { ...||For My $Source (Keys %total_bytes) { ...
$ perl Makefile.PL PREFIX=/Users/home/Ginger||$ Perl Makefile.PL PREFIX=/Users/家/Ginger
package My::List::Util; use strict;||Package My::List::Util; Use Strict;
# reads from $read_fh my $message = <$tee_fh>;||# Reads From $read_fh My $音讯 = <$tee_fh>;
Its value (a coderef) is assigned to $callback, and there's a semicolon at the end of that statement.||Its Value (a coderef) Is Assigned To $callback, And There's a semicolon At The End Of That Statement.
Current heading is 234.||Current 标题 Is 234.
#!/usr/bin/perl use lib qw(/Users/home/Ginger);||#!/usr/bin/Perl Use lib Qw(/Users/家/Ginger);
Sometimes it's just a matter of how many times you've faced similar programming tasks in your studies or jobs.||Sometimes It's Just a Matter Of How Many Times You'Ve faced Similar Programming Tasks In Your 研究 Or jobs.
As of Perl version 5.8, we can do this directly in Perl without using IO::Scalar.||As Of Perl Version 5.8, We Can Do This 直接地 In Perl Without Using IO::Scalar.
End of program.||End Of Program.
However, if we invoke the create_find_callback_that_counts( ) twice, we get two different $count variables:||However, If We 调用 The create_find_callback_that_counts( ) 两次, We Get Two Different $计算 Variables:
my $second_reference_to_skipper = $reference_to_skipper; my $third_reference_to_skipper = \@skipper;||My $second_reference_to_skipper = $reference_to_skipper; My $third_reference_to_skipper = \@skipper;
For example, if $some_full_path were D:\Projects\Island Rescue\plan7.rtf (presumably, the program is running on a Windows machine), then $basename would be plan 7.rtf and the $dirname would be D:\Projects\Island Rescue.||For Example, If $some_full_path Were D:\Projects\Island Rescue\plan7.rtf (也许, The Program Is 连续的 On a 微软视窗操作系统 机器), Then $basename Would Be 计划平面图 7.rtf And The $dirname Would Be D:\Projects\Island Rescue.
Now the import call to the package will inherit upward to the Exporter class, providing an import routine that knows how to take a list of subroutines[*] and export them to the caller's package.||Now The Import Call To The Package Will 继承 向上（的） To The Exporter Class, 提供 An Import Routine That 知道 How To Take a List Of Subroutines[*] And Export Them To The Caller's Package.
Here's an example of an implicit reference to $_ from the pattern match operator:||Here's An Example Of An Implicit Reference To $_ From The 模式 Match Operator:
Reference Counting and Nested Data Structures The data remains alive until we destroy the last reference, even if that reference lives within a larger active data structure.||Reference Counting And Nested Data Structures The Data 剩余 活着的 Until We 破坏 The Last Reference, Even If That Reference 生活 Within a larger 活跃的 Data Structure.
Because we created both subroutine references from the same scope, they both have access to the same $total_size variable.||Because We Created Both Subroutine References From The Same Scope, They Both Have Access To The Same $total_size Variable.
We could simply return the boolean expression rather than a separate 1 or 0:||We Could Simply Return The 布尔 Expression Rather Than a Separate 1 Or 0:
If we want to prevent that, we just put a do-nothing method into the base class.||If We Want To 防止 That, We Just Put a Do-Nothing Method Into The Base Class.
Note the two changes: the input value comes in via $_ rather than an argument list, and we removed the keyword return.||Note The Two Changes: The Input Value 来 In Via $_ Rather Than An Argument List, And We Removed The Keyword Return.
What does sqrt(undef) do?||What Does sqrt(undef) Do?
You'll learn the basics of packaging your code as a distribution and providing unit tests for that distribution, both for development and for verifying that your code works in the ultimate end environment.||You'我 学习 The basics Of 包装 Your Code As a 分配 And 提供 单位 测试 For That 分配, Both For 进展 And For verifying That Your Code Works In The 最终的 End 环境.
[] Trivia note: 21.283 degrees north, 157.842 degrees west is the location of the real-life marina where the opening shot of a famous television series was filmed.||[] Trivia Note: 21.283 度 North, 157.842 度 西方 Is The 地点 Of The Real-生活 marina Where The 开始 射击 Of a 著名的 电视 系列 Was filmed.
We can add those subroutines to the @EXPORT_OK list in the module's package.||We Can 增添 Those Subroutines To The @EXPORT_OK List In The Module's Package.
Truly a dizzying array of options.||Truly a dizzying Array Of 选项.
use lib '/home/ginger/Testing/lib/site_perl';||Use lib '/家/姜/Testing/lib/site_perl';
croak "$_[0] does not understand $method\n";||croak "$_[0] Does Not Understand $Method\n";
Of course, we didn't actually need that scalar temporary, either.||Of Course, We Didn't Actually Need That Scalar temporary, Either.
# test if the file is there ok( ! -e 'minnow.db' );||# Test If The File Is There Ok( ! -g 'minnow.db' );
If you don't want to spell out every possible subfunction, bring them all in:||If You Don't Want To 拼写 Out Every Possible subfunction, 拿来 Them All In:
Yes, every scalar, array, hash, filehandle, or subroutine now has to have a navigation_ prefix in front of it to guarantee that the names won't collide with any potential users of the library.||Yes, Every Scalar, Array, Hash, Filehandle, Or Subroutine Now Has To Have a navigation_ 前缀 In Front Of It To 保证 That The Names Won't 猛烈碰撞 With Any 潜在的 Users Of The Library.
use Data::Dumper; print Dumper(data_for_path('.'));||Use Data::Dumper; Print Dumper(data_for_path('.'));
Most programs leave the package as the default main package.||Most Programs 出发 The Package As The Default Main Package.
The penalty is a very slight increase in compile-time activity because the Perl parser has to skip over the embedded POD directives.||The 刑罚 Is a Very 轻微的 增加 In Compile-Time 活动 Because The Perl Parser Has To 跳过 在 The embedded POD directives.
We set $VERSION just like we discussed in Chapter 16.||We Set $VERSION Just Like We 讨论 In Chapter 16.
Obviously, we should use UNIVERSAL sparingly, because there's only one universe of objects, and our fandango might collide with some other included module's fandango.||Obviously, We Should Use UNIVERSAL sparingly, Because There's Only One 宇宙 Of Objects, And Our fandango Might 猛烈碰撞 With Some Other 包括 Module's fandango.
This rule also means that it's easy to see where the "missing" braces need to go.||This Rule Also Means That It's Easy To See Where The "Missing" 牙套 Need To Go.
IO::Tee What if we want to send output to more than one place at a time?||IO::Tee What If We Want To 派遣 出产 To More Than One Place At a Time?
If the Skipper merely inserts:||If The Skipper 仅仅 inserts:
For a plain file, dump the pathname; for a directory, $data is a hash reference.||For a 明白的 File, 倾倒 The pathname; For a Directory, $Data Is a Hash Reference.
Exercise You can find the answer to this exercise in "Answer for Chapter 12" in the Appendix.||Exercise You Can 寻找 The Answer To This 锻炼 In "Answer For Chapter 12" In The Appendix.
Of course, this is awkward to type, so more often we'll see this written with the quotewords operator:||Of Course, This Is 笨拙的 To Type, So More Often We'我 See This Written With The quotewords Operator:
sub UNIVERSAL::fandango {||Sub UNIVERSAL::fandango {
If you didn't get the warning, perhaps you didn't have warnings turned on, either with the -w switch or with the use warnings pragma.||If You Didn't Get The Warning, 也许 You Didn't Have 警告 转 On, Either With The -w Switch Or With The Use 警告 Pragma.
So, we stick (mostly) with the "shifting" style of argument parsing.||So, We Stick (Mostly) With The "shifting" Style Of Argument 解析.
@ { $hash_ref } { qw(name position) }||@ { $hash_ref } { Qw(Name Position) }
After the shift, @_ only has the items.||After The Shift, @_ Only Has The 物品.
Now we'll get the right behavior for:||Now We'我 Get The Right Behavior For:
Now there's a file named Island-Plotting-Maps-0.01.tar.gz in the directory.||Now There's a File Named Island-Plotting-Maps-0.01.tar.gz In The Directory.
For example, to pick a particular value for a given key, we do this:||For Example, To 拣 a Particular Value For a Given Key, We Do This:
It doesn't catch warnings either (although Perl does provide a way to intercept warning messages; see $SIG{_ _WARN_ _}).||It Doesn't Catch 警告 Either (Although Perl Does Provide a Way To intercept Warning Messages; See $SIG{_ _WARN_ _}).
Here is some simple but not very well-written code from Gilligan.||Here Is Some Simple But Not Very Well-Written Code From Gilligan.
However, another Perl core module is much better suited for marshaling: Storable.||However, 另一个 Perl Core Module Is Much Better suited For marshaling: Storable.
This is mostly a style call: in both cases, the first parameter ends up in $new_heading.||This Is Mostly a Style Call: In Both Cases, The First Parameter Ends Up In $new_heading.
In this case, we tell the mock object to return true for engines_on and to return false for moored_to_dock.||In This Case, We Tell The 嘲笑 Object To Return True For engines_on And To Return False For moored_to_dock.
my @smaller_than_1000 = grep { -s < 1000 } @ARGV;||My @smaller_than_1000 = Grep { -s < 1000 } @命令行传入参数;
We just want to see where they start to be different.||We Just Want To See Where They Start To Be Different.
Then from there, you use make (or something like it) to control all of the remaining tasks.||Then From There, You Use Make (Or Something Like It) To Control All Of The Remaining Tasks.
The cmp operator is most often used in more complex comparisons, as we'll show shortly.||The cmp Operator Is Most Often Used In More 综合的 comparisons, As We'我 Show 立刻.
But on some platforms, this may fail unnecessarily, due to some I/O-related oddity.||But On Some Platforms, This May 失败 不必要的, Due To Some I/O-Related oddity.
This block does not work when you put it after those invocations because there are two functional parts to the first line:||This Block Does Not Work When You Put It After Those invocations Because There Are Two Functional 部分 To The First Line:
If the value in $unknown_thing isn't a reference, then we can't call a method on it.||If The Value In $unknown_thing Isn't a Reference, Then We Can't Call a Method On It.
That array becomes the input for the map, which takes each element and returns it with spaces tacked on the front and a newline on the end.||That Array Becomes The Input For The Map, Which Takes Each Element And Returns It With spaces tacked On The Front And a 换行符 On The End.
This is why OO programming encourages you to call getters and setters, even if they take some time.||This Is Why OO Programming encourages You To Call getters And setters, Even If They Take Some Time.
use CGI; my $q = CGI->new; # create a query object my $f = $q->param('foo'); # get the foo field||Use (（CGI）通用网关界面)通用网关界面; My $q = (（CGI）通用网关界面)通用网关界面->New; # Create a 询问 Object My $f = $q->param('Foo'); # Get The Foo 田野
Otherwise, perhaps it's a setter:||Otherwise, 也许 It's a setter:
my @horses_only = grep ref $_ eq 'Horse', @all_animals;||My @horses_only = Grep Ref $_ Eq 'Horse', @all_animals;
To perform the proper cleanup operations when an object is destroyed, we need to know when that happens.||To 执行 The 合适的 清理 操作 When An Object Is destroyed, We Need To Know When That Happens.
Perhaps we keep many records in order by a numeric code for efficiency reasons, but we occasionally want to view them in alphabetical order as well.||Perhaps We 保持 Many Records In Order By a 数值 Code For Efficiency Reasons, But We Occasionally Want To 视域 Them In alphabetical Order As Well.
When we look at the coverage.html page, we see a summary of our project along with its coverage statistics.||When We Look At The coverage.html 页, We See a 概要 Of Our 计划 沿着 With Its 覆盖率 统计（学）.
For example, both of these lines refer to the entire array:||For Example, Both Of These Lines Refer To The 完全的 Array:
First, create the base class of LivingCreature with a single speak method:||First, Create The Base Class Of LivingCreature With a Single 说话 Method:
Now we have an array of references to arrays, each element of which is an IO::File object.||Now We Have An Array Of References To Arrays, Each Element Of Which Is An IO::File Object.
The control variable $person will be each of $all_with_names[0], $all_with_names[1], and $all_with_names[2], as the loop progresses.||The Control Variable $人 Will Be Each Of $all_with_names[0], $all_with_names[1], And $all_with_names[2], As The Loop progresses.
The first thing a test file must announce to the test harness (on STDOUT) is the expected number of tests, as a string that looks like a Perl range, 1..N. For example, if there are 17 tests, the first line of output should be:||The First Thing a Test File Must 宣布 To The Test 支配 (On STDOUT) Is The Expected Number Of 测试, As a String That Looks Like a Perl 射程, 1..N. For Example, If There Are 17 测试, The First Line Of 出产 Should Be:
Let's turn that into a Test::* module.||Let's 转向 That Into a Test::* Module.
my @sorted = sort qw(Gilligan Skipper Professor Ginger Mary_Ann); print "@sorted\n";||My @分类 = Sort Qw(Gilligan Skipper Professor Ginger Mary_Ann); Print "@分类\n";
Obviously, this will be more interesting if our current directory contains subdirectories.||Obviously, This Will Be More Interesting If Our Current Directory 包含 subdirectories.
If that seems like too much editing, he can instead set the PERL5LIB environment variable to the directory name.||If That 似乎 Like Too Much editing, 他 Can Instead Set The PERL5LIB 环境 Variable To The Directory Name.
First, Perl constructs the argument list.||First, Perl Constructs The Argument List.
Now how do we get to Gilligan's first item?||Now How Do We Get To Gilligan's First 条款?
If you do not like that (for the same reasons as regular open), use one of the other calling conventions.||If You Do Not Like That (For The Same Reasons As Regular Open), Use One Of The Other Calling 公约.
Chapter 17, Essential Testing Test your code to ensure it does what you want it to do.||Chapter 17, Essential Testing Test Your Code To Ensure It Does What You Want It To Do.
Now a RaceHorse can do anything a Horse can do, and anything a Racer can do as well.||Now a RaceHorse Can Do Anything a Horse Can Do, And Anything a Racer Can Do As Well.
sub turn_toward_port {||Sub turn_toward_port {
In that case, the Exporter->import routine looks at @EXPORT and provides everything in the list.[]||In That Case, The Exporter->Import Routine Looks At @EXPORT And Provides Everything In The List.[]
If we have our libraries in the same directory, our next line can be:||If We Have Our 库 In The Same Directory, Our 下一次 Line Can Be:
Adding Parameters to a Method Let's train our animals to eat:||Adding Parameters To a Method Let's 列车 Our animals To 吃:
The command perl -V:make will tell you the name of your make utility program; if it says make='nmake', simply use nmake wherever you use make.||The 命令 Perl -V:Make Will Tell You The Name Of Your Make 效用 Program; If It 说 Make='nmake', Simply Use nmake 无论哪里 You Use Make.
In the @Offsets array, we store the number to add to the corresponding entry in the localtime list.||In The @Offsets Array, We 商店 The Number To 增添 To The 相应的 Entry In The localtime List.
Using require Suppose navigation.pm itself also pulls in drop_anchor.pm for some common navigation task.||Using Require Suppose navigation.pm Itself Also pulls In drop_anchor.pm For Some Common 航行 工作.
Start with the simplest reference that can hold a horse's name, a scalar reference:[*]||Start With The simplest Reference That Can Hold a 马's Name, a Scalar Reference:[*]
At the end, gilligan.info should start with:||At The End, gilligan.info Should Start With:
It actually needs no introduction because it's that very same backslash as before:||It Actually Needs No 介绍 Because It's That Very Same 反斜杠 As Before:
[*] It's almost like a global variable, except it doesn't live in a package and can't be seen outside its file.||[*] It's Almost Like a Global Variable, Except It Doesn't 居住生存 In a Package And Can't Be Seen Outside Its File.
At the end of our script, we call the debug method on our $date object.||At The End Of Our 临时单据, We Call The debug Method On Our $Date Object.
Well, we can just use the cmp_ok routine instead.[*] The first and third arguments are the operands, [] and the intervening, second argument is the comparison operator (as a string!).||Well, We Can Just Use The cmp_ok Routine Instead.[*] The First And 第三 Arguments Are The operands, [] And The intervening, Second Argument Is The 比较 Operator (As a String!).
We need to use ucfirst because we named the method color to fetch the hash element called Color.||We Need To Use ucfirst Because We Named The Method 颜色 To 去取来 The Hash Element Called Color.
check_items_for_all(\%all);||check_items_for_all(\%All);
Note that the animals die at their proper time because the variables holding the animals are all being destroyed at the final step.||Note That The animals Die At Their 合适的 Time Because The Variables 支持 The animals Are All Being destroyed At The 最终的 脚步.
However, we've seen that removing the items from @_ as they are identified does have some advantages.||However, We'Ve Seen That removing The 物品 From @_ As They Are identified Does Have Some advantages.
print $tee_fh "The radio works in the middle of the ocean!\n";||Print $tee_fh "The 无线电 Works In The 当中 Of The 海洋!\n";
At this point, you're right to think that example is contrived.||At This 尖, You'Re Right To 想 That Example Is contrived.
[*] Not that any of us have ever done that and wondered why the program took forever.||[*] Not That Any Of Us Have 曾经 Done That And wondered Why The Program took 永远.
IO::Dir We can use object-oriented interfaces for directory handles too.||IO::Dir We Can Use Object-Oriented 接口 For Directory 处理 Too.
my @professor = qw(sunscreen water_bottle slide_rule batteries radio); my @professor_with_name = ('The Professor', \@professor);||My @教授 = Qw(sunscreen water_bottle slide_rule batteries 无线电); My @professor_with_name = ('The Professor', \@教授);
Nothing in the Perl method definition says "this is a class method" or "this is an instance method."||Nothing In The Perl Method Definition 说 "This Is a Class Method" Or "This Is An 例子 Method."
Generally, you can start with the 0.01 given by the template and increase it consistently with each new test release.[*] Now you're past the header information and down to the core of your module.||Generally, You Can Start With The 0.01 Given By The template And 增加 It consistently With Each New Test Release.[*] Now You'Re 过去的 The Header Information And 向下 To The Core Of Your Module.
The flexibility isn't free, however.||The 柔韧 Isn't Free, However.
Pass extra parameters.||Pass Extra Parameters.
my $copy_of_ref = \@$ref;||My $copy_of_ref = \@$Ref;
The details are described at http://www.cpan.org/modules/04pause.html.||The Details Are Described At http://www.cpan.org/modules/04pause.html.
For example, to sort those numbers in their proper order, we can use a sort block comparing $a and $b, like so:||For Example, To Sort Those 编号 In Their 合适的 Order, We Can Use a Sort Block comparing $a And $b, Like So:
In that case, instead of using the import method from Exporter as the real module does, we wrote our own to force the symbols into the main namespace.||In That Case, Instead Of Using The Import Method From Exporter As The Real Module Does, We 写 Our Own To Force The Symbols Into The Main Namespace.
If we dereference a variable containing undef as if it were a hash reference, a reference to an empty anonymous hash is inserted, and the operation continues.||If We 废弃 a Variable Containing Undef As If It Were a Hash Reference, a Reference To An Empty Anonymous Hash Is 插入, And The Operation 继续.
Mr. Ed says neigh.||Mr. Ed 说 neigh.
The top-level hash hasn't changed, but the second-level hash has added a new entry.||The 顶-Level Hash hasn't 改变, But The Second-Level Hash Has added a New Entry.
What happens when these two array names go out of scope?||What Happens When These Two Array Names Go Out Of Scope?
15.4. %EXPORT_TAGS We don't have to list every function or variable that we want to import, either.||15.4. %EXPORT_TAGS We Don't Have To List Every Function Or Variable That We Want To Import, Either.
Perl can also create references to anonymous data structures (structures that do not have explicit names) and create references automatically as needed to fulfill certain kinds of operations.||Perl Can Also Create References To Anonymous Data Structures (Structures That Do Not Have 清楚的 Names) And Create References Automatically As Needed To fulfill 确信的 种类 Of 操作.
It looks just like our indirect object calling syntax, because it is.||It Looks Just Like Our Indirect Object Calling Syntax, Because It Is.
If the user chose "scalar", we open $fh to a scalar reference.||If The User chose "Scalar", We Open $Fh To a Scalar Reference.
Using the Alternate Library Location The libraries are installed relative to the PREFIX specified earlier.||Using The Alternate Library Location The 库 Are 安装 亲戚 To The PREFIX 指定 Earlier.
Depending on which module creation tool you used, you might already have these files, too.||Depending On Which Module 创造 工具 You Used, You Might Already Have These Files, Too.
{ # start scope block||{ # Start Scope Block
If you were a project librarian, managing code for a team of developers, you might instead say something like:||If You Were a 计划 图书管理员, managing Code For a 小队 Of 开发商, You Might Instead Say Something Like:
At the time of this writing, the list is export_to_level, require_version, and export_fail.||At The Time Of This 写作, The List Is export_to_level, require_version, And export_fail.
my $tv_horse = Horse->named('Mr. Ed'); print $tv_horse->name, "\n"; # prints "Mr. Ed.\n"||My $tv_horse = Horse->Named('Mr. Ed'); Print $tv_horse->Name, "\n"; # Prints "Mr. Ed.\n"
Uploading Your Distribution Once you have your distribution ready to share, visit the PAUSE upload page at https://pause.perl.org/pause/authenquery?ACTION=add_uri.||Uploading Your Distribution Once You Have Your 分配 准备好的 To 份, 访问 The PAUSE upload 页 At https://pause.perl.有机/暂停/authenquery?ACTION=add_uri.
# it's a class, return generic|| # It's a Class, Return 通用
my @names_and_pineapples = map {||My @names_and_pineapples = Map {
use Storable; my $result = retrieve 'some_file'; use Data::Dumper; $Data::Dumper::Purity = 1; print Dumper($result);||Use Storable; My $Result = retrieve 'some_file'; Use Data::Dumper; $Data::Dumper::Purity = 1; Print Dumper($Result);
If we are using the traditional Makefile.PL, we start the installation with:||If We Are Using The 传统的 Makefile.PL, We Start The 安装 With:
From there, we can test and install the modules.||From There, We Can Test And 安装 The Modules.
One purpose of OOP is to enable the maintainer of Animal or Horse to make reasonably independent changes to the implementation of the methods and still have the exported interface work properly.||One Purpose Of OOP Is To 使能够 The maintainer Of Animal Or Horse To Make 合理地 独立的 Changes To The 实行 Of The Methods And Still Have The Exported Interface Work Properly.
[*] Remember, floating-point numbers aren't always exact; there's usually a little roundoff.||[*] Remember, Floating-尖 编号 还't Always Exact; There's Usually a Little roundoff.
our $VERSION = '0.01';||Our $VERSION = '0.01';
If all ordinary references are gone, Perl deletes the thingy and turns any weak references to undef.||If All Ordinary References Are 不见了, Perl deletes The thingy And Turns Any 弱的 References To Undef.
Chapter 13, Object Destruction Add behavior to an object that is going away, including object persistence.||Chapter 13, Object Destruction Add Behavior To An Object That Is Going Away, Including Object 坚持.
To perform an operation on the entire hash, we proceed similarly:||To 执行 An Operation On The 完全的 Hash, We 前进 同样:
## set up the subroutines my %subs; foreach my $dir (qw(bin lib man)) {||## Set Up The Subroutines My %Subs; Foreach My $dir (Qw(bin lib 人)) {
push @{ $provisions{'The Skipper'} }, "blue_shirt";||Push @{ $provisions{'The Skipper'} }, "blue_shirt";
Distinguishing actions by the presence or absence of parameters is not a universal solution.||Distinguishing 行动 By The 出席 Or 缺席 Of Parameters Is Not a 宇宙的 解决.
An empty list says "don't give me anything, " while an absent list says "give me the defaults."||An Empty List 说 "Don't Give Me Anything, " While An 缺席的 List 说 "Give Me The Defaults."
This isn't an optimal solution (we'll show better solutions in Chapter 15 when we talk about Exporter), but at least there's nothing sacred or terribly unique about main compared to any other package.||This Isn't An 最佳的 解决 (We'我 Show Better solutions In Chapter 15 When We 谈话 About Exporter), But At Least There's Nothing 神圣的 Or 可怕地 唯一的 About Main 相比 To Any Other Package.
In fact, we would have been wrong to keep the return because we're no longer in a separate subroutine: just a block of code.[*] Of course, we can optimize a few things out of that routine since we don't need the intermediate variables:||In Fact, We Would Have Been 错误的 To 保持 The Return Because We'Re No 长 In a Separate Subroutine: Just a Block Of Code.[*] Of Course, We Can 最佳化 a Few Things Out Of That Routine Since We Don't Need The 中间的 Variables:
Perl reads the file once directly and then again while processing the navigation package.||Perl Reads The File Once 直接地 And Then Again While 加工（的） The 航行 Package.
use Math::BigInt;||Use Math::BigInt;
First, we get rid of any previous coverage results by passing cover the -delete option.||First, We Get 使摆脱 Of Any Previous 覆盖率 Results By Passing 盖 The -Delete 选择.
[] Trappable with an eval, of course.||[] Trappable With An Eval, Of Course.
[*] My friends call that the "ASCIIbetical" ordering.||[*] My 朋友 Call That The "美国信息交换标准码betical" 订购.
my $third_reference_to_skipper = \@skipper;||My $third_reference_to_skipper = \@skipper;
like($subtract, qr/^-?0$/, '-3 + 3 = = 0');||Like($减去, qr/^-?0$/, '-3 + 3 = = 0');
my @lunch_choices = grep &is_edible($_), @gilligans_posessions.||My @lunch_choices = Grep &is_edible($_), @gilligans_posessions.
For this test, the number is considered a floating-point number, so 2.10 (which is really 2.1) is less than 2.9 (which must be the same as 2.90, by the same logic).||For This Test, The Number Is Considered a Floating-尖 Number, So 2.10 (Which Is Really 2.1) Is 更少的 Than 2.9 (Which Must Be The Same As 2.90, By The Same 逻辑).
my $ref_to_skipper_provisions; {||My $ref_to_skipper_provisions; {
my $fh = IO::File->new( '> castaways.log' )||My $Fh = IO::File->New( '> castaways.log' )
$reference_to_skipper = undef;||$reference_to_skipper = Undef;
The Standard Distribution Perl comes with many of the popular modules already.||The Standard Distribution Perl 来 With Many Of The 受欢迎的 Modules Already.
Most of that deals with managing memory and connecting discontiguous memory blocks, which Perl does for us.||Most Of That deals With managing Memory And connecting discontiguous Memory Blocks, Which Perl Does For Us.
We've created a loop.||We'Ve Created a Loop.
That triggers the annoying "use of uninitialized value" warning (ensure you have warnings turned on!).||That triggers The annoying "Use Of 未初始化的 Value" Warning (Ensure You Have 警告 转 On!).
Take the arrow invocation and put it back in the barnyard example:||Take The 箭 调用 And Put It Back In The barnyard Example:
Chapter 12, Objects with Data Add per-instance data, including constructors, getters, and setters.||Chapter 12, Objects With Data Add 每-例子 Data, Including 构造函数, getters, And setters.
Now, what if we want to know Gilligan's first provision?||Now, What If We Want To Know Gilligan's First 准备?
What if that string is really long?||What If That String Is Really Long?
It's the same process here, just written a bit differently.||It's The Same 程序 Here, Just Written a Bit 不同地.
$ref = undef; # not yet... $copy_of_ref = undef; # poof!||$Ref = Undef; # Not 仍然... $copy_of_ref = Undef; # poof!
# End of eval's q{ } string|| # End Of Eval's q{ } String
Even though we've closed STDOUT, the is( ) function can still access the original STDOUT, and thus the test harness sees the proper ok or not ok messages.||Even Though We'Ve 关闭的 STDOUT, The Is( ) Function Can Still Access The Original STDOUT, And 如此 The Test 支配 看到 The 合适的 Ok Or Not Ok Messages.
Stub documentation for Island::Plotting::Maps, created by h2xs.||Stub 提供文件 For Island::Plotting::Maps, Created By h2xs.
Exercise You can find the answer to this exercise in "Answer for Chapter 17" in the Appendix.||Exercise You Can 寻找 The Answer To This 锻炼 In "Answer For Chapter 17" In The Appendix.
He can put them in a separate file called navigation.pm, which consists only of the needed subroutines.||He Can Put Them In a Separate File Called navigation.pm, Which consists Only Of The Needed Subroutines.
However, since the Animal class might be doing things we aren't supposed to know about, we call its version of DESTROY using the SUPER:: pseudo-class we saw in Chapter 11.||However, Since The Animal Class Might Be Doing Things We 还't 应该 To Know About, We Call Its Version Of DESTROY Using The SUPER:: 伪-Class We 锯 In Chapter 11.
If we've installed the module, however, we'll get past the skip_all check and run all_pod_files_ok.||If We'Ve 安装 The Module, However, We'我 Get 过去的 The skip_all Check And Run all_pod_files_ok.
Otherwise, we can't refer to both temporary values for the outer map and the inner map.||Otherwise, We Can't Refer To Both temporary Values For The 外部的 Map And The Inner Map.
use Test::More tests => 6;||Use Test::More 测试 => 6;
Exercise 2 [25 min] Write a program that asks the user to enter a pattern (regular expression).||Exercise 2 [25 min] Write a Program That 问 The User To 进入 a 模式 (正则表达式).
If we find any items missing during the scan, we push them into @missing.||If We 寻找 Any 物品 Missing 在 The 浏览, We Push Them Into @Missing.
Luckily, Perl has several ways to help us out.||Luckily, Perl Has Several Ways To Help Us Out.
The test is given in the following line and attempts to use the module.||The Test Is Given In The Following Line And Attempts To Use The Module.
Exercise 1 [20 min] The program from Exercise 2 in Chapter 5 needs to read the entire datafile each time it runs.||Exercise 1 [20 min] The Program From Exercise 2 In Chapter 5 Needs To Read The 完全的 datafile Each Time It 跑.
Similarly, the Skipper's home directory might also contain a personal bin directory (at something like ~skipper/bin) that contains personal tools:||Similarly, The Skipper's 家 Directory Might Also Contain a 私人的 bin Directory (At Something Like ~skipper/bin) That 包含 私人的 Tools:
Why mention it here?||Why 提及 It Here?
There we have it.||There We Have It.
This lets us invoke Horse->speak to ripple upward to Animal::speak, calling back to Horse::sound to get the specific sound, and the output of:||This Lets Us 调用 Horse->说话 To 波纹 向上（的） To Animal::说话, Calling Back To Horse::声 To Get The 特殊的 声, And The 出产 Of:
$ perl test.pl not ok 1 # Failed test (test.pl at line 5) # got: 'Hello Perl' # expected: 'Hello perl' 1..1 # Looks like you failed 1 test of 1.||$ Perl test.pl Not Ok 1 # Failed Test (test.pl At Line 5) # Got: 'Hello Perl' # Expected: 'Hello Perl' 1..1 # Looks Like You failed 1 Test Of 1.
In this case, it'll be just ($tv_horse).||In This Case, It'我 Be Just ($tv_horse).
We don't have to worry about how it does its magic, but we can be confident that it does it correctly for most major platforms.||We Don't Have To 烦恼 About How It Does Its Magic, But We Can Be 确信的 That It Does It 正确地 For Most 主要的 Platforms.
We'll presume that you've already read Learning Perl, or at least pretend you have, and that you've played enough with Perl to already have those basics down.||We'我 假定 That You'Ve Already Read Learning Perl, Or At Least 假装 You Have, And That You'Ve played Enough With Perl To Already Have Those basics 向下.
Chapter 9, Practical Reference Tricks Sorting complex operations, the Schwartzian Transform, and working with recursively defined data.||Chapter 9, Practical Reference Tricks Sorting 综合的 操作, The Schwartzian Transform, And Working With Recursively Defined Data.
However, it's very important to have enough testing in place to ensure that you don't break things while you're moving them around.||However, It's Very Important To Have Enough testing In Place To Ensure That You Don't 打破 Things While You'Re moving Them Around.
Move that archive to another directory and unpack it.||Move That archive To 另一个 Directory And unpack It.
That part is noticed and processed as the program is parsed during the compile phase.||That Part Is Noticed And processed As The Program Is Parsed 在 The Compile 阶段.
Note that the phrase REUSED_ADDRESS indicates that some parts of the data are actually references we've already seen.||Note That The 词组 REUSED_ADDRESS 表明 That Some 部分 Of The Data Are Actually References We'Ve Already Seen.
The eval executes the code that the string represents and returns the last evaluated expression, which we assign it to $result.||The Eval 实行 The Code That The String Represents And Returns The Last 评估 Expression, Which We Assign It To $Result.
It should be a name that will never be used for any real machine, of course.||It Should Be a Name That Will Never Be Used For Any Real 机器, Of Course.
Have patience.||Have patie(绑定操作符)nce.
#!/usr/bin/perl -w use strict;||#!/usr/bin/Perl -w Use Strict;
# refers to the lexical variable|| # Refers To The Lexical Variable
In summary: use what you want, be consistent if you can, but document it nonetheless (and don't change it after you've already released one version).||In 概要: Use What You Want, Be 始终如一的 If You Can, But Document It nonetheless (And Don't Change It After You'Ve Already released One Version).
Then use the newly defined subroutines for the conversions:||Then Use The 新 Defined Subroutines For The 转换:
Hint: the following transformation might be useful:||Hint: The Following 转化 Might Be Useful:
The callback subroutine cannot take arguments, and the caller discards its result.||The callback Subroutine Cannot Take Arguments, And The Caller discards Its Result.
Note that Perl first destroys the barn, letting us get the name of the inhabitants cleanly.||Note That Perl First destroys The 谷仓, 让 Us Get The Name Of The inhabitants Cleanly.
Answer for Chapter 13 A.12.1.||Answer For Chapter 13 A.12.1.
do 'drop_anchor.pm'; die $@ if $@; ... drop_anchor( ) if at_dock( ) or in_port( );||Do 'drop_anchor.pm'; Die $@ If $@; ... drop_anchor( ) If at_dock( ) Or in_port( );
If you can't find one, start one!||If You Can't 寻找 One, Start One!
A hash holds a collection of scalars as values, keyed by other scalars.||A Hash holds a Collection Of Scalars As Values, keyed By Other Scalars.
This example prints consecutive numbers starting at 1 for the entries below bin, but then continues the numbering when we start entries in lib.||This Example Prints 连续的 编号 Starting At 1 For The Entries Below bin, But Then 继续 The numbering When We Start Entries In lib.
The return value from that subroutine is a reference to an anonymous subroutine that is also a closure because it accesses the $count variable.||The Return Value From That Subroutine Is a Reference To An Anonymous Subroutine That Is Also a Closure Because It Accesses The $计算 Variable.
If we want all of Gilligan's provisions, we say:||If We Want All Of Gilligan's provisions, We Say:
my @files = glob "/bin/*";||My @Files = Glob "/bin/*";
Directory Handle References In the same way that we can create references to filehandles, we can create directory handle references.||Directory Handle References In The Same Way That We Can Create References To Filehandles, We Can Create Directory Handle References.
Older modules preferred that notation in their examples, and once you write it that way, you tend to keep doing it that way.||Older Modules 优先 That 符号 In Their Examples, And Once You Write It That Way, You 趋向 To 保持 Doing It That Way.
Perl has many other operators that work with lists, and, once you get used to them, you'll find yourself typing less and expressing your intent more clearly.||Perl Has Many Other Operators That Work With Lists, And, Once You Get Used To Them, You'我 寻找 你（们）自己 打字 更少的 And expressing Your 意图 More 清晰地.
It's a bit silly to invent a subroutine name to use the name only once, so we can write the previous code using an anonymous subroutine, such as:||It's a Bit 糊涂的 To 发明 a Subroutine Name To Use The Name Only Once, So We Can Write The Previous Code Using An Anonymous Subroutine, Such As:
my( $n, $m ); # let's use an uninitialized value my $sum = $n + $m;||My( $n, $m ); # Let's Use An 未初始化的 Value My $总数 = $n + $m;
Also, it keeps a second running total, filed under $all.||Also, It 保持 a Second 连续的 总, filed 在 $All.
Can't locate Navigation/SeatofPants.pm in @INC (@INC contains: ...)||Can't Locate Navigation/SeatofPants.pm In @INC (@INC 包含: ...)
my $skipper_bin = {||My $skipper_bin = {
Passing the array by reference fixes the first of the two problems we mentioned earlier.||Passing The Array By Reference fixes The First Of The Two 问题 We Mentioned Earlier.
We had to use $person here to hold the outer $_ temporarily.||We Had To Use $人 Here To Hold The 外部的 $_ temporarily.
[Trigger has gone off to the glue factory.]||[Trigger Has 不见了 Off To The 胶水n 工厂.]
We even throw in a test where we pass it a non-number and a number, then a test where we pass it two non-numbers.||We Even 投 In a Test Where We Pass It a Non-Number And a Number, Then a Test Where We Pass It Two Non-编号.
The key to the hash can be the stringified form of the animal reference, [] while the value can be the actual reference, allowing us to access its name or class.||The Key To The Hash Can Be The stringified Form Of The 动物 Reference, [] While The Value Can Be The Actual Reference, 允许 Us To Access Its Name Or Class.
Any string that begins with 3 sorts before any string that begins with 4.||Any String That begins With 3 各样 Before Any String That begins With 4.
As before, we can now avoid the temporary variables and insert the values directly into the top-level list:||As Before, We Can Now Avoid The temporary Variables And 插入 The Values 直接地 Into The 顶-Level List:
After we finish running the program, Devel::Cover leaves behind a file with all of the information it collected.||After We 结束 连续的 The Program, Devel::Cover 叶子 在 a File With All Of The Information It collected.
We can get to Gilligan's name via any one of:||We Can Get To Gilligan's Name Via Any One Of:
Go back and read the footnotes now.||Go Back And Read The footnotes Now.
Starting with the list of names again (keys %provisions), we pull up all the packed items first and then use that list in an inner grep to count the number of those items that equal water_bottle.||Starting With The List Of Names Again (Keys %provisions), We 拖 Up All The packed 物品 First And Then Use That List In An Inner Grep To 计算 The Number Of Those 物品 That Equal water_bottle.
You've probably already seen a lot of code that uses these bareword filehandles . ''''''''''''''''''''''''''''''''' open LOG_FH, '>> castaways.log'||You'Ve Probably Already Seen a 许多 Of Code That Uses These Bareword Filehandles . ''''''''''''''''''''''''''''''''' Open LOG_FH, '>> castaways.log'
$ perl -Mlib=/home/ginger/Testing/lib/site_perl myproggy||$ Perl -Mlib=/家/姜/Testing/lib/site_perl myproggy
If you write the code and not just the tests, think about how to get every line of your code exercised at least once for full code coverage.||If You Write The Code And Not Just The 测试, 想 About How To Get Every Line Of Your Code exercised At Least Once For Full Code 覆盖率.
Using the map and grep Operators As the data structures become more complex, it helps to have higher-level constructs deal with common tasks such as selection and transformation.||Using The Map And Grep Operators As The Data Structures 变成 More 综合的, It 帮助 To Have 更高的-Level Constructs 处理 With Common Tasks Such As 选择 And 转化.
$count retains its value between calls to count_one( ) or count_so_far( ), but no other section of code can access this $count at all.||$计算 retains Its Value Between Calls To count_one( ) Or count_so_far( ), But No Other Section Of Code Can Access This $计算 At All.
$ PERL5LIB=/home/ginger/Testing/lib/site_perl; export PERL5LIB $ ./myproggy||$ PERL5LIB=/家/姜/Testing/lib/site_perl; Export PERL5LIB $ ./myproggy
# override the default color|| # Override The Default 颜色
The following invocations would then be valid:||The Following invocations Would Then Be Valid:
[Billy Boy has gone off to the glue factory.]||[Billy Boy Has 不见了 Off To The 胶水n 工厂.]
That's because it "just works" for the simplest case where we have a program and its libraries in the same directory and we run the program from that directory.||That's Because It "Just Works" For The simplest Case Where We Have a Program And Its 库 In The Same Directory And We Run The Program From That Directory.
Now, in addition to searching the standard directories and the current directory, Perl searches the Skipper's personal Perl library.||Now, In 增加 To 搜索 The Standard directories And The Current Directory, Perl searches The Skipper's 私人的 Perl Library.
sub Cow::speak {||Sub Cow::说话 {
After installing this module (if needed), [*] we can update the constructor as follows:||After installing This Module (If Needed), [*] We Can Update The 构造函数 As Follows:
In the destructor, we close it down and delete the file:[*]||In The destructor, We Close It 向下 And Delete The File:[*]
How do we call the existing check_required_items( ) with this data structure?||How Do We Call The 现存的 check_required_items( ) With This Data Structure?
The idea took about a year to ferment, and Jarkko Hietaniemi established the Finnish FTP site as the CPAN mothership from which all other mirrors could draw their daily or hourly updates.||The 思想 took About a 年 To ferment, And Jarkko Hietaniemi 已建立的 The Finnish FTP 场所 As The Perl综合典藏网 mothership From Which All Other mirrors Could 画 Their 每日的 Or hourly 更新.
Perl reads the code from navigation.pm into the $more_code variable.||Perl Reads The Code From navigation.pm Into The $more_code Variable.
When you create tests, think like a person using a module, not like one writing a module.||When You Create 测试, 想 Like a 人 Using a Module, Not Like One 写作 a Module.
Exporting in a Primarily OO Module As seen earlier, the normal means of using an object-oriented module is to call class methods and then methods against instances resulting from constructors of that class.||Exporting In a Primarily OO Module As Seen Earlier, The Normal Means Of Using An Object-Oriented Module Is To Call Class Methods And Then Methods 反对 实例 造成 From 构造函数 Of That Class.
[Mr. Ed has died.]||[Mr. Ed Has died.]
An important aspect of working in teams is having a release cycle and tests for unit and integration testing .||An Important 容貌 Of Working In teams Is Having a Release 周期 And 测试 For 单位 And 结合 testing .
print map { " $_\n" } grep { -s < 1000 } @ARGV;||Print Map { " $_\n" } Grep { -s < 1000 } @命令行传入参数;
10.5. require and @INC So far, the examples have glossed over how we've set up the directory structure of where the main code and the included files are located.||10.5. Require And @INC So Far, The Examples Have glossed 在 How We'Ve Set Up The Directory Structure Of Where The Main Code And The 包括 Files Are Located.
More easily, we can skip the step of building the intermediate array by simply returning the items of interest with a map:||More 容易地, We Can 跳过 The 脚步 Of 建筑物 The 中间的 Array By Simply Returning The 物品 Of 兴趣 With a Map:
Each element is an array reference, pointing to an anonymous two-element array.||Each Element Is An Array Reference, 指向 To An Anonymous Two-Element Array.
However, because we pass RaceHorse as the class, it is blessed into the RaceHorse class.[*] Next, we add the four instance variables that go beyond those defined in the superclass, setting their initial values to 0.||However, Because We Pass RaceHorse As The Class, It Is 有福的 Into The RaceHorse Class.[*] Next, We 增添 The 四 例子 Variables That Go Beyond Those Defined In The 基类, Setting Their Initial Values To 0.
to just:||To Just:
We still don't know, for a given name in the original list, which position it occupies in the output list.||We Still Don't Know, For a Given Name In The Original List, Which Position It occupies In The 出产 List.
If the code were simply @{shift}, because the curly braces contain nothing but a bareword, it would be interpreted as a soft reference: @{"shift"}.||If The Code Were Simply @{Shift}, Because The 卷曲的 牙套 Contain Nothing But a Bareword, It Would Be 解释 As a 柔软的 Reference: @{"Shift"}.
my $log_message = "The Minnow is taking on water!\n" print $log_fh $log_message; print $scalar_fh $log_message;||My $log_message = "The Minnow Is Taking On 水!\n" Print $log_fh $log_message; Print $scalar_fh $log_message;
push @data2, \@data1; push @data1, \@data2;||Push @data2, \@data1; Push @data1, \@data2;
Getters That Double as Setters Another alternative to the pattern of creating two different methods for getting and setting a parameter is to create one method that notes whether or not it gets any additional arguments.||Getters That Double As Setters Another 两者取一 To The 模式 Of Creating Two Different Methods For 得到 And Setting a Parameter Is To Create One Method That 备忘 Whether Or Not It Gets Any Additional Arguments.
use Navigate::SeatOfPants qw(:direction);||Use Navigate::SeatOfPants Qw(:方向);
That's not much if it's simply a debugging statement, as we've shown, but if it was the "delete the temporary file" cleanup method, you wouldn't have deleted that file!||That's Not Much If It's Simply a Debugging Statement, As We'Ve shown, But If It Was The "Delete The temporary File" 清理 Method, You Wouldn't Have Deleted That File!
Its interface uses the inline block form exclusively.||Its Interface Uses The inline Block Form 独占地.
Exercise 1 [25 min] Read the list of files in the current directory and convert the names to their full path specification.||Exercise 1 [25 min] Read The List Of Files In The Current Directory And Convert The Names To Their Full Path 规格.
Also, we may wish to reserve unimport because Perl will call that routine when we replace use with no.||Also, We May Wish To 贮备 unimport Because Perl Will Call That Routine When We 归还原处 Use With No.
This equality compares the numeric forms of the two references.||This 平等 compares The 数值 形式 Of The Two References.
Similarly, you have the subroutine for the month-of-year number to name:||Similarly, You Have The Subroutine For The 月份-Of-年 Number To Name:
Doing it manually allows us to do extra processing, such as storing a summary of the information from the temporary file into a database.||Doing It manually Allows Us To Do Extra 加工（的）, Such As storing a 概要 Of The Information From The temporary File Into a database.
my @gilligan = (||My @gilligan = (
There may be comment lines (beginning with a pound sign); be sure to skip them.||There May Be Comment Lines (开端 With a 英镑 Sign); Be Sure To 跳过 Them.
Note that dumping $total_bytes{$source} shows that it was a hash reference.||Note That 倾销 $total_bytes{$Source} Shows That It Was a Hash Reference.
Now there are two items for each input item: 1, 3, 2, 6, 4, 12, 8, 24, 16, 48, 32, 96, 64, and 192.||Now There Are Two 物品 For Each Input 条款: 1, 3, 2, 6, 4, 12, 8, 24, 16, 48, 32, 96, 64, And 192.
Chapter 7, Subroutine References Capture behavior as an anonymous subroutine that you create dynamically and execute later.||Chapter 7, Subroutine References Capture Behavior As An Anonymous Subroutine That You Create Dynamically And Execute 更晚.
Because a hash reference fits wherever a scalar fits, we can create an array of hash references:||Because a Hash Reference fits 无论哪里 a Scalar fits, We Can Create An Array Of Hash References:
sub add_letters { "Skipper" + "Gilligan" }||Sub add_letters { "Skipper" + "Gilligan" }
Test the module, install it locally, and then build a distribution file.||Test The Module, 安装 It Locally, And Then Build a 分配 File.
Exercise 1 [20 min] Document the My::List::Util module you created in the exercise for Chapter 17.||Exercise 1 [20 min] Document The My::List::Util Module You Created In The 锻炼 For Chapter 17.
# set colors to remaining parameters } sub get_color_rgb {|| # Set colors To Remaining Parameters } Sub get_color_rgb {
sub get_provisions_list {||Sub get_provisions_list {
The $_[0] is just the single element access to the @_ array.||The $_[0] Is Just The Single Element Access To The @_ Array.
Once you have all of the code in place, run the Makefile.PL, which you'll need to do every time you change that file.||Once You Have All Of The Code In Place, Run The Makefile.PL, Which You'我 Need To Do Every Time You Change That File.
The base cases in this recursive algorithm are the files and symbolic links.||The Base Cases In This 递归 算法 Are The Files And Symbolic 链接.
We might have to install several other modules too, each of which, in turn, depends on even more modules.||We Might Have To 安装 Several Other Modules Too, Each Of Which, In 转向, Depends On Even More Modules.
(Are you testing the else clause?||(Are You testing The Else 条款?
So @skipper_with_name is only two elements long, just as before.||So @skipper_with_name Is Only Two Elements Long, Just As Before.
Sometimes we find both Makefile.PL and Build.PL in a distribution.||Sometimes We 寻找 Both Makefile.PL And Build.PL In a 分配.
A reference fits wherever a scalar fits.||A Reference fits 无论哪里 a Scalar fits.
[] And, we'll find that the tests not only check the code, but they create the specification in code form.||[] And, We'我 寻找 That The 测试 Not Only Check The Code, But They Create The 规格 In Code Form.
Perl even supports nested eval blocks.||Perl Even Supports 嵌套的 Eval Blocks.
This makes the script more portable.||This 使 The 临时单据 More 手提的.
By default, Test::Harness runs those tests in the same order we just described.||By Default, Test::Harness 跑 Those 测试 In The Same Order We Just Described.
These include things such as an uncaught signal, running out of memory, and other catastrophes. eval doesn't catch syntax errors, either; because Perl compiles the eval block with the rest of the code, it catches syntax errors at compile time, not at runtime.||These Include Things Such As An uncaught 信号, 连续的 Out Of Memory, And Other catastrophes. Eval Doesn't Catch Syntax Errors, Either; Because Perl compiles The Eval Block With The 休息 Of The Code, It catches Syntax Errors At Compile Time, Not At Runtime.
The value in $ginger is a coderef, just as if we had defined the following block as a subroutine and then taken a reference to it.||The Value In $姜 Is a coderef, Just As If We Had Defined The Following Block As a Subroutine And Then Taken a Reference To It.
That's great for making horses identical, but how do we capture the properties of an individual horse?||That's 大的 For 制作 horses 同一的, But How Do We 俘获 The propertie(绑定操作符)s Of An Individual 马?
Normally we want to ensure that this happens before anything else, so we can wrap it in a BEGIN block.||Normally We Want To Ensure That This Happens Before Anything Else, So We Can 包 It In a BEGIN Block.
use Test::More 'no_plan'; use Test::MockObject;||Use Test::More 'no_plan'; Use Test::MockObject;
# this method call is not in void context, so|| # This Method Call Is Not In Void Context, So
[*] You don't need the ampersand in front of any of these subroutine invocations, because the subroutine name is already known to the compiler following use.||[*] You Don't Need The ampersand In Front Of Any Of These Subroutine invocations, Because The Subroutine Name Is Already Known To The Compiler Following Use.
find(||寻找(
[] For each IO::Dir method name, append "dir" and look at the documentation in perlfunc.||[] For Each IO::Dir Method Name, append "dir" And Look At The 提供文件 In perlfunc.
